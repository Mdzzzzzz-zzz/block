System.register("chunks:///_virtual/ABTestDefine.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"0f83aWUPL9EwZ5t9fALSbVJ","ABTestDefine",void 0);e("ABEventKey",{expt_registration:"expt_registration"}),e("ABTestParam",{Diffcult:"expt_1717048840"});t._RF.pop()}}}));

System.register("chunks:///_virtual/ABTestManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Singleton.ts"],(function(t){var n,r,o;return{setters:[function(t){n=t.inheritsLoose},function(t){r=t.cclegacy},function(t){o=t.Singleton}],execute:function(){r._RF.push({},"14cacVnMVBCCbJY8qiSBNhx","ABTestManager",void 0);t("ABTestManager",function(t){function r(){for(var n,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=t.call.apply(t,[this].concat(o))||this).group=void 0,n}n(r,t);var o=r.prototype;return o.Init=function(){this.group={}},o.UnInit=function(){this.group={}},o.getGroup=function(t){return this.group&&this.group[t]||0},o.setGroup=function(t,n){return this.group||(this.group={}),this.group[t]=n,this},r}(o));r._RF.pop()}}}));

System.register("chunks:///_virtual/AccountBase.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SdkBase.ts","./SdkConfig.ts","./SdkError.ts"],(function(n){var o,t,e,c,r;return{setters:[function(n){o=n.inheritsLoose},function(n){t=n.cclegacy},function(n){e=n.SdkBase},function(n){c=n.UserInfo},function(n){r=n.emSdkErrorCode}],execute:function(){t._RF.push({},"28798uR8HhEdJOqpedDKNF0","AccountBase",void 0);var u=n("emUserInfoState",function(n){return n[n.None=0]="None",n[n.Auth=1]="Auth",n[n.Refuse=2]="Refuse",n[n.UnSet=3]="UnSet",n}({}));n("AcccountBase",function(n){function t(){for(var o,t=arguments.length,e=new Array(t),c=0;c<t;c++)e[c]=arguments[c];return(o=n.call.apply(n,[this].concat(e))||this).tag="account",o.userInfoButton=void 0,o}o(t,n);var e=t.prototype;return e.checkUserInfoScopeState=function(){return new Promise((function(n,o){n(u.Auth)}))},e.getUserInfo=function(n){return new Promise((function(n,o){n({})}))},e.createUserInfoButton=function(n){return null},e.onLoginSnsPlatorm=function(){},e.ReqIpLocInfo=function(n){var o=this;return void 0===n&&(n=1),new Promise((function(t,e){o.http.get("https://iploc.ywdier.com/api/iploc5/search/city").then((function(e){var r=e;r&&r.loc&&r.ip&&(c.ip=r.ip,c.ipLocInfo=r,o.logger.log("ReqIpLocInfo success:"+n,e),t(e))})).catch((function(c){n>0?(n-=1,o.ReqIpLocInfo(n).then(t).catch(e)):(o.logger.log("ReqIpLocInfo Fail",c),e({errMsg:r.Req_pf_PLocInfoFail,errData:c}))}))}))},t}(e));t._RF.pop()}}}));

System.register("chunks:///_virtual/ad_node.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CrossAdConfig.ts","./SdkEventManager.ts","./SdkEventType.ts","./CrossAdRewardData.ts"],(function(t){var e,a,i,n,r,o,s,l,d,u,c,h,p,f,b,g;return{setters:[function(t){e=t.applyDecoratedDescriptor,a=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){r=t.cclegacy,o=t._decorator,s=t.Sprite,l=t.Label,d=t.Node,u=t.SpriteAtlas,c=t.JsonAsset,h=t.Component},function(t){p=t.emCrossAdPath},function(t){f=t.SdkEventManager},function(t){b=t.SdkEventType},function(t){g=t.CrossAdRewardData}],execute:function(){var w,m,v,S,_,y,A,R,C,L,D,E,T,I,N;r._RF.push({},"f3c4dPpXudPqquBmXuNb+41","ad_node",void 0);var P=o.ccclass,z=o.property;t("ad_node",(w=P("ad_node"),m=z(s),v=z(l),S=z(d),_=z(l),y=z(u),A=z(c),w((L=e((C=function(t){function e(){for(var e,a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return e=t.call.apply(t,[this].concat(r))||this,i(e,"icon",L,n(e)),i(e,"nameLabel",D,n(e)),i(e,"rewardRoot",E,n(e)),i(e,"rewardLabel",T,n(e)),i(e,"adSpriteAtlas",I,n(e)),i(e,"ad_boxConfig",N,n(e)),e.data=void 0,e.showPath=void 0,e.adType=void 0,e}a(e,t);var r=e.prototype;return r.onLoad=function(){f.getInstance().register(b.CROSS_AD_REWARD_STATE_CHANGE,this.onRewardStateChange,this),this.SetData()},r.onRewardStateChange=function(t){t.appid==this.data.toappid&&(this.flushIcon(),this.flushName())},r.SetData=function(t,e,a){var i=this.ad_boxConfig.json;null!=this.node.parent&&(this.data=i[this.node.getSiblingIndex()]),this.showPath=p.List,this.adType=1,this.flushIcon(),this.flushName()},r.flushIcon=function(){var t=this.data.toappid;this.icon.spriteFrame=this.adSpriteAtlas.getSpriteFrame(t)},r.flushName=function(){g.inst.isCanGetReward(this.data)?(this.nameLabel.node.active=!1,this.rewardRoot.active=!0,this.rewardLabel.node.active=!0,this.rewardLabel.string="+"+this.data.reward_value):(this.rewardRoot.active=!1,this.rewardLabel.node.active=!1,this.nameLabel.node.active=!0,this.nameLabel.string=this.data.appName)},r.gotoMiniProgram=function(){f.getInstance().emit(b.GO_TO_MINIGAME,this.data,this.showPath,this.adType)},r.onDestroy=function(){f.getInstance().unregister(b.CROSS_AD_REWARD_STATE_CHANGE,this.onRewardStateChange,this)},e}(h)).prototype,"icon",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=e(C.prototype,"nameLabel",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(C.prototype,"rewardRoot",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=e(C.prototype,"rewardLabel",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=e(C.prototype,"adSpriteAtlas",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=e(C.prototype,"ad_boxConfig",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=C))||R));r._RF.pop()}}}));

System.register("chunks:///_virtual/AdBase.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SdkBase.ts","./SdkConfig.ts","./AdDef.ts"],(function(n){var t,e,i,o;return{setters:[function(n){t=n.inheritsLoose},function(n){e=n.cclegacy},function(n){i=n.SdkBase},function(n){o=n.AdConfigInfo},function(t){n("emAdPlacement",t.emAdPlacement)}],execute:function(){e._RF.push({},"86c4dtTU3pAFrqOjSyz517L","AdBase",void 0);n("AdBase",function(n){function e(){for(var t,e=arguments.length,i=new Array(e),o=0;o<e;o++)i[o]=arguments[o];return(t=n.call.apply(n,[this].concat(i))||this).bannerAd=void 0,t.isShowingBanner=void 0,t.rewardedVideoAd=null,t.isPlayVideoAd=!1,t.interstitialAd=null,t.customAd=void 0,t}t(e,n);var i=e.prototype;return i.Init=function(){},i.UnInit=function(){},i.isCanUseBannerAd=function(){return""!=o.bannerUnitId},i.isCanUseRewardedViedeoAd=function(){return""!=o.rewardUnitId},i.isCanUseInterstitialAd=function(){return""!=o.insertUnitId},i.isCanUseCustomAd=function(){return""!=o.customGridUnitId},i.loadBannerAd=function(n,t,e){return new Promise((function(n,t){n()}))},i.showBannerAd=function(n,t){return new Promise((function(n,t){n()}))},i.loadRewardedVideoAd=function(n,t){return new Promise((function(n,t){n()}))},i.showRewardedVideoAd=function(n,t){return new Promise((function(n,t){n()}))},i.loadInterstitialAd=function(n,t){return new Promise((function(n,t){n()}))},i.showInterstitialAd=function(n){return new Promise((function(n,t){n()}))},i.loadCustomAd=function(n,t){return new Promise((function(n,t){n()}))},i.isCustomAdShow=function(){return!1},i.showCustomAd=function(n,t){return new Promise((function(n,t){n()}))},i.hasRewardedVideo=function(){return new Promise((function(n,t){n(!0)}))},i.hasInterstitial=function(){return new Promise((function(n,t){n(!0)}))},i.destroy=function(){},i.setDynamicUserId=function(n){},e}(i));e._RF.pop()}}}));

System.register("chunks:///_virtual/AdDef.ts",["cc"],(function(e){var T;return{setters:[function(e){T=e.cclegacy}],execute:function(){T._RF.push({},"17bd8igXPBJnY7rYHACGszn","AdDef",void 0);e("AD_SIZE",{BANNER:"banner",LARGE:"large",RECTANGLE:"rectangle",SMART:"smart"}),e("AD_POSITION",{NO_CHANGE:0,TOP_LEFT:1,TOP_CENTER:2,TOP_RIGHT:3,LEFT:4,CENTER:5,RIGHT:6,BOTTOM_LEFT:7,BOTTOM_CENTER:8,BOTTOM_RIGHT:9,POS_XY:10}),e("emVideoState",function(e){return e[e.None=0]="None",e[e.Load=1]="Load",e[e.ShowSuccess=2]="ShowSuccess",e[e.Close=3]="Close",e[e.SeeFinish=4]="SeeFinish",e[e.NoAd=5]="NoAd",e}({})),e("emAdPlacement",function(e){return e[e.TOP=0]="TOP",e[e.MIDDLE=1]="MIDDLE",e[e.BOTTOM=2]="BOTTOM",e}({}));T._RF.pop()}}}));

System.register("chunks:///_virtual/AddScoreLabel.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var o,t,n,r,a,c,l,i,s,d,u,p;return{setters:[function(e){o=e.applyDecoratedDescriptor,t=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){a=e.cclegacy,c=e._decorator,l=e.Label,i=e.tween,s=e.v3,d=e.Vec3,u=e.Tween,p=e.Component}],execute:function(){var b,h,f,L,v;a._RF.push({},"798be8kSXdEXZe6A/ncv3Fz","AddScoreLabel",void 0);var y=c.ccclass,g=c.property;e("AddScoreLabel",(b=y("AddScoreLabel"),h=g(l),b((v=o((L=function(e){function o(){for(var o,t=arguments.length,a=new Array(t),c=0;c<t;c++)a[c]=arguments[c];return o=e.call.apply(e,[this].concat(a))||this,n(o,"addscoreLabel",v,r(o)),o.willdealnode=null,o.score=0,o}t(o,e);var a=o.prototype;return a.onLoad=function(){},a.setScore=function(e){this.score=e,this.addscoreLabel.string="+"+e.toString()},a.show=function(e,o,t){var n=this;void 0===o&&(o=null),this.addscoreLabel.node.active=!0,e&&(this.node.scale=e),this.addscoreLabel.node.setPosition(0,0,0);var r=i().to(.1,{scale:s(1.2,1.2,1)}).to(.1,{scale:s(1.6,1.6,1)}).to(.1,{scale:s(1.4,1.4,1)}).delay(.3).to(.1,{scale:new d(1,1,1)}),a=i().call((function(){u.stopAllByTarget(n.addscoreLabel.node),null==o||o(n.node)}));i(this.node).sequence(r,a).start()},o}(p)).prototype,"addscoreLabel",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=L))||f));a._RF.pop()}}}));

System.register("chunks:///_virtual/ads_blink.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ad_node.ts","./CrossAdConfig.ts"],(function(i){var n,t,e,a,d,s,o,l,r,h,c,p,u,f,b,k,v;return{setters:[function(i){n=i.applyDecoratedDescriptor,t=i.inheritsLoose,e=i.initializerDefineProperty,a=i.assertThisInitialized},function(i){d=i.cclegacy,s=i._decorator,o=i.Prefab,l=i.instantiate,r=i.UITransform,h=i.v2,c=i.v3,p=i.tween,u=i.Tween,f=i.Vec3,b=i.Component},function(i){k=i.ad_node},function(i){v=i.emCrossAdPath}],execute:function(){var _,x,g,y,w;d._RF.push({},"00e03DbbTNLfp9KGeqXQzZG","ads_blink",void 0);var m=s.ccclass,A=s.property;i("ads_blink",(_=m("ads_blink"),x=A(o),_((w=n((y=function(i){function n(){for(var n,t=arguments.length,d=new Array(t),s=0;s<t;s++)d[s]=arguments[s];return n=i.call.apply(i,[this].concat(d))||this,e(n,"adnode",w,a(n)),n.TAG="[cross_ad/ads_blink.js]",n.data=void 0,n.alladnode=void 0,n.blinkindex=void 0,n.preblinkindex=void 0,n.blink_display=void 0,n.showPath=void 0,n}t(n,i);var d=n.prototype;return d.setData=function(i,n){this.data=i,this.showPath=n,this.initUI()},d.initUI=function(){this.alladnode=[];for(var i=0;i<this.data.ads_data.length;i++){var n=this.data.ads_data[i],t=l(this.adnode);t.getComponent(k).SetData(n,v.Blink,3);var e=this.node.getComponent(r),a=h(e.width/2,e.height/2);t.position=c(a.x,a.y,0),t.active=!1,this.node.addChild(t),this.alladnode.push(t)}this.blinkindex=this.getBlinkIndex(),this.effectAni(this.alladnode[this.blinkindex]),this.blink_display=this.data.blink_display,this.blink()},d.blink=function(){var i=this;p(this.node).delay(this.data.blink_display).call((function(){i.alladnode[i.blinkindex].active=!1,i.blinkindex=i.getBlinkIndex(),i.alladnode[i.blinkindex].active=!0,i.effectAni(i.alladnode[i.blinkindex])})).union().repeatForever().start()},d.effectAni=function(i){this.preblinkindex!=this.blinkindex&&(i&&(u.stopAllByTarget(i),p(i).to(.5,{scale:new f(1,1.1,1)}).to(.5,{scale:new f(.8,1,1)}).union().repeatForever().start(),this.preblinkindex=this.blinkindex))},d.getBlinkIndex=function(){for(var i=100*Math.random(),n=0,t=0;t<this.data.ads_qz.length;t++){if(!(t<=this.data.ads_qz.length-2))return t;if(i<(n+=this.data.ads_qz[t]))return t}},n}(b)).prototype,"adnode",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=y))||g));d._RF.pop()}}}));

System.register("chunks:///_virtual/ads_exchange.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SdkEventManager.ts","./SdkEventType.ts","./CrossAdConfig.ts","./CrossAdRewardData.ts"],(function(t){var e,n,a,r,s,i,o,c,u,l,d,h;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,a=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){s=t.cclegacy,i=t._decorator,o=t.Label,c=t.Component},function(t){u=t.SdkEventManager},function(t){l=t.SdkEventType},function(t){d=t.CrossRewardConfig},function(t){h=t.CrossAdRewardData}],execute:function(){var g,f,p,S,_;s._RF.push({},"c3ccfRe3z5HXJ0JVhLA76s4","ads_exchange",void 0);var R=i.ccclass,v=i.property;t("ads_exchange",(g=R("ads_exchange"),f=v(o),g((_=e((S=function(t){function e(){for(var e,n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return e=t.call.apply(t,[this].concat(s))||this,a(e,"labState",_,r(e)),e}n(e,t);var s=e.prototype;return s.start=function(){this.onEvtRewardStateChange(null),u.getInstance().register(l.CROSS_AD_REWARD_STATE_CHANGE,this.onEvtRewardStateChange,this)},s.onEvtRewardStateChange=function(t){this.labState&&(this.labState.string=h.inst.rewardValue+"/"+d.exchange_consume)},s.onDestroy=function(){u.getInstance().unregister(l.CROSS_AD_REWARD_STATE_CHANGE,this.onEvtRewardStateChange,this)},e}(c)).prototype,"labState",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=S))||p));s._RF.pop()}}}));

System.register("chunks:///_virtual/ads_list.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ad_node.ts","./MK.ts","./Boot.ts"],(function(t){var i,o,e,n,a,s,r,d,h,l,c,u,p,f,w,g;return{setters:[function(t){i=t.applyDecoratedDescriptor,o=t.inheritsLoose,e=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){a=t.cclegacy,s=t._decorator,r=t.Prefab,d=t.Node,h=t.Vec3,l=t.UITransform,c=t.instantiate,u=t.game,p=t.tween,f=t.Component},function(t){w=t.ad_node},null,function(t){g=t.audio}],execute:function(){var b,v,m,y,_,N,P,C,S,z,A,L,k,D,H;a._RF.push({},"e16a6WgolhPMavWrq1/HWy8","ads_list",void 0);var B=s.ccclass,M=s.property;t("ads_list",(b=B("ads_list"),v=M(r),m=M(d),y=M(d),_=M(d),N=M(h),P=M(d),b((z=i((S=function(t){function i(){for(var i,o=arguments.length,a=new Array(o),s=0;s<o;s++)a[s]=arguments[s];return(i=t.call.apply(t,[this].concat(a))||this).node_path="prefabs/ads_node",i.TAG="[game/cross_ad/ads_node.js]",e(i,"adnode",z,n(i)),e(i,"contentnode",A,n(i)),e(i,"background",L,n(i)),e(i,"scrollNode",k,n(i)),i.data=void 0,e(i,"hidePos",D,n(i)),e(i,"arrowNode",H,n(i)),i.state=0,i.showing=void 0,i.hiding=void 0,i.hasShow=void 0,i.showPath=void 0,i}o(i,t);var a=i.prototype;return a.setData=function(t,i){this.data=t,this.showPath=i},a.showOrHide=function(){0==this.state?this.show():this.hide()},a.hide=function(){this.showing||(this.state=0)},a.show=function(){this.hiding||(this.state=1)},a.initUI=function(){this.node.position=this.hidePos;var t=new d,i=t.addComponent(l);i.width=560,i.height=140,this.contentnode.addChild(t);for(var o=0,e=1,n=0;n<this.data.ads_data.length;n++){(n+1)%3==1&&((i=(t=new d).addComponent(l)).width=460,i.height=140,i.anchorX=0,i.anchorY=0,o=0,e++,this.contentnode.addChild(t)),t.setPosition(0,-140*(e-2)-10,0);var a=this.data.ads_data[n],s=c(this.adnode);s.getComponent(w).SetData(a,this.showPath,1),s.setPosition(140+140*o-260,-90,0),t.addChild(s),o++}},a.onload=function(){var t=this.node.getComponent(l);t.width=u.canvas.width,t.height=u.canvas.height,this.scrollNode.position=new h(-this.scrollNode.getComponent(l).width),this.background.active=!1,this.state=0,this.scrollNode.position=new h(-Math.abs(this.scrollNode.getComponent(l).width+360)),this.node.position=this.hidePos},a.OnShowBtnClick=function(){g.playBtnEffect(),this.hasShow?(this.HideAdList(),this.hasShow=!1):(this.ShowAdList(),this.hasShow=!0)},a.ShowAdList=function(){var t=this;p(this.node).call((function(){t.scrollNode.active=!0})).to(.3,{position:h.ZERO}).call((function(){t.arrowNode.scale=h.ONE})).start()},a.HideAdList=function(){var t=this;p(this.node).to(.3,{position:this.hidePos}).call((function(){t.scrollNode.active=!1,t.arrowNode.scale=new h(-1,1,1)})).start()},i}(f)).prototype,"adnode",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=i(S.prototype,"contentnode",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=i(S.prototype,"background",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=i(S.prototype,"scrollNode",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=i(S.prototype,"hidePos",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new h(-440,0,0)}}),H=i(S.prototype,"arrowNode",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=S))||C));a._RF.pop()}}}));

System.register("chunks:///_virtual/ads_manager.ts",["cc","./SdkEventType.ts","./ads_node.ts","./ads_list.ts","./ads_blink.ts","./CrossAdConfig.ts","./ResManager.ts","./SdkEventManager.ts"],(function(a){var n,e,t,s,d,o,r,i,c,l,u;return{setters:[function(a){n=a.cclegacy,e=a._decorator,t=a.instantiate,s=a.Vec3},function(a){d=a.SdkEventType},function(a){o=a.ads_node},function(a){r=a.ads_list},function(a){i=a.ads_blink},function(a){c=a.emCrossAdPath},function(a){l=a.ResManager},function(a){u=a.SdkEventManager}],execute:function(){var _,p;n._RF.push({},"a7a7f+62ddOcZVxX/mryE43","ads_manager",void 0);var g=e.ccclass,f=(e.property,"[cross_ad/ads_manager.js]"),v="resources";a("ads_manager",g("ads_manager")(((p=function(){function a(){}return a.getTypeRawData=function(n){if(a.ads_raw_data){for(var e=a.ads_raw_data,t=[],s=0;s<e.length;s++){var d=e[s];t.push(d.icon_weight)}return{type:n,blink_display:5,ads_data:e,ads_qz:t,ads_subtype:n}}return console.error(f,"没有设置交叉倒流数据"),null},a.addAdsNode=function(n,e,t,s){return a.parent=e,a.ads_type=n,a.pos=t,a.scene=s,a.loadAdNodeByType(n)},a.listenADManagerData=function(){console.log(f,"开始监听Admanager倒流数据回调"),u.getInstance().register(d.GET_ADMANAGER_ICON_INFO_SUCCESS,a.AdmanagerCall,a)},a.AdmanagerCall=function(){},a.setRawData=function(n){a.ads_raw_data=n,a.allevents=[]},a.loadAdNodeByType=function(n){return new Promise((function(e,d){if(a.ads_raw_data){var u=a.parent,_=a.pos,p=a.getTypeRawData(n);if(null==p)return console.error(f,"没有交叉倒流的数据2"),void d(null);"banner"==p.ads_subtype?l.getInstance().loadAsset("ads/ads_node",v).then((function(a){var n=t(a);n.getComponent(o).setData(p,c.Banner,2),n.position=_,u.addChild(n),e(n)})):"list"==p.ads_subtype?l.getInstance().loadAsset("ads/ads_list",v).then((function(a){var n=t(a);n.getComponent(r).setData(p,c.List),n.position=s.ZERO,u.addChild(n),e(n)})):"blink"==p.ads_subtype&&l.getInstance().loadAsset("ads/ads_blink",v).then((function(a){var n=t(a);n.getComponent(i).setData(p,c.Blink),n.position=_,u.addChild(n),e(n)}))}else console.error(f,"没有交叉倒流的数据2"),d(null)}))},a}()).ads_raw_data=void 0,p.allevents=new Array,p.waitadd=void 0,p.parent=void 0,p.ads_type=void 0,p.scene=void 0,p.pos=void 0,_=p))||_);n._RF.pop()}}}));

System.register("chunks:///_virtual/ads_node.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ad_node.ts"],(function(t){var e,a,n,i,o,r,d,s,c,l,u,h,p;return{setters:[function(t){e=t.applyDecoratedDescriptor,a=t.inheritsLoose,n=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){o=t.cclegacy,r=t._decorator,d=t.Prefab,s=t.Node,c=t.instantiate,l=t.v2,u=t.v3,h=t.Component},function(t){p=t.ad_node}],execute:function(){var f,v,y,_,b,g,P;o._RF.push({},"58e344WdWlMN4jPyT3MNVmO","ads_node",void 0);var m=r.ccclass,w=r.property;t("ads_node",(f=m("ads_node"),v=w(d),y=w(s),f((g=e((b=function(t){function e(){for(var e,a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))||this).TAG="[cross_ad/ads_node.js]",n(e,"adnode",g,i(e)),n(e,"adContent",P,i(e)),e.data=void 0,e.showPath=void 0,e.adType=void 0,e}a(e,t);var o=e.prototype;return o.setData=function(t,e,a){this.data=t,this.showPath=e,this.adType=a,this.initUI()},o.initUI=function(){for(var t=0;t<this.data.ads_data.length;t++){var e=this.data.ads_data[t],a=c(this.adnode);a.getComponent(p).SetData(e,this.showPath,this.adType);var n=l(90+150*t-360,-120);a.position=u(n.x,n.y,0),this.adContent.addChild(a)}},e}(h)).prototype,"adnode",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=e(b.prototype,"adContent",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=b))||_));o._RF.pop()}}}));

System.register("chunks:///_virtual/AdSdk.ts",["./rollupPluginModLoBabelHelpers.js","cc","./FlagData.ts","./BIDefine.ts","./MK.ts","./SdkConfig.ts","./SdkManager.ts","./SdkError.ts","./sdk.ts"],(function(e){var n,i,t,a,o,s,r,d;return{setters:[function(e){n=e.createClass},function(e){i=e.cclegacy},function(e){t=e.FlagData},function(e){a=e.BIEventID},null,function(e){o=e.AdConfigInfo},function(e){s=e.SdkManager},function(e){r=e.emSdkErrorCode},function(e){d=e.SDK}],execute:function(){i._RF.push({},"770273wp7JHxba0p2+P6A/k","AdSdk",void 0);var c=window.JYSDK;e("AdAction",function(e){return e.PreLoadPull="pre_load_pull",e.PreLoadSuccess="pre_load_success",e.PreLoadFail="pre_load_fail",e.Pull="pull",e.LoadSuccess="load_success",e.LoadFail="load_fail",e.Show="show",e.PlayComplete="play_complete",e.Close="close",e.Click="click",e.Skip="skip",e.Hide="hide",e.LoadTimeOut="load_timeout",e.Error="error",e}({}));e("AdSdk",function(){function e(){this.mainPageAdType=1,this.bannerTimerId=0,this.customTimerId=0,this.popPageAdType=0}var i=e.prototype;return i.isRewardedVideoAvailable=function(){return new Promise((function(e,n){e(!0)}))},i.cacheRewardVideoAd=function(){c.preLoadRewardVideo({adUnitId:o.rewardUnitId})},i.showRewardVideoAd=function(e,n){var i=this;return new Promise((function(n,t){c.showRewardVideo(e,{adUnitId:o.rewardUnitId},(function(e,a){switch(e){case"show":console.log("显示激励成功, 不做任何处理");break;case"load_timeout":console.log("拉取超时,关闭加载进度条"),t({errMsg:r.Sdk_Ad_Close_Reward,errData:a});break;case"play_complete":console.log("播放完成, 发放奖励"),i.recordWatchRewardFinish(),n(!0);break;case"skip":console.log("中途关闭，不发放奖励, 关闭加载进度条"),t({errMsg:r.Sdk_Ad_Close_Reward,errData:a});break;case"error":console.log("出现异常, 关闭加载进度条",a),t({errMsg:r.Sdk_Ad_On_Error,errData:a})}}))}))},i.recordWatchAdFinish=function(){t.inst.recordTimes(a.af_ad_watch_times),t.inst.isTimesEnough(a.af_ad_watch_times,5)&&(t.inst.hasFlag(a.af_ad_5times)||(d.instance.reportAf(a.af_ad_5times,{},!0),t.inst.recordFlag(a.af_ad_5times))),t.inst.isTimesEnough(a.af_ad_watch_times,10)&&(t.inst.hasFlag(a.af_ad_10times)||(d.instance.reportAf(a.af_ad_10times,{},!0),t.inst.recordFlag(a.af_ad_10times)))},i.recordWatchRewardFinish=function(){var e=t.inst.recordTimes(a.af_ad_reward_finish);d.instance.reportAf(a.af_ad_reward_finish,{times:e},!0),this.recordWatchAdFinish()},i.showInsterstital=function(e){var n=this;void 0===e&&(e="default"),c.showInterstitialAd(e,{adUnitId:o.insertUnitId},(function(e,i){switch(console.log("interstitialAd result:",e,i),e){case"show":console.log("显示插屏成功");var o=t.inst.recordTimes(a.af_ad_interstitial_finish);d.instance.reportAf(a.af_ad_interstitial_finish,{times:o},!0),n.recordWatchAdFinish();break;case"load_timeout":console.log("拉取超时,关闭加载进度条");break;case"play_complete":console.log("播放完成, 发放奖励");break;case"skip":console.log("中途关闭，不发放奖励, 关闭加载进度条");break;case"error":console.log("出现异常, 关闭加载进度条",i)}}))},i.showMainPageBannerAd=function(e){void 0===e&&(e="main");var n=s.getInstance().native,i=window.wx.getSystemInfoSync(),t=i.screenWidth,a=i.screenHeight,r=n.isIpx()||n.is2To1(),d=n.isPad();c.showBanner(e,{adUnitId:o.bannerUnitId,style:{left:0,top:0,width:r?.7*t:d?.6*t:.75*t,height:50},adIntervals:30,onResize:function(e,n,i){console.log("bannnerAd",e,n,i);var o=a-n.height;e.style.left=(t-n.width)/2,e.style.top=o}})},i.hideMainPageBannerAd=function(){c.hideBanner()},i.cacheBannerAd=function(){var e=s.getInstance().native,n=window.wx.getSystemInfoSync(),i=n.screenWidth,t=(n.screenHeight,e.isIpx()||e.is2To1()),a=e.isPad();c.preLoadBanner({adUnitId:o.bannerUnitId,style:{left:0,top:0,width:t?.7*i:a?.6*i:.75*i,height:50}})},i.showPopBannerAd=function(){},i.hidePopBannerAd=function(){},n(e,null,[{key:"inst",get:function(){return null==e._inst&&(e._inst=new e),e._inst}}]),e}())._inst=null,i._RF.pop()}}}));

System.register("chunks:///_virtual/AdventureLevelActiveImage.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UserAdventureLevelData.ts"],(function(e){var t,n,r,o,i,a;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,r=e._decorator,o=e.Sprite,i=e.Component},function(e){a=e.UserAdventureLevelData}],execute:function(){var c;n._RF.push({},"5d808iTBwFF55ISdFTAsOBa","AdventureLevelActiveImage",void 0);var s=r.ccclass;r.property,e("LevelActiveImage",s("LevelActiveImage")(c=function(e){function n(){return e.apply(this,arguments)||this}return t(n,e),n.prototype.onLoad=function(){var e=a.inst.getMaxHistoryLevel(),t=Math.floor(e/6+1),n=this.node.getSiblingIndex()+1;this.node.getComponent(o).grayscale=n>t},n}(i))||c);n._RF.pop()}}}));

System.register("chunks:///_virtual/AdventureLevelBoardView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MK.ts","./BlockEventManager.ts","./BoardView.ts","./AssetInfoDefine.ts","./Event.ts","./AdventureLevelGame.ts","./AdventureLevelConditionView.ts","./PanelManager.ts","./Boot.ts","./UserAdventureLevelData.ts","./Enumrations.ts","./AdSdk.ts","./LevelGuideData.ts","./UserData.ts","./RedPointDef.ts","./RedPointManager.ts","./ShakeDefine.ts","./ShakeManager.ts","./UserHammerData.ts","./UserVRocketData.ts","./UserHRocketData.ts","./UserChangeData.ts","./ResManager.ts","./SceneMode.ts","./BIDefine.ts","./sdk.ts","./MKEvent.ts","./MsgData.ts"],(function(e){var t,n,o,i,a,r,s,c,l,u,h,f,d,v,p,E,g,m,M,C,V,_,L,w,y,T,b,k,N,S,B,D,I,R,A,P,U,O,H;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,o=e.initializerDefineProperty,i=e.assertThisInitialized,a=e.asyncToGenerator,r=e.regeneratorRuntime},function(e){s=e.cclegacy,c=e._decorator,l=e.Node,u=e.UITransform},null,function(e){h=e.BlockEventManager},function(e){f=e.BoardView},function(e){d=e.AssetInfoDefine},function(e){v=e.BlockEventType},function(e){p=e.AdventureLevelGame,E=e.emLevCondition},function(e){g=e.AdventureLevelConditionView},function(e){m=e.PanelManager},function(e){M=e.audio},function(e){C=e.UserAdventureLevelData},function(e){V=e.kGameMode},function(e){_=e.AdSdk},function(e){L=e.LevelGuideData},function(e){w=e.UserData},function(e){y=e.emRedPointKeys},function(e){T=e.RedPointManager},function(e){b=e.emShakeLevel},function(e){k=e.ShakeManager},function(e){N=e.UserHammerData},function(e){S=e.UserVRocketData},function(e){B=e.UserHRocketData},function(e){D=e.UserChangeData},function(e){I=e.ResManager},function(e){R=e.SceneMode},function(e){A=e.BIEventID},function(e){P=e.SDK},function(e){U=e.regEvent,O=e.sendEvent},function(e){H=e.MsgData}],execute:function(){var G,F,K,z,Y,x,W;s._RF.push({},"889136QouJHzJblqOp5CAEh","AdventureLevelBoardView",void 0);var J=c.ccclass,X=c.property;e("AdventureLevelBoardView",(G=J("AdventureLevelBoardView"),F=X(l),K=X(l),G((x=t((Y=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return t=e.call.apply(e,[this].concat(a))||this,o(t,"rootConditionView",x,i(t)),t.conditionView=void 0,o(t,"rootConditionViewEnter",W,i(t)),t.conditionViewEnter=void 0,t.clearnDiamonMap=void 0,t}n(t,e);var s=t.prototype;return s.startGame=function(){var t=a(r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.prototype.startGame.call(this);case 2:this.refreshCondition(),P.instance.reportBI(A.level_start,{level:C.inst.getHistoryLevel(),theme:C.inst.getLevelBatchNumber()});case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),s.onLoad=function(){e.prototype.onLoad.call(this),h.instance.listen(v.EVENT_SCENE_PLAY_LEVEL_NEXT,this.onLevelChange,this).listen(v.EVENT_SCENE_PLAY_LEVEL_COMPLETE,this.showPassView,this),P.instance.reportBI(A.level_enter,{level:C.inst.getHistoryLevel(),stage:C.inst.getLevelBatchNumber()}),T.getInstance().removePoint(y.UnclockLevel),U(v.EVENT_USE_ITEM_HAMMER,this.onUsePropHammer,this),U(v.EVENT_USE_ITEM_VROCKET,this.onUsePropVRocket,this),U(v.EVENT_USE_ITEM_HROCKET,this.onUsePropHRocket,this),U(v.EVENT_USE_ITEM_REFRESHBLOCK,this.onUsePropRefresh,this)},s.refreshAllBoardAni=function(e,t){},s.refreshCondition=function(){this.conditionView=this.rootConditionView.getComponent(g),this.conditionView&&this.conditionView.initView(this.gameManager),this.conditionViewEnter=this.rootConditionViewEnter.getComponent(g),this.conditionViewEnter&&this.conditionViewEnter.initView(this.gameManager),this.rootConditionViewEnter.active||R.gameMode==V.endless&&(this.rootConditionViewEnter.active=!0)},s.onLevelChange=function(){this.refreshBoardView(this.gameManager.tableData),this.refreshCondition()},s.onRestartGame=function(t){w.inst.setThisGameWatchReviveNum(0),e.prototype.onRestartGame.call(this,t),m.inst.removeAllPopUpView(),this.onLevelChange();var n=C.inst.getHistoryLevel(),o=C.inst.getLevelBatchNumber();t&&P.instance.reportBI(A.level_restart,{level:n,stage:o}),P.instance.reportBI(A.level_start,{level:n,stage:o})},s.onDestroy=function(){h.instance.unlisten(v.EVENT_SCENE_PLAY_LEVEL_NEXT,this.onLevelChange,this).unlisten(v.EVENT_SCENE_PLAY_LEVEL_COMPLETE,this.showPassView,this),this.gameManager&&P.instance.reportBI(A.level_exit,{level:C.inst.getHistoryLevel(),stage:C.inst.getLevelBatchNumber(),round:this.gameManager.getRound()}),e.prototype.onDestroy.call(this)},s.getDelayStartTime=function(){return 1.5},s.beforeStart=function(){this.gameManager=p.levlInstance},s.onBeforeClearBlock=function(){this.clearnDiamonMap=new Map},s.onClearBlockEntity=function(t,n,o){var i=this;e.prototype.onClearBlockEntity.call(this,t,n,o);var a=100*t+n,r=0;if(!this.clearnDiamonMap.has(a)&&o>this.gameManager.diamonTypeStart){var s=this.gameManager;if(this.conditionView){var c=s.currentCollects.get(o),l=s.targetCollects.get(o);if(c<l){var u,h;s.collectItem(o,1),c=s.currentCollects.get(o);var f=null==(u=H)||null==(h=u.Login)?void 0:h.userId;O(v.EVENT_COLLECT_ITEM_END,f,o,1);var d=this.blockMap.get(a);d?setTimeout((function(){i.conditionView.setCollectFly(d.node,o,c,l,(function(){s.checkIsLevelComplete()}),i)}),150*(r+=1)):(this.conditionView.setCollect(o,c,l),s.checkIsLevelComplete())}}this.clearnDiamonMap.set(a,o)}},s.refreshCombo=function(e,t){k.getInstance().Shake(b.light)},s.showComboAni=function(e){},s.onAfterClearBlockAnim=function(t,n){e.prototype.onAfterClearBlockAnim.call(this,t,n),this.clearnDiamonMap=null},s.onGameOver=function(){e.prototype.onGameOver.call(this),this.gameManager.checkIsLevelComplete()||h.instance.emit(v.EVENT_SCENE_PLAY_LEVEL_COMPLETE,2)},s.showPassView=function(e){var t=this;if(1==e)this.showOverView(e);else if(2==e){if(p.levlInstance.isCanRevive())return void _.inst.isRewardedVideoAvailable().then((function(){m.inst.addPopUpView(d.prefab.revive.path,{manager:p.levlInstance,onTimeFinish:function(){t.showOverView(e)},holder:t,mode:V.adventure_level,reviveTimes:p.levlInstance.getReviveTimes()})})).catch((function(){t.showOverView(e)}));this.showOverView(e)}},s.showOverView=function(e){var t=C.inst,n=this.gameManager,o=n.getLevelId();if(1==e){var i=d.prefab.levelPassPre;m.inst.addPopUpView(i.path,{manager:n,result:e,level:o}),t.resetLevelFail(t.getLevelBatchNumber(),t.getHistoryLevel())}else if(2==e){var a=d.prefab.levelOverPre;m.inst.addPopUpView(a.path,{manager:n,result:e,level:o}),t.recordLevelFail(t.getLevelBatchNumber(),t.getHistoryLevel())}var r=w.inst;r.isFirstPlay&&(r.isFirstPlay=!1,r.onlinePlayTimes+=1)},s.showAddClearScoreAnimation=function(t,n,o,i,a,r){this.gameManager&&this.gameManager.conditionType==E.Score&&e.prototype.showAddClearScoreAnimation.call(this,t,n,o,i,a,!1)},s.showMultipleClearEffect=function(t,n,o,i,a){this.gameManager&&this.gameManager.conditionType==E.Score&&e.prototype.showMultipleClearEffect.call(this,t,n,o,i,!1)},s.showComboScore=function(e,t,n,o){O(v.EVENT_COMBO_BLOCK_END,e,t,n)},s.getGuideDataInst=function(){return L.inst},s.onUsePropHammer=function(e,t){var n=this;M.playSubSound(d.audio.hammer),N.inst.useItem(),O(v.EVENT_REFRESH_ITEM_NUM);var o=this.blockMap.get(100*e+t),i=d.prefab.useHammerAnim,a=o.node.parent.getComponent(u).convertToWorldSpaceAR(o.node.position),r=this.rootEffect.getComponent(u).convertToNodeSpaceAR(a);I.getInstance().loadNode(i.path,i.bundle,this.rootEffect).then((function(e){e.setPosition(r),n.scheduleOnce((function(){e.destroy()}),3)}));var s=d.prefab.useHammerEffect;this.scheduleOnce((function(){I.getInstance().loadNode(s.path,s.bundle,n.rootEffect).then((function(e){e.setPosition(r),console.log("local pos 2:",o.node.position),console.log("world pos 2:",e.worldPosition),n.scheduleOnce((function(){e.destroy()}),3)}))}),.383),this.onBeforeClearBlock(),this.scheduleOnce((function(){for(var o,i=t-1<0?0:t-1,a=e+2>8?8:e+2,r=t+2>8?8:t+2,s=0,c=0,l=e-1<0?0:e-1;l<a;l++)for(var u=i;u<r;u++)if(s=100*l+u,0!=(o=n.blockMap.get(s)).blockType){c++;var h=o.blockType;h>7&&(h=Math.floor(7*Math.random())+1),o.blockType>100&&n.onClearBlockEntity(l,u,o.blockType);var f=d.prefab.blockBrokenEffect[h];o.clearColorAndGem(),n.gameManager.tableData[l][u]=0,I.getInstance().loadNode(f.path,f.bundle,o.node).then((function(e){n.scheduleOnce((function(){e.destroy()}),3)}))}n.refreshBoardView(n.gameManager.tableData),n.gameManager.updateLevelHistoryData(),O(v.EVENT_USE_ITEM_END,c)}),.383)},s.onUsePropVRocket=function(e,t){var n,o=this;M.playSubSound(d.audio.rocket),S.inst.useItem(),this.onBeforeClearBlock(),O(v.EVENT_REFRESH_ITEM_NUM);var i=(n=this.blockMap.get(700+t)).node.parent.getComponent(u).convertToWorldSpaceAR(n.node.position),a=this.rootEffect.getComponent(u).convertToNodeSpaceAR(i),r=d.prefab.vrocketEffect;I.getInstance().loadNode(r.path,r.bundle,this.rootEffect).then((function(e){e.setPosition(a),o.scheduleOnce((function(){e.destroy()}),5)}));for(var s=0,c=0,l=[],h=0;h<8;h++)s=100*h+t,n=this.blockMap.get(s),l.push(n),this.gameManager.tableData[h][t]=0;l=l.reverse();for(var f=function(e){if(0!=l[e].blockType){c++;var n=l[e].blockType,i=n;n>7&&(n=Math.floor(7*Math.random())+1);var a=d.prefab.blockBrokenEffect[n];o.scheduleOnce((function(){l[e].refreshColor(0),i>100&&o.onClearBlockEntity(7-e,t,i),I.getInstance().loadNode(a.path,a.bundle,l[e].node).then((function(e){o.scheduleOnce((function(){e.destroy()}),3)}))}),.05*(e+1))}},p=0;p<8;p++)f(p);this.scheduleOnce((function(){o.gameManager.updateLevelHistoryData(),O(v.EVENT_USE_ITEM_END,c)}),.45)},s.onUsePropHRocket=function(e,t){var n,o=this;M.playSubSound(d.audio.rocket),B.inst.useItem(),this.onBeforeClearBlock(),O(v.EVENT_REFRESH_ITEM_NUM);var i=(n=this.blockMap.get(100*e+7)).node.parent.getComponent(u).convertToWorldSpaceAR(n.node.position),a=this.rootEffect.getComponent(u).convertToNodeSpaceAR(i),r=d.prefab.hrocketEffect;I.getInstance().loadNode(r.path,r.bundle,this.rootEffect).then((function(e){e.setPosition(a),o.scheduleOnce((function(){e.destroy()}),5)}));for(var s=0,c=0,l=[],h=0;h<8;h++)s=100*e+h,n=this.blockMap.get(s),l.push(n),this.gameManager.tableData[e][h]=0;l=l.reverse();for(var f=function(t){if(0!=l[t].blockType){c++;var n=l[t].blockType,i=n;n>7&&(n=Math.floor(7*Math.random())+1);var a=d.prefab.blockBrokenEffect[n];o.scheduleOnce((function(){i>100&&o.onClearBlockEntity(e,7-t,i),l[t].refreshColor(0),I.getInstance().loadNode(a.path,a.bundle,l[t].node).then((function(e){o.scheduleOnce((function(){e.destroy()}),3)}))}),.05*(t+1)+.2)}},p=0;p<8;p++)f(p);this.scheduleOnce((function(){o.gameManager.updateLevelHistoryData(),O(v.EVENT_USE_ITEM_END,c)}),.45)},s.onUsePropRefresh=function(){M.playSubSound(d.audio.refresh),D.inst.useItem(),O(v.EVENT_REFRESH_ITEM_NUM),this.gameManager&&this.gameManager.relifeCurrentLevel()},t}(f)).prototype,"rootConditionView",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=t(Y.prototype,"rootConditionViewEnter",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=Y))||z));s._RF.pop()}}}));

System.register("chunks:///_virtual/AdventureLevelConditionView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BlockEventManager.ts","./AdventureLevelGame.ts","./LevelConditionDiamondItem.ts","./Event.ts"],(function(e){var t,i,n,o,r,a,c,s,l,d,u,h,g,p,m,f,v,C,S,b;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){r=e.cclegacy,a=e._decorator,c=e.Label,s=e.Node,l=e.UIOpacity,d=e.instantiate,u=e.Vec3,h=e.Layout,g=e.Tween,p=e.tween,m=e.UITransform,f=e.Component},function(e){v=e.BlockEventManager},function(e){C=e.emLevCondition},function(e){S=e.LevelConditionDiamondItem},function(e){b=e.BlockEventType}],execute:function(){var y,T,w,E,L,I,D,_,z,A,N,M,V,B,O,P,x,k,R;r._RF.push({},"d2d3cwUu3xFnK0Gocwjf6Ak","AdventureLevelConditionView",void 0);var F=a.ccclass,H=a.property;e("AdventureLevelConditionView",(y=F("AdventureLevelConditionView"),T=H(c),w=H(s),E=H(c),L=H(c),I=H(s),D=H(s),y((A=t((z=function(e){function t(){for(var t,i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return t=e.call.apply(e,[this].concat(r))||this,n(t,"labLevel",A,o(t)),n(t,"rootScoreCondition",N,o(t)),n(t,"labScore",M,o(t)),n(t,"labTargetScore",V,o(t)),n(t,"rootDiamondCondition",B,o(t)),n(t,"conditionItem",O,o(t)),n(t,"isTargetDisplayed",P,o(t)),n(t,"isInScene",x,o(t)),n(t,"diamondScale",k,o(t)),n(t,"isShowDiamondWhenInit",R,o(t)),t.conditionMap=void 0,t.score=void 0,t.manager=void 0,t}i(t,e);var r=t.prototype;return r.getTargetScoreNode=function(){return this.labTargetScore.node?this.labTargetScore.node:this.node},r.getTargetCollectNode=function(e){var t=this.conditionMap.get(e);return t?t.node:this.node},r.initView=function(e){this.manager=e,this.labLevel&&(this.labLevel.string="Level "+this.manager.levelConfig.id),this.initConditions()},r.start=function(){v.instance.listen(b.EVENT_SCENE_PLAY_SET_SCORE,this.setScore,this).listen(b.EVENT_SCENE_PLAY_SET_COLLECT,this.setCollect,this)},r.onDestroy=function(){v.instance.unlisten(b.EVENT_SCENE_PLAY_SET_SCORE,this.setScore,this).unlisten(b.EVENT_SCENE_PLAY_SET_COLLECT,this.setCollect,this)},r.initConditions=function(){if(this.conditionItem){if(this.rootDiamondCondition.active=!1,this.rootScoreCondition.active=!1,this.unscheduleAllCallbacks(),this.manager.conditionType==C.Score)this.restoreOrigin(),this.score=0,this.labScore.string="0",this.labTargetScore.string=this.manager.targetScore+"",this.isInScene||(this.manager.scoreHelper.score>999?this.labScore.fontSize=24:this.labScore.fontSize=32,this.setScore(this.manager.scoreHelper.score)),this.isTargetDisplayed&&(this.labTargetScore.node.active=!0),this.onInitScore();else if(this.manager.conditionType==C.Collect){this.rootDiamondCondition.destroyAllChildren();var e=this.rootDiamondCondition.getComponent(l);e||(e=this.rootDiamondCondition.addComponent(l)),e.opacity=255;var t=[];this.manager.targetCollects.forEach((function(e,i){t.push(i)})),t.sort((function(e,t){return e-t})),this.conditionMap=new Map;for(var i=0;i<t.length;i++){var n=t[i],o=this.manager.targetCollects.get(n),r=this.manager.currentCollects.get(n),a=d(this.conditionItem);a.setScale(this.diamondScale,this.diamondScale,1);var c=a.getComponent(S);c.setImageType(n),c.updateRestOnly(r,o),c.node.active=!0,this.isShowDiamondWhenInit||(c.node.scale=new u(0,0,1)),c.node.setParent(this.rootDiamondCondition),this.conditionMap.set(n,c)}var s=this.rootDiamondCondition.getComponent(h);s&&s.updateLayout(!0),this.rootDiamondCondition.active=!0,this.onInitCollect()}}else console.error("异常的过关条件view:LevelConditionView ")},r.onInitScore=function(){},r.onInitCollect=function(){},r.setCollectFly=function(e,t,i,n,o,r){this.setCollect(t,i,n)},r.setCollect=function(e,t,i){if(this.manager.conditionType==C.Collect&&this.conditionMap.has(e)){var n=this.conditionMap.get(e);n&&n.updateRestOnly(t,i)}},r.setScore=function(e){var t=this;e=Math.min(this.manager.scoreHelper.score,this.manager.targetScore);var i=this;if(this.manager.conditionType==C.Score){var n=this.score,o=e-this.score;if(o>0){g.stopAllByTarget(this.labScore.node),this.score=e;var r=p(this.node).call((function(){var e=(n=(n+=1)>i.manager.targetScore?i.manager.targetScore:n).toString();i.labScore.fontSize=n>999?24:32,i.labScore.string=e,i.onScoreChange(n,i.manager.targetScore)})),a=.5/o,c=p().delay(a);p(this.node).repeat(o,p(this.node).sequence(c,r)).then(p(this.node).call((function(){t.isInScene&&t.manager&&t.manager.checkIsLevelComplete()}))).start()}this.score=e}},r.onScoreChange=function(e,t){},r.moveToTarget=function(e,t,i){this.moveTotargetByCurve(e,t,i)},r.moveTotargetByCurve=function(e,t,i){var n=this,o=e.worldPosition,r=o.x,a=t.worldPosition.x;o=t.parent.getComponent(m).convertToNodeSpaceAR(o),t.active||(t.active=!0);var c=0,s=0;console.log("fly:",a,"dist:",r),r>a?(c=-200,s=-300):(c=200,s=-300);var l=t.position,d=new u(t.position.x+c,t.position.y+s,0),h=o;p(t.position).to(.6,h,{onUpdate:function(e,i){t.position=n.twoBezier(i,l,d,h)},onComplete:function(){i&&i.call(n)}}).start()},r.twoBezier=function(e,t,i,n){var o=(1-e)*(1-e)*t.x+2*e*(1-e)*i.x+e*e*n.x,r=(1-e)*(1-e)*t.y+2*e*(1-e)*i.y+e*e*n.y;return new u(o,r,0)},r.restoreOrigin=function(){this.rootScoreCondition.active=!0,this.rootScoreCondition.scale=new u(1.2,1.2,1.2),this.rootScoreCondition.getComponent(l).opacity=255},t}(f)).prototype,"labLevel",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=t(z.prototype,"rootScoreCondition",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=t(z.prototype,"labScore",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=t(z.prototype,"labTargetScore",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=t(z.prototype,"rootDiamondCondition",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=t(z.prototype,"conditionItem",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=t(z.prototype,"isTargetDisplayed",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),x=t(z.prototype,"isInScene",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),k=t(z.prototype,"diamondScale",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),R=t(z.prototype,"isShowDiamondWhenInit",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),_=z))||_));r._RF.pop()}}}));

System.register("chunks:///_virtual/AdventureLevelConditionViewEnter.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AdventureLevelConditionView.ts","./AdventureLevelConditionViewScene.ts","./BlockEventManager.ts","./Event.ts","./LevelConditionDiamondItem.ts","./MK.ts","./AssetInfoDefine.ts","./BlockConstData.ts","./Boot.ts"],(function(e){var t,n,o,i,a,r,l,c,s,d,u,p,v,f,h,y,m,g,C,S,w;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,o=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){a=e.cclegacy,r=e._decorator,l=e.Node,c=e.Vec3,s=e.Animation,d=e.UITransform,u=e.instantiate,p=e.UIOpacity,v=e.tween},function(e){f=e.AdventureLevelConditionView},function(e){h=e.AdventureLevelConditionViewScene},function(e){y=e.BlockEventManager},function(e){m=e.BlockEventType},function(e){g=e.LevelConditionDiamondItem},null,function(e){C=e.AssetInfoDefine},function(e){S=e.BlockConstData},function(e){w=e.audio}],execute:function(){var V,T,A,E,L,P,N;a._RF.push({},"9e69eihxmlPG5qQpzVX2jTm","AdventureLevelConditionViewEnter",void 0);var _=r.ccclass,b=r.property;e("AdventureLevelConditionViewEnter",(V=_("AdventureLevelConditionViewEnter"),T=b(l),A=b(l),V((P=t((L=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return t=e.call.apply(e,[this].concat(a))||this,o(t,"targetConditionView",P,i(t)),o(t,"flyScoreNode",N,i(t)),t.flyDelay=.58,t.originScorePosition=c.ZERO,t.anim=void 0,t.isStarted=!1,t.playType=0,t}n(t,e);var a=t.prototype;return a.start=function(){e.prototype.start.call(this),this.originScorePosition=this.flyScoreNode.position.clone(),this.isStarted=!0,this.moveToTarget=this.moveToTarget.bind(this)},a.onInitScore=function(){this.playType=1,this.node.active=!0,this.playScore()},a.playScore=function(){var e=this;w.playSubSound(C.audio.diamon_out),this.anim||(this.anim=this.getComponent(s),this.anim.onLoad()),this.anim&&this.anim.play("LevelConditionViewEnter_score_anim"),this.scheduleOnce((function(){if(e.targetConditionView&&e.targetConditionView.isValid&&e.targetConditionView.getComponent(h).getTargetScoreNode()){var t=e.flyScoreNode.getComponent(s);t&&(t.once(s.EventType.FINISHED,(function(){w.playSubSound(C.audio.diamond_collect),y.instance.emit(m.EVENT_TATGET_SCORE_SHOW,0,e.manager.targetScore),e.flyScoreNode.setPosition(e.originScorePosition),e.flyScoreNode.active=!1,e.node&&e.node.isValid&&e.node.active&&(e.node.active=!1)})),t.play())}}),this.flyDelay)},a.onInitCollect=function(){this.playType=2,this.playCollect()},a.playCollect=function(){var e=this;w.playSubSound(C.audio.diamon_out),this.anim||(this.anim=this.getComponent(s),this.anim.onLoad()),this.anim&&(this.node.active=!0,this.anim.play("LevelConditionViewEnter_diamond_anim"),this.scheduleOnce((function(){e.conditionMap.forEach((function(e,t){if(e&&e.isValid){e.node.active=!0,e.showNumInfo(!0);var n=e.node.getWorldPosition();e.setOldLayoutParent(e.node.parent.parent),e.node.parent=e.node.parent.parent.parent.parent,e.node.setWorldPosition(n),console.log("element world pos: "+n.toString()),e.playAppearAnim()}}))}),.05)),this.scheduleOnce((function(){if(e.targetConditionView&&e.targetConditionView.isValid){var t=e.targetConditionView.getComponent(h);e.conditionMap.forEach((function(n,o){if(n&&n.isValid){n.useOldLayoutParent();var i=t.getTargetCollectNode(o),a=n.node.parent.parent,r=a.getComponent(d).convertToNodeSpaceAR(n.node.worldPosition),l=u(n.node);l.setParent(a),l.setPosition(r),l.active=!0,i&&i.isValid&&(n.node.active=!1,e.scheduleOnce((function(){i&&i.isValid&&e.moveToTarget(i,l,(function(){w.playSubSound(C.audio.diamond_collect),l&&l.isValid&&e.scheduleOnce((function(){if(i&&i.isValid){var t=i.getComponent(g);t.showNumInfo(!0),i.getComponent(p).opacity=255,t.restoreScale(),t.onFlyAnimFinish(),e.node.active&&(e.node.active=!1),l.destroy()}}),0)}))}),0))}}))}}),.3833)},a.moveToTarget=function(e,t,n){var o=this,i=e.worldPosition,a=t.parent.getComponent(d);console.log("world Pos: "+i.toString()),i=a.convertToNodeSpaceAR(i),console.log("NodeSpaceAR: "+i.toString()),t.active||(t.active=!0),v(t).to(.133,{scale:new c(S.CollectScale1.x,S.CollectScale1.y,1)}).to(.117,{scale:new c(S.CollectScale2.x,S.CollectScale2.y,1)}).parallel(v().to(.25,{position:new c(i.x,i.y)},{easing:"sineOut"}),v().delay(.25).call((function(){n&&n.call(o)}))).start(),t.getChildByPath("lab_num").getComponent(p).opacity=0,t.getChildByPath("shadow").getComponent(p).opacity=0},t}(f)).prototype,"targetConditionView",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=t(L.prototype,"flyScoreNode",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=L))||E));a._RF.pop()}}}));

System.register("chunks:///_virtual/AdventureLevelConditionViewScene.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AdventureLevelConditionView.ts","./BlockEventManager.ts","./Event.ts","./LevelConditionDiamondItem.ts","./MK.ts","./AssetInfoDefine.ts","./Boot.ts"],(function(e){var t,o,n,i,r,s,a,c,l,h,u,d,g,S,p,f,v,m,T,C;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,n=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){r=e.cclegacy,s=e._decorator,a=e.Node,c=e.ProgressBar,l=e.Slider,h=e.Animation,u=e.tween,d=e.UIOpacity,g=e.UITransform,S=e.instantiate},function(e){p=e.AdventureLevelConditionView},function(e){f=e.BlockEventManager},function(e){v=e.BlockEventType},function(e){m=e.LevelConditionDiamondItem},null,function(e){T=e.AssetInfoDefine},function(e){C=e.audio}],execute:function(){var y,w,b,E,_,I,L,A;r._RF.push({},"991e8o6/e5G2a1j2YrPr/xx","AdventureLevelConditionViewScene",void 0);var P=s.ccclass,B=s.property;e("AdventureLevelConditionViewScene",(y=P("AdventureLevelConditionViewScene"),w=B(a),b=B(a),y((I=t((_=function(e){function t(){for(var t,o=arguments.length,r=new Array(o),s=0;s<o;s++)r[s]=arguments[s];return t=e.call.apply(e,[this].concat(r))||this,n(t,"barScore",I,i(t)),n(t,"sliderScore",L,i(t)),n(t,"isShowNumWhenInit",A,i(t)),t.scoreProgressBar=void 0,t.scoreSlider=void 0,t}o(t,e);var r=t.prototype;return r.onLoad=function(){f.instance.listen(v.EVENT_TATGET_SCORE_SHOW,this.onTargetScoreShow,this).listen(v.EVENT_TATGET_COLLECT_SHOW,this.onTargetCollectShow,this),this.scoreProgressBar=this.barScore.getComponent(c),this.scoreSlider=this.sliderScore.getComponent(l)},r.onDestroy=function(){e.prototype.onDestroy.call(this),f.instance.unlisten(v.EVENT_TATGET_SCORE_SHOW,this.onTargetScoreShow,this).unlisten(v.EVENT_TATGET_COLLECT_SHOW,this.onTargetCollectShow,this)},r.initConditions=function(){e.prototype.initConditions.call(this),this.manager.targetScore>999?this.labTargetScore.fontSize=24:this.labTargetScore.fontSize=32},r.onTargetScoreShow=function(){var e=this;this.labTargetScore&&(this.labTargetScore.node.active=!0),this.scheduleOnce((function(){var t=e.labTargetScore.getComponent(h);t&&t.play("LevelConditionDiamondItem_fk_anim")}))},r.onTargetCollectShow=function(){var e=this.conditionMap;for(var t in e){var o=e[t];o.showNumInfo(!0),o.node.getChildByPath("img_score").setScale(1,1,1)}},r.onInitScore=function(){if(e.prototype.onInitScore.call(this),this.labTargetScore&&!this.isTargetDisplayed&&(this.labTargetScore.node.active=!1),this.scoreProgressBar.progress=0,this.scoreSlider.progress=0,this.manager){var t=this.manager.scoreHelper.score,o=this.manager.targetScore;t>o&&(t=o),this.onScoreChange(t,o),this.labScore.string=t.toString()}},r.onScoreChange=function(e,t){e>t&&(e=t);var o=(e=Math.min(this.manager.scoreHelper.score,this.manager.targetScore))/t;o>this.scoreProgressBar.progress&&(u(this.scoreProgressBar).to(.3,{progress:o},{easing:"sineInOut"}).start(),u(this.scoreSlider).to(.3,{progress:o},{easing:"sineInOut"}).start())},r.onInitCollect=function(){(e.prototype.onInitCollect.call(this),this.isShowNumWhenInit)||this.conditionMap.forEach((function(e,t){e.showNumInfo(!1),e.node.getChildByPath("img_score").setScale(1,1,1)}));this.isShowDiamondWhenInit||this.conditionMap.forEach((function(e,t){e.node.getComponent(d).opacity=0}))},r.setCollectFly=function(e,t,o,n,i,r){var s=this;this.scheduleOnce((function(){C.playSubSound(T.audio.diamon_out);var a=s.conditionMap.get(t),c=a.node.parent.parent.getComponent(g).convertToNodeSpaceAR(e.worldPosition),l=S(a.node);l.getComponent(m).showNumInfo(!1),l.setParent(a.node.parent.parent),l.setPosition(c.x,c.y),s.moveToTarget(a.node,l,(function(){C.playSubSound(T.audio.diamond_collect),s.setCollect(t,o,n),l.destroy(),i&&i.call(r)}))}))},t}(p)).prototype,"barScore",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=t(_.prototype,"sliderScore",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=t(_.prototype,"isShowNumWhenInit",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),E=_))||E));r._RF.pop()}}}));

System.register("chunks:///_virtual/adventureLevelData.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"01be2ATxoRPSJZllYO52RvW","adventureLevelData",void 0);e("AdventureLevelConfigData",{LevelTotalNumer:5});t._RF.pop()}}}));

System.register("chunks:///_virtual/AdventureLevelFinishAll.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PanelBase.ts","./Enumrations.ts","./SceneMode.ts","./UserAdventureLevelData.ts","./ResManager.ts"],(function(e){var t,n,i,r,o,a,s,l,c,u,p,d,f,h,v,m,g,b;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,s=e.Sprite,l=e.Label,c=e.Node,u=e.Animation,p=e.UITransform,d=e.tween,f=e.Vec3},function(e){h=e.default},function(e){v=e.kGameMode},function(e){m=e.SceneMode},function(e){g=e.UserAdventureLevelData},function(e){b=e.ResManager}],execute:function(){var A,L,y,N,k,S,F,_,w;o._RF.push({},"83de0DIYGBAhJfhAxq5Zf92","AdventureLevelFinishAll",void 0);var I=a.ccclass,M=a.property;e("AdventureLevelFinishAll",(A=I("AdventureLevelFinishAll"),L=M(s),y=M(l),N=M(c),A((F=t((S=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return(t=e.call.apply(e,[this].concat(o))||this).manager=void 0,i(t,"stickerSprite",F,r(t)),i(t,"seasonNumLabel",_,r(t)),i(t,"stickerNode",w,r(t)),t.anim=void 0,t}n(t,e);var o=t.prototype;return o.start=function(){var e=this;this.anim=this.getComponent(u);var t=g.inst.getLevelBatchNumber();this.seasonNumLabel&&(this.seasonNumLabel.string=t.toString()),b.getInstance().loadSpriteFrame("res/texture/adventure/UI_Stickerfinish_"+t.toString(),"block").then((function(t){e.stickerSprite.spriteFrame=t})),this.anim&&this.anim.play("LevelFinishedAll_enter_anim")},o.onclick=function(){var e=this;this.anim&&this.anim.play("LevelFinishedAll_exit_anim");var t=this.data.bookNode;if(t){var n=this.stickerNode.position,i=this.stickerNode.parent.getComponent(p).convertToNodeSpaceAR(t.worldPosition);d(this.stickerNode).to(.133,{position:new f(n.x,n.y-60,0)},{easing:"sineOut"}).to(.3,{position:i}).call((function(){e.closeSelf()})).start(),this.scheduleOnce((function(){if(t){var e=t.getComponent(u);e&&e.stop(),t.setScale(f.ONE),d(t).to(.05,{scale:new f(1.15,1.15,1)},{easing:"sineInOut"}).to(.1,{scale:f.ONE},{easing:"sineInOut"}).call((function(){if(t&&t.isValid){var e=t.getComponent(u);e&&e.play()}})).start()}}),.383)}m.gameMode=v.none},t}(h)).prototype,"stickerSprite",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=t(S.prototype,"seasonNumLabel",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=t(S.prototype,"stickerNode",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=S))||k));o._RF.pop()}}}));

System.register("chunks:///_virtual/AdventureLevelGame.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MK.ts","./Random.ts","./Game.ts","./LevelGame.ts","./LevelScoreHelper.ts","./BlockEventManager.ts","./Event.ts","./BlockType.ts","./BlockPlaceholder3.ts","./UserAdventureLevelData.ts","./BlockGenerateMasterLevel.ts","./LevelGuideData.ts","./SceneMode.ts","./Enumrations.ts","./BlockGenerateNative.ts","./AssetInfoDefine.ts","./PanelManager.ts","./AlbumData.ts","./RemoteConfig.ts","./BlockGenetateWasmAdventure.ts","./UserData.ts","./MKResCtr.ts","./MKEvent.ts"],(function(e){var t,l,i,s,n,r,o,a,c,h,u,v,f,d,g,p,m,y,C,L,b,T,k,D;return{setters:[function(e){t=e.inheritsLoose,l=e.createClass},function(e){i=e.cclegacy},null,function(e){s=e.Random},function(e){n=e.Game},function(e){r=e.LevelGame},function(e){o=e.LevelScoreHelper},function(e){a=e.BlockEventManager},function(e){c=e.BlockEventType},function(e){h=e.BlockItemConst},function(e){u=e.BlockPlaceholder3},function(e){v=e.UserAdventureLevelData},function(e){f=e.BlockGenerateMasterLevel},function(e){d=e.LevelGuideData},function(e){g=e.SceneMode},function(e){p=e.kGameMode},null,function(e){m=e.AssetInfoDefine},function(e){y=e.PanelManager},function(e){C=e.AlbumData,L=e.emStageStickerStatus},function(e){b=e.RemoteConfig},null,function(e){T=e.UserData},function(e){k=e.MKSubResCtr},function(e){D=e.sendEvent}],execute:function(){i._RF.push({},"ce8b3vM2URGZ7bEP8THc8ZN","AdventureLevelGame",void 0);var G=e("emLevCondition",function(e){return e[e.None=0]="None",e[e.Score=1]="Score",e[e.Collect=2]="Collect",e}({}));e("AdventureLevelGame",function(e){function i(){for(var t,l=arguments.length,i=new Array(l),s=0;s<l;s++)i[s]=arguments[s];return(t=e.call.apply(e,[this].concat(i))||this).currentLevel=0,t.maxLevel=0,t.conditionType=0,t.targetScore=0,t.targetCollects=void 0,t.currentCollects=void 0,t.levelConfig=void 0,t.tableCollects=void 0,t.typeCollects=void 0,t.levelTables=void 0,t}t(i,e),i.destroy=function(){i._advInstance=null};var n=i.prototype;return n.destroy=function(){this.clear(),i._advInstance=null},n.startGame=function(){this.scoreHelper&&this.scoreHelper.clear(),T.inst.setThisGameWatchReviveNum(0),this.scoreHelper=new o,this.scoreHelper.loadConfig(),this.resetGameState(),this.initLevelData(),this.blockGenerate&&this.blockGenerate.clear(),this.blockGenerate=new f(this.levelConfig,s.inst,this.scoreHelper,"level_action_info"),this.initTableData()},n.getMaxRefreshBlockTimes=function(){return 2},n.getMaxReviviTimes=function(){return b.getInstance().ReviviTimesEndless},n.endGame=function(){this.tableData=null,this.blockGenerate=null,this.scoreHelper=null},n.initNodePool=function(){e.prototype.initNodePool.call(this),this.createPool("AdventureLevelBlockGroupPool","res/prefab/blocks/block-normal-level",3)},n.getBlockGroupPoolName=function(){return"AdventureLevelBlockGroupPool"},n.initLevelData=function(){var e=v.inst.getLevelConfigPath();this.levelTables=k.loadJsonConfig(e),this.maxLevel=this.levelTables.length,this.currentLevel=this.getHistoryLevel(),this.currentLevel>this.maxLevel&&(this.currentLevel=this.maxLevel),this.historyLevelData=null;var t=Math.min(this.currentLevel-1,this.levelTables.length-1),l=this.levelTables[t];this.levelConfig=l},n.getLevelId=function(){return this.currentLevel},n.initTableData=function(){var e=this.blockNumber;if(this.zeroTableData(e),g.gameMode==p.adventure_level&&!d.inst.isGuideFinished())return this.initWithGuideData(!1,d.inst.getGuideBoard()),this.loadLevelById(!1),null;var t=this.getHistoryLevelData();return t&&this.currentLevel==t.id?(this.historyLevelData=t,this.scoreHelper.setHistoryData(t),this.reviviTimes=t.reviviTimes||0,this.adRefreshBlockTimes=t.refreshTimes||0,this.refreshAllTimes=t.refreshAllTimes||0,this.changeAllTimes=t.changeAllTimes||0,this.loadLevelByHistory(this.currentLevel,t),this.onBeginByHistory(),t):(this.loadLevelById(!0),this.onBeginNewGame(),null)},n.onBeginByHistory=function(){},n.onBeginNewGame=function(){this.canMoveBlock=!0,this.resetGameRecordState()},n.checkIsLevelComplete=function(){var e,t=this;if(this.conditionType==G.Score&&(e=this.scoreHelper.score>=this.targetScore),this.conditionType==G.Collect&&(e=!0,this.targetCollects.forEach((function(l,i){t.currentCollects.has(i)&&t.currentCollects.get(i)<l&&(e=!1)}))),e){if(this.canMoveBlock=!1,this.currentLevel<this.maxLevel){var l=this.currentLevel+1;l>this.maxLevel&&(l=this.maxLevel),this.updateHistoryLevel(l),this.updateMaxHistoryLevel(l)}else v.inst.isAllLevelFinished=1,this.updateHistoryLevel(this.maxLevel),this.updateMaxHistoryLevel(this.maxLevel);a.instance.emit(c.EVENT_SCENE_PLAY_LEVEL_COMPLETE,1)}return e},n.retryCurrentLevel=function(){this.clearLevelHistoryData(),this.startGame(),D(c.kEvent_Game_Show_New_Blocks),D(c.EVENT_SCENE_PLAY_RESTART,!0)},n.getNextLevelNum=function(){return this.currentLevel<this.maxLevel?this.currentLevel+1:this.currentLevel},n.gotoNextLevel=function(){if(this.clearLevelHistoryData(),!(this.currentLevel>=this.maxLevel))return this.currentLevel=this.getNextLevelNum(),this.startGame(),D(c.kEvent_Game_Show_New_Blocks),D(c.EVENT_SCENE_PLAY_RESTART,!1),!0;console.log("恭喜全部通关！"),C.inst.setStageStickerStatus(v.inst.getLevelBatchNumber(),L.obtained);var e=m.prefab.adventureFinishAll;y.inst.addPopUpView(e.path,r.levlInstance)},n.collectItem=function(e,t){if(this.targetCollects.has(e)){var l=this.targetCollects.get(e),i=this.currentCollects.get(e);this.currentCollects.set(e,Math.min(l,i+t))}},n.loadLevelById=function(e){var t=this.levelConfig,l=t.board,i=this.blockNumber;if(this.targetScore=t.score||0,this.targetScore>0&&(this.conditionType=G.Score),t.collect.length>0){this.conditionType=G.Collect,this.currentCollects=new Map,this.targetCollects=new Map,this.tableCollects=new Map,this.typeCollects=[];for(var s=t.collect,n=0;n<s.length;n++){var r=s[n];this.targetCollects.set(r.key,r.value),this.currentCollects.set(r.key,0),this.tableCollects.set(r.key,0),this.typeCollects.includes(r.key)||this.typeCollects.push(r.key)}}if(e){this.tableData=new Array;for(var o=0;o<i;o++){null==this.tableData[o]&&(this.tableData[o]=new Array);for(var a=0;a<i;a++){var c=l[o][a];if(this.tableData[o][a]=c,this.conditionType==G.Collect&&c>this.diamonTypeStart){var h=this.tableCollects.get(c);this.tableCollects.set(c,h+1)}}}}},n.loadLevelByHistory=function(e,t){var l=Math.min(e-1,this.levelTables.length-1),i=this.levelTables[l];this.levelConfig=i;var s=t.board?t.board:i.board,n=this.blockNumber;if(this.targetScore=i.score,this.targetScore>0&&(this.conditionType=G.Score),i.collect.length>0){this.conditionType=G.Collect,this.currentCollects=new Map,this.targetCollects=new Map,this.tableCollects=new Map,this.typeCollects=[];for(var r=i.collect,o=0;o<r.length;o++){var a=r[o];this.targetCollects.set(a.key,a.value),this.currentCollects.set(a.key,0),this.tableCollects.set(a.key,0),this.typeCollects.includes(a.key)||this.typeCollects.push(a.key)}var c=this.historyLevelData.collect;if(c)for(var h=0;h<c.length;h++){var u=c[h];this.currentCollects.has(u.key)&&this.currentCollects.set(u.key,u.value)}}this.tableData=new Array;for(var v=0;v<n;v++){null==this.tableData[v]&&(this.tableData[v]=new Array);for(var f=0;f<n;f++){var d=s[v][f];if(this.tableData[v][f]=d,this.conditionType==G.Collect&&d>this.diamonTypeStart){var g=this.tableCollects.get(d);this.tableCollects.set(d,g+1)}}}},n.getBlockSimpleConfig=function(t,l){if(t>1e3)return h[t].simple;var i=window.BlockConst[t],s=e.prototype.getBlockSimpleConfig.call(this,t,l);if(i.count<2)return s;if(this.conditionType==G.Collect){for(var n=[],r=0;r<this.typeCollects.length;r++){var o=this.typeCollects[r],a=this.targetCollects.get(o);this.currentCollects.get(o);(this.tableCollects.get(o)||0)<a+3&&n.push(o)}var c=!1;if(n.length>0)for(var u=1==n.length?n[0]:n.randomObject(),v=s.length,f=0;f<v;f++)for(var d=s[f].length,g=0;g<d;g++){if(s[f][g]>0){if(Math.random()<.5)return s[f][g]=u,c=!0,this.updateTableCollectNum(u,1),s;if(f==v-1&&g==d-1)return s[f][g]=u,c=!0,this.updateTableCollectNum(u,1),s}}if(!c){for(var p=0;p<this.typeCollects.length;p++){var m=this.typeCollects[p],y=this.targetCollects.get(m);this.currentCollects.get(m)<y&&n.push(m)}if(n.length>0)for(var C=1==n.length?n[0]:n.randomObject(),L=s.length,b=0;b<L;b++)for(var T=s[b].length,k=0;k<T;k++){var D=s[b][k];if(D>0&&D<100)return s[b][k]=C,c=!0,this.updateTableCollectNum(C,1),s}}}return s},n.updateTableCollectNum=function(e,t){var l=this.tableCollects.get(e)+t;l=l<0?0:l,this.tableCollects.set(e,l)},n.onRelifeCurrentLevelBefore=function(){var t=this;if(e.prototype.onRelifeCurrentLevelBefore.call(this),this.conditionType==G.Collect&&this.blockPlacesMap)for(var l=0;l<3;l++){var i=this.blockPlacesMap.get(l);if(i&&i.isValid){var s=i.getComponent(u).blocksData;s&&s.forEach((function(e){e.forEach((function(e){e>t.diamonTypeStart&&t.updateTableCollectNum(e,-1)}))}))}}},n.clearLevelHistoryData=function(){v.inst.clearLevelHistoryData()},n.updateLevelHistoryData=function(){if(g.gameMode!=p.adventure_level||d.inst.isGuideFinished()){var e=[];this.conditionType==G.Collect&&this.currentCollects&&this.currentCollects.forEach((function(t,l){e.push({key:l,value:t})}));var t=this.getPreviewsStoreData();this.levelData={hardNum:0,hardType:0,initDifficulty:0,id:this.currentLevel,board:this.tableData,score:this.scoreHelper.score,skillScore:this.scoreHelper.skillScore,continuousCount:this.scoreHelper.continuousCount,collect:e,preview:t,reviviTimes:this.reviviTimes,refreshTimes:this.adRefreshBlockTimes,refreshAllTimes:this.refreshAllTimes,changeAllTimes:this.changeAllTimes,isGameOver:this.isGameOver?1:0,round:this.blockGenerate.round||0},v.inst.updateLevelHistoryData(this.levelData)}},n.updateHistoryLevel=function(e){v.inst.updateHistoryLevel(e)},n.getHistoryLevelData=function(){var e=v.inst.getHistoryLevelData();return e&&1==e.isGameOver?(v.inst.clearLevelHistoryData(),null):e},n.updateMaxHistoryLevel=function(e){return v.inst.updateMaxHistoryLevel(e)},n.getHistoryLevel=function(){return v.inst.getHistoryLevel()},n.isCanRefreshBlock=function(){return!1},n.resetGameRecordState=function(){},l(i,null,[{key:"levlInstance",get:function(){return i._advInstance||(i._advInstance=new i),i._advInstance}}]),i}(n))._advInstance=void 0,i._RF.pop()}}}));

System.register("chunks:///_virtual/AdventureLevelGameOver.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AdventureLevelGame.ts","./MK.ts","./SceneMode.ts","./Enumrations.ts","./AdventureLevelConditionView.ts","./SceneDefine.ts","./SceneManager.ts","./AssetInfoDefine.ts","./AdSdk.ts","./ProcedureToAdventureLevelSelectV2.ts","./PanelBase.ts","./WechatMiniApi.ts","./SocialDef.ts","./Boot.ts","./BIDefine.ts","./SdkError.ts","./SdkManager.ts","./LanguageManager.ts","./FlagData.ts","./UserData.ts","./MKLocalStorage.ts","./sdk.ts","./MKUICtr.ts","./MKUICfg.ts"],(function(e){var t,n,i,a,o,r,s,l,c,u,d,v,h,f,m,g,p,_,S,C,w,y,k,L,b,I,A,B,M,D,T,R,V,G,W,x,N;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){o=e.cclegacy,r=e._decorator,s=e.Node,l=e.Animation},function(e){c=e.emLevCondition},null,function(e){u=e.SceneMode},function(e){d=e.kGameMode},function(e){v=e.AdventureLevelConditionView},function(e){h=e.emSceneName},function(e){f=e.SceneManager},function(e){m=e.AssetInfoDefine},function(e){g=e.AdSdk},function(e){p=e.ProcedureToAdventureLevelSelectV2},function(e){_=e.default},function(e){S=e.WechatMiniApi},function(e){C=e.emShareType,w=e.emSharePath},function(e){y=e.audio,k=e.fsm},function(e){L=e.BIEventID,b=e.emButtonType,I=e.emButtonScene,A=e.emAdStatus},function(e){B=e.emSdkErrorCode},function(e){M=e.SdkManager},function(e){D=e.LanguageManager},function(e){T=e.FlagData},function(e){R=e.UserData},function(e){V=e.getItem,G=e.setItem},function(e){W=e.SDK},function(e){x=e.showView},function(e){N=e.MKUIConfig}],execute:function(){var P,O,F,H,K,U,z;o._RF.push({},"3958amZOJVOKZVs1Dw3/GVC","AdventureLevelGameOver",void 0);var E=r.ccclass,j=r.property;e("default",(P=E("AdventureLevelGameOver"),O=j(s),F=j(s),P((U=t((K=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return t=e.call.apply(e,[this].concat(o))||this,i(t,"rootConditionView",U,a(t)),i(t,"diamondRewardBg",z,a(t)),t.manager=void 0,t.result=0,t}n(t,e);var o=t.prototype;return o.start=function(){e.prototype.start.call(this),g.inst.hideMainPageBannerAd(),g.inst.showPopBannerAd(),T.inst.hasFlag("jump_ad_instertital_level")?g.inst.showInsterstital("AdventureLevelGameOver"):T.inst.recordFlag("jump_ad_instertital_level")},o.onSetData=function(e){this.manager=e.manager,this.result=e.result,this.initView(this.manager,this.result)},o.initView=function(e,t){this.manager=e;var n=this.rootConditionView.getComponent(v);n&&n.initView(e),this.diamondRewardBg&&(this.diamondRewardBg.active=!1),this.rootConditionView.active=!0,this.manager.conditionType==c.Collect&&this.diamondRewardBg&&(this.diamondRewardBg.active=!0),this.result=t;var i=V("level_action_info",{score:0,playCount:0});if(2==t){i.playCount++,G("level_action_info",i);var a=this.node.getComponent(l);this.manager.conditionType==c.Score?a.play("LevelGameOver_score_anim"):a.play("LevelGameOver_diamond_anim")}},o.onClickNextLevel=function(){y.playSubSound(m.audio.touch),W.instance.reportBI(L.btn_click,{btn_type:b.click_adventure_next_level,scene:I.from_adventure_pass}),this.manager.gotoNextLevel(),this.closeSelf()},o.onClickRetry=function(){y.playSubSound(m.audio.touch),W.instance.reportBI(L.btn_click,{btn_type:b.click_adventrue_rechallenge,scene:I.from_adventrue_fail}),this.manager.retryCurrentLevel(),this.closeSelf()},o.onClickHome=function(){var e=this;if(y.playSubSound(m.audio.touch),this.manager.checkIsLevelComplete())u.gameMode=d.none,this.manager.clearLevelHistoryData(),f.inst.gotoScene(h.Home,"block").then((function(){})).catch((function(){}));else{var t={content:D.translateText("tip_give_up"),title:D.translateText("tip_tittle"),cancelBtnLabel:D.translateText("btn_super"),confirmBtnLabel:D.translateText("btn_cancel"),confirmCallback:function(){u.gameMode=d.none,e.manager.clearLevelHistoryData(),f.inst.gotoScene(h.Home,"block").then((function(){})).catch((function(){})),e.closeSelf()},cancelCallback:function(){}};x(N.prefab.dialog,null,t)}},o.onClickRelife=function(){var e=this;W.instance.reportBI(L.ad_revivie,{ad_status:A.WakeUp,ad_mode:d.level,revive_num:R.inst.getThisGameWatchReviveNum()}),g.inst.showRewardVideoAd("level_relife").then((function(t){y.playSubSound(m.audio.touch),e.manager.relifeCurrentLevel();var n=R.inst.getThisGameWatchReviveNum();R.inst.setThisGameWatchReviveNum(n+1),W.instance.reportBI(L.ad_revivie,{ad_status:A.Finished,ad_mode:d.level,revive_num:R.inst.getThisGameWatchReviveNum()}),e.closeSelf()})).catch((function(e){e.errMsg!=B.Sdk_Ad_Close_Reward?M.getInstance().native.showToast(D.translateText("tip_ad_fail")):W.instance.reportBI(L.ad_revivie,{ad_status:A.Closed,ad_mode:d.level,revive_num:R.inst.getThisGameWatchReviveNum()})}))},o.onClickLevelSelect=function(){y.playSubSound(m.audio.touch),u.gameMode=d.none,k.changeState(p,"block"),this.closeSelf()},o.onClickShare=function(){var e=Math.random();e<.25?S.getInstance().showShare(C.s_10001,w.revive,this,null):e<.5?S.getInstance().showShare(C.s_10002,w.revive,this,null):e<.75?S.getInstance().showShare(C.s_10003,w.revive,this,null):S.getInstance().showShare(C.s_10004,w.revive,this,null)},o.onClickHelp=function(){S.getInstance().showShare(C.s_10003,w.revive,this,null)},o.onWillClose=function(){e.prototype.onWillClose.call(this),g.inst.hidePopBannerAd()},t}(_)).prototype,"rootConditionView",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=t(K.prototype,"diamondRewardBg",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=K))||H));o._RF.pop()}}}));

System.register("chunks:///_virtual/AdventureLevelGamePass.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AdventureLevelGame.ts","./MK.ts","./SceneMode.ts","./Enumrations.ts","./AdventureLevelConditionView.ts","./SceneDefine.ts","./SceneManager.ts","./AssetInfoDefine.ts","./AdSdk.ts","./ProcedureToAdventureLevelSelectV2.ts","./PanelBase.ts","./WechatMiniApi.ts","./SocialDef.ts","./Boot.ts","./BIDefine.ts","./SdkError.ts","./SdkManager.ts","./LanguageManager.ts","./FlagData.ts","./Global.ts","./UserAdventureLevelData.ts","./UserCollectLevelData.ts","./MKLocalStorage.ts","./sdk.ts","./MKUICtr.ts","./MKUICfg.ts"],(function(e){var t,n,i,a,o,r,l,c,s,u,d,f,h,v,g,m,p,S,_,b,L,y,w,C,B,k,A,I,M,D,N,T,H,P,V,x,z,E,G,R,F;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){o=e.cclegacy,r=e._decorator,l=e.Node,c=e.Label,s=e.Sprite,u=e.Animation},function(e){d=e.emLevCondition},null,function(e){f=e.SceneMode},function(e){h=e.kGameMode},function(e){v=e.AdventureLevelConditionView},function(e){g=e.emSceneName},function(e){m=e.SceneManager},function(e){p=e.AssetInfoDefine},function(e){S=e.AdSdk},function(e){_=e.ProcedureToAdventureLevelSelectV2},function(e){b=e.default},function(e){L=e.WechatMiniApi},function(e){y=e.emShareType,w=e.emSharePath},function(e){C=e.audio,B=e.fsm},function(e){k=e.BIEventID,A=e.emButtonType,I=e.emButtonScene,M=e.emAdStatus},function(e){D=e.emSdkErrorCode},function(e){N=e.SdkManager},function(e){T=e.LanguageManager},function(e){H=e.FlagData},function(e){P=e.Global},function(e){V=e.UserAdventureLevelData},function(e){x=e.UserCollectLevelData},function(e){z=e.getItem,E=e.setItem},function(e){G=e.SDK},function(e){R=e.showView},function(e){F=e.MKUIConfig}],execute:function(){var K,U,W,j,q,O,Y,J,Q,X,Z,$,ee,te,ne,ie,ae,oe,re,le,ce,se,ue;o._RF.push({},"c6212aFK55HOItlEvLiqYEA","AdventureLevelGamePass",void 0);var de=r.ccclass,fe=r.property;e("default",(K=de("AdventureLevelGamePass"),U=fe(l),W=fe(l),j=fe(l),q=fe(c),O=fe(s),Y=fe(s),J=fe(s),Q=fe(s),X=fe(l),Z=fe(l),K((te=t((ee=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return t=e.call.apply(e,[this].concat(o))||this,i(t,"rootConditionView",te,a(t)),i(t,"diamondRewardBg",ne,a(t)),i(t,"ScoreSuccSprite",ie,a(t)),i(t,"ScoreSuccNum",ae,a(t)),i(t,"normalBg",oe,a(t)),i(t,"hardGameBg",re,a(t)),i(t,"nextLevelSprite",le,a(t)),i(t,"backHomeSprite",ce,a(t)),i(t,"scoreImageNode",se,a(t)),i(t,"logoEffectNode",ue,a(t)),t.manager=void 0,t.result=0,t}n(t,e);var o=t.prototype;return o.start=function(){e.prototype.start.call(this),S.inst.hideMainPageBannerAd(),S.inst.showPopBannerAd(),H.inst.hasFlag("jump_ad_instertital_level")?S.inst.showInsterstital("AdventureLevelGamePass"):H.inst.recordFlag("jump_ad_instertital_level"),this.logoEffectNode.active=!1},o.onSetData=function(e){this.manager=e.manager,this.result=e.result,this.initView(this.manager,this.result)},o.initView=function(e,t){var n=this;this.manager=e;var i=this.rootConditionView.getComponent(v);i&&i.initView(e),this.diamondRewardBg&&(this.diamondRewardBg.active=!1),this.rootConditionView.active=!0,this.manager.conditionType==d.Collect?(this.diamondRewardBg&&(this.diamondRewardBg.active=!0),this.scoreImageNode.active=!1):this.scoreImageNode.active=!0,this.result=t;var a=z("level_action_info",{score:0,playCount:0});if(2==t)a.playCount++,E("level_action_info",a);else if(1==t){var o=this.node.getComponent(u),r=o.clips;this.manager.conditionType==d.Score?(this.rootConditionView.active=!1,this.ScoreSuccSprite&&(this.ScoreSuccSprite.active=!0,this.ScoreSuccNum.string=this.manager.targetScore.toString()),2==r.length&&(o.play(r[1].name),setTimeout((function(){n.logoEffectNode.active=!0}),167))):(o.play(r[0].name),setTimeout((function(){n.logoEffectNode.active=!0}),167)),a.playCount=0,a.score=0,E("level_action_info",a),E("Level_Passed_Last",{af_adventure_name:x.inst.getLevelThemeName(),af_adventure_level:e.levelConfig.id})}if(P.LevelSelectBoard){var l=V.inst.getLevelBatchNumber();if(P.LevelSelectBoard.has(l)){var c=P.LevelSelectBoard.get(l);if(2==t)return;if(1==V.inst.isAllLevelFinished)return this.backHomeSprite.node.active=!0,void(this.nextLevelSprite.node.active=!1);this.backHomeSprite.node.active=!1,this.nextLevelSprite.node.active=!0;var s=V.inst.getHistoryLevel(),f=null;c.forEach((function(e,t){e.level!=s||(f=e)})),f&&(f.isHard?(this.normalBg.node.active=!1,this.hardGameBg.node.active=!0):(this.normalBg.node.active=!0,this.hardGameBg.node.active=!1))}}},o.onClickNextLevel=function(){C.playSubSound(p.audio.touch),1==V.inst.isAllLevelFinished?(this.closeSelf(),B.changeState(_,"finished")):(G.instance.reportBI(k.btn_click,{btn_type:A.click_adventure_next_level,scene:I.from_adventure_pass}),this.manager.gotoNextLevel(),this.closeSelf())},o.onClickRetry=function(){C.playSubSound(p.audio.touch),G.instance.reportBI(k.btn_click,{btn_type:A.click_adventrue_rechallenge,scene:I.from_adventrue_fail}),this.manager.retryCurrentLevel(),this.closeSelf()},o.onClickHome=function(){var e=this;if(C.playSubSound(p.audio.touch),this.manager.checkIsLevelComplete())f.gameMode=h.none,this.manager.clearLevelHistoryData(),m.inst.gotoScene(g.Home,"block").then((function(){})).catch((function(){}));else{var t={content:T.translateText("tip_give_up"),title:T.translateText("tip_tittle"),cancelBtnLabel:T.translateText("btn_super"),confirmBtnLabel:T.translateText("btn_cancel"),confirmCallback:function(){f.gameMode=h.none,e.manager.clearLevelHistoryData(),m.inst.gotoScene(g.Home,"block").then((function(){})).catch((function(){})),e.closeSelf()},cancelCallback:function(){}};R(F.prefab.dialog,null,t)}},o.onClickRelife=function(){var e=this;S.inst.showRewardVideoAd("level_relife").then((function(t){C.playSubSound(p.audio.touch),e.manager.relifeCurrentLevel(),e.closeSelf()})).catch((function(e){e.errMsg!=D.Sdk_Ad_Close_Reward?N.getInstance().native.showToast(T.translateText("tip_ad_fail")):G.instance.reportBI(k.ad_revivie,{ad_status:M.Closed,ad_mode:h.level})}))},o.onClickLevelSelect=function(){C.playSubSound(p.audio.touch),1==V.inst.isAllLevelFinished?(f.gameMode=h.none,B.changeState(_,"finished"),this.closeSelf()):(B.changeState(_,"block"),this.closeSelf())},o.onClickShare=function(){var e=Math.random();e<.25?L.getInstance().showShare(y.s_10001,w.start_game,this,null):e<.5?L.getInstance().showShare(y.s_10002,w.start_game,this,null):e<.75?L.getInstance().showShare(y.s_10003,w.start_game,this,null):L.getInstance().showShare(y.s_10004,w.start_game,this,null)},o.onClickHelp=function(){L.getInstance().showShare(y.s_10003,w.start_game,this,null)},o.onWillClose=function(){e.prototype.onWillClose.call(this),S.inst.hidePopBannerAd()},t}(b)).prototype,"rootConditionView",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ne=t(ee.prototype,"diamondRewardBg",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ie=t(ee.prototype,"ScoreSuccSprite",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ae=t(ee.prototype,"ScoreSuccNum",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),oe=t(ee.prototype,"normalBg",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),re=t(ee.prototype,"hardGameBg",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),le=t(ee.prototype,"nextLevelSprite",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ce=t(ee.prototype,"backHomeSprite",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),se=t(ee.prototype,"scoreImageNode",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ue=t(ee.prototype,"logoEffectNode",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$=ee))||$));o._RF.pop()}}}));

System.register("chunks:///_virtual/AdventureLevelGamePreGameOver.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PanelBase.ts","./PanelManager.ts","./AssetInfoDefine.ts","./MK.ts","./Boot.ts","./UserAdventureLevelData.ts","./BIDefine.ts","./sdk.ts"],(function(e){var t,n,r,a,s,o,u,l,i;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,r=e._decorator},function(e){a=e.default},function(e){s=e.PanelManager},function(e){o=e.AssetInfoDefine},null,null,function(e){u=e.UserAdventureLevelData},function(e){l=e.BIEventID},function(e){i=e.SDK}],execute:function(){var v;n._RF.push({},"abe14q+H8VNWoAtWQSQvUBG","AdventureLevelGamePreGameOver",void 0);var c=r.ccclass;r.property,e("AdventureLevelGamePreGameOver",c("AdventureLevelGamePreGameOver")(v=function(e){function n(){return e.apply(this,arguments)||this}t(n,e);var r=n.prototype;return r.start=function(){var e=this;this.scheduleOnce((function(){e.closeSelf();var t=o.prefab.levelOver;s.inst.addPopUpView(t.path,e.data)}),1.5)},r.onSetData=function(e){var t=u.inst;i.instance.reportBI(l.level_finish,{level:e.level,result:1,stage:t.getLevelBatchNumber(),round:this.data.manager.getRound()})},n}(a))||v);n._RF.pop()}}}));

System.register("chunks:///_virtual/AdventureLevelItem.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,r,i,a,l,n,c,o,s;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,i=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){l=e.cclegacy,n=e._decorator,c=e.Node,o=e.Sprite,s=e.Component}],execute:function(){var v,u,b,p,f,m,h;l._RF.push({},"8bc63QTGlNCdIm/xnAoXt2B","AdventureLevelItem",void 0);var d=n.ccclass,L=n.property;e("AdventureLevelItem",(v=d("AdventureLevelItem"),u=L(c),b=L(o),v((m=t((f=function(e){function t(){for(var t,r=arguments.length,l=new Array(r),n=0;n<r;n++)l[n]=arguments[n];return t=e.call.apply(e,[this].concat(l))||this,i(t,"curEffect",m,a(t)),i(t,"bg",h,a(t)),t.levelItemLabel=void 0,t.levelItemLabelDark=void 0,t}r(t,e);var l=t.prototype;return l.start=function(){},l.bindLabel=function(e,t){this.levelItemLabel=e,this.levelItemLabelDark=t},l.setState=function(e,t){this.curEffect.active=!1;var r="buttonbase2";switch(t){case 0:this.levelItemLabelDark.node.active=!1,this.levelItemLabel.node.active=!0;break;case 1:r="buttonbase3",this.levelItemLabelDark.node.active=!1,this.levelItemLabel.node.active=!0,this.curEffect.active=!0;break;case 2:r="buttonbase1",this.levelItemLabel.node.active=!1,this.levelItemLabelDark.node.active=!0}var i=this.bg.spriteAtlas.getSpriteFrame(r);this.bg.spriteFrame=i;var a=""+(e+1);this.levelItemLabel.string=a,this.levelItemLabelDark.string=a},t}(s)).prototype,"curEffect",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=t(f.prototype,"bg",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=f))||p));l._RF.pop()}}}));

System.register("chunks:///_virtual/AdventureLevelPreGamePass.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PanelBase.ts","./PanelManager.ts","./AssetInfoDefine.ts","./LevelConditionDiamondItem.ts","./AdventureLevelGame.ts","./LocationData.ts","./UserAdventureLevelData.ts","./Boot.ts","./MK.ts","./BIDefine.ts","./sdk.ts"],(function(e){var t,n,i,a,o,r,l,s,c,u,d,v,p,f,m,h,g,N,b,y,L,A;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){o=e.cclegacy,r=e._decorator,l=e.Label,s=e.Node,c=e.Animation,u=e.tween,d=e.Vec3,v=e.instantiate,p=e.Layout},function(e){f=e.default},function(e){m=e.PanelManager},function(e){h=e.AssetInfoDefine},function(e){g=e.LevelConditionDiamondItem},function(e){N=e.emLevCondition},function(e){b=e.DiamondDisplayLoc},function(e){y=e.UserAdventureLevelData},null,null,function(e){L=e.BIEventID},function(e){A=e.SDK}],execute:function(){var P,w,D,z,I,C,G,M,O,B,S,T,_,E,U,F,R;o._RF.push({},"4884e+bd7pCTJF7gwGaTPUv","AdventureLevelPreGamePass",void 0);var k=r.ccclass,K=r.property;e("AdventureLevelGamePreGamePass",(P=k("AdventureLevelGamePreGamePass"),w=K(l),D=K(s),z=K(s),I=K(s),C=K(s),G=K(c),M=K(c),P((S=t((B=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return t=e.call.apply(e,[this].concat(o))||this,i(t,"label",S,a(t)),i(t,"itemNode",T,a(t)),i(t,"scoreNode",_,a(t)),i(t,"conditionNode",E,a(t)),i(t,"rewardNode",U,a(t)),i(t,"conditionAnimNode",F,a(t)),i(t,"tittleAnimNode",R,a(t)),t.conditionMap=void 0,t}n(t,e);var o=t.prototype;return o.start=function(){var e=this;this.scheduleOnce((function(){e.closeSelf();var t=h.prefab.adventureLevelPass;m.inst.addPopUpView(t.path,e.data)}),1.5)},o.onSetData=function(e){var t=this;this.itemNode.destroyAllChildren(),this.conditionAnimNode.play(),this.tittleAnimNode.play(),this.conditionMap=new Map;var n=this.data.manager.targetScore;if(this.data.manager.conditionType==N.Score)this.label.string=n,this.scoreNode.active=!1,this.itemNode.active=!1,this.scoreNode.setScale(.6,.6,1),u(this.scoreNode).delay(.083).call((function(){t.scoreNode.active=!0})).to(.167,{scale:new d(1.4,1.4,1)},{easing:"sineOut"}).to(.133,{scale:d.ONE},{easing:"sineOut"}).start();else if(this.data.manager.conditionType==N.Collect){this.itemNode.active=!0,this.scoreNode.active=!1;var i=this.data.manager.targetCollects,a=0,o=i.size-1;o>b.length-1&&(o=b.length-1);var r=b[i.size-1];i.forEach((function(e,n){var i=v(t.conditionNode),o=i.getComponent(g);o.setImageType(n),o.node.active=!0,o.node.setPosition(new d(0,32,0)),o.node.setParent(t.itemNode),t.conditionMap.set(n,o),a>r.length-1&&(a=r.length-1);var l=r[a];a++;var s=u(i).to(.167,{position:l},{easing:"sineOut"}),c=u(i).to(.167,{scale:new d(1.4,1.4,1)},{easing:"sineOut"}).to(.133,{scale:d.ONE},{easing:"sineOut"}).start();u(i).parallel(s,c).start()}));var l=this.itemNode.getComponent(p);l&&l.updateLayout(!0),this.itemNode.active=!0}var s=y.inst;A.instance.reportBI(L.level_finish,{level:e.level,result:0,stage:s.getLevelBatchNumber(),round:this.data.manager.getRound()})},t}(f)).prototype,"label",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=t(B.prototype,"itemNode",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=t(B.prototype,"scoreNode",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=t(B.prototype,"conditionNode",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=t(B.prototype,"rewardNode",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=t(B.prototype,"conditionAnimNode",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=t(B.prototype,"tittleAnimNode",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=B))||O));o._RF.pop()}}}));

System.register("chunks:///_virtual/AITipsAnim.ts",["./rollupPluginModLoBabelHelpers.js","cc","./NodePool.ts","./BlockEntity.ts","./BlockConstData.ts"],(function(t){var o,e,n,i,s,r,l,c,a,h,u,p,f;return{setters:[function(t){o=t.applyDecoratedDescriptor,e=t.inheritsLoose,n=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){s=t.cclegacy,r=t._decorator,l=t.Node,c=t.Tween,a=t.tween,h=t.Component},function(t){u=t.NodePoolManager},function(t){p=t.BlockEntity},function(t){f=t.BlockConstData}],execute:function(){var d,k,g,v,P;s._RF.push({},"e5cd5jEBhBBsZHDuSf4fU2C","AITipsAnim",void 0);var b=r.ccclass,y=r.property;t("AITipsAnim",(d=b("AITipsAnim"),k=y(l),d((P=o((v=function(t){function o(){for(var o,e=arguments.length,s=new Array(e),r=0;r<e;r++)s[r]=arguments[r];return o=t.call.apply(t,[this].concat(s))||this,n(o,"blockParent",P,i(o)),o.blocks=void 0,o}e(o,t);var s=o.prototype;return s.start=function(){},s.showTips=function(t,o,e,n){this.blocks||(this.blocks=[]),this.blocks&&this.blocks.forEach((function(t){u.inst.getPool("BlockEntityPool").put(t.node)})),this.blocks.length=0;var i=o.length;if(i<=0)console.error("异常的块配置",t);else{for(var s=.5*(o[0].length-1),r=.5*(i-1),l=f.BlockSpriteSize.x,c=0;c<o.length;c++)for(var a=0;a<o[c].length;a++){var h=o[c][a],d=u.inst.getPool("BlockEntityPool").get(),k=d.getComponent(p);d.parent=this.blockParent,this.blocks.push(k);var g=(a-s)*l,v=(r-c)*l;k.node.setPosition(g,v),k.node.active=!0,k.refreshColor(h,!0)}this.moveToTargetPosition(e,n)}},s.moveToTargetPosition=function(t,o){var e=this;c.stopAllByTarget(this.node),this.node.setPosition(t),a(this.node).repeatForever(a().to(1,{position:o},{easing:"circOut"}).delay(.333).call((function(){e.node.setPosition(t)})).delay(.01)).start()},s.hide=function(){this.node.active=!1,this.blocks&&this.blocks.forEach((function(t){u.inst.getPool("BlockEntityPool").put(t.node)})),this.blocks.length=0},o}(h)).prototype,"blockParent",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=v))||g));s._RF.pop()}}}));

System.register("chunks:///_virtual/AlbumData.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MKLocalStorage.ts"],(function(t){var n,e,s,u;return{setters:[function(t){n=t.createClass},function(t){e=t.cclegacy},function(t){s=t.getItem,u=t.setItem}],execute:function(){e._RF.push({},"94634GfS7NFBY9KTsGXwAoW","AlbumData",void 0);t("emStageStickerStatus",function(t){return t[t.not_started=0]="not_started",t[t.not_obtained=1]="not_obtained",t[t.obtained=2]="obtained",t[t.missed=3]="missed",t}({}));var a={1:"stage_1_unlock_status",2:"stage_2_unlock_status",3:"stage_3_unlock_status",4:"stage_4_unlock_status",5:"stage_5_unlock_status"};t("AlbumData",function(){function t(){}var e=t.prototype;return e.getStageStickerStatus=function(t){return s(a[t],0)},e.setStageStickerStatus=function(t,n){u(a[t],n)},n(t,null,[{key:"inst",get:function(){return null==t._inst&&(t._inst=new t),t._inst}}]),t}())._inst=null,e._RF.pop()}}}));

System.register("chunks:///_virtual/AlbumView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MK.ts","./PanelBase.ts","./AssetInfoDefine.ts","./UserAdventureLevelData.ts","./AlbumData.ts","./SocialDef.ts","./WechatMiniApi.ts","./Boot.ts"],(function(t){var e,i,a,n,r,s,h,c,o,l,S,u,g,d,m,f;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,a=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){r=t.cclegacy,s=t._decorator,h=t.Node},null,function(t){c=t.default},function(t){o=t.AssetInfoDefine},function(t){l=t.UserAdventureLevelData},function(t){S=t.AlbumData,u=t.emStageStickerStatus},function(t){g=t.emShareType,d=t.emSharePath},function(t){m=t.WechatMiniApi},function(t){f=t.audio}],execute:function(){var b,k,I,v,y,C,B,p,P;r._RF.push({},"7c3e7o2J/pFIZFs7B+v9s1+","AlbumView",void 0);var _=s.ccclass,L=s.property;t("AlbumView",(b=_("AlbumView"),k=L(h),I=L(h),v=L(h),b((B=e((C=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return e=t.call.apply(t,[this].concat(r))||this,a(e,"Items",B,n(e)),a(e,"Labels",p,n(e)),a(e,"NotStarted",P,n(e)),e.currentSticker=void 0,e}i(e,t);var r=e.prototype;return r.onLoad=function(){this.setMaskLayerEnable(!1)},r.start=function(){l.inst.getLevelBatchNumber();for(var t=1;t<=5;t++){var e=S.inst.getStageStickerStatus(t);e==u.not_started?(this.Items.getChildByPath("Item"+t.toString()).active=!1,this.NotStarted.getChildByPath("Sprite"+t.toString()).active=!0,this.Labels.getChildByPath("Label"+t.toString()).active=!1):(this.Items.getChildByPath("Item"+t.toString()).active=!0,this.NotStarted.getChildByPath("Sprite"+t.toString()).active=!1,e==u.not_obtained?(this.Labels.getChildByPath("Label"+t.toString()).active=!0,this.Items.getChildByPath("Item"+t.toString()+"/notobtained").active=!1,this.Items.getChildByPath("Item"+t.toString()+"/askfriend").active=!1,this.Items.getChildByPath("Item"+t.toString()+"/image").active=!1):e==u.obtained?(this.Labels.getChildByPath("Label"+t.toString()).active=!0,this.Items.getChildByPath("Item"+t.toString()+"/image").active=!0,this.Items.getChildByPath("Item"+t.toString()+"/notobtained").active=!1,this.Items.getChildByPath("Item"+t.toString()+"/askfriend").active=!1):e==u.missed&&(this.Labels.getChildByPath("Label"+t.toString()).active=!1,this.Items.getChildByPath("Item"+t.toString()+"/askfriend").active=!0,this.Items.getChildByPath("Item"+t.toString()+"/notobtained").active=!0,this.Items.getChildByPath("Item"+t.toString()+"/image").active=!1))}},r.SetStickerObtained=function(t){this.currentSticker=t},r.OnShareCallBack=function(){S.inst.setStageStickerStatus(this.currentSticker,u.obtained),this.Items.getChildByPath("Item"+this.currentSticker.toString()).active=!0,this.NotStarted.getChildByPath("Sprite"+this.currentSticker.toString()).active=!1,this.Labels.getChildByPath("Label"+this.currentSticker.toString()).active=!0,this.Items.getChildByPath("Item"+this.currentSticker.toString()+"/image").active=!0,this.Items.getChildByPath("Item"+this.currentSticker.toString()+"/notobtained").active=!1,this.Items.getChildByPath("Item"+this.currentSticker.toString()+"/askfriend").active=!1},r.onClickShare1=function(){this.SetStickerObtained(1),m.getInstance().showShare(g.s_10001,d.sticker_request_friend,this,this.OnShareCallBack)},r.onClickShare2=function(){this.SetStickerObtained(2),m.getInstance().showShare(g.s_10001,d.sticker_request_friend,this,this.OnShareCallBack)},r.onClickShare3=function(){this.SetStickerObtained(3),m.getInstance().showShare(g.s_10001,d.sticker_request_friend,this,this.OnShareCallBack)},r.onClickShare4=function(){this.SetStickerObtained(4),m.getInstance().showShare(g.s_10001,d.sticker_request_friend,this,this.OnShareCallBack)},r.onClickShare5=function(){this.SetStickerObtained(5),m.getInstance().showShare(g.s_10001,d.sticker_request_friend,this,this.OnShareCallBack)},r.onClickClose=function(){f.playSubSound(o.audio.touch),this.closeSelf()},e}(c)).prototype,"Items",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=e(C.prototype,"Labels",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=e(C.prototype,"NotStarted",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=C))||y));r._RF.pop()}}}));

System.register("chunks:///_virtual/AndroidNative.ts",["./rollupPluginModLoBabelHelpers.js","cc","./JsbNativeCall.ts","./SdkBase.ts"],(function(n){var t,i,o,e;return{setters:[function(n){t=n.inheritsLoose},function(n){i=n.cclegacy},function(n){o=n.JsbNativeCall},function(n){e=n.SdkBase}],execute:function(){i._RF.push({},"cf947srjE5Fkaz+seAqD4bF","AndroidNative",void 0);n("AndroidNative",function(n){function i(){return n.apply(this,arguments)||this}t(i,n);var e=i.prototype;return e.showToast=function(n,t){void 0===t&&(t=1),o.exec("Toast","show",{msg:n,duration:t})},e.showLoading=function(n){},e.hideToast=function(){},e.hideLoading=function(){},e.isIpx=function(){return!1},e.is2To1=function(){return!1},e.isPad=function(){return!1},i}(e));i._RF.pop()}}}));

System.register("chunks:///_virtual/AssetInfoDefine.ts",["cc"],(function(e){var r;return{setters:[function(e){r=e.cclegacy}],execute:function(){r._RF.push({},"2fe05HQHGhKUIpbbrWoYSnM","AssetInfoDefine",void 0);e("AssetInfoDefine",{prefab:{template:{path:"",bundle:""},levelPass:{path:"res/prefab/LevelGamePass",bundle:"block"},adventureFinishAll:{path:"res/prefab/LevelFinishedAll",bundle:"block"},adventureLevelPass:{path:"res/prefab/LevelGamePass",bundle:"block"},levelOver:{path:"res/prefab/LevelGameOver",bundle:"block"},levelPassPre:{path:"res/prefab/LevelGamePreGamePass",bundle:"block"},levelOverPre:{path:"res/prefab/LevelGamePreGameOver",bundle:"block"},endlessOver:{path:"res/prefab/EndlessGameOverView",bundle:"block"},enlessPreOver:{path:"res/prefab/EndlessGamePreGameOver",bundle:"block"},endlessBest:{path:"res/prefab/EndlessBestScoreView",bundle:"block"},friendListRank:{path:"res/prefab/FriendRankListView",bundle:"block"},setting:{path:"res/prefab/SettingView",bundle:"block"},settingSimple:{path:"res/prefab/SettingSimpleView",bundle:"block"},loginReward:{path:"res/prefab/LoginRewardView",bundle:"block"},policy:{path:"res/prefab/PolicyView",bundle:"block"},revive:{path:"res/prefab/ReviveView",bundle:"block"},comboScore:{path:"res/prefabs/ef_combo_pb",bundle:"block"},comboAni:{path:"res/prefabs/effect_art/effect/UI_effect_combo_qipan",bundle:"block"},newGuide:{path:"res/prefabs/guide/new_guide",bundle:"block"},addScore:{path:"res/prefabs/eui_getscore_pb",bundle:"block"},cool:{path:"res/prefabs/effect_art/effect/ef_score_pb",bundle:"block"},new_guide_light_1:{path:"res/effectres/guide/eui_guidefk1_bgle_pb",bundle:"block"},new_guide_bubble_1:{path:"res/effectres/guide/eui_guidefk1_particle",bundle:"block"},new_guide_light_2:{path:"res/effectres/guide/eui_guidefk2_bgle_pb",bundle:"block"},new_guide_bubble_2:{path:"res/effectres/guide/eui_guidefk2_particle",bundle:"block"},newRecord:{path:"res/prefabs/effect_art/effect/ef_breakrecords_pb",bundle:"block"},clear_all:{path:"res/prefabs/effect_art/effect/eui_score_content_cleanup_pb",bundle:"block"},diffult_change:{path:"res/prefabs/effect_art/effect/ef_difficulty_pb",bundle:"block"},adventure_btn:{path:"res/prefab/adventure/level_btn",bundle:"block"},adventure_num_dark:{path:"res/prefab/adventure/level_num_dark",bundle:"block"},adventure_num_normal:{path:"res/prefab/adventure/level_num_normal",bundle:"block"},reachPercent:{path:"res/prefabs/effect_art/effect/ef_reachpercent",bundle:"block"},ef_ai_tips_hand:{path:"res/effectres/guide/ef_ai_tips_hand",bundle:"block"},album:{path:"res/prefab/album",bundle:"block"},ef_AdventureSticker_fk_light:{path:"res/prefabs/effect_art/effect/ef_AdventureSticker_fk_light",bundle:"block"},useProp:{path:"res/prefab/UsePropsView",bundle:"block"},useHammerAnim:{path:"res/effectres/prop/eui_prop_hammer_pb",bundle:"block"},useHammerEffect:{path:"res/effectres/prop/ef_prop_hammer_particle_02",bundle:"block"},hrocketEffect:{path:"res/effectres/prop/eui_rocket_horizontal_pb",bundle:"block"},vrocketEffect:{path:"res/effectres/prop/eui_rocket_verticle_pb",bundle:"block"},blockBrokenEffect:{1:{path:"res/effectres/prop/ef_fk_broken_blue_particle",bundle:"block"},2:{path:"res/effectres/prop/ef_fk_broken_yellow_particle",bundle:"block"},3:{path:"res/effectres/prop/ef_fk_broken_purple_particle",bundle:"block"},4:{path:"res/effectres/prop/ef_fk_broken_orange_particle",bundle:"block"},5:{path:"res/effectres/prop/ef_fk_broken_red_particle",bundle:"block"},6:{path:"res/effectres/prop/ef_fk_broken_green_particle",bundle:"block"},7:{path:"res/effectres/prop/ef_fk_broken_skyblue_particle",bundle:"block"}}},spriteFrame:{},audio:{arrow:"arrow",number:"number",combo_0:"s_combo_0",combo_1:"s_combo_1",combo_2:"s_combo_2",combo_3:"s_combo_3",combo_4:"s_combo_4",combo_5:"s_combo_5",combo_6:"s_combo_6",fail:"game_over",new_record:"s_new_record",put:"s_put",rate:"s_rate",restart:"s_restart",touch:"s_button",clear_1:"s_clear",clear_2:"s_good",clear_3:"s_great",clear_4:"s_excellent",clear_5:"s_amazing",clear_6:"s_unbeliveable",diamon_out:"diamon_out",diamond_collect:"diamond_collect",level_finish:"s_new_record",game_over:"s_fail",block_put:"s_put",block_pick:"s_touch",block_game_bgm:"russia_block_bg",login_effect:"logging_scece4_mp3",tmp_bgm:"bgm_tmp",hammer:"s_hammer",rocket:"s_rocket",refresh:"s_refresh"}});r._RF.pop()}}}));

System.register("chunks:///_virtual/AudioDefine.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"aec7f26vgtDar/c7VQFaXTO","AudioDefine",void 0);e("AudioKey",{BTN_CLICK_EFFECT:"s_button"});t._RF.pop()}}}));

System.register("chunks:///_virtual/BIDefine.ts",["cc"],(function(e){var _;return{setters:[function(e){_=e.cclegacy}],execute:function(){_._RF.push({},"a9767FhXidPArAcJxz4oZrs","BIDefine",void 0);e("emAdStatus",function(e){return e[e.WakeUp=1]="WakeUp",e[e.Closed=2]="Closed",e[e.Finished=3]="Finished",e[e.Error=4]="Error",e}({})),e("emButtonType",function(e){return e[e.enter_adventure=1]="enter_adventure",e[e.enter_classic=2]="enter_classic",e[e.enter_settings=3]="enter_settings",e[e.click_settings_home=4]="click_settings_home",e[e.click_settings_replay=5]="click_settings_replay",e[e.click_adventure_start=6]="click_adventure_start",e[e.click_adventure_next_level=7]="click_adventure_next_level",e[e.click_adventrue_rechallenge=8]="click_adventrue_rechallenge",e[e.enter_leaderboard=9]="enter_leaderboard",e[e.enter_mysticker=10]="enter_mysticker",e}({})),e("emButtonScene",function(e){return e[e.from_home=1]="from_home",e[e.from_classic=2]="from_classic",e[e.from_adventure=3]="from_adventure",e[e.from_settings=4]="from_settings",e[e.from_fail_classic=5]="from_fail_classic",e[e.from_new_record_classic=6]="from_new_record_classic",e[e.from_adventure_choose_level=7]="from_adventure_choose_level",e[e.from_adventure_pass=8]="from_adventure_pass",e[e.from_adventrue_fail=9]="from_adventrue_fail",e}({})),e("BIEventID",{af_complete_registration:"af_complete_registration",af_login:"af_login",agree_policy:"af_agree_policy",loading_done:"af_loading_done",af_gudie_begin:"af_gudie_begin",af_gudie_end:"af_gudie_end",af_classicgame:"af_classicgame",af_adventuregame:"af_adventuregame",af_ad_reward_finish:"af_ad_reward_finish",af_ad_interstitial_finish:"af_ad_interstitial_finish",af_ad_interstitial:"af_ad_interstitial",af_ad_watch_times:"af_ad_watch_times",af_ad_5times:"af_ad_5times",af_ad_10times:"af_ad_10times",af_ad_revivie_classic:"af_ad_revivie_classic",af_ad_revivie_adventure:"af_ad_revivie_adventure",guide_step:"af_guide_step",guide_done:"guide_done",classic_enter:"af_classic_enter",classic_start:"af_classic_start",classic_exit:"af_classic_exit",classic_restart:"classic_restart",classic_newrecord:"af_classic_newrecord",classic_finish:"af_classic_finish",classic_clear_all:"classic_clear_all",level_clear_all:"level_clear_all",level_enter:"af_level_enter",level_start:"af_level_start",level_exit:"level_exit",level_restart:"level_restart",level_finish:"af_level_finish",level_replay:"level_replay",ad_refresh_block:"af_ad_refresh_block",ad_refresh_all_block:"af_ad_refresh_all_block",ad_revivie:"af_ad_revivie",ad_unlock_hammer:"af_ad_unlock_hammer",ad_unlock_rocket_h:"af_ad_unlock_rocket_h",ad_unlock_rocket_v:"af_ad_unlock_rocket_v",item_use_change_all:"af_af_item_use_change",btn_click:"btn_click",ad_begin:"af_ad_begin",ad_item:"af_ad_item",ai_tips:"ai_tips",share_click:"share_click"}),e("emPropType",function(e){return e[e.none=0]="none",e[e.hammer=1]="hammer",e[e.v_rocket=2]="v_rocket",e[e.h_rocket=3]="h_rocket",e[e.refresh_block=4]="refresh_block",e}({})),e("emScene",function(e){return e[e.none=0]="none",e[e.main_scene=1]="main_scene",e[e.not_using=2]="not_using",e[e.not_using2=3]="not_using2",e[e.setting_scene=4]="setting_scene",e[e.classic_fail_scene=5]="classic_fail_scene",e[e.classic_new_record_scene=6]="classic_new_record_scene",e}({}));_._RF.pop()}}}));

System.register("chunks:///_virtual/BlockConstData.ts",["cc"],(function(e){var o,c,n,_;return{setters:[function(e){o=e.cclegacy,c=e.Vec2,n=e.Vec3,_=e.Color}],execute:function(){o._RF.push({},"621cayS92xFG4ef9X1yrswB","BlockConstData",void 0);e("BlockConstData",{BlockSize:new c(80,80),BlockSpriteSize:new c(84,84),PreviewBlockSize:new c(400,400),BoardSize:new c(672,672),BoardWidth:8,BoardHeight:8,TuoDongBeiLv:1,BlockParam:{clickTime:.03},BlockSpawnScale:.5,BlockSpawnVector:new n(.5,.5,1),BlockDiamondScale:new n(.7,.7,1),BlockGenOffsetX:[-225,0,237],BlockMoveLerpSpeed:12,BlockMoveOpenDrag:!1,BlockColor:[new _(74,145,255,255),new _(255,225,0,255),new _(221,150,255,255),new _(255,165,0,255),new _(248,98,120,255),new _(159,255,0,255),new _(0,243,255,255)],BlockTempColor:(new _).fromHEX("#888888"),BlockScoreDesc:["太棒了！","技术一流！","完美消除！","令人惊叹！","难以置信！","难以置信！","难以置信！","难以置信！"],BlockScoreDescPic:["UI_Score_content_1","UI_Score_content_2","UI_Score_content_3","UI_Score_content_4","UI_Score_content_5","UI_Score_content_5"],BlockDiamondShadow:{b101:"UI_Gem_blueshadow@UI_Gem",b102:"UI_Gem_orangeshadow@UI_Gem",b103:"UI_Gem_purpleshadow@UI_Gem",b104:"UI_Gem_pinkshadow@UI_Gem",b105:"UI_Gem_yellowshadow@UI_Gem",b106:"UI_Gem_greenshadow@UI_Gem"},CollectScale1:new n(1.2,1.2,1),CollectScale2:new n(.82,.82,1)});o._RF.pop()}}}));

System.register("chunks:///_virtual/BlockEntity.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BlockConstData.ts","./UserAdventureLevelData.ts","./MK.ts","./Event.ts","./MKEvent.ts"],(function(e){var t,i,l,o,r,a,c,s,n,p,h,d,u,S,y,f,m,k;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,l=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){r=e.cclegacy,a=e._decorator,c=e.SpriteAtlas,s=e.Node,n=e.Sprite,p=e.UIOpacity,h=e.Color,d=e.tween,u=e.UITransform,S=e.Component},function(e){y=e.BlockConstData},function(e){f=e.UserAdventureLevelData},null,function(e){m=e.BlockEventType},function(e){k=e.sendEvent}],execute:function(){var b,v,g,B,T,C,w,A,F,N,D,M,z,W,E,O,L,x,I,R,_,H,U,K,V;r._RF.push({},"7b6f9zOtcRFaZVVYxkSerwM","BlockEntity",void 0);var G=a.ccclass,P=a.property;e("BlockEntity",(b=G("BlockEntity"),v=P(c),g=P(c),B=P(c),T=P(c),C=P(c),w=P(c),A=P(s),F=P(n),N=P(n),D=P(p),M=P(n),b((E=t((W=function(e){function t(){for(var t,i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return t=e.call.apply(e,[this].concat(r))||this,l(t,"atlasBlocks",E,o(t)),l(t,"selectAtlasBlocks1",O,o(t)),l(t,"selectAtlasBlocks2",L,o(t)),l(t,"selectAtlasBlocks3",x,o(t)),l(t,"selectAtlasBlocks4",I,o(t)),l(t,"selectAtlasBlocks5",R,o(t)),l(t,"shadowNode",_,o(t)),l(t,"bgSprite",H,o(t)),t.levelSelectBlockAtlasMap=void 0,t.blockType=0,t.blockColor=0,t.row=0,t.col=0,t.idx=0,t.temporary=!1,t.targetNodeIndex=void 0,l(t,"placeholderSprite",U,o(t)),l(t,"placeholderOpacity",K,o(t)),l(t,"frontSprite",V,o(t)),t.opacityTween=null,t}i(t,e);var r=t.prototype;return r.onLoad=function(){this.levelSelectBlockAtlasMap||(this.levelSelectBlockAtlasMap=new Map,this.levelSelectBlockAtlasMap.set(1,this.selectAtlasBlocks1),this.levelSelectBlockAtlasMap.set(2,this.selectAtlasBlocks2),this.levelSelectBlockAtlasMap.set(3,this.selectAtlasBlocks3),this.levelSelectBlockAtlasMap.set(4,this.selectAtlasBlocks4),this.levelSelectBlockAtlasMap.set(5,this.selectAtlasBlocks5)),this.node.on(s.EventType.TOUCH_START,this.onClickBlock,this)},r.getSpriteFrameNameWithType=function(e){return this.atlasBlocks.getSpriteFrame("b"+e)},r.getLevelSelectSpriteFrameName=function(e,t){return this.levelSelectBlockAtlasMap&&this.levelSelectBlockAtlasMap.has(e)?this.levelSelectBlockAtlasMap.get(e).getSpriteFrame("b"+t):null},r.getDiamondBgWithType=function(e){return this.atlasBlocks.getSpriteFrame(y.BlockDiamondShadow["b"+e])},r.setLevelBlockColor=function(e){this.blockColor=e},r.setCoord=function(e,t,i){this.row=e,this.col=t,this.idx=i},r.refreshByMoveBlock=function(e,t){void 0===t&&(t=!1),e>1e3?(this.bgSprite.node.active=!1,this.placeholderSprite.node.active=!0,this.frontSprite.node.active=!0,this.frontSprite.spriteFrame=this.getSpriteFrameNameWithType(e),1101==this.idx&&(this.node.angle=90),this.blockType>0?this.placeholderSprite.spriteFrame=this.getSpriteFrameNameWithType(this.blockType):this.placeholderSprite.spriteFrame=null):this.refreshColor(e,t)},r.refreshColor=function(e,t){if(void 0===t&&(t=!1),this.blockType=e,this.blockColor=e,this.shadowNode.active=!1,this.bgSprite.spriteFrame=this.getSpriteFrameNameWithType(14),e>1e3)this.frontSprite.node.active=!1,this.bgSprite.node.active=!1,this.placeholderSprite.node.active=!0,this.placeholderSprite.spriteFrame=this.getSpriteFrameNameWithType(e);else if(e>100&&e<1e3){this.placeholderSprite.node.active=!1,this.bgSprite.node.active=!0,this.frontSprite.node.active=!0,this.frontSprite.spriteFrame=this.getSpriteFrameNameWithType(e),this.placeholderSprite.node.setScale(y.BlockDiamondScale.x,y.BlockDiamondScale.y,1),this.frontSprite.node.setScale(y.BlockDiamondScale.x,y.BlockDiamondScale.y,1),this.shadowNode.getComponent(n).spriteFrame=this.getDiamondBgWithType(e),this.shadowNode.active=!0,this.shadowNode.setScale(y.BlockDiamondScale.x,y.BlockDiamondScale.y,1),this.blockType}else this.frontSprite.node.active=!1,this.bgSprite.node.active=!1,this.placeholderSprite.node.setScale(1,1,1),this.placeholderSprite.node.active=!0,this.placeholderSprite.spriteFrame=e>0?this.getSpriteFrameNameWithType(e):null;this.temporary=t,t?(this.placeholderSprite.color=y.BlockTempColor,this.placeholderOpacity.opacity=150,this.bgSprite.node.getComponent(p).opacity=150):(this.placeholderSprite.color=h.WHITE,this.placeholderOpacity.opacity=255,this.bgSprite.node.getComponent(p).opacity=255)},r.onlyRefreshColor=function(e,t){void 0===t&&(t=!1),this.blockType>100&&(this.placeholderSprite.node.active=!0),this.placeholderSprite.spriteFrame=this.getSpriteFrameNameWithType(e),this.placeholderSprite.color=h.WHITE,this.placeholderOpacity.opacity=t?150:255},r.onlyRefreshColorWithTween=function(e,t){void 0===t&&(t=!1),this.onlyRefreshColor(e,t),this.opacityTween=d(this.placeholderOpacity).repeatForever(d().to(1,{opacity:200},{easing:"circOut"}).delay(.2).to(1,{opacity:0},{easing:"circOut"}).delay(.2)),this.opacityTween.start()},r.stopOpacityTween=function(e,t){this.opacityTween.stop(),this.onlyRefreshColor(e)},r.resetScale=function(e){this.placeholderSprite.node.active&&this.placeholderSprite.node.setScale(1,1,1)},r.refreshBorder=function(e,t,i,l,o,r,a,c){},r.clearColor=function(){this.placeholderSprite.node.active=!1,this.frontSprite.node.active=!1},r.clearColorAndGem=function(){},r.setAlpha=function(e){e=(e=e<0?0:e)>1?1:e,this.placeholderSprite.color=new h(255,255,255,255*e)},r.onDestroy=function(){this.resetData()},r.resetData=function(){this.targetNodeIndex=null,this.temporary=!1,this.blockType=0},r.setGrey=function(){this.placeholderSprite.spriteFrame=this.getSpriteFrameNameWithType(13)},r.getRealBlockType=function(){return this.blockColor},r.refreshColorSelectLevel=function(e){var t=f.inst.getLevelBatchNumber();this.blockType=e,this.blockColor=e,this.shadowNode.active=!1,this.bgSprite.spriteFrame=this.getSpriteFrameNameWithType(14),this.bgSprite.node.active=!1,this.node.getComponent(u).setContentSize(32,32),this.placeholderSprite.node.getComponent(u).setContentSize(32,32),this.placeholderSprite.node.active=!0,this.placeholderSprite.spriteFrame=this.getLevelSelectSpriteFrameName(t,e),this.placeholderSprite.color=h.WHITE,this.placeholderOpacity.opacity=255,this.bgSprite.node.getComponent(p).opacity=255},r.onClickBlock=function(){k(m.EVENT_BLOCK_CLICKED,this.row,this.col)},t}(S)).prototype,"atlasBlocks",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=t(W.prototype,"selectAtlasBlocks1",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=t(W.prototype,"selectAtlasBlocks2",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=t(W.prototype,"selectAtlasBlocks3",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=t(W.prototype,"selectAtlasBlocks4",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=t(W.prototype,"selectAtlasBlocks5",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=t(W.prototype,"shadowNode",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=t(W.prototype,"bgSprite",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),U=t(W.prototype,"placeholderSprite",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),K=t(W.prototype,"placeholderOpacity",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),V=t(W.prototype,"frontSprite",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=W))||z));r._RF.pop()}}}));

System.register("chunks:///_virtual/BlockEventManager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var n,e,i,s;return{setters:[function(t){n=t.inheritsLoose,e=t.createClass},function(t){i=t.cclegacy,s=t.EventTarget}],execute:function(){i._RF.push({},"bcea9UJuSlORJnC4DW0vteK","BlockEventManager",void 0),t("BlockEventManager",function(t){function i(){return t.apply(this,arguments)||this}n(i,t);var s=i.prototype;return s.listen=function(t,n,e){return this.on(t,n,e,!1),this},s.unlisten=function(t,n,e){return this.off(t,n,e),this},s.listenOnce=function(t,n,e){return this.once(t,n,e),this},e(i,null,[{key:"instance",get:function(){return this._inst||(this._inst=new i),this._inst}}]),i}(s))._inst=void 0,i._RF.pop()}}}));

System.register("chunks:///_virtual/BlockFillMaster.ts",["cc","./BlockConstData.ts"],(function(r){var t,e;return{setters:[function(r){t=r.cclegacy},function(r){e=r.BlockConstData}],execute:function(){t._RF.push({},"46e69z3bXVEQIs8zlNsZHC/","BlockFillMaster",void 0);r("BlockFillMaster",function(){function r(){this.fillMaxResult=null,this.tableMatrix=void 0,this.tempMatrix=void 0,this.sameResArr=void 0}var t=r.prototype;return t.getMinClearFullNum=function(){return 1},t.getMinMatrixRes=function(){return 0},t.computeFillMatrixMaxNum=function(r,t,e){for(var l=0,n=0,i=1;i<t;i++){for(var a=!0,u=0;u<e;u++)1==r[i][u]&&0!=r[i-1][u]&&(r[i][u]+=r[i-1][u],r[i][u]==t&&l++),a=a&&r[i][u]>0;a&&n++}for(var o=0,f=0;f<t;f++){var s=[],c=1,h=r[f][0];for(s.push(0);c<e||c==e&&0!=s.length;)if(c!=e&&(0==s.length||r[f][c]>=r[f][s[s.length-1]]))s.push(c),c++;else{var v=r[f][s[s.length-1]];s.pop();var m=0!=s.length?v*(c-s[s.length-1]-1):v*c;h=Math.max(m,h)}o=Math.max(h,o)}var x=n+l;return this.fillMaxResult?(this.fillMaxResult.res=o,this.fillMaxResult.fillFull=x):this.fillMaxResult={res:o,fillFull:x},this.fillMaxResult},t.newCopyArr=function(r){return r.slice().map((function(r){return r.slice()}))},t.recommendFillMatrix=function(r,t,l,n,i,a,u,o){var f=this,s=e.BoardWidth,c=s-1;this.tableMatrix||(this.tableMatrix=Array.from({length:s},(function(){return Array.from({length:s},(function(){return 0}))})),this.tempMatrix=Array.from({length:s},(function(){return Array.from({length:s},(function(){return 0}))})));for(var h=0;h<s;h++)for(var v=0;v<s;v++){var m=r[h][v];this.tableMatrix[h][v]=m>0?1:0}var x=[],p=window.BlockConst;return t.forEach((function(r){if(!(a.indexOf(r.index)>-1)){var t=r.index-1;if(!(a&&a.indexOf(r.index)>-1)){var e=p[t];if(e)for(var l=e.simple,n=e.id,h=0;h<s;h++)for(var v=0;v<s;v++){for(var m=h,g=v,M=f.tableMatrix,d=f.newCopyArr(M),R=!0,F=0;F<l.length;F++){for(var k=l[F],A=0;A<k.length;A++){var b=m+F,B=g+A,y=k[A];if(b>c||B>c||0!=M[b][B]&&y>0){R=!1;break}if(i){var C=100*b+B;i.indexOf(C)>-1&&(R=!1)}}if(!R)break}if(R){for(var w=0;w<l.length;w++)for(var E=l[w],I=0;I<E.length;I++){var N=m+w,S=g+I,W=E[I];W>0&&(d[N][S]=W)}var j=f.computeFillMatrixMaxNum(d,s,s),O=j.res,_=j.fillFull;(O>=o||_>=u)&&(x.push({blockIndex:n,pc:m,pj:g,res:O,fillFull:_,simple:e.simple,count:e.count}),o=Math.max(O,o),u=Math.max(u,_))}}}}})),x},t.generateRecommendBlock=function(r,t,e,l,n,i,a,u){var o=this.recommendFillMatrix(r,t,e,l,n,i,a,u);if(0==o.length)return null;var f=this.computeRecommendBlock(o,a,u);if(null==f)return null;var s=[f];if(1==e)return s;if(2==e)if(1==l){for(var c=this.tempMatrix,h=0;h<r.length;h++)for(var v=0;v<r[h].length;v++)c[h][v]=r[h][v];for(var m=f.pc,x=f.pj,p=f.simple,g=0;g<p.length;g++)for(var M=p[g],d=0;d<M.length;d++){var R=m+g,F=x+d,k=M[d];k>0&&(c[R][F]=k)}var A=[f.blockIndex];i&&(A=A.concat(i));var b=this.generateRecommendBlock(c,t,1,0,[],A,a,u);if(b)return s.concat(b)}else if(2==l){for(var B=[],y=f.pc,C=f.pj,w=f.simple,E=0;E<w.length;E++)for(var I=w[E],N=0;N<I.length;N++){var S=y+E,W=C+N;I[N]>0&&B.push(100*S+W)}var j=[f.blockIndex];i&&(j=j.concat(i));var O=this.generateRecommendBlock(r,t,1,0,B,j,a,u);if(O)return s.concat(O)}return s},t.computeRecommendBlock=function(r,t,e){var l=t>0?r.filter((function(r){return r.fillFull>=t})):[];if(l.length>0){l.sort((function(r,t){return t.fillFull!==r.fillFull?t.fillFull-r.fillFull:t.res-r.res}));var n=this.randomResultWhenResSame(l,1);if(n)return n}var i=e>0?r.filter((function(r){return r.res>=e})):r;i.sort((function(r,t){return t.fillFull!==r.fillFull?t.fillFull-r.fillFull:t.res-r.res}));var a=this.randomResultWhenResSame(i,2);return a||null},t.randomResultWhenResSame=function(r,t){if(0==r.length)return null;if(1==r.length)return r.shift();var e=r[0];this.sameResArr||(this.sameResArr=new Array);var l=this.sameResArr;if(1==t?r.forEach((function(r){r.fillFull==e.fillFull&&l.push(r)})):2==t&&r.forEach((function(r){r.res==e.res&&l.push(r)})),1==l.length)return l.shift();l.sort((function(r,t){return r.count-t.count}));var n=l.shift();return this.sameResArr.length=0,n},t.reloadArray=function(r,t){for(var e=[],l=0;l<t;l++){var n=t>r.length?r.length:t,i=r.splice(0,n);e.push(i)}return e},t.clear=function(){this.tableMatrix=null,this.sameResArr=null,this.fillMaxResult=null},r}());t._RF.pop()}}}));

System.register("chunks:///_virtual/BlockGenerate.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BlockType.ts","./BlockFillMaster.ts","./MK.ts","./UserData.ts","./MKResCtr.ts"],(function(e){var n,o,t,i,r,l,c,s,u,a,h,f;return{setters:[function(e){n=e.inheritsLoose},function(e){o=e.cclegacy},function(e){t=e.HardBlocks,i=e.HardExBlocks,r=e.BigBlocks,l=e.EasyBlocks,c=e.SimpleBlocks,s=e.RoundCdBlocks,u=e.ReviviBlocks},function(e){a=e.BlockFillMaster},null,function(e){h=e.UserData},function(e){f=e.MKSubResCtr}],execute:function(){o._RF.push({},"7892ev10uhEW7my9tfXH2rO","BlockGenerate",void 0);var d=e("BaseBlockGenerate",function(){function e(e,n,o){this.random=void 0,this.scHelper=void 0,this.random=e,this.scHelper=n}var n=e.prototype;return n.getNextBlockType=function(e,n){return 1},n.getNextPreviewBlocks=function(e,n){return 1},n.getPreviewBlocks=function(e,n,o,t,i,r,l,c){return null},n.setHistoryData=function(e){},n.getPreviewBlocksAfterRelife=function(e,n,o,t){return null},n.getAdRefreshBlockIndex=function(e,n,o,t){return 1},n.checkData=function(e){},e}());e("BlockGenerate001",function(e){n(d,e);var o=d.prototype;function d(n,o,t,i){var r;void 0===i&&(i="res/configs/score_block"),(r=e.call(this,n,o,t)||this).configs=void 0,r.round=0,r.scoreGroups=void 0,r.blockWightsTable=void 0,r.blockTotalWightsTable=void 0,r.blockFill=void 0,r.randomAllTimes=0,r.recommendSimpleTimes=0,r.enterDangerousTimes=0,r.diffLevel=0,r.failLevelTimes=0,r.isFirstPlay=!1,r.round=0,r.blockFill=new a;var l=f.loadJsonConfig(i);r.scoreGroups=new Array(l.length),r.blockWightsTable=new Map,r.blockTotalWightsTable=new Map;var c=h.inst;r.isFirstPlay=c.isFirstPlay||c.isFirstLoginToday&&0==c.onlinePlayTimes;for(var s=0;s<l.length;s++){var u=l[s];r.scoreGroups[s]=u.score;for(var d=new Array(u.count),g=0,k=0;k<u.count;k++){var v=k+1,b=r.isRoundControllBlock(v)?3:0,B=u[""+v];B>0&&(g+=B,d[k]={index:v,weight:B,cdRound:b,genRound:-1})}r.blockWightsTable.set(s,d),r.blockTotalWightsTable.set(s,g)}return r.configs=l,r}return o.setHistoryData=function(e){this.round=e.round||0},o.isRoundControllBlock=function(e){return t.indexOf(e)>-1||i.indexOf(e)>-1||r.indexOf(e)>-1||l.indexOf(e)>-1},o.isCanWeightUpBlock=function(e){return c.indexOf(e)>-1},o.initGenetateFill=function(){return!0},o.getPreviewBlocksAfterRelife=function(e,n,o,t){this.round++,console.log("当前调难度依据：复活 当前难度: 复活算法");for(var i=0,r=0;r<this.scoreGroups.length;r++){if(e<this.scoreGroups[r]){i=r;break}}return this.computePreviwBlocks(o,t,i,2,1,[],[],[],1,0)},o.getAdRefreshBlockIndex=function(e,n,o){for(var t=0,i=0;i<this.scoreGroups.length;i++){if(e<this.scoreGroups[i]){t=i;break}}var r=this.blockWightsTable.get(t).filter((function(e){e.index;return e.weight>0})),l=this.blockFill.generateRecommendBlock(n,r,1,0,[],o,1,0);return l.length>0?l.shift().blockIndex:1},o.randByWeight=function(e,n){for(var o=0,t=0;t<n.length;t++){var i=n[t];null!=i.roundWeight&&-1!=i.roundWeight?o+=i.roundWeight:o+=i.weight}var r=0;if(o<=0)return r;for(var l=this.getRandomIntInclusive(1,o),c=0;c<n.length;c++){var s=n[c],u=null!=s.roundWeight&&-1!=s.roundWeight?s.roundWeight:s.weight;if(l<=u){r=c;break}l-=u}return r},o.getRandomIntInclusive=function(e,n){return e=Math.ceil(e),n=Math.floor(n),Math.floor(Math.random()*(n-e+1))+e},o.getBlockAiTipCoord=function(e,n,o){var t=this;return void 0===o&&(o=0),new Promise((function(i,r){var l=t.blockFill.generateRecommendBlock(e,[{index:n,weight:100}],1,0,[],[],o,0);0!=l.length?i(t.blockFill.computeRecommendBlock(l,o,0)):r(null)}))},o.computePreviwBlocks=function(e,n,o,t,i,r,l,c,a,h){var f=this,d=this.blockWightsTable.get(o),g=d.filter((function(e){return f.isRoundControllBlock(e.index)?e.weight>0&&f.round-e.genRound>e.cdRound:e.weight>0})),k=[];c&&c.length>0&&(k=c);var v=!1;if(0==k.length){if(t>0){var b=this.blockFill.generateRecommendBlock(e,g,t,i,r,l,a,h);b&&b.length>0&&b.forEach((function(e){k.length<3&&(k.push(e.blockIndex),v||(v=e.fillFull>3||e.res>32))}))}}else if(2==k.length){t=1,l=l.concat(k);var B=this.blockFill.generateRecommendBlock(e,g,t,i,r,l,a,h);B&&B.length>0&&B.forEach((function(e){k.length<3&&(k.push(e.blockIndex),v||(v=e.fillFull>3||e.res>32))}))}var m=3-k.length;g=g.filter((function(e){return!(k.indexOf(e.index)>-1||l.indexOf(e.index)>-1||e.cdRound>0&&f.round-e.genRound<e.cdRound)})),k.forEach((function(e){f.isRoundControllBlock(e)&&(l=l.concat(s))}));for(var p=[],x=0;x<m;x++){var R=(g=g.filter((function(e){return!(p.indexOf(e.index)>-1||l.indexOf(e.index)>-1)})))[this.randByWeight(o,g)];this.isRoundControllBlock(R.index)&&(R.roundWeight=0,l=l.concat(s));var T=R.index;p.push(T)}g.forEach((function(e){e.roundWeight=-1}));for(var W=0,y=u,F=0;F<p.length;F++){n(p[F]-1)||W++}var w=-1;if(W>1)for(var G=0;G<1;G++){for(var M=0;M<y.length;M++){var P=y[M];if(n(P-1)){w=P;break}}p[G]=w,console.log("拯救块 "+G,w)}return(k=k.concat(p)).forEach((function(e){d.forEach((function(n){n.index&&n&&n.index==e&&(n.genRound=f.round)}))})),{blockIds:this.random.shuffleArray(k),isRecommendHigh:v,color:null,multiArr:[],allcArr:[]}},o.getMinClearNumFix=function(e){return this.randomAllTimes>0||this.isFirstPlay?Math.max(e-1,1):e},o.onUpdate=function(e){},o.clear=function(){this.scoreGroups.length=0,this.scoreGroups=null,this.blockWightsTable.clear(),this.blockWightsTable=null,this.blockTotalWightsTable.clear(),this.blockTotalWightsTable=null},d}(d));o._RF.pop()}}}));

System.register("chunks:///_virtual/BlockGenerate2.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Game.ts","./MK.ts","./Event.ts","./BlockPlaceholder3.ts","./BlockConstData.ts","./MKEvent.ts"],(function(e){var o,t,n,a,l,c,s,i,r,h,g;return{setters:[function(e){o=e.inheritsLoose},function(e){t=e.cclegacy,n=e._decorator,a=e.Component},function(e){l=e.Game},null,function(e){c=e.BlockEventType},function(e){s=e.BlockPlaceholder3},function(e){i=e.BlockConstData},function(e){r=e.regEvent,h=e.unRegEvent,g=e.sendEvent}],execute:function(){var k;t._RF.push({},"9124bxZ4sBNA5IY1tG66jhI","BlockGenerate",void 0);var u=n.ccclass;n.property,e("BlockGenerate",u("BlockGenerate")(k=function(e){function t(){for(var o,t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return(o=e.call.apply(e,[this].concat(n))||this).blockPlaceholders=void 0,o.gameManager=void 0,o}o(t,e);var n=t.prototype;return n.onLoad=function(){this.onInit(),r(c.kEvent_Game_Show_New_Blocks,this.onEvtShowNewBlocks,this),r(c.kEvent_Game_Show_New_Blocks_History,this.showNewBlocksHistory,this),r(c.kEvent_Game_Logic_Move_Block_End,this.onEvtMoveBlockEnd,this),r(c.EVENT_USE_ITEM_END,this.onEvtUsedItem,this)},n.onInit=function(){this.blockPlaceholders=new Array,this.gameManager=l.inst},n.onEvtUsedItem=function(){this.checkCanPut()},n.onDestroy=function(){this.blockPlaceholders=null,h(this)},n.getBlockGroupPoolName=function(){return"BlockGroupPool"},n.showNewBlocksHistory=function(e){var o=this;if(e&&3==e.length){for(var t=0,n=0;n<e.length;n++){var a=e[n];a&&0==a.used&&a.bid>-1&&a.config&&(t+=1)}if(0!=t){this.blockPlaceholders.forEach((function(e){o.gameManager.getNodePoolWithPoolType(o.getBlockGroupPoolName()).put(e.node)})),this.blockPlaceholders.length=0,this.gameManager.blockPlacesMap?this.gameManager.blockPlacesMap.clear():this.gameManager.blockPlacesMap=new Map;for(var l=0;l<3;l++){var r=e[l];if(r&&!r.used&&-1!=r.bid){var h=this.gameManager.getNodePoolWithPoolType(this.getBlockGroupPoolName()).get(),k=h.getComponent(s);h.setPosition(i.BlockGenOffsetX[l],0,0),h.scale=i.BlockSpawnVector,h.parent=this.node,k.originalPosition=h.getPosition(),k.init(this.gameManager),k.refresh(r.bid,r.config),this.blockPlaceholders.push(k),this.gameManager.blockPlacesMap.set(l,k.node)}}this.gameManager.blockPlaceholders=this.blockPlaceholders.map((function(e){return e.node})),this.checkCanPut(),g(c.kEvent_Game_Finish_New_Blocks,!0)}else this.showNewBlocks()}else this.showNewBlocks()},n.onGenNewBlockSuccess=function(e){var o=e.blockIds,t=e.color,n=e.multiArr,a=e.allcArr;if(o.length>0){for(var l=0,c=0;c<o.length;c++)if(-1!=o[c]){var r=this.gameManager.getNodePoolWithPoolType(this.getBlockGroupPoolName()).get();r.active||(r.active=!0);var h=r.getComponent(s);r.setPosition(i.BlockGenOffsetX[l],0,0),r.scale=i.BlockSpawnVector,r.parent=this.node,h.destoryAllBgLight(),h.originalPosition=r.getPosition(),h.init(this.gameManager);var g=null;t&&c<t.length&&(g=t[c]),h.refresh(o[c]-1,null,g),h.multiClearSequence=n,h.allClearSequence=a,l++,this.blockPlaceholders.push(h)}else l++;this.afterGenNewBlocks()}else this.onGenNewBlockFail()},n.onGenNewBlockFail=function(){var e=this.gameManager.getRelifePreviewBlocks();this.onGenNewBlockSuccess(e)},n.afterGenNewBlocks=function(){this.gameManager.blockPlaceholders=this.blockPlaceholders.map((function(e){return e.node})),this.gameManager.blockPlacesMap?this.gameManager.blockPlacesMap.clear():this.gameManager.blockPlacesMap=new Map,this.gameManager.blockPlaceholders?this.gameManager.blockPlaceholders.length=0:this.gameManager.blockPlaceholders=new Array;for(var e=this.blockPlaceholders,o=0;o<this.blockPlaceholders.length;o++){var t=e[o].node;this.gameManager.blockPlaceholders.push(t),this.gameManager.blockPlacesMap.set(o,t)}this.gameManager.updateLevelHistoryData(),this.checkCanPut(),g(c.kEvent_Game_Finish_New_Blocks,!1),g(c.EVENT_GAME_CREATE_NEWGUIDE_BLOCK)},n.showNewBlocks=function(e){var o=this;this.blockPlaceholders.forEach((function(e){o.gameManager.getNodePoolWithPoolType(o.getBlockGroupPoolName()).put(e.node)})),this.blockPlaceholders.length=0,this.gameManager.getPreviewBlocks().then(this.onGenNewBlockSuccess.bind(this)).catch((function(e){console.error(e),o.onGenNewBlockFail.bind(o)}))},n.onEvtShowNewBlocks=function(e){this.showNewBlocks(e)},n.checkCanPut=function(){var e=this;this.blockPlaceholders&&this.blockPlaceholders.forEach((function(o){if(o.node.parent){var t=e.gameManager.canPutBlock(o.blockIndex);o.isCanPut=t}}))},n.onEvtMoveBlockEnd=function(){0==this.node.children.length?this.showNewBlocks():(this.gameManager.updateLevelHistoryData(),this.checkCanPut())},n.checkEnhancedHint=function(){},t}(a))||k);t._RF.pop()}}}));

System.register("chunks:///_virtual/BlockGenerateAdventureLevel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BlockGenerate2.ts","./AdventureLevelGame.ts"],(function(e){var t,n,r,o,c;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,r=e._decorator},function(e){o=e.BlockGenerate},function(e){c=e.AdventureLevelGame}],execute:function(){var l;n._RF.push({},"eb66al9WF1MnrZIEi6WYxeY","BlockGenerateAdventureLevel",void 0);var u=r.ccclass;r.property,e("BlockGenerateAdventureLevel",u("BlockGenerateAdventureLevel")(l=function(e){function n(){return e.apply(this,arguments)||this}t(n,e);var r=n.prototype;return r.onInit=function(){this.blockPlaceholders=new Array,this.gameManager=c.levlInstance},r.getBlockGroupPoolName=function(){return"AdventureLevelBlockGroupPool"},n}(o))||l);n._RF.pop()}}}));

System.register("chunks:///_virtual/BlockGenerateHammer.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BlockGenerate2.ts","./LevelGame.ts","./AdventureLevelGame.ts","./SceneMode.ts","./Enumrations.ts","./Game.ts","./MK.ts","./Event.ts","./UserHammerData.ts","./BlockPlaceholderHammer.ts","./Boot.ts","./BIDefine.ts","./SdkError.ts","./AdSdk.ts","./emAdPath.ts","./BlockType.ts","./SdkManager.ts","./LanguageManager.ts","./MKEvent.ts","./sdk.ts"],(function(e){var t,n,a,o,i,r,s,m,c,l,u,d,h,g,f,_,v,k,p,H,I,M,B,C,b,G,w,y,P,S;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,a=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){i=e.cclegacy,r=e._decorator,s=e.Node,m=e.Label,c=e.Vec3,l=e.UITransform},function(e){u=e.BlockGenerate},function(e){d=e.LevelGame},function(e){h=e.AdventureLevelGame},function(e){g=e.SceneMode},function(e){f=e.kGameMode},function(e){_=e.Game},null,function(e){v=e.BlockEventType},function(e){k=e.UserHammerData},function(e){p=e.BlockPlaceholderHammer},null,function(e){H=e.BIEventID,I=e.emAdStatus},function(e){M=e.emSdkErrorCode},function(e){B=e.AdSdk},function(e){C=e.emAdPath},function(e){b=e.BlockItemConst},function(e){G=e.SdkManager},function(e){w=e.LanguageManager},function(e){y=e.sendEvent,P=e.unRegEvent},function(e){S=e.SDK}],execute:function(){var A,D,E,L,R,U,T;i._RF.push({},"2b683IYGDxDBZSBj5ored2d","BlockGenerateHammer",void 0);var x=r.ccclass,z=r.property;e("BlockGenerateHammer",(A=x("BlockGenerateHammer"),D=z(s),E=z(m),A((U=t((R=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return t=e.call.apply(e,[this].concat(i))||this,a(t,"ad_root",U,o(t)),a(t,"lab_hammer",T,o(t)),t}n(t,e);var i=t.prototype;return i.onLoad=function(){var e=this;this.onInit(),this.scheduleOnce((function(){e&&e.initHammer()}),.3),k.inst.onDataCountChange=this.onHammerCountChange.bind(this)},i.initHammer=function(){k.inst.isCanUseItem()?(this.showAdRoot(!1),this.spawnHammer()):this.showAdRoot(!0),this.showHammerInfo(!0)},i.showAdRoot=function(e){this.ad_root&&(this.ad_root.active=e)},i.showHammerInfo=function(e){this.lab_hammer&&(this.lab_hammer.node.active=e,e&&(this.lab_hammer.string=k.inst.itemCount+"/"+k.inst.getMaxItemCount()))},i.onHammerCountChange=function(){this.lab_hammer&&(this.lab_hammer.string=k.inst.itemCount+"/"+k.inst.getMaxItemCount())},i.spawnHammer=function(){this.blockPlaceholders.length=0;var e=k.inst.getItemBlockIndex(),t=b[e].scale,n=this.gameManager.getNodePoolWithPoolType(this.getBlockGroupPoolName()).get();n.active||(n.active=!0);var a=n.getComponent(p);a.hammerScale=t,n.setPosition(c.ZERO),n.setScale(t,t,1);var o=n.getComponent(l);if(o){var i=Math.ceil(120/t);o.setContentSize(i,i)}n.parent=this.node,a.originalPosition=c.ZERO,a.init(this.gameManager),a.refresh(e),a.onUseHammer=this.onUseHammer.bind(this),this.blockPlaceholders.push(a),y(v.kEvent_Game_Init_Show_Hammer,!1)},i.onUseHammer=function(){k.inst.useItem(),this.initHammer(),this.gameManager.updateLevelHistoryData(),y(v.kEvent_Game_Init_Use_Hammer)},i.checkCanPut=function(){},i.onDestroy=function(){k.inst.onDataCountChange=null,P(this)},i.onInit=function(){this.blockPlaceholders=new Array,g.gameMode==f.endless?this.gameManager=_.inst:g.gameMode==f.level?this.gameManager=d.levlInstance:g.gameMode==f.adventure_level&&(this.gameManager=h.levlInstance)},i.getBlockGroupPoolName=function(){return"HammerBlockGroupPool"},i.onClickBuyHammer=function(){var e=this;S.instance.reportBI(H.ad_unlock_hammer,{ad_status:I.WakeUp,ad_mode:g.gameMode}),B.inst.showRewardVideoAd(C.Block_Unlock_Hammer).then((function(){G.getInstance().native.showToast(w.translateText("tips_day_reward")),k.inst.addItem(k.inst.getMaxItemCount(),!1),e.initHammer(),S.instance.reportBI(H.ad_unlock_hammer,{ad_status:I.Finished,ad_mode:g.gameMode})})).catch((function(e){e.errMsg!=M.Sdk_Ad_Close_Reward?G.getInstance().native.showToast(w.translateText("tip_ad_fail")):S.instance.reportBI(H.ad_unlock_hammer,{ad_status:I.Closed,ad_mode:g.gameMode})}))},t}(u)).prototype,"ad_root",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=t(R.prototype,"lab_hammer",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=R))||L));i._RF.pop()}}}));

System.register("chunks:///_virtual/BlockGenerateHRocket.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BlockGenerate2.ts","./LevelGame.ts","./AdventureLevelGame.ts","./SceneMode.ts","./Enumrations.ts","./Game.ts","./MK.ts","./Event.ts","./Boot.ts","./BIDefine.ts","./SdkError.ts","./AdSdk.ts","./emAdPath.ts","./BlockType.ts","./SdkManager.ts","./LanguageManager.ts","./UserHRocketData.ts","./BlockPlaceholderHRocket.ts","./MKEvent.ts","./sdk.ts"],(function(t){var e,n,o,a,i,s,c,r,l,u,d,h,k,m,g,f,_,p,v,R,M,I,B,C,b,y,P,w,G,H;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,o=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){i=t.cclegacy,s=t._decorator,c=t.Node,r=t.Label,l=t.Vec3,u=t.UITransform},function(t){d=t.BlockGenerate},function(t){h=t.LevelGame},function(t){k=t.AdventureLevelGame},function(t){m=t.SceneMode},function(t){g=t.kGameMode},function(t){f=t.Game},null,function(t){_=t.BlockEventType},null,function(t){p=t.BIEventID,v=t.emAdStatus},function(t){R=t.emSdkErrorCode},function(t){M=t.AdSdk},function(t){I=t.emAdPath},function(t){B=t.BlockItemConst},function(t){C=t.SdkManager},function(t){b=t.LanguageManager},function(t){y=t.UserHRocketData},function(t){P=t.BlockPlaceholderHRocket},function(t){w=t.sendEvent,G=t.unRegEvent},function(t){H=t.SDK}],execute:function(){var S,A,E,D,L,U,T;i._RF.push({},"59c68d7nVZFX5E6EzttHbPz","BlockGenerateHRocket",void 0);var z=s.ccclass,x=s.property;t("BlockGenerateHRocket",(S=z("BlockGenerateHRocket"),A=x(c),E=x(r),S((U=e((L=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return e=t.call.apply(t,[this].concat(i))||this,o(e,"ad_root",U,a(e)),o(e,"lab_hammer",T,a(e)),e}n(e,t);var i=e.prototype;return i.onLoad=function(){var t=this;this.onInit(),this.scheduleOnce((function(){t&&t.initRocket()}),.3),y.inst.onDataCountChange=this.onHRocketCountChange.bind(this)},i.initRocket=function(){y.inst.isCanUseItem()?(this.showAdRoot(!1),this.spawnRocket()):this.showAdRoot(!0),this.showRocketInfo(!0)},i.showAdRoot=function(t){this.ad_root&&(this.ad_root.active=t)},i.showRocketInfo=function(t){this.lab_hammer&&(this.lab_hammer.node.active=t,t&&(this.lab_hammer.string=y.inst.itemCount+"/"+y.inst.getMaxItemCount()))},i.onHRocketCountChange=function(){this.lab_hammer&&(this.lab_hammer.string=y.inst.itemCount+"/"+y.inst.getMaxItemCount())},i.spawnRocket=function(){this.blockPlaceholders.length=0;var t=B[1101].scale,e=this.gameManager.getNodePoolWithPoolType(this.getBlockGroupPoolName()).get();e.active||(e.active=!0);var n=e.getComponent(P);n.rocketScale=t,e.setPosition(l.ZERO),e.setScale(t,t,1);var o=e.getComponent(u);if(o){var a=Math.ceil(120/t);o.setContentSize(a,a)}e.parent=this.node,n.originalPosition=l.ZERO,n.init(this.gameManager),n.refresh(1101),n.onUseRocket=this.onUseRocket.bind(this),this.blockPlaceholders.push(n)},i.onUseRocket=function(){y.inst.useItem(),this.initRocket(),this.gameManager.updateLevelHistoryData(),w(_.kEvent_Game_Init_Use_Hammer)},i.checkCanPut=function(){},i.onDestroy=function(){y.inst.onDataCountChange=null,G(this)},i.onInit=function(){this.blockPlaceholders=new Array,m.gameMode==g.endless?this.gameManager=f.inst:m.gameMode==g.level?this.gameManager=h.levlInstance:m.gameMode==g.adventure_level&&(this.gameManager=k.levlInstance)},i.getBlockGroupPoolName=function(){return"HRocketBlockGroupPool"},i.onClickBuyRocket=function(){var t=this;H.instance.reportBI(p.ad_unlock_rocket_h,{ad_status:v.WakeUp,ad_mode:m.gameMode}),M.inst.showRewardVideoAd(I.Block_Unlock_Rocket_H).then((function(){C.getInstance().native.showToast(b.translateText("tips_day_reward_2")),y.inst.addItem(y.inst.getMaxItemCount(),!1),t.initRocket(),H.instance.reportBI(p.ad_unlock_rocket_h,{ad_status:v.Finished,ad_mode:m.gameMode})})).catch((function(t){t.errMsg!=R.Sdk_Ad_Close_Reward?C.getInstance().native.showToast(b.translateText("tip_ad_fail")):H.instance.reportBI(p.ad_unlock_rocket_h,{ad_status:v.Closed,ad_mode:m.gameMode})}))},e}(d)).prototype,"ad_root",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=e(L.prototype,"lab_hammer",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=L))||D));i._RF.pop()}}}));

System.register("chunks:///_virtual/BlockGenerateLevel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BlockGenerate2.ts","./LevelGame.ts"],(function(e){var o,t,n,r,c;return{setters:[function(e){o=e.inheritsLoose},function(e){t=e.cclegacy,n=e._decorator},function(e){r=e.BlockGenerate},function(e){c=e.LevelGame}],execute:function(){var l;t._RF.push({},"e9a86HS1KxIoru4Zd437Hos","BlockGenerateLevel",void 0);var a=n.ccclass;n.property,e("BlockGenerateLevel",a("BlockGenerateLevel")(l=function(e){function t(){return e.apply(this,arguments)||this}o(t,e);var n=t.prototype;return n.onInit=function(){this.blockPlaceholders=new Array,this.gameManager=c.levlInstance},n.getBlockGroupPoolName=function(){return"LevelBlockGroupPool"},t}(r))||l);t._RF.pop()}}}));

System.register("chunks:///_virtual/BlockGenerateMaster.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UserScoreLevelData.ts","./SdkEventManager.ts","./SocialDef.ts","./BlockGenerate.ts"],(function(e){var i,t,s,r,m,n,a;return{setters:[function(e){i=e.inheritsLoose},function(e){t=e.cclegacy},function(e){s=e.UserScoreLevelData},function(e){r=e.SdkEventManager},function(e){m=e.emShareEvent,n=e.emSharePath},function(e){a=e.BlockGenerate001}],execute:function(){t._RF.push({},"f550dbi66pN0rH5qmnU5UTB","BlockGenerateMaster",void 0);e("BlockGenerateMaster",function(e){function t(){return e.apply(this,arguments)||this}i(t,e);var a=t.prototype;return a.getPreviewBlocks=function(e,i,t,a,o,l,h,c){this.round++,e=0;for(var d=0,u=0;u<8;u++)for(var M=0;M<8;M++)0==l[u][M]&&d++;var p=s.inst.getLastScore();e=Math.max(p,e);for(var f=0,T=0;T<this.scoreGroups.length;T++){if(e<=this.scoreGroups[T]){f=T;break}}this.diffLevel=f;var v=[],S=3,g=2,A=2,k=.5*f,F=[36,24,12],x=Math.floor(this.round/3);if(d>=48)g=0,S=0,A=0;else if(d>=F[0]&&d<48){var B=100*Math.random(),N=Math.min(60-x-30*this.recommendSimpleTimes,50)-k;B<N?(g=2,A=2,S=this.getMinClearNumFix(3),this.recommendSimpleTimes+=1):(g=1,S=2,A=0,this.recommendSimpleTimes=0),100*Math.random()<(N=Math.min(30+x+k-30*this.randomAllTimes,40))?(g=0,S=0,A=0,this.randomAllTimes+=1):this.randomAllTimes=0}else if(d<F[0]&&d>=F[1]){var y=100*Math.random(),C=Math.min(70-x-30*this.recommendSimpleTimes,60)-k;y<C?(g=2,A=2,S=this.getMinClearNumFix(3),this.recommendSimpleTimes+=1):(g=1,S=this.getMinClearNumFix(3),A=0,this.recommendSimpleTimes=0),100*Math.random()<(C=Math.min(20+x+k-20*this.randomAllTimes,30))?(this.randomAllTimes>0||this.isFirstPlay?(g=1,S=3,A=0):(g=0,S=0,A=0),this.randomAllTimes+=1):this.randomAllTimes=0}else if(d<F[1]&&d>=F[2]){var G=100*Math.random(),L=Math.min(70-x-30*this.recommendSimpleTimes,60)-k;G<L?(g=2,A=2,S=2,this.recommendSimpleTimes+=1):(S=2,A=2,S=this.getMinClearNumFix(3),this.recommendSimpleTimes=0),100*Math.random()<(L=Math.min(15+x+k-15*this.randomAllTimes,25))?(g=1,S=this.getMinClearNumFix(3),A=0,this.randomAllTimes+=1):this.randomAllTimes=0}else if(d<F[2]){this.enterDangerousTimes++;var P=100*Math.random();v=[39,40,41];var D=Math.min(75-x-30*this.recommendSimpleTimes,65)-k;if(P<D?(this.randomAllTimes>0?(g=2,A=1,S=2):(g=2,A=2,S=2),this.recommendSimpleTimes+=1):(S=2,A=2,S=this.getMinClearNumFix(3),this.recommendSimpleTimes=0),this.enterDangerousTimes>1)100*Math.random()<(D=Math.min(10+x+k-10*this.randomAllTimes,20))?(g=2,S=2,A=3,this.randomAllTimes+=1):this.randomAllTimes=0;else S-=1}e<500&&d<12&&(S=2,A=2,S=1,v=[39,40,41,33,34,14,15]);var _=this.computePreviwBlocks(l,h,f,g,A,[],v,[],S,0);return r.getInstance().emit(m.share_happy,_.isRecommendHigh,n.score_happy),new Promise((function(e,i){e(_)}))},a.getMinClearNumFix=function(i){return this.diffLevel>8&&this.round>8?i:e.prototype.getMinClearNumFix.call(this,i)},t}(a));t._RF.pop()}}}));

System.register("chunks:///_virtual/BlockGenerateMasterLevel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BlockGenerate.ts","./UserCollectLevelData.ts","./SocialDef.ts","./SdkEventManager.ts","./ResManager.ts"],(function(e){var i,s,t,n,l,o,r,a;return{setters:[function(e){i=e.inheritsLoose},function(e){s=e.cclegacy},function(e){t=e.BlockGenerate001},function(e){n=e.UserCollectLevelData},function(e){l=e.emShareEvent,o=e.emSharePath},function(e){r=e.SdkEventManager},function(e){a=e.ResManager}],execute:function(){s._RF.push({},"f7558qBepVNJ4pf3lQLL+Fk","BlockGenerateMasterLevel",void 0);e("BlockGenerateMasterLevel",function(e){function s(i,s,t,l){var o;(o=e.call(this,s,t,l)||this).levelConfig=void 0,o.simpleRound=4,o.levelConfig=i;var r=n.inst,m=r.getLevelBlockConfigPath(),h=a.getInstance().loadAssetSync(m).json;o.scoreGroups=new Array(h.length),o.blockWightsTable=new Map,o.blockTotalWightsTable=new Map,o.failLevelTimes=r.getLevelFailTimes();for(var d=0;d<h.length;d++){var c=h[d];o.scoreGroups[d]=c.score;for(var u=new Array(c.count),f=0,v=0;v<c.count;v++){var T=v+1,p=o.isRoundControllBlock(T)?3:0,g=c[""+T];g>0&&(f+=g,u[v]={index:T,weight:g,cdRound:p,genRound:-1})}o.blockWightsTable.set(d,u),o.blockTotalWightsTable.set(d,f)}o.configs=h;var M=Math.floor(o.levelConfig.id/6+1);return o.simpleRound+=M,o.simpleRound=Math.max(o.simpleRound,8),o}i(s,e);var t=s.prototype;return t.getPreviewBlocks=function(e,i,s,t,a,m,h,d){this.round++,e=n.inst.getHistoryLevel();for(var c=0,u=0;u<8;u++)for(var f=0;f<8;f++)0==m[u][f]&&c++;for(var v=0,T=0;T<this.scoreGroups.length;T++){if(e<=this.scoreGroups[T]){v=T;break}}this.diffLevel=v;var p=[],g=3,M=1,L=0,A=this.levelConfig.recommend;A=A&&1==this.round?A:[];var S=.5*v,k=[36,24,16],R=Math.floor(this.round/3);if(c>=48)M=0,g=0,L=0;else if(c>=k[0]&&c<48){var C=100*Math.random(),y=Math.min(60-R-30*this.recommendSimpleTimes,50)-S;C<y?(M=2,L=2,g=3,this.recommendSimpleTimes+=1):(M=1,g=3,L=0,this.recommendSimpleTimes=0),100*Math.random()<(y=Math.min(20+R+S-20*this.randomAllTimes,30)-5*this.failLevelTimes)?(M=0,g=0,L=0,this.randomAllTimes+=1):this.randomAllTimes=0}else if(c<k[0]&&c>=k[1]){var B=100*Math.random(),b=Math.min(70-R-30*this.recommendSimpleTimes,60)-S;B<b?(M=2,L=2,g=this.getMinClearNumFix(3),this.recommendSimpleTimes+=1):(M=1,g=3,L=0,this.recommendSimpleTimes=0),100*Math.random()<(b=Math.min(15+R+S-15*this.randomAllTimes,25)-3*this.failLevelTimes)?(this.randomAllTimes>0||this.failLevelTimes>2||this.isFirstPlay?(M=1,g=3,L=0):(M=0,g=0,L=0),this.randomAllTimes+=1):this.randomAllTimes=0}else if(c<k[1]&&c>=k[2]){var F=100*Math.random(),G=Math.min(70-R-30*this.recommendSimpleTimes,60)-S;if(F<G?(this.randomAllTimes>0||this.failLevelTimes>2||this.isFirstPlay?(M=2,L=1,g=2):(M=2,L=2,g=2),this.recommendSimpleTimes+=1):(g=2,L=2,g=this.getMinClearNumFix(3),this.recommendSimpleTimes=0),this.isRoundCanRandomAll())100*Math.random()<(G=Math.min(10+R+S-10*this.randomAllTimes,20)-3*this.failLevelTimes)?(M=1,g=2,L=0,this.randomAllTimes+=1):this.randomAllTimes=0}else if(c<k[2]){this.enterDangerousTimes++;var w=100*Math.random();p=[39,40,41];var P=Math.min(75-R-30*this.recommendSimpleTimes,65)-S;if(w<P?(M=2,L=1,g=2,this.recommendSimpleTimes+=1):(g=2,L=2,g=this.getMinClearNumFix(3),this.recommendSimpleTimes=0),1==this.enterDangerousTimes)g-=1;else if(this.isRoundCanRandomAll())100*Math.random()<(P=Math.min(5+R+S-5*this.randomAllTimes,10)-3*this.failLevelTimes)?(M=2,g=2,L=3,this.randomAllTimes+=1):this.randomAllTimes=0}this.round<3&&c<20&&(g=2,L=2,g=1,p=[39,40,41,33,34,14,15]);var x=this.computePreviwBlocks(m,h,v,M,L,[],p,A,g,0);return r.getInstance().emit(l.share_happy,x.isRecommendHigh,o.level_happy),new Promise((function(e,i){e(x)}))},t.isRoundCanRandomAll=function(){return this.diffLevel<6||(this.diffLevel<16?this.round>3:this.round>8)},s}(t));s._RF.pop()}}}));

System.register("chunks:///_virtual/BlockGenerateNative.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BlockGenerate.ts"],(function(e){var t,n,r,o;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,r=e.game},function(e){o=e.BlockGenerate001}],execute:function(){n._RF.push({},"18e75WsQeZBv4KdlyMFwbnA","BlockGenerateNative",void 0);e("BlockGenetateNative",function(e){function n(t,n,r,o){var i;void 0===o&&(o="res/configs/score_block"),(i=e.call(this,t,n,r,o)||this).fillHelper=void 0;var l=new blk.BlkHelper;return i.fillHelper=l,i}return t(n,e),n.prototype.getPreviewBlocks=function(e,t,n,o,i,l,c,s){var u=this;this.round++;for(var a=[],f=0;f<8;f++)for(var v=0;v<8;v++)a.push(l[f][v]);return new Promise((function(l,c){try{u.fillHelper.fillAsync(a,t,e,n,o,i,(function(e){l({blockIds:e,isRecommendHigh:!1})}),r.deltaTime,s)}catch(e){c(null)}}))},n}(o));n._RF.pop()}}}));

System.register("chunks:///_virtual/BlockGenerateVRocket.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BlockGenerate2.ts","./LevelGame.ts","./AdventureLevelGame.ts","./SceneMode.ts","./Enumrations.ts","./Game.ts","./MK.ts","./Event.ts","./Boot.ts","./BIDefine.ts","./SdkError.ts","./AdSdk.ts","./emAdPath.ts","./BlockType.ts","./SdkManager.ts","./LanguageManager.ts","./UserVRocketData.ts","./BlockPlaceholderVRocket.ts","./MKEvent.ts","./sdk.ts"],(function(e){var t,n,o,a,i,s,c,r,l,u,d,h,k,m,g,f,_,v,p,R,M,I,B,C,b,y,w,G,P,S;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,o=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){i=e.cclegacy,s=e._decorator,c=e.Node,r=e.Label,l=e.Vec3,u=e.UITransform},function(e){d=e.BlockGenerate},function(e){h=e.LevelGame},function(e){k=e.AdventureLevelGame},function(e){m=e.SceneMode},function(e){g=e.kGameMode},function(e){f=e.Game},null,function(e){_=e.BlockEventType},null,function(e){v=e.BIEventID,p=e.emAdStatus},function(e){R=e.emSdkErrorCode},function(e){M=e.AdSdk},function(e){I=e.emAdPath},function(e){B=e.BlockItemConst},function(e){C=e.SdkManager},function(e){b=e.LanguageManager},function(e){y=e.UserVRocketData},function(e){w=e.BlockPlaceholderVRocket},function(e){G=e.sendEvent,P=e.unRegEvent},function(e){S=e.SDK}],execute:function(){var A,D,E,V,L,U,T;i._RF.push({},"0067cIaFRxC47oDBZ+QbFbM","BlockGenerateVRocket",void 0);var x=s.ccclass,z=s.property;e("BlockGenerateVRocket",(A=x("BlockGenerateVRocket"),D=z(c),E=z(r),A((U=t((L=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return t=e.call.apply(e,[this].concat(i))||this,o(t,"ad_root",U,a(t)),o(t,"lab_hammer",T,a(t)),t}n(t,e);var i=t.prototype;return i.onLoad=function(){var e=this;this.onInit(),this.scheduleOnce((function(){e&&e.initRocket()}),.3),y.inst.onDataCountChange=this.onHRocketCountChange.bind(this)},i.initRocket=function(){y.inst.isCanUseItem()?(this.showAdRoot(!1),this.spawnRocket()):this.showAdRoot(!0),this.showRocketInfo(!0)},i.showAdRoot=function(e){this.ad_root&&(this.ad_root.active=e)},i.showRocketInfo=function(e){this.lab_hammer&&(this.lab_hammer.node.active=e,e&&(this.lab_hammer.string=y.inst.itemCount+"/"+y.inst.getMaxItemCount()))},i.onHRocketCountChange=function(){this.lab_hammer&&(this.lab_hammer.string=y.inst.itemCount+"/"+y.inst.getMaxItemCount())},i.spawnRocket=function(){this.blockPlaceholders.length=0;var e=B[1102].scale,t=this.gameManager.getNodePoolWithPoolType(this.getBlockGroupPoolName()).get();t.active||(t.active=!0);var n=t.getComponent(w);n.rocketScale=e,t.setPosition(l.ZERO),t.setScale(e,e,1);var o=t.getComponent(u);if(o){var a=Math.ceil(120/e);o.setContentSize(a,a)}t.parent=this.node,n.originalPosition=l.ZERO,n.init(this.gameManager),n.refresh(1102),n.onUseRocket=this.onUseRocket.bind(this),this.blockPlaceholders.push(n)},i.onUseRocket=function(){y.inst.useItem(),this.initRocket(),this.gameManager.updateLevelHistoryData(),G(_.kEvent_Game_Init_Use_Hammer)},i.checkCanPut=function(){},i.onDestroy=function(){y.inst.onDataCountChange=null,P(this)},i.onInit=function(){this.blockPlaceholders=new Array,m.gameMode==g.endless?this.gameManager=f.inst:m.gameMode==g.level?this.gameManager=h.levlInstance:m.gameMode==g.adventure_level&&(this.gameManager=k.levlInstance)},i.getBlockGroupPoolName=function(){return"VRocketBlockGroupPool"},i.onClickBuyRocket=function(){var e=this;S.instance.reportBI(v.ad_unlock_rocket_v,{ad_status:p.WakeUp,ad_mode:m.gameMode}),M.inst.showRewardVideoAd(I.Block_Unlock_Rocket_V).then((function(){C.getInstance().native.showToast(b.translateText("tips_day_reward_2")),y.inst.addItem(y.inst.getMaxItemCount(),!1),e.initRocket(),S.instance.reportBI(v.ad_unlock_rocket_v,{ad_status:p.Finished,ad_mode:m.gameMode})})).catch((function(e){e.errMsg!=R.Sdk_Ad_Close_Reward?C.getInstance().native.showToast(b.translateText("tip_ad_fail")):S.instance.reportBI(v.ad_unlock_rocket_v,{ad_status:p.Closed,ad_mode:m.gameMode})}))},t}(d)).prototype,"ad_root",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=t(L.prototype,"lab_hammer",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=L))||V));i._RF.pop()}}}));

System.register("chunks:///_virtual/BlockGenetateWasm.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BlockGenerate.ts"],(function(e){var i,l,r,t;return{setters:[function(e){i=e.inheritsLoose},function(e){l=e.cclegacy,r=e.game},function(e){t=e.BlockGenerate001}],execute:function(){l._RF.push({},"ad387Ra1ItKGZ+VMFsJIdO7","BlockGenetateWasm",void 0);e("BlockGenetateWasm",function(e){function l(i,l,r,t,n){var o;return void 0===n&&(n="res/configs/score_block"),(o=e.call(this,l,r,t,n)||this).fillHelper=void 0,o.levelConfig=void 0,o.timer=0,o.levelConfig=null==i?{board:[],collect:[],continuousCount:0,hardNum:0,hardType:0,id:0,initDifficulty:0,isGameOver:0,refreshTimes:0,reviviTimes:0,score:0,skillScore:0}:i,o.timer=0,o}i(l,e);var t=l.prototype;return t.initGenetateFill=function(){if(window.blk1010_wasm&&window.blk1010_wasm.BlkHelper){var e=new window.blk1010_wasm.BlkHelper(15,8,8);return this.fillHelper=e,this.onInitFillHelper(),!0}if(window.BlkHelper){var i=new window.BlkHelper(15,8,8);return this.fillHelper=i,this.onInitFillHelper(),!0}return!1},t.onInitFillHelper=function(){var e=new Int32Array([4e3,6e3,8e3,1e4]);null!=this.levelConfig.hardType&&(1==this.levelConfig.hardType&&null!=this.levelConfig.hardNum||2==this.levelConfig.hardType&&null!=this.levelConfig.hardNum)?e[0]=this.levelConfig.hardNum:this.levelConfig.hardType=0,null==this.levelConfig.initDifficulty&&(this.levelConfig.initDifficulty=0),this.fillHelper.setScoreDiff(e)},t.getPreviewBlocks=function(e,i,l,t,n,o,s,f){var a=this;this.round++,0==n&&(n=this.levelConfig.hardType),t=0==t?this.levelConfig.initDifficulty:this.levelConfig.initDifficulty+t,console.log("当前调难度依据："+n+" 当前难度:"+t);for(var c=[],u=0;u<8;u++)for(var h=0;h<8;h++)c.push(o[u][h]);var v=Uint8Array.from(c);return new Promise((function(o,s){try{a.fillHelper.fillAsync(v,i,e,l,t,n,(function(e,i,l){0!=a.timer&&(a.timer=0);var r=Array.from(new Uint8Array(e)),t={blockIds:r,isRecommendHigh:!1,allcArr:Array.from(new Uint8Array(i)),multiArr:Array.from(new Uint8Array(l)),color:null};a.onGenPreviews(r),console.log("rust库加强ai提示： "+JSON.stringify(t.allcArr,null,void 0)+" "+JSON.stringify(t.multiArr,null,void 0)),o(t)}),r.deltaTime,f),a.timer=1}catch(e){s(null)}}))},t.onGenPreviews=function(e){},t.onUpdate=function(){this.timer>0&&this.fillHelper&&this.fillHelper.fillUpdate()},t.clear=function(){e.prototype.clear.call(this),0!=this.timer&&clearInterval(this.timer),this.fillHelper&&(this.fillHelper.fillFree(),this.fillHelper=null)},l}(t));l._RF.pop()}}}));

System.register("chunks:///_virtual/BlockGenetateWasmAdventure.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BlockGenetateWasm.ts"],(function(e){var t,n,o;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy},function(e){o=e.BlockGenetateWasm}],execute:function(){n._RF.push({},"0863dvdNzpLY6svf1CmNcug","BlockGenetateWasmAdventure",void 0);e("BlockGenetateWasmAdventure",function(e){function n(){return e.apply(this,arguments)||this}return t(n,e),n.prototype.onGenPreviews=function(e){if(1==this.round){for(var t=this.levelConfig.recommend||[],n=0;n<t.length&&n<e.length;n++){var o=t[n];null!=o&&null!=o&&o>0&&o<=54&&(e[n]=o)}t.length>0&&this.random.shuffleArray(e)}},n}(o));n._RF.pop()}}}));

System.register("chunks:///_virtual/BlockGenetateWasmEndless.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BlockGenetateWasm.ts"],(function(e){var t,n,s;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy},function(e){s=e.BlockGenetateWasm}],execute:function(){n._RF.push({},"1bc10Ya/NZF3LHAfbatquWq","BlockGenetateWasmEndless",void 0);e("BlockGenetateWasmEndless",function(e){function n(t,n,s,o,c){var l;return void 0===c&&(c="res/configs/score_block"),(l=e.call(this,t,n,s,o,c)||this).levelConfig.hardType=1,l}return t(n,e),n.prototype.onInitFillHelper=function(){var e=this.scHelper;e&&this.fillHelper.setScoreDiff(e.diffScoreBuffArr)},n}(s));n._RF.pop()}}}));

System.register("chunks:///_virtual/BlockPlaceholder3.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BlockEntity.ts","./AdSdk.ts","./Boot.ts","./MK.ts","./BIDefine.ts","./SceneMode.ts","./emAdPath.ts","./SdkError.ts","./BlockConstData.ts","./Random.ts","./SdkManager.ts","./LanguageManager.ts","./BlockScale.ts","./UIPlayEffectParticle.ts","./ResManager.ts","./sdk.ts"],(function(e){var t,i,n,a,l,o,s,r,c,h,u,d,g,S,f,b,p,k,m,v,C,q,y,B,P,H,A,_,T,I,N;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,a=e.assertThisInitialized,l=e.createClass},function(e){o=e.cclegacy,s=e._decorator,r=e.Node,c=e.Sprite,h=e.UITransform,u=e.tween,d=e.Vec3,g=e.Tween,S=e.UIOpacity,f=e.instantiate,b=e.Component},function(e){p=e.BlockEntity},function(e){k=e.AdSdk},null,null,function(e){m=e.BIEventID,v=e.emAdStatus},function(e){C=e.SceneMode},function(e){q=e.emAdPath},function(e){y=e.emSdkErrorCode},function(e){B=e.BlockConstData},function(e){P=e.Random},function(e){H=e.SdkManager},function(e){A=e.LanguageManager},function(e){_=e.BlockScale},function(e){T=e.UIPlayEffectParticle},function(e){I=e.ResManager},function(e){N=e.SDK}],execute:function(){var R,M,w,x,X,Y,L,O,E,j,z,D,V,U,F,G,W;o._RF.push({},"8edf1cbF2JB+b299RGpa/RO","BlockPlaceholder3",void 0);var K=s.ccclass,J=s.property;e("BlockPlaceholder3",(R=K("BlockPlaceholder3"),M=J(r),w=J(T),x=J(r),X=J(c),Y=J(c),L=J(c),R((j=t((E=function(e){function t(){for(var t,i=arguments.length,l=new Array(i),o=0;o<i;o++)l[o]=arguments[o];return t=e.call.apply(e,[this].concat(l))||this,n(t,"ad_root",j,a(t)),n(t,"effectApear",z,a(t)),n(t,"hintNode",D,a(t)),n(t,"hintStep1",V,a(t)),n(t,"hintStep2",U,a(t)),n(t,"hintStep3",F,a(t)),t.hintSteps=[],t.blockIndex=-1,t.originalPosition=void 0,n(t,"moveTime1",G,a(t)),n(t,"moveTime2",W,a(t)),t.blockParent=void 0,t.blocks=void 0,t.blockScale=void 0,t.blockAlpha=1,t.bgLightObject=null,t.lastBgName=null,t.bubbleName=null,t.bubbleObject=null,t.transform=void 0,t.hasPut=!1,t.multiClearSequence=[],t.allClearSequence=[],t.targetX=-1,t.targetY=-1,t.enhancedHintSeq=-1,t.gameManager=void 0,t.blocksData=void 0,t.blockType=void 0,t.blockColor=void 0,t._isCanPut=!0,t.onHandlerRefresh=void 0,t.onHanderRefreshTarget=void 0,t.isShowing=void 0,t}i(t,e);var o=t.prototype;return o.onLoad=function(){this.blockParent=this.node.getChildByName("blockParent"),this.blocks=new Array,this.transform=this.blockParent.getComponent(h),this.hintSteps.length=0,this.hintSteps.push(this.hintStep1),this.hintSteps.push(this.hintStep2),this.hintSteps.push(this.hintStep3)},o.onDestroy=function(){this.blockIndex=-1},o.init=function(e){this.gameManager=e},o.addBlockScale=function(){this.blockScale=this.node.getComponent(_),this.blockScale?this.StartBlockScale():this.blockScale=this.node.addComponent(_)},o.refresh=function(e,t,i){var n=this;if(-1!=e){this.targetX=-1,this.targetY=-1,this.hintNode&&(this.hintNode.active=!1),this.enhancedHintSeq=-1,this.blockIndex=e,this.hasPut=!1;var a=P.inst.randomInt(1,7);this.blockColor=i||a,this.blockType=i||a;var l=t||this.gameManager.getBlockSimpleConfig(e,this.blockColor);this.blocks.forEach((function(e){n.gameManager.getNodePoolWithPoolType("BlockEntityPool").put(e.node)})),this.blocksData=l,this.blocks.length=0;var o=l.length;if(o<=0)console.error("异常的块配置",e);else{for(var s=.5*(l[0].length-1),r=.5*(o-1),c=B.BlockSpriteSize.x,h=0;h<l.length;h++)for(var g=0;g<l[h].length;g++){var S=l[h][g],f=this.gameManager.getNodePoolWithPoolType("BlockEntityPool").get(),b=f.getComponent(p);f.parent=this.blockParent,this.blocks.push(b);var k=(g-s)*c,m=(r-h)*c;b.node.setPosition(k,m),b.node.active=!0;var v=S;b.refreshColor(v),b.setAlpha(this.blockAlpha)}this.blockParent.setScale(.75,.75,1),u(this.blockParent).to(.3,{scale:d.ONE}).start(),this.hideAdNode(),null==this.effectApear&&(this.effectApear=this.getComponent(T)),this.effectApear&&(this.effectApear.node.active=!0,this.effectApear.play())}}},o.moveToPosition=function(e,t,i){var n=this;g.stopAllByTarget(this.node),u(this.node).by(this.moveTime1,{position:e}).then(u(this.node).call((function(){n.gameManager.putBlock(n.node),t&&t()}))).start()},o.getBlockSpawnScale=function(){return B.BlockSpawnVector},o.setHintVisible=function(e){this.hintNode&&(this.hintNode.getComponent(S).opacity=e?255:0)},o.moveToOriginalPosition=function(){var e=this;this.setHintVisible(!0),u(this.node).to(this.moveTime2,{position:this.originalPosition,scale:this.getBlockSpawnScale()}).call((function(){e.StartBlockScale()})).start(),this.lastBgName&&this.setBgLight(this.lastBgName,this.bubbleName)},o.setGaryState=function(){this.blocks.forEach((function(e){e.blockType>0&&e.blockType<100&&e.onlyRefreshColor(8)}))},o.setRealColor=function(){this.blocks.forEach((function(e){e.onlyRefreshColor(e.blockType,!1)}))},o.destoryAllBgLight=function(){this.removeAllBgLight(),this.clearLastPrefabPath()},o.clearLastPrefabPath=function(){this.lastBgName=null,this.bubbleName=null},o.setBgLight=function(e,t){var i=this,n=e;I.getInstance().loadAsset(n,"block").then((function(e){var a=f(e);I.getInstance().loadAsset(t,"block").then((function(e){var l=f(e);a.setParent(i.node),a.setScale(2,2,1),a.setSiblingIndex(1),l.setParent(i.node),l.setScale(2,2,1),l.setSiblingIndex(i.node.children.length),i.bgLightObject=a,i.lastBgName=n,i.bubbleName=t,i.bubbleObject=l}))}))},o.removeAllBgLight=function(){this.bgLightObject&&(this.node.removeChild(this.bgLightObject),this.bgLightObject=null),this.bubbleObject&&(this.node.removeChild(this.bubbleObject),this.bubbleObject=null)},o.showBlockAni=function(e){},o.showAdNode=function(){if(this.ad_root&&!this.ad_root.active)return this.ad_root.active=!0,!0},o.hideAdNode=function(){this.ad_root&&this.ad_root.active&&(this.ad_root.active=!1)},o.registerRefreshHandler=function(e,t){this.onHanderRefreshTarget=t,this.onHandlerRefresh=e},o.SetScale=function(e,t){this.blockScale&&(this.blockScale.SetMaxScale(e),this.blockScale.SetMinScale(t))},o.StartBlockScale=function(){this.blockScale&&this.blockScale.startScaling()},o.StopBlockScale=function(){this.node.setScale(d.ONE),this.blockScale&&this.blockScale.stopScaling()},o.removeBlockScale=function(){this.node.setScale(B.BlockSpawnVector),this.blockScale&&(this.blockScale.destroy(),this.blockScale=null)},o.SetBlockAlpha=function(){this.blockParent.getComponent(S).opacity=150},o.onClickRefreshBlock=function(){var e=this;N.instance.reportBI(m.ad_refresh_block,{ad_status:v.WakeUp,ad_mode:C.gameMode}),k.inst.showRewardVideoAd(q.Block_Refresh_Single).then((function(){N.instance.reportBI(m.ad_refresh_block,{ad_status:v.Finished,ad_mode:C.gameMode}),e.onHandlerRefresh&&e.onHandlerRefresh.call(e.onHanderRefreshTarget,e),e.onHandlerRefresh=null,e.onHanderRefreshTarget=null})).catch((function(e){e.errMsg!=y.Sdk_Ad_Close_Reward?H.getInstance().native.showToast(A.translateText("tip_ad_fail")):N.instance.reportBI(m.ad_refresh_block,{ad_status:v.Closed,ad_mode:C.gameMode})}))},o.resetHintArray=function(){this.allClearSequence=[],this.multiClearSequence=[]},o.IsMoveTargetAsHint=function(e,t){return-1!=this.targetX&&-1!=this.targetY&&(this.targetX==e&&this.targetY==t||(console.log("Compare Move Coord targetX: "+this.targetX.toString()+" targetY: "+this.targetY.toString()+"  x: "+e.toString()+" y: "+t.toString()),!1))},o.removeOneHint=function(){this.allClearSequence.length>=3?(this.allClearSequence=this.allClearSequence.splice(0,3),this.enhancedHintSeq-=1,this.enhancedHintSeq<=0&&(this.enhancedHintSeq=-1)):this.multiClearSequence.length>=3&&(this.multiClearSequence=this.multiClearSequence.splice(0,3),this.enhancedHintSeq-=1,this.enhancedHintSeq<=0&&(this.enhancedHintSeq=-1))},o.removeAllHints=function(){this.allClearSequence=[],this.multiClearSequence=[],this.enhancedHintSeq=-1},o.setHintAvailable=function(e,t){if(void 0===t&&(t=-1),this.hintNode)if(e){this.hintNode.active=!0;for(var i=0;i<this.hintSteps.length;i++)this.hintSteps[i].node.active=i+1==t}else{this.hintNode.active=!1;for(var n=0;n<this.hintSteps.length;n++)this.hintSteps[n].node.active=!1}},o.parseHint=function(){if(this.allClearSequence.length>2){if(this.allClearSequence[0]==this.blockIndex+1)return this.targetX=this.allClearSequence[1],this.targetY=this.allClearSequence[2],this.enhancedHintSeq=1,{seq:this.enhancedHintSeq,x:this.targetX,y:this.targetY,blockPlaceHolder:this,clearType:2};if(this.allClearSequence.length>5&&this.allClearSequence[3]==this.blockIndex+1)return this.targetX=this.allClearSequence[4],this.targetY=this.allClearSequence[5],this.enhancedHintSeq=2,{seq:this.enhancedHintSeq,x:this.targetX,y:this.targetY,blockPlaceHolder:this,clearType:2};if(this.allClearSequence.length>8&&this.allClearSequence[6]==this.blockIndex+1)return this.targetX=this.allClearSequence[7],this.targetY=this.allClearSequence[8],this.enhancedHintSeq=3,{seq:this.enhancedHintSeq,x:this.targetX,y:this.targetY,blockPlaceHolder:this,clearType:2};this.setHintAvailable(!1)}else if(this.multiClearSequence.length>2){if(this.multiClearSequence[0]==this.blockIndex+1)return this.targetX=this.multiClearSequence[1],this.targetY=this.multiClearSequence[2],this.enhancedHintSeq=1,{seq:this.enhancedHintSeq,x:this.targetX,y:this.targetY,blockPlaceHolder:this,clearType:1};if(this.multiClearSequence.length>5&&this.multiClearSequence[3]==this.blockIndex+1)return this.targetX=this.multiClearSequence[4],this.targetY=this.multiClearSequence[5],this.enhancedHintSeq=2,{seq:this.enhancedHintSeq,x:this.targetX,y:this.targetY,blockPlaceHolder:this,clearType:1};if(this.multiClearSequence.length>8&&this.multiClearSequence[6]==this.blockIndex+1)return this.targetX=this.multiClearSequence[7],this.targetY=this.multiClearSequence[8],this.enhancedHintSeq=3,{seq:this.enhancedHintSeq,x:this.targetX,y:this.targetY,blockPlaceHolder:this,clearType:1};this.setHintAvailable(!1)}return null},l(t,[{key:"isCanPut",get:function(){return this._isCanPut},set:function(e){this._isCanPut=e,e?this.setRealColor():this.setGaryState()}}]),t}(b)).prototype,"ad_root",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=t(E.prototype,"effectApear",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=t(E.prototype,"hintNode",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=t(E.prototype,"hintStep1",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=t(E.prototype,"hintStep2",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=t(E.prototype,"hintStep3",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=t(E.prototype,"moveTime1",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.03}}),W=t(E.prototype,"moveTime2",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.09}}),O=E))||O));o._RF.pop()}}}));

System.register("chunks:///_virtual/BlockPlaceholderHammer.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BlockEntity.ts","./BlockPlaceholder3.ts","./BoardView.ts","./BlockType.ts"],(function(e){var t,o,r,a,n,i,s,c,l,h,m,u,f,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,r=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){n=e.cclegacy,i=e._decorator,s=e.Animation,c=e.Vec3,l=e.Tween,h=e.tween},function(e){m=e.BlockEntity},function(e){u=e.BlockPlaceholder3},function(e){f=e.BoardView},function(e){p=e.BlockItemConst}],execute:function(){var g,d,k,v,P;n._RF.push({},"8a378bfOSFLJKv63jVtcHRQ","BlockPlaceholderHammer",void 0);var y=i.ccclass,b=i.property;e("BlockPlaceholderHammer",(g=y("BlockPlaceholderHammer"),d=b(s),g((P=t((v=function(e){function t(){for(var t,o=arguments.length,n=new Array(o),i=0;i<o;i++)n[i]=arguments[i];return t=e.call.apply(e,[this].concat(n))||this,r(t,"anim",P,a(t)),t.hammerScale=void 0,t.hammerScaleVector=void 0,t.hammerPos=void 0,t.onUseHammer=void 0,t}o(t,e);var n=t.prototype;return n.getBlockSpawnScale=function(){return this.hammerScaleVector||(this.hammerScaleVector=new c(this.hammerScale,this.hammerScale,1)),this.hammerScaleVector},n.moveToPosition=function(e,t,o){var r=this;this.hammerPos=o?JSON.parse(JSON.stringify(o)):null,this.hammerPos&&this.hammerPos.forEach((function(e){r.gameManager.tableData[e[0]][e[1]]=0;var t=f.instance.blockMap.get(e[2]);t.refreshColor(t.blockType)})),this.blocks.forEach((function(e){e.refreshColor(0)})),l.stopAllByTarget(this.node),h(this.node).by(this.moveTime1,{position:e}).then(h(this.node).call((function(){r.anim?(r.anim.once(s.EventType.FINISHED,r.useHammer,r),r.anim.play()):r.useHammer()}))).start()},n.useHammer=function(){var e=this;this.gameManager.putBlock(this.node),this.hammerPos&&this.hammerPos.forEach((function(t){e.gameManager.tableData[t[0]][t[1]]=0,f.instance.blockMap.get(t[2]).refreshColor(0,!0)})),this.onUseHammer&&this.onUseHammer()},n.refresh=function(e,t){var o=this;this.blockIndex=e,this.hasPut=!1;var r=p[e].simple;r.forEach((function(e,t){e.forEach((function(e,t){e>0&&e<100&&e}))})),this.blocks.forEach((function(e){o.gameManager.getNodePoolWithPoolType("BlockEntityPool").put(e.node)})),this.transform.width=80*r[0].length,this.transform.height=80*r.length,this.blocksData=r,this.blocks.length=0;var a=r.length;if(a<=0)console.error("异常的块配置",e);else{for(var n=.5*(r[0].length-1),i=.5*(a-1),s=0;s<r.length;s++)for(var l=0;l<r[s].length;l++){var u=r[s][l],f=this.gameManager.getNodePoolWithPoolType("BlockEntityPool").get(),g=f.getComponent(m);f.parent=this.blockParent,this.blocks.push(g);var d=80*(l-n),k=80*(i-s);g.node.setPosition(d,k),g.node.active=!0;var v=u;g.refreshColor(v)}this.blockParent.setScale(.75,.75,1),h(this.blockParent).to(.3,{scale:c.ONE}).start(),this.hideAdNode()}},t}(u)).prototype,"anim",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=v))||k));n._RF.pop()}}}));

System.register("chunks:///_virtual/BlockPlaceholderHRocket.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BlockEntity.ts","./BlockPlaceholder3.ts","./BoardView.ts","./BlockType.ts"],(function(t){var e,o,c,i,n,r,a,l,s,h,k,f,u,g,d;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,c=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){n=t.cclegacy,r=t._decorator,a=t.Node,l=t.Vec3,s=t.Tween,h=t.tween,k=t.v3},function(t){f=t.BlockEntity},function(t){u=t.BlockPlaceholder3},function(t){g=t.BoardView},function(t){d=t.BlockItemConst}],execute:function(){var p,v,P,b,R,y,B;n._RF.push({},"564b7tHMdNB6Ih8wJYK7nae","BlockPlaceholderHRocket",void 0);var m=r.ccclass,S=r.property;t("BlockPlaceholderHRocket",(p=m("BlockPlaceholderHRocket"),v=S(a),P=S(a),p((y=e((R=function(t){function e(){for(var e,o=arguments.length,n=new Array(o),r=0;r<o;r++)n[r]=arguments[r];return e=t.call.apply(t,[this].concat(n))||this,c(e,"leftRocket",y,i(e)),c(e,"rightRocket",B,i(e)),e.rocketScale=void 0,e.rocketScaleVector=void 0,e.rocketPos=void 0,e.onUseRocket=void 0,e}o(e,t);var n=e.prototype;return n.getBlockSpawnScale=function(){return this.rocketScaleVector||(this.rocketScaleVector=new l(this.rocketScale,this.rocketScale,1)),this.rocketScaleVector},n.moveToPosition=function(t,e,o){var c=this;this.rocketPos=o?JSON.parse(JSON.stringify(o)):null,this.rocketPos&&this.rocketPos.forEach((function(t){c.gameManager.tableData[t[0]][t[1]]=0;var e=g.instance.blockMap.get(t[2]);e.refreshColor(e.blockType)})),this.blocks.forEach((function(t){t.refreshColor(0)})),s.stopAllByTarget(this.node),h(this.node).by(this.moveTime1,{position:t}).then(h(this.node).call((function(){c.scheduleOnce((function(){g.instance.showClearAniWith(k(0,80*-c.rocketPos[0][0]+280,0),0,1)}),.1),c.rocketPos&&c.rocketPos.forEach((function(t){for(var e=function(e){setTimeout((function(){c.gameManager.tableData[t[0]][e]=0;var o=100*t[0]+e;g.instance.blockMap.get(o).refreshColor(0)}),Math.abs(e-t[1])*(1/8)*1e3)},o=0;o<8;o++)e(o)})),c.leftRocket.active=!0,c.rightRocket.active=!0;var t=h(c.leftRocket).by(1,{position:c.leftRocket.position.clone().add(k(-600,0,0))},{easing:"linear"});h(c.rightRocket).by(1,{position:c.rightRocket.position.clone().add(k(600,0,0))},{easing:"linear"}).start(),t.then(h(c.node).call((function(){c.useRocket(),c.leftRocket.setPosition(k(0,0,0)),c.rightRocket.setPosition(k(0,0,0)),c.leftRocket.active=!1,c.rightRocket.active=!1}))).start()}))).start()},n.useRocket=function(){this.gameManager.putBlock(this.node),this.onUseRocket&&this.onUseRocket()},n.refresh=function(t,e){var o=this;this.blockIndex=t,this.hasPut=!1;var c=d[t].simple;c.forEach((function(t,e){t.forEach((function(t,e){t>0&&t<100&&t}))})),this.blocks.forEach((function(t){o.gameManager.getNodePoolWithPoolType("BlockEntityPool").put(t.node)})),this.transform.width=80*c[0].length,this.transform.height=80*c.length,this.blocksData=c,this.blocks.length=0;var i=c.length;if(i<=0)console.error("异常的块配置",t);else{for(var n=.5*(c[0].length-1),r=.5*(i-1),a=0;a<c.length;a++)for(var s=0;s<c[a].length;s++){var k=c[a][s],u=this.gameManager.getNodePoolWithPoolType("BlockEntityPool").get(),g=u.getComponent(f);u.parent=this.blockParent,this.blocks.push(g);var p=80*(s-n),v=80*(r-a);g.node.setPosition(p,v),g.node.active=!0;var P=k;g.refreshColor(P)}this.blockParent.setScale(.75,.75,1),h(this.blockParent).to(.3,{scale:l.ONE}).start(),this.hideAdNode()}},e}(u)).prototype,"leftRocket",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=e(R.prototype,"rightRocket",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=R))||b));n._RF.pop()}}}));

System.register("chunks:///_virtual/BlockPlaceholderLevel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BlockEntity.ts","./BlockPlaceholder3.ts","./Random.ts","./BlockConstData.ts"],(function(o){var t,e,l,n,r,c,s,i,a;return{setters:[function(o){t=o.inheritsLoose},function(o){e=o.cclegacy,l=o._decorator,n=o.tween,r=o.Vec3},function(o){c=o.BlockEntity},function(o){s=o.BlockPlaceholder3},function(o){i=o.Random},function(o){a=o.BlockConstData}],execute:function(){var h;e._RF.push({},"90c0bsPMX5MdrIXLC3URBSx","BlockPlaceholderLevel",void 0);var k=l.ccclass;l.property,o("BlockPlaceholderLevel",k("BlockPlaceholderLevel")(h=function(o){function e(){return o.apply(this,arguments)||this}return t(e,o),e.prototype.refresh=function(o,t){var e=this;this.blockIndex=o,this.hasPut=!1;var l=i.inst.randomInt(1,7);this.blockColor=l,this.blockType=l;var s=t||this.gameManager.getBlockSimpleConfig(o,l);this.blocks.forEach((function(o){e.gameManager.getNodePoolWithPoolType("BlockEntityPool").put(o.node)}));var h=a.BlockSpriteSize.x;this.transform.width=s[0].length*h,this.transform.height=s.length*h,this.blocksData=s,this.blocks.length=0;var k=s.length;if(k<=0)console.error("异常的块配置",o);else{for(var u=.5*(s[0].length-1),d=.5*(k-1),g=0;g<s.length;g++)for(var f=0;f<s[g].length;f++){var v=this.gameManager.getNodePoolWithPoolType("BlockEntityPool").get(),p=v.getComponent(c);v.parent=this.blockParent,this.blocks.push(p);var P=(f-u)*h,B=(d-g)*h;p.node.setPosition(P,B),p.node.active=!0;var b=s[g][f];p.refreshColor(b),p.setLevelBlockColor(this.blockColor)}this.blockParent.setScale(.75,.75,1),n(this.blockParent).to(.3,{scale:r.ONE}).start(),this.hideAdNode()}},e}(s))||h);e._RF.pop()}}}));

System.register("chunks:///_virtual/BlockPlaceholderVRocket.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BlockEntity.ts","./BlockPlaceholder3.ts","./BoardView.ts","./BlockType.ts"],(function(e){var o,t,n,c,i,r,a,s,l,h,k,u,f,d,p;return{setters:[function(e){o=e.applyDecoratedDescriptor,t=e.inheritsLoose,n=e.initializerDefineProperty,c=e.assertThisInitialized},function(e){i=e.cclegacy,r=e._decorator,a=e.Node,s=e.Vec3,l=e.Tween,h=e.tween,k=e.v3},function(e){u=e.BlockEntity},function(e){f=e.BlockPlaceholder3},function(e){d=e.BoardView},function(e){p=e.BlockItemConst}],execute:function(){var g,v,P,b,R,y,B;i._RF.push({},"98069mSXwBLCrEB4uje7yE1","BlockPlaceholderVRocket",void 0);var w=r.ccclass,m=r.property;e("BlockPlaceholderVRocket",(g=w("BlockPlaceholderVRocket"),v=m(a),P=m(a),g((y=o((R=function(e){function o(){for(var o,t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return o=e.call.apply(e,[this].concat(i))||this,n(o,"upRocket",y,c(o)),n(o,"downRocket",B,c(o)),o.rocketScale=void 0,o.rocketScaleVector=void 0,o.rocketPos=void 0,o.onUseRocket=void 0,o}t(o,e);var i=o.prototype;return i.getBlockSpawnScale=function(){return this.rocketScaleVector||(this.rocketScaleVector=new s(this.rocketScale,this.rocketScale,1)),this.rocketScaleVector},i.moveToPosition=function(e,o,t){var n=this;this.rocketPos=t?JSON.parse(JSON.stringify(t)):null,this.rocketPos&&this.rocketPos.forEach((function(e){n.gameManager.tableData[e[0]][e[1]]=0;var o=d.instance.blockMap.get(e[2]);o.refreshColor(o.blockType)})),this.blocks.forEach((function(e){e.refreshColor(0)})),l.stopAllByTarget(this.node),h(this.node).by(this.moveTime1,{position:e}).then(h(this.node).call((function(){n.scheduleOnce((function(){n&&n.node.isValid&&n.rocketPos&&n.rocketPos.length>0&&d.instance.showClearAniWith(k(80*n.rocketPos[0][1]-280,0,0),90,1)}),.1),n.rocketPos&&n.rocketPos.forEach((function(e){for(var o=function(o){setTimeout((function(){n.gameManager.tableData[o][e[1]]=0;var t=e[1]+100*o;d.instance.blockMap.get(t).refreshColor(0)}),Math.abs(o-e[0])*(1/8)*1e3)},t=0;t<8;t++)o(t)})),n.upRocket.active=!0,n.downRocket.active=!0;var e=h(n.upRocket).by(1,{position:n.upRocket.position.clone().add(k(0,600,0))},{easing:"linear"});h(n.downRocket).by(1,{position:n.downRocket.position.clone().add(k(0,-600,0))},{easing:"linear"}).start(),e.then(h(n.node).call((function(){n.useRocket(),n.upRocket.setPosition(k(0,0,0)),n.downRocket.setPosition(k(0,0,0)),n.upRocket.active=!1,n.downRocket.active=!1}))).start()}))).start()},i.useRocket=function(){this.gameManager.putBlock(this.node),this.onUseRocket&&this.onUseRocket()},i.refresh=function(e,o){var t=this;this.blockIndex=e,this.hasPut=!1;var n=p[e].simple;n.forEach((function(e,o){e.forEach((function(e,o){e>0&&e<100&&e}))})),this.blocks.forEach((function(e){t.gameManager.getNodePoolWithPoolType("BlockEntityPool").put(e.node)})),this.transform.width=80*n[0].length,this.transform.height=80*n.length,this.blocksData=n,this.blocks.length=0;var c=n.length;if(c<=0)console.error("异常的块配置",e);else{for(var i=.5*(n[0].length-1),r=.5*(c-1),a=0;a<n.length;a++)for(var l=0;l<n[a].length;l++){var k=n[a][l],f=this.gameManager.getNodePoolWithPoolType("BlockEntityPool").get(),d=f.getComponent(u);f.parent=this.blockParent,this.blocks.push(d);var g=80*(l-i),v=80*(r-a);d.node.setPosition(g,v),d.node.active=!0;var P=k;d.refreshColor(P)}this.blockParent.setScale(.75,.75,1),h(this.blockParent).to(.3,{scale:s.ONE}).start(),this.hideAdNode()}},o}(f)).prototype,"upRocket",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=o(R.prototype,"downRocket",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=R))||b));i._RF.pop()}}}));

System.register("chunks:///_virtual/BlockScale.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var n,t,i,a,r,c,o,l,s;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,i=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){r=e.cclegacy,c=e._decorator,o=e.tween,l=e.Component,s=e.Vec3}],execute:function(){var u,p,f,h,g;r._RF.push({},"8fad5k1gJxNn4pNs6FCZIA1","BlockScale",void 0);var w=c.ccclass,d=c.property;e("BlockScale",w("BlockScale")((f=n((p=function(e){function n(){for(var n,t=arguments.length,r=new Array(t),c=0;c<t;c++)r[c]=arguments[c];return(n=e.call.apply(e,[this].concat(r))||this)._scalingTween=null,i(n,"scaleUp",f,a(n)),i(n,"scaleDown",h,a(n)),i(n,"duration",g,a(n)),n}t(n,e);var r=n.prototype;return r.start=function(){},r.onLoad=function(){this.startScaling()},r.startScaling=function(){this._scalingTween||(this._scalingTween=o(this.node).to(this.duration,{scale:this.scaleUp}).to(this.duration,{scale:this.scaleDown}).union().repeatForever().start())},r.stopScaling=function(){this._scalingTween&&(this._scalingTween.stop(),this._scalingTween=null)},r.SetMaxScale=function(e){this.scaleUp=e},r.SetMinScale=function(e){this.scaleDown=e},n}(l)).prototype,"scaleUp",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new s(.6,.6,1)}}),h=n(p.prototype,"scaleDown",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new s(.5,.5,1)}}),g=n(p.prototype,"duration",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.3}}),u=p))||u);r._RF.pop()}}}));

System.register("chunks:///_virtual/BlockType.ts",["cc"],(function(c){var o;return{setters:[function(c){o=c.cclegacy}],execute:function(){o._RF.push({},"550ackn7pdPCIYeSZDroICW","BlockType",void 0);c("EasyBlocks",[1,2,3,4,5,6,7,8,9,10,11]),c("MediumBlocks",[12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32]),c("HardBlocks",[33,34,35,36,37,38]),c("HardExBlocks",[42,43,44,45,46,47,48,49,50,51,52,53,54]),c("BigBlocks",[39,40,41]),c("BarBlocks",[6,7,14,15,33,34]),c("SimpleBlocks",[14,15,16,33,34,39,40,41]),c("ReviviBlocks",[16,15,14,11,10,9,8,7,6,5,4,3,2,1]),c("RoundCdBlocks",[33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54]),c("BlockConst",window.BlockConst),c("BlockItemConst",{1001:{id:1001,block:[[0,0,0,0,0],[0,0,0,0,0],[0,0,1001,0,0],[0,0,0,0,0],[0,0,0,0,0]],simple:[[1001]],count:1,scale:.8},1002:{id:1002,block:[[0,0,0,0,0],[0,0,1001,0,0],[0,1001,1001,1001,0],[0,0,1001,0,0],[0,0,0,0,0]],simple:[[0,1001,0],[1001,1001,1001],[0,1001,0]],count:4,scale:.5},1003:{id:1003,block:[[0,0,0,0,0],[0,1001,1001,1001,0],[0,1001,1001,1001,0],[0,1001,1001,1001,0],[0,0,0,0,0]],simple:[[1001,1001,1001],[1001,1001,1001],[1001,1001,1001]],count:9,scale:.5},1101:{id:1101,block:[[0,0,0,0,0],[0,0,0,0,0],[0,0,1101,0,0],[0,0,0,0,0],[0,0,0,0,0]],simple:[[1101]],count:1,scale:.8},1102:{id:1102,block:[[0,0,0,0,0],[0,0,0,0,0],[0,0,1102,0,0],[0,0,0,0,0],[0,0,0,0,0]],simple:[[1102]],count:1,scale:.8}});o._RF.pop()}}}));

System.register("chunks:///_virtual/BoardPreviewData.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"e151bMXMHtBT5A6BhuUw2Z5","BoardPreviewData",void 0),e("BoardPreviewData",(function(){})).previewBoardData=[[4,4,4,6,6,3,3,3],[6,6,4,6,6,3,5,5],[6,2,2,7,7,4,4,5],[2,3,3,7,4,1,1,4],[2,3,3,2,4,1,1,4],[5,2,2,2,3,4,4,6],[5,1,1,1,3,7,7,6],[5,5,5,1,3,3,7,7]],t._RF.pop()}}}));

System.register("chunks:///_virtual/BoardView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MK.ts","./Game.ts","./Event.ts","./BlockEntity.ts","./BlockPlaceholder3.ts","./SceneMode.ts","./Enumrations.ts","./BlockConstData.ts","./AssetInfoDefine.ts","./ScoreHelper.ts","./ComboScore.ts","./ShaderFrame.ts","./NodePool.ts","./AddScoreLabel.ts","./GuideData.ts","./Boot.ts","./BIDefine.ts","./AdSdk.ts","./emAdPath.ts","./SdkError.ts","./BlockEventManager.ts","./LevelGuideData.ts","./ResManager.ts","./MutilLineScore.ts","./BlockType.ts","./SdkManager.ts","./LanguageManager.ts","./FlagData.ts","./UIPlayClearParticle.ts","./ShakeManager.ts","./ShakeDefine.ts","./EndlessProgressHelper.ts","./BoardPreviewData.ts","./AITipsAnim.ts","./UserData.ts","./ProcedureToHome.ts","./UIPlayAnimations.ts","./UIPlayEffectParticle.ts","./MKEvent.ts","./EventType.ts","./MKUICtr.ts","./MKUtil.ts","./sdk.ts","./MsgData.ts"],(function(e){var t,o,n,i,a,r,s,l,c,h,d,u,g,f,m,p,v,b,k,C,B,M,w,_,A,S,P,E,y,N,T,I,G,R,x,D,F,L,O,H,V,W,U,K,z,Z,q,j,Y,Q,X,J,$,ee,te,oe,ne,ie,ae,re,se,le,ce,he,de,ue,ge;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,n=e.initializerDefineProperty,i=e.assertThisInitialized,a=e.createForOfIteratorHelperLoose,r=e.asyncToGenerator,s=e.regeneratorRuntime},function(e){l=e.cclegacy,c=e._decorator,h=e.Node,d=e.Vec3,u=e.Mat4,g=e.UIOpacity,f=e.tween,m=e.UITransform,p=e.instantiate,v=e.Label,b=e.game,k=e.Animation,C=e.Component},null,function(e){B=e.Game},function(e){M=e.BlockEventType},function(e){w=e.BlockEntity},function(e){_=e.BlockPlaceholder3},function(e){A=e.SceneMode},function(e){S=e.kGameMode},function(e){P=e.BlockConstData},function(e){E=e.AssetInfoDefine},function(e){y=e.emComboState},function(e){N=e.ComboScore},function(e){T=e.ShaderFrame},function(e){I=e.NodePoolManager},function(e){G=e.AddScoreLabel},function(e){R=e.GuideData},function(e){x=e.fsm,D=e.audio},function(e){F=e.BIEventID,L=e.emAdStatus},function(e){O=e.AdSdk},function(e){H=e.emAdPath},function(e){V=e.emSdkErrorCode},function(e){W=e.BlockEventManager},function(e){U=e.LevelGuideData},function(e){K=e.ResManager},function(e){z=e.MutilLineScore},function(e){Z=e.BlockItemConst},function(e){q=e.SdkManager},function(e){j=e.LanguageManager},function(e){Y=e.FlagData},function(e){Q=e.UIPlayClearParticle},function(e){X=e.ShakeManager},function(e){J=e.emShakeLevel},function(e){$=e.EndlessProgressHelper},function(e){ee=e.BoardPreviewData},function(e){te=e.AITipsAnim},function(e){oe=e.UserData},function(e){ne=e.ProcedureToHome},function(e){ie=e.UIPlayAnimations},function(e){ae=e.UIPlayEffectParticle},function(e){re=e.sendEvent,se=e.regEvent,le=e.unRegEvent},function(e){ce=e.Events},function(e){he=e.showView},function(e){de=e.MKUtil},function(e){ue=e.SDK},function(e){ge=e.MsgData}],execute:function(){var fe,me,pe,ve,be,ke,Ce,Be,Me,we,_e,Ae,Se,Pe,Ee,ye,Ne,Te,Ie,Ge,Re,xe;l._RF.push({},"85eea3o6RtFzricXQz0EhTP","BoardView",void 0);var De=294,Fe=c.ccclass,Le=c.property;e("BoardView",(fe=Fe("BoardView"),me=Le(h),pe=Le(h),ve=Le(h),be=Le(h),ke=Le(h),Ce=Le(h),Be=Le(h),Me=Le(h),we=Le(h),fe(((xe=function(e){function t(){for(var t,o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return(t=e.call.apply(e,[this].concat(a))||this).blocks=void 0,t.blockMap=void 0,t.blockPreviewAniMap=void 0,t.blockParent=void 0,n(t,"previewAniBlockParent",Se,i(t)),t.blockParentTransform=void 0,t.gameManager=void 0,n(t,"ndBlockPreview",Pe,i(t)),n(t,"root_combo",Ee,i(t)),n(t,"rootRefreshAll",ye,i(t)),n(t,"rootRefreshBtn",Ne,i(t)),n(t,"root_preview_guide",Te,i(t)),n(t,"rootEffect",Ie,i(t)),t.newGuideNode=void 0,n(t,"reachPercent",Ge,i(t)),n(t,"newGuideHint",Re,i(t)),t.hasEnhancedHint=!1,t.isEnterGame=!1,t.labRefreshAll=void 0,t.labRefreshBtn=void 0,t.allcellsanis=void 0,t.lastChooseNodeIndex=void 0,t.chooseBlocksData=new Map,t.chooseNodeIndex=new Array,t.chooseBlockType=-1,t.lastPutCoord=void 0,t.newLocalPos=new d,t.tempMat4=new u,t.nodeAWorldMat4=void 0,t.targetNodeIndex=void 0,t.targetIndex=void 0,t.sourceNode=void 0,t.targetNode=void 0,t.clearAnimScale=new d(1.5,1.5,1.5),t.isLastGuide=!1,t.isGuideFinished=!1,t.aiTipNode=void 0,t}o(t,e);var l=t.prototype;return l.start=function(){if(t.instance=this,this.newGuideHint&&(this.newGuideHint.active=!1),this.ndBlockPreview.active||(this.ndBlockPreview.active=!0),this.startGame(),W.instance.listen(M.BLOCK_TOUCH_START,this.onTouchStart,this),!R.inst.isGuideFinished()){var e=E.prefab;I.initPool(e.adventure_btn.path,e.adventure_btn.bundle,60),I.initPool(e.adventure_num_dark.path,e.adventure_num_dark.bundle,60),I.initPool(e.adventure_num_normal.path,e.adventure_num_dark.bundle,60)}},l.onReveiveFailRestart=function(){x.changeState(ne)},l.onTouchStart=function(e){this.newGuideNode&&(this.newGuideNode.destroy(),this.newGuideNode=null,this.root_preview_guide.getChildByName("userGuide")&&this.root_preview_guide.getChildByName("userGuide").destroy())},l.startGame=function(){var e=r(s().mark((function e(){var t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.beforeStart(),this.gameManager.startGame(),this.initNodeData(),this.refreshBoardView(this.gameManager.tableData),this.refreshAllBoardAni(ee.previewBoardData),this.showComboAni(!1),null==(t=window).BlockView&&(t.BlockView=this),f(this.node).delay(this.getDelayStartTime()).call(this.onStartGame.bind(this)).start(),this.refreshBtnRefreshAll(),this.refeshGuideShow(),re(M.kEvent_Game_Start),oe.inst.setThisGameWatchReviveNum(0);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),l.playStartAni=function(e){this.isEnterGame=e,this.refreshAllBoardAni(ee.previewBoardData)},l.refreshAllBoardAni=function(e,t){if(void 0===t&&(t=!1),e.length==this.gameManager.tableData.length)if(e[0].length==this.gameManager.tableData[0].length){this.blockPreviewAniMap=this.blockMap;for(var o=ee.previewBoardData,n=0;n<e.length;n++)for(var i=0;i<e[n].length;i++){var a=100*n+i,r=this.blockPreviewAniMap.get(a),s=r.node.getChildByPath("Sprite").getComponent(g),l=this.gameManager.tableData[n][i],c=!1;l>0&&!t||(l=o[n][i],c=!0),r.onlyRefreshColor(l),s.opacity=0,c?f(s).delay(.05*(e.length-1-n)).to(.035,{opacity:255}).delay(1.05-.1*(e.length-1-n)).to(.035,{opacity:0}).start():f(s).delay(.05*(e.length-1-n)).to(.035,{opacity:255}).start()}}else console.error("Failed to compare boardData[0] with tableData[0]");else console.error("Failed to compare boardData with table Data")},l.onStartAniEnd=function(){this.isEnterGame&&(this.ndBlockPreview.active||(this.ndBlockPreview.active=!0),this.startGame())},l.beforeStart=function(){this.gameManager=B.inst},l.getDelayStartTime=function(){return 1},l.onStartGame=function(){this.gameManager.historyLevelData?re(M.kEvent_Game_Show_New_Blocks_History,this.gameManager.historyLevelData.preview):re(M.kEvent_Game_Show_New_Blocks),this.onTouchScreenEnd(null)},l.onLoad=function(){se(M.kEvent_Game_Refresh_Board,this.refreshBoardView,this),se(M.kEvent_Game_Move_Block,this.onEvtMoveBlock,this),se(M.kEvent_Game_Move_Block_End,this.onEvtMoveBlockEnd,this),se(M.kEvent_Game_Finish_New_Blocks,this.onEvtRefreshPreviewBlock,this),se(M.EVENT_SCENE_PLAY_RESTART,this.onRestartGame,this),se(M.EVENT_SCENE_PLAY_RELIFE,this.onRelifeGame,this),se(M.EVENT_START_ANI_END,this.onStartAniEnd,this),se(M.kEvent_Game_Show_User_Guide,this.refeshGuideShow,this),se(M.EVENT_GAME_CREATE_NEWGUIDE_BLOCK,this.PlayNewGuideAnim,this),se(ce.ON_TOUCH_START,this.onTouchScreenStart,this),se(ce.ON_TOUCH_END,this.onTouchScreenEnd,this)},l.onTouchScreenStart=function(e){this.unschedule(this.checkAiTipTimer),this.showAiTips(!1)},l.checkAiTipTimer=function(){R.inst.isGuideFinished()&&this.showAiTips(!0)},l.onTouchScreenEnd=function(e){this.gameManager&&this.gameManager.scoreHelper&&this.gameManager.scoreHelper.checkIsCanOpenAITips()&&this.scheduleOnce(this.checkAiTipTimer,20)},l.refeshGuideShow=function(){var e=this,t=this.getGuideDataInst();if(!t.isGuideFinished()){if(this.refreshBoardView(this.gameManager.tableData),t.step>=3)return;he(E.prefab.newGuide,this.root_preview_guide).then((function(t){t.setSiblingIndex(0),e.newGuideNode=t}))}},l.PlayNewGuideAnim=function(){var e=this;if(null!=this.newGuideNode&&null!=this.newGuideNode&&this.newGuideNode.isValid){var t=this.getGuideDataInst();if(!t.isGuideFinished()&&(this.newGuideHint&&(this.newGuideHint.active=1==t.step),this.newGuideNode&&this.newGuideNode.isValid)){var o=this.newGuideNode.getChildByName("img_press");o&&(o.active=!0,o.name="userGuide",o.parent=this.root_preview_guide,o.position=this.newGuideNode.position);var n=this.newGuideNode.getChildByName("guide_"+t.step);if(!n)return void console.error("没有对应的引导",t.step);n.active=!1;for(var i=t.getGuideFill(),a=new d(0,0,0),r=0;r<i.length;r++){var s=i[r],l=100*s[0]+s[1],c=this.blockMap.get(l);a.add(c.node.position)}a.multiplyScalar(1/i.length);var h=this.node.getComponent(m).convertToWorldSpaceAR(a);h.y+=50;var u=this.newGuideNode.getComponent(m).convertToNodeSpaceAR(h);if(n.position=u,o&&o.isValid){var v=o.getChildByName("img_press");v.active=!1;v.getComponent(g);var b=o.position.clone(),k=this.gameManager.blockPlaceholders;if(1==k.length){var C=k[0].getChildByName("blockParent"),B=p(C),M=E.prefab.new_guide_light_1.path,w=E.prefab.new_guide_bubble_1.path;2==t.step&&(M=E.prefab.new_guide_light_2.path,w=E.prefab.new_guide_bubble_2.path),k[0].getComponent(_).setBgLight(M,w),B.getComponent(g).opacity=100,o.addChild(B),B.setSiblingIndex(0),B.name="move_block",B.setPosition(d.ZERO)}var A=o.getChildByName("move_block");f(o).repeatForever(f().to(1,{position:u},{easing:"circOut"}).delay(.333).call((function(){o.position=b,v.active=!1})).delay(.01)).start(),A&&f(A).repeatForever(f().to(.167,{scale:new d(1,1,1)},{easing:"sineInOut"}).delay(1.067).to(.1,{scale:new d(.4,.4,.4)},{easing:"sineInOut"}).delay(.01)).start()}if(1==t.step&&!Y.inst.hasFlag(F.af_gudie_begin)){var S=de.deviceId();ue.instance.reportAf(F.af_gudie_begin,{userId:S},!0),Y.inst.recordFlag(F.af_gudie_begin)}}}else this.scheduleOnce((function(){e.PlayNewGuideAnim()}),.2)},l.onRestartGame=function(e){oe.inst.setThisGameWatchReviveNum(0),this.refreshBtnRefreshAll()},l.onRelifeGame=function(){},l.onDestroy=function(){W.instance.unlisten(M.BLOCK_TOUCH_START,this.onTouchStart,this),this.gameManager&&this.gameManager.endGame(),le(this)},l.onEvtRefreshPreviewBlock=function(e){var t=this;this.scheduleOnce((function(){t.checkGameover()}),.5),this.addGuideBlockScale(),this.refreshBtnRefreshAll()},l.addGuideBlockScale=function(){var e=this.getGuideDataInst();e.isGuideFinished()?this.gameManager&&this.gameManager.blockPlaceholders.forEach((function(e){e.getComponent(_).removeBlockScale()})):this.gameManager&&this.gameManager.blockPlaceholders.forEach((function(t){var o=t.getComponent(_);e.step<3?o.addBlockScale():o.removeBlockScale()}))},l.refreshBtnRefreshAll=function(){if(this.gameManager.isCanRefreshAll()&&0==this.gameManager.changeAllTimes){if(this.rootRefreshBtn&&this.rootRefreshBtn.active&&(this.rootRefreshBtn.active=!1),this.rootRefreshAll){if(this.rootRefreshAll.active||(this.rootRefreshAll.active=!0),!this.labRefreshAll){var e=this.rootRefreshAll.getChildByName("Label");e&&(this.labRefreshAll=e.getComponent(v))}if(this.labRefreshAll){var t=this.gameManager.getMaxChangeAllTimes();this.labRefreshAll.string="0 / "+t}}}else if(this.rootRefreshAll&&this.rootRefreshAll.active&&(this.rootRefreshAll.active=!1),this.rootRefreshBtn){if(this.rootRefreshBtn.active||(this.rootRefreshBtn.active=!0),!this.labRefreshBtn){var o=this.rootRefreshBtn.getChildByName("Label");o&&(this.labRefreshBtn=o.getComponent(v))}if(this.labRefreshBtn){var n=this.gameManager.getMaxChangeAllTimes();this.labRefreshBtn.string=this.gameManager.changeAllTimes+" / "+n}}},l.checkGameover=function(){var e=this;return!!this.getGuideDataInst().isGuideFinished()&&(!!this.gameManager.checkGameEnd()&&(this.scheduleOnce((function(){e.gameManager.checkGameEnd()&&e.onGameOver()}),1.5),!0))},l.initAllGZ=function(){if(!this.allcellsanis){this.allcellsanis=[];for(var e=[],t=P.BoardHeight*P.BoardWidth,o=0;o<t;o++)e[o]=o;for(var n=0;n<t;n++){var i=Math.round(Math.random()*(t-1)),a=[e[i],e[n]];e[n]=a[0],e[i]=a[1]}for(var r=0;r<t;r++){var s=e[r],l={row:Math.floor(s/P.BoardHeight),column:s%P.BoardWidth};this.allcellsanis.push(l)}}},l.gameOverAllBlock=function(){},l.onEvtMoveBlock=function(e,t){var o=this,n=e.getComponent(_);this.chooseBlocksData.clear(),this.chooseNodeIndex=[],this.chooseBlockType=-1;var i=!0,r=-1;e.getComponent(_).setHintVisible(!1),n.StopBlockScale();for(var s,l=a(n.blocks);!(s=l()).done;){var c=s.value;if(0!=c.blockType){var h=this.getNodeIndexWithPosition(c.node.worldPosition);if(h){var d=h[2];this.chooseNodeIndex.push(h),this.chooseBlocksData.set(d,c.blockType)}else i=!1;r=c.getRealBlockType(),c.targetNodeIndex=h}}if(!i||t<10)return this.refreshBoardView(this.gameManager.tableData),void(this.lastChooseNodeIndex=null);if(!this.checkEqualChooseNodeIndex(this.chooseNodeIndex)){this.refreshBoardView(this.gameManager.tableData);var u=!0;if(1001==r||1002==r||1003==r||1101==r||1102==r){var g=0,f=Z[r].count;if(this.chooseNodeIndex.forEach((function(e){var t=e[2],n=o.blockMap.get(t);n.temporary||0==n.blockType||n.blockType>100||g++})),!(u=g>0&&g<=f))return this.refreshBoardView(this.gameManager.tableData),void(this.lastChooseNodeIndex=null);this.chooseBlockType=-1}else{for(var m,p=a(this.chooseNodeIndex);!(m=p()).done;){var v=m.value[2],b=this.blockMap.get(v);if(!b.temporary&&0!=b.blockType){u=!1;break}}if(!u)return this.refreshBoardView(this.gameManager.tableData),void(this.lastChooseNodeIndex=null);this.chooseBlockType=r}this.lastChooseNodeIndex=this.chooseNodeIndex,this.refreshBoardViewWithChoose(n.blockIndex,r)}},l.onEvtMoveBlockEnd=function(e,t){var o=this;e.getComponent(_).setHintVisible(!0),e.getComponent(_).setHintAvailable(!1),this.scheduleOnce((function(){var n=e.getComponent(_);if(e.setSiblingIndex(1),null==o.lastChooseNodeIndex||t<10)n.moveToOriginalPosition();else{var i=9,a=9;o.lastPutCoord=new Array,o.lastChooseNodeIndex.forEach((function(e){i=Math.min(i,e[0]),a=Math.min(a,e[1]),o.lastPutCoord.push(e)}));var r=n.blockColor;o.moveBlock(n,(function(){o.clearBlock(r),o.onMoveBlockEnd()}),o.lastChooseNodeIndex),D.playSubSound(E.audio.put),o.gameManager.scoreHelper.putBlock(n.blockIndex,i,a),o.lastChooseNodeIndex=null}}))},l.onGameOver=function(){this.unschedule(this.checkAiTipTimer),this.gameManager.updateLevelHistoryData()},l.moveBlock=function(e,t,o){for(var n=0;n<e.blocks.length;n++)if(this.targetNodeIndex=e.blocks[n].targetNodeIndex,this.targetNodeIndex){this.targetIndex=n;break}var i=this.targetNodeIndex[2],a=this.blockMap.get(i).node,r=e.blocks[this.targetIndex].node.getWorldMatrix();u.invert(this.tempMat4,r),d.transformMat4(this.newLocalPos,a.worldPosition,this.tempMat4),e.moveToPosition(this.newLocalPos,t,this.lastChooseNodeIndex)},l.clearBlock=function(e){var t=this,o=this.gameManager.scoreHelper,n=this.getClearRowAndCol(),i=n[0],a=n[1];this.onBeforeClearBlock();var r=i.length>0,s=a.length>0,l=.1;if(r){for(var c=0,h=function(){for(var o=i[u],n=0;n<t.gameManager.blockNumber;n++)t.onClearBlockEntity(o,n,t.gameManager.tableData[o][n]),t.gameManager.tableData[o][n]=0;c=t.showClearAniWith(new d(0,84*-o+De,0),0,e),t.scheduleOnce((function(){t.clearBlockWithRow(o)}),(2*u+1)*b.deltaTime)},u=0;u<i.length;u++)h();c+=(2*i.length-1)*b.deltaTime,l=Math.max(c,l)}if(s){for(var g=0,f=function(){for(var o=a[m],n=0;n<t.gameManager.blockNumber;n++)t.onClearBlockEntity(n,o,t.gameManager.tableData[n][o]),t.gameManager.tableData[n][o]=0;g=t.showClearAniWith(new d(84*o-De,0,0),90,e),t.scheduleOnce((function(){t.clearBlockWithCol(o)}),(2*m+2)*b.deltaTime)},m=0;m<a.length;m++)f();g+=2*a.length*b.deltaTime,l=Math.max(g,l)}var p=i.length+a.length,v=y.None;R.inst.isGuideFinished()&&(v=o.checkCombo(p));var k=!1;A.gameMode==S.endless&&(3==R.inst.step||R.inst.isGuideFinished())&&(k=this.gameManager.checkClearAllBlock())&&o.recordClearAllFillScore(v,p,this.gameManager.getRound()),p>0?(v==y.Combo&&o.combo>1&&re(M.EVENT_CAMETA_SHAKE),this.scheduleOnce((function(){t.onClearnAnimationFinished(i,a,p,v,e,k),t.onAfterClearBlockAnim(p,v)}),.9*l),D.playSubSound(E.audio.clear_1),this.refreshCombo(v,!0)):(this.refreshCombo(v,!1),this.onFinalAddScore())},l.showComboAni=function(e,t){void 0===t&&(t=0),W.instance.emit(M.BLOCK_COMBO,e,t)},l.showComboScore=function(e,t,o,n,i,a){var r=this,s=this.gameManager.scoreHelper.getClearBlockScore(o,t),l=I.inst.getPoolFromBlock(E.prefab.comboScore.path).get();if(l){var c=l.getComponent(N);if(c){var h=s;if(c.showComobScore({combo:t,score:h}),l.setParent(this.rootEffect),c.comboPosFix){var u=c.comboPosFix.getComponent(m),g=[u.width,u.height],f=g[0],p=this.node.getComponent(m),v=[p.width,p.height],b=.5*v[0]-.5*f,C=new d(Math.sign(n.x)*Math.min(Math.abs(n.x),b),n.y,0);l.setPosition(C);var B=l.getComponent(k);B.play();var w=this;B.once(k.EventType.FINISHED,(function(){r&&r.node.isValid&&r.showMultipleClearEffect(o,h,i,C,a),re(M.EVENT_COMBO_BLOCK_END,e,t,o),w&&w.gameManager&&w.gameManager.updateLevelHistoryData(),I.inst.getPoolFromBlock(E.prefab.comboScore.path).put(l)}))}}}},l.onBeforeClearBlock=function(){},l.onClearBlockEntity=function(e,t,o){},l.refreshCombo=function(e,t){var o=this.gameManager.scoreHelper.getComboTimes();e==y.Combo_End||e==y.Combo_BREAK?(X.getInstance().Shake(J.light),this.showComboAni(!1)):e==y.Combo?(o>1&&this.showComboAni(!0,o),o>2||o>1?X.getInstance().Shake(J.medium):X.getInstance().Shake(J.light),o>2&&(o<5?X.getInstance().ShakeCamera(J.light):X.getInstance().ShakeCamera(J.medium))):e==y.Combo_WAIT&&X.getInstance().Shake(J.light)},l.onAfterClearBlockAnim=function(e,t){this.isGuideFinished||this.isLastGuide||(A.gameMode==S.endless?this.gameManager.initWithGuideData(!0,R.inst.getGuideBoard()):A.gameMode==S.adventure_level&&this.gameManager.initWithGuideData(!0,U.inst.getGuideBoard()),this.onStepFinished())},l.onClearnAnimationFinished=function(e,t,o,n,i,a){var r,s,l=null==(r=ge)||null==(s=r.Login)?void 0:s.userId,c=this.gameManager.scoreHelper.getComboTimes();re(M.EVENT_CLEAR_BLOCK_END,l,o,c),this.gameManager.updateLevelHistoryData();var h=this.getClearPosition(e,t);if(n==y.Combo&&c>1){this.showComboScore(l,c-1,o,h,i,a);var d="combo_"+Math.min(c-2,6);D.playSubSound(E.audio[d])}else{var u=this.gameManager.scoreHelper.getClearBlockScore(o,0);o>1?this.showMultipleClearEffect(o,u,i,h,a):this.showAddClearScoreAnimation(u,e,t,o,h,a)}},l.showMultipleClearEffect=function(e,t,o,n,i){var a=this;if(e>1){var r="clear_"+Math.min(e,6);D.playSubSound(E.audio[r])}var s=I.inst.getPoolFromBlock(E.prefab.cool.path).get();s.parent=this.rootEffect;var l=s.getComponent(z);if(l){l.showScore({score:t,clearCnt:e,blockColor:o});var c=s.getComponent(k);c&&(c.once(k.EventType.FINISHED,(function(){I.inst.getPoolFromBlock(E.prefab.cool.path).put(s),i?a.checkClearAllAfterAddScore(!0):a.onFinalAddScore()}),this),c.play());var h=l.getComboPosFixNode().getComponent(m),u=[h.width,h.height],g=u[0],f=this.node.getComponent(m),p=(f.width,f.height,300-.5*g),v=new d(Math.sign(n.x)*Math.min(Math.abs(n.x),p),n.y-0,0);s.setPosition(v)}},l.showAddClearScoreAnimation=function(e,t,o,n,i,a){var r=this,s=I.inst.getPoolFromBlock(E.prefab.addScore.path).get();s&&(s.setParent(this.rootEffect),s.setPosition(i),s.getComponent(G).setScore(e),s.getComponent(G).show(d.ONE,(function(e){I.inst.getPoolFromBlock(E.prefab.addScore.path).put(e),n>1?r.checkClearAllAfterAddScore(a):r.onFinalAddScore()}),s))},l.checkClearAllAfterAddScore=function(e){if(A.gameMode==S.endless)if(e&&this.gameManager.canShowClearRound()){var t=E.prefab.clear_all.path,o=I.inst.getPoolFromBlock(t).get();o.parent=this.rootEffect;var n=T.playAnimShaderFrame(o),i=n.ani;n.time;i.play(),i.once(k.EventType.FINISHED,(function(){I.inst.getPool(t).put(o)}),this),this.showAddClearAllScoreAnimation()}else this.onFinalAddScore()},l.showAddClearAllScoreAnimation=function(){var e=this,t=this.gameManager.scoreHelper.clearAllScore,o=I.inst.getPoolFromBlock(E.prefab.addScore.path).get();o&&(o.setParent(this.rootEffect),o.setPosition(0,84,0),o.getComponent(G).setScore(t),o.getComponent(G).show(d.ONE,(function(t){var o,n;I.inst.getPoolFromBlock(E.prefab.addScore.path).put(t);var i=null==(o=ge)||null==(n=o.Login)?void 0:n.userId;re(M.EVENT_CLEAR_ALL_BLOCK_END,i),e.onFinalAddScore()}),o))},l.executeTasksSequentially=function(){var e=r(s().mark((function e(t,o){var n,i,r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=a(t);case 1:if((i=n()).done){e.next=13;break}return r=i.value,e.prev=3,e.next=6,r();case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),console.error("Error executing task:",e.t0);case 11:e.next=1;break;case 13:o();case 14:case"end":return e.stop()}}),e,null,[[3,8]])})));return function(t,o){return e.apply(this,arguments)}}(),l.onFinalAddScore=function(){var e=this;if(A.gameMode==S.endless){var t=this.gameManager.scoreHelper,o=[];if($.getInstance().currentReachPercent<=9){var n=t.getProgressScoreMap()[$.getInstance().currentReachPercent],i=t.score>n,a="kIsPlayedReachPercent_"+n,r=Y.inst.hasFlag(a);i&&!r&&(Y.inst.recordFlag(a,!0),o.push((function(){return new Promise((function(t){var o=E.prefab.reachPercent,i=o.path,a=I.inst.getPoolWithBundleName(i,o.bundle).get();a.setParent(e.reachPercent),a.setPosition(d.ZERO);var r=a.getComponent(ie);a.getChildByPath("newanim/shellnode/Label").getComponent(v).string=n.toString(),r.play(),a.getComponent(ae).play(),a.getChildByPath("newanim/ef_particle").active=!0,$.getInstance().currentReachPercent++,e.scheduleOnce((function(){I.inst.getPoolWithBundleName(i,o.bundle).put(a),t(1)}),2)}))})))}!t.isBestScore||oe.inst.isNewRecordPlayed||t.isFirstChallange||o.push((function(){return new Promise((function(t,o){oe.inst.isNewRecordPlayed=!0;var n=I.inst.getPoolFromBlock(E.prefab.newRecord.path).get();n.setParent(e.rootEffect),n.setPosition(d.ZERO);var i=n.getComponent(k);i.play(),e.scheduleOnce((function(){D.playSubSound(E.audio.new_record)})),i.once(k.EventType.FINISHED,(function(){I.inst.getPoolFromBlock(E.prefab.newRecord.path).put(n),t(!0)}),e)}))})),t.checkDiffcultScore()&&o.push((function(){return new Promise((function(t){var o=E.prefab.diffult_change,n=o.path,i=I.inst.getPoolWithBundleName(n,o.bundle).get();if(i){i.parent=e.rootEffect;var a=i.getComponent(k);a.play(),a.once(k.EventType.FINISHED,(function(){I.inst.getPoolWithBundleName(n,o.bundle).put(i),t(1)}),e)}}))})),this.executeTasksSequentially(o,(function(){}))}},l.getClearPosition=function(e,t){var o=e,n=t,i=this.lastPutCoord;if(i){o=[],n=[];for(var a=0;a<i.length;a++){var r=i[a],s=r[0],l=r[1];(e.indexOf(s)>-1||t.indexOf(l)>-1)&&(o.push(s),n.push(l))}}var c=this.getClearCenterIndex(o,n),h=100*c.centerRow+c.centerCol,u=this.blockMap.get(h);if(u){var g=u.node.parent.getComponent(m).convertToWorldSpaceAR(u.node.position),f=this.node.getComponent(m);if(f)return f.convertToNodeSpaceAR(g)}return d.ZERO},l.getClearCenterIndex=function(e,t){t=t||[];var o=3;if((e=e||[]).length>0){var n=0,i=e.filter((function(e){return e>-1&&e<8&&(n+=e,!0)}));o=i.length>0?Math.ceil(n/i.length):3}var a=3;if(t.length>0){var r=0,s=t.filter((function(e){return e>-1&&e<8&&(r+=e,!0)}));a=s.length>0?Math.ceil(r/s.length):3}return{centerRow:o,centerCol:a}},l.showClearAniWith=function(e,t,o){var n=this;void 0===t&&(t=0);var i=0==t?"BlockClearAni_H":"BlockClearAni_V",a=this.gameManager.getNodePoolWithPoolType(i).get();a.parent=this.rootEffect,a.position=e,a.scale=this.clearAnimScale;var r=a.getComponent(Q),s=o-1,l=P.BlockColor;if(s>-1&&s<l.length){var c=l[s];r&&r.setColor(c)}else r&&r.setColor(l[0]);return r&&r.play(),this.scheduleOnce((function(){null!=n.gameManager&&(n.gameManager.getNodePoolWithPoolType(i).put(a),r&&r.stop())}),1),.2},l.clearBlockWithRow=function(e){for(var t=0,o=0;o<this.gameManager.blockNumber;o++)t=100*e+o,this.blockMap.get(t).clearColor()},l.clearBlockWithCol=function(e){for(var t=0,o=0;o<this.gameManager.blockNumber;o++)t=100*o+e,this.blockMap.get(t).clearColor()},l.checkEqualChooseNodeIndex=function(e){if(null==this.lastChooseNodeIndex)return!1;if(this.lastChooseNodeIndex==e)return!0;if(this.lastChooseNodeIndex.length!=e.length)return!1;var t=!0;return this.lastChooseNodeIndex.forEach((function(o,n){o[0]==e[n][0]&&o[1]==e[n][1]||(t=!1)})),t},l.refreshBoardViewWithChoose=function(e,t){var o=this,n=9,i=9;this.lastChooseNodeIndex&&this.lastChooseNodeIndex.forEach((function(e){n=Math.min(n,e[0]),i=Math.min(i,e[1])}));var a=[];this.lastChooseNodeIndex&&this.lastChooseNodeIndex.forEach((function(e){var n=e[2];a.push(n);var i=t;o.chooseBlocksData.has(n)&&(i=o.chooseBlocksData.get(n)),o.blockMap.get(n).refreshByMoveBlock(i,!0)}));var r=this.gameManager.getClearRowAndCol(this.blocks.map((function(e){return e.map((function(e){return e.blockType}))}))),s=r[0],l=r[1];null==s||s.forEach((function(e){for(var n=0;n<o.gameManager.blockNumber;n++){var i=100*e+n,r=o.blockMap.get(i),s=a.indexOf(i)>-1;r.onlyRefreshColor(t,s),r.resetScale(t)}})),null==l||l.forEach((function(e){for(var n=0;n<o.gameManager.blockNumber;n++){var i=100*n+e,r=a.indexOf(i)>-1,s=o.blockMap.get(i);s.onlyRefreshColor(t,r),s.resetScale(t)}}))},l.getClearRowAndCol=function(){return this.gameManager.tableData=this.blocks.map((function(e){return e.map((function(e){return e.blockType}))})),this.gameManager.getClearRowAndCol()},l.getNodeIndexWithPosition=function(e){var t=this.blockParentTransform.convertToNodeSpaceAR(e),o=P.BlockSpriteSize.x,n=4*o,i=Math.floor((t.x+n)/o);if(i<0||i>7)return null;var a=7-Math.floor((t.y+n)/o);return a<0||a>7?null:[a,i,100*a+i]},l.initNodeData=function(){this.blocks=new Array,this.blockMap=new Map,this.blockParent=this.node.getChildByName("blocks"),this.previewAniBlockParent=this.node.getChildByName("previewAniBlocks"),this.blockParentTransform=this.blockParent.getComponent(m);for(var e=0;e<this.gameManager.blockNumber;e++){null==this.blocks[e]&&(this.blocks[e]=new Array);for(var t=0;t<this.gameManager.blockNumber;t++){var o=this.gameManager.getNodePoolWithPoolType("BlockEntityPool").get(),n=o.getComponent(w);o.parent=this.blockParent;var i=100*e+t;n.setCoord(e,t,i),this.blocks[e].push(n),this.blockMap.set(i,n),this.onBlockEntityLoaded(e,t,n)}}},l.onBlockEntityLoaded=function(e,t,o){},l.onLevelRefresh=function(){},l.refreshBoardView=function(e){for(var t=0;t<e.length;t++)for(var o=0;o<e[t].length;o++){var n=100*t+o;this.blockMap.get(n).refreshColor(e[t][o])}},l.onBtnGoLevel=function(){A.gameMode=S.adventure_level,K.getInstance().gotoScene("level","block").then()},l.onBtnClickRefreshAll=function(){var e=this;this.gameManager.isCanRefreshAll()?this.gameManager.isGameOver||(D.playBtnEffect(),ue.instance.reportBI(F.ad_refresh_all_block,{ad_status:L.WakeUp,ad_mode:A.gameMode}),O.inst.showRewardVideoAd(H.Block_Refresh_All).then((function(){e.gameManager.onAdRefreshAllBlock(),e.gameManager.addChangeAllTimes(),e.refreshBtnRefreshAll(),ue.instance.reportBI(F.ad_refresh_all_block,{ad_status:L.Finished,ad_mode:A.gameMode})})).catch((function(e){e.errMsg!=V.Sdk_Ad_Close_Reward?q.getInstance().native.showToast(j.translateText("tip_ad_fail")):ue.instance.reportBI(F.ad_refresh_all_block,{ad_status:L.Closed,ad_mode:A.gameMode})}))):q.getInstance().native.showToast(j.translateText("tip_no_change_times"))},l.onBtnClickChangeAll=function(){this.gameManager.relifeCurrentLevel(),this.refreshBtnRefreshAll(),ue.instance.reportBI(F.item_use_change_all,{current:this.gameManager.changeAllTimes,game_mode:A.gameMode})},l.getGuideDataInst=function(){return R.inst},l.onMoveBlockEnd=function(){var e=this.getGuideDataInst();if(this.isGuideFinished=e.isGuideFinished(),this.isGuideFinished)this.onStepFinished();else{this.isLastGuide=e.isLastGuide();var t=e.step,o=A.gameMode,n=F.guide_step+"_"+o+"_"+t+"_1";Y.inst.hasFlag(n)||(ue.instance.reportBI(F.guide_step,{g_step:e.step,g_mode:A.gameMode,g_state:1},!0),Y.inst.recordFlag(n)),e.step+=1,this.isLastGuide&&(this.gameManager.initTableData(),this.onStepFinished(),Y.inst.hasFlag(F.af_gudie_end)||(ue.instance.reportAf(F.af_gudie_end,{},!0),Y.inst.recordFlag(F.af_gudie_end)))}},l.onStepFinished=function(){this.refreshBoardView(this.gameManager.tableData),re(M.kEvent_Game_Logic_Move_Block_End),this.checkGameover()},l.setPercentImageState=function(e,t){var o=e.getChildByPath("break/text/Sprite/BeforePercent"),n=e.getChildByPath("break/text/Sprite/AfterPercent"),i=e.getChildByPath("break/text/Sprite/Percent/Percent80"),a=e.getChildByPath("break/text/Sprite/Percent/Percent90"),r=e.getChildByPath("break/text/Sprite/Percent/Percent99"),s=e.getChildByPath("break/text/Sprite/Percent/Percent100");t<4?(o.active=!0,n.active=!0,i.active=!1,a.active=!1,r.active=!1,s.active=!1,1==t?i.active=!0:2==t?a.active=!0:3==t&&(r.active=!0)):4==t&&(o.active=!1,n.active=!1,i.active=!1,a.active=!1,r.active=!1,s.active=!0)},l.update=function(e){this.gameManager&&this.gameManager.onUpdate(e)},l.showAiTips=function(e){var t=this;e&&!this.hasEnhancedHint?R.inst.isGuideFinished()&&this.gameManager&&this.gameManager.scoreHelper&&this.gameManager.scoreHelper.checkIsCanOpenAITips()&&this.gameManager.getAiHelpTipCoord().then((function(e){var o=e.holder,n=e.item,i=n.simple,a=n.pc,r=n.pj,s=a+.5*(i.length-1),l=r+.5*(i[0].length-1),c=t.coordToWorld(s,l);if(t.aiTipNode)t.onShowAiTipsAnim(o,c);else{var h=E.prefab.ef_ai_tips_hand;K.getInstance().loadNode(h.path,h.bundle,t.rootEffect).then((function(e){t.aiTipNode=e.getComponent(te),t.onShowAiTipsAnim(o,c)}))}})).catch((function(e){console.log("推荐失败:",e)})):this.aiTipNode&&this.aiTipNode.hide()},l.onShowAiTipsAnim=function(e,t){if(e.node&&e.node.isValid&&e.node.parent){var o=e.node.parent.getComponent(m).convertToWorldSpaceAR(e.node.position),n=this.aiTipNode.node.parent.getComponent(m).convertToNodeSpaceAR(o);this.aiTipNode.node.setPosition(n),this.aiTipNode.node.active=!0,this.aiTipNode.showTips(e.blockIndex,e.blocksData,n,t)}},l.coordToWorld=function(e,t){return new d(84*t-De,De-84*e,0)},t}(C)).instance=void 0,Se=t((Ae=xe).prototype,"previewAniBlockParent",[me],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Pe=t(Ae.prototype,"ndBlockPreview",[pe],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ee=t(Ae.prototype,"root_combo",[ve],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ye=t(Ae.prototype,"rootRefreshAll",[be],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ne=t(Ae.prototype,"rootRefreshBtn",[ke],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Te=t(Ae.prototype,"root_preview_guide",[Ce],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ie=t(Ae.prototype,"rootEffect",[Be],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ge=t(Ae.prototype,"reachPercent",[Me],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Re=t(Ae.prototype,"newGuideHint",[we],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_e=Ae))||_e));l._RF.pop()}}}));

System.register("chunks:///_virtual/Boot.ts",["cc","./Global.ts","./MKPrototype.ts","./LanguageData.ts","./EventType.ts","./MsgType.ts","./MKEvent.ts","./MKUICtr.ts","./MKUIBase.ts","./MKLocalStorage.ts","./MKHttp.ts","./AudioDefine.ts","./MKCopy.ts","./Timer.ts","./MKUtil.ts","./MKResCtr.ts","./MsgData.ts","./MKUICfg.ts","./FsmState.ts","./BIDefine.ts","./GameDefine.ts","./MKLog.ts","./MKAudio.ts","./sdk.ts"],(function(t){var e,n,o;return{setters:[function(t){e=t.cclegacy},function(e){t("global",e.Global)},null,function(e){t("i18n",e)},function(e){t("eventType",e.Events)},function(e){t("msgType",e.MsgType)},function(e){var n={};n.regEvent=e.regEvent,n.sendEvent=e.sendEvent,n.unRegEvent=e.unRegEvent,t(n)},function(e){var n={};n.CacheMode=e.CacheMode,n.DialogType=e.DialogType,n.MKUIParams=e.MKUIParams,n.showPgs=e.showPgs,n.showPopup=e.showPopup,n.showTips=e.showTips,n.showView=e.showView,t(n)},function(e){t("UIBase",e.MKUIBase)},function(e){var n={};n.getItem=e.getItem,n.removeItem=e.removeItem,n.setItem=e.setItem,t(n)},function(e){t("net",e.MKHttp)},function(e){t("audioKey",e.AudioKey)},function(e){t("deepClone",e.deepClone)},function(e){t("timer",e.Timer)},function(e){t("utils",e.MKUtil)},function(e){var n={};n.res=e.MKResCtr,n.subRes=e.MKSubResCtr,t(n)},function(e){t("msgData",e.MsgData)},function(e){t("uiCfg",e.MKUIConfig)},function(t){n=t.Fsm},function(e){t("biEventId",e.BIEventID)},function(e){t("buildInfo",e.buildInfo)},function(e){var n={};n.error=e.error,n.log=e.log,n.trace=e.trace,n.warn=e.warn,t(n)},function(t){o=t.audioManager},function(e){t("sdk",e.SDK)}],execute:function(){e._RF.push({},"446c7CQbQFENotd1oOMHyNx","Boot",void 0);t("fsm",new n.FsmManager),t("audio",o.instance);e._RF.pop()}}}));

System.register("chunks:///_virtual/card_item.ts",["./rollupPluginModLoBabelHelpers.js","cc","./index.ts","./helper.ts"],(function(e){var t,r,i,a,o,n,l,s,c;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,i=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){o=e.cclegacy,n=e._decorator,l=e.Label,s=e.Component},null,function(e){c=e.Helper}],execute:function(){var d,h,p,u,_;o._RF.push({},"1d7bcfD/S9Eh5YpiaRITuwz","card_item",void 0);var f=n.ccclass,v=n.property;e("card_item",(d=f("card_item"),h=v(l),d((_=t((u=function(e){function t(){for(var t,r=arguments.length,o=new Array(r),n=0;n<r;n++)o[n]=arguments[n];return t=e.call.apply(e,[this].concat(o))||this,i(t,"label",_,a(t)),t._holder=void 0,t}r(t,e);var o=t.prototype;return o.show=function(e){this._holder=e,this.label.string=e.data.name,this.node.setScale(.3,.3)},o.hide=function(){},o.click=function(){this._holder.adapter.scrollManager.scrollToGroupIndex(1,this._holder.view.index)},o.update=function(){if(this._holder&&this._holder.model){var e=this._holder.adapter.scrollManager.content.convertToWorldSpaceAR(this.node.position),t=this._holder.adapter.scrollManager.view.convertToNodeSpaceAR(e),r=this._holder.adapter.centerManager.getContainerOffset(),i=Math.abs(t[this._holder.adapter.mainAxis])-r,a=Math.abs(i)/this._holder.adapter.mainAxisSize;a=1-a,a=c.clamp(a,.3,1);var o=this.node.getScale();o[this._holder.adapter.mainAxis]=a,o[this._holder.adapter.crossAxis]=a,this.node.setScale(o)}},t}(s)).prototype,"label",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=u))||p));o._RF.pop()}}}));

System.register("chunks:///_virtual/card.ts",["./rollupPluginModLoBabelHelpers.js","cc","./index.ts","./card_item.ts","./enum.ts","./ScrollAdapter.ts","./View.ts","./Holder.ts"],(function(t){var n,e,i,r,o,c,a,l,u,s,f,p,h;return{setters:[function(t){n=t.applyDecoratedDescriptor,e=t.inheritsLoose,i=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){o=t.cclegacy,c=t._decorator,a=t.Node,l=t.director},null,function(t){u=t.card_item},function(t){s=t.ChildAlignment},function(t){f=t.ScrollAdapter},function(t){p=t.View},function(t){h=t.Holder}],execute:function(){var d,m,y,g,b;o._RF.push({},"0735ftw3EhKNYV9hDlICemd","card",void 0);var w=c.ccclass,v=c.property,_=(t("card",(d=w("card"),m=v(a),d((b=n((g=function(t){function n(){for(var n,e=arguments.length,o=new Array(e),c=0;c<e;c++)o[c]=arguments[c];return n=t.call.apply(t,[this].concat(o))||this,i(n,"prefab",b,r(n)),n}e(n,t);var o=n.prototype;return o.getPrefab=function(t){return this.prefab},o.getHolder=function(t,n){return new A(t,n,this)},o.getView=function(){return new _(this)},o.initElement=function(t,n){},o.start=function(){for(var t=[],n=0;n<100;n++)t.push({name:n+""});this.modelManager.insert(t)},o.home=function(){l.loadScene("home")},o.typeUpper=function(){this.layoutManager.childAlignment=s.UpperLeft},o.typeMiddle=function(){this.layoutManager.childAlignment=s.MiddleLeft},o.typeLower=function(){this.layoutManager.childAlignment=s.LowerLeft},n}(f)).prototype,"prefab",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=g))||y)),function(t){function n(){return t.apply(this,arguments)||this}e(n,t);var i=n.prototype;return i.onVisible=function(){},i.onDisable=function(){},n}(p)),A=function(t){function n(){for(var n,e=arguments.length,i=new Array(e),r=0;r<e;r++)i[r]=arguments[r];return(n=t.call.apply(t,[this].concat(i))||this)._item=null,n}e(n,t);var i=n.prototype;return i.onCreated=function(){this._item=this.node.getComponent(u)},i.onVisible=function(){this._item.show(this)},i.onDisable=function(){this._item.hide()},n}(h);o._RF.pop()}}}));

System.register("chunks:///_virtual/CenterManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Manager.ts","./enum.ts","./ScrollManager.ts","./ViewManagerEvent.ts"],(function(e){var t,i,a,r,n,o,s,l,c,p,h,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,a=e.initializerDefineProperty,r=e.assertThisInitialized,n=e.createClass},function(e){o=e.cclegacy,s=e._decorator,l=e.v3},function(e){c=e.Manager},function(e){p=e.AlwaysScroll},function(e){h=e.ScrollManager},function(e){u=e.VMEvent}],execute:function(){var d,g,v,f,_,w,M,m,A,x,z;o._RF.push({},"49cfdCskIREZ6//by123w4v","CenterManager",void 0);var b=s.ccclass,S=s.property;e("CenterManager",(d=b("CenterManager"),g=S("boolean"),v=S({visible:function(){return this.enabled},tooltip:"自动居中动画的时长"}),f=S({range:[0,1],slide:!0,step:.1,tooltip:"容器(view)的锚点,当滚动停止时,元素锚点位置会和容器锚点位置重合"}),_=S({range:[0,1],slide:!0,step:.1,tooltip:"元素(item)的锚点位置,当滚动停止时,元素锚点位置会和容器锚点位置重合"}),d((m=t((M=function(e){function t(){for(var t,i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return t=e.call.apply(e,[this].concat(n))||this,a(t,"_enabled",m,r(t)),a(t,"duration",A,r(t)),a(t,"containerAnchorPoint",x,r(t)),a(t,"elementAnchorPoint",z,r(t)),t}i(t,e);var o=t.prototype;return o.getContainerOffset=function(e){void 0===e&&(e=this.containerAnchorPoint);var t=0;return t=this.adapter.isHorizontal?-1==this.adapter.multiplier?e:1-e:1==this.adapter.multiplier?e:1-e,this.adapter.mainAxisSize*t},o.getElementOffset=function(e){void 0===e&&(e=this.elementAnchorPoint);return this.adapter.isHorizontal?-1==this.adapter.multiplier?e:1-e:1==this.adapter.multiplier?e:1-e},o.onInit=function(){this.adapter.scrollManager.on(h.Event.ON_ABOUT_TO_STOP,this._onAboutToStop,this),this.adapter.viewManager.on(u.ON_UPDATE_VIEWS,this.scrollToCenter,this,!0)},o._onAboutToStop=function(){this.scrollToCenter()},o.scrollToCenter=function(e){if(void 0===e&&(e=this.duration),this.enabled){var t=this.getCenterVisibleIndex();if(-1!=t){var i=this.adapter.viewManager.getVisibleView(t);this.adapter.scrollManager.scrollToGroupIndex(e,i.index)}}},o.getCenterVisibleIndex=function(e,t){void 0===e&&(e=this.containerAnchorPoint),void 0===t&&(t=this.elementAnchorPoint);for(var i=this.adapter.mainAxis,a=this.getContainerOffset(e),r=-1,n=Number.MAX_SAFE_INTEGER,o=0;o<this.adapter.viewManager.visibleLength;o++){var s=this.adapter.viewManager.getVisibleView(o);if(!s||!s.group)break;var c={x:s.group.position.x,y:s.group.position.y};c[i]-=this.adapter.multiplier*s.group.size[i]*t;var p=this.adapter.scrollManager.content.convertToWorldSpaceAR(l(c.x,c.y)),h=this.adapter.scrollManager.view.convertToNodeSpaceAR(p),u=Math.abs(h[i]+this.adapter.multiplier*a);u<n&&(n=u,r=o)}return r},o.getPositionByGroupIndex=function(e,t,i){void 0===t&&(t=p.Auto),void 0===i&&(i=!1);var a=this.adapter.viewManager.getGroup(e);if(!a)return null;var r=null;if(t==p.Header&&this.adapter.viewManager.loopHeader)i&&(r=this._checkExists(e)),null==r&&(r=this._alwaysHeader(e,a));else if(t==p.Footer&&this.adapter.viewManager.loopFooter)i&&(r=this._checkExists(e)),null==r&&(r=this._alwaysFooter(e,a));else if(null==(r=this._checkExists(e))){var n=this.adapter.viewManager.header,o=this.adapter.viewManager.footer;n?e>o.index?r=this._calcTargetFooter(o.group,o.index+1,e,a):e<n.index&&(r=this._calcTargetHeader(n.group,n.index-1,e,a)):r={position:a.position[this.adapter.mainAxis],size:a.size[this.adapter.mainAxis],anchor:a.anchorPoint[this.adapter.mainAxis]}}return this._convertTargetToPosition(r)},o._convertTargetToPosition=function(e){var t=null;if(e){var i=this.adapter.multiplier,a=-1==i?e.anchor:1-e.anchor;t=-e.position,t-=this.getContainerOffset()*i,t-=e.size*a*i,t+=e.size*this.getElementOffset()*i}return t},o._checkExists=function(e){var t=this.adapter.viewManager.getVisibleIndexByGroupIndex(e);if(-1!=t){var i=this.adapter.viewManager.getVisibleView(t);return{position:i.group.position[this.adapter.mainAxis],size:i.group.size[this.adapter.mainAxis],anchor:i.group.anchorPoint[this.adapter.mainAxis]}}return null},o._calcTargetFooter=function(e,t,i,a){for(var r=this.adapter.viewManager.internal_getInitFooterSize(e),n=t;n<=i;n++)r+=this.adapter.viewManager.internal_accumulationSize(n);return{position:this.adapter.viewManager.internal_convertSizeToFooterPosition(r,a),size:a.size[this.adapter.mainAxis],anchor:a.anchorPoint[this.adapter.mainAxis]}},o._calcTargetHeader=function(e,t,i,a){for(var r=this.adapter.viewManager.internal_getInitHeaderSize(e),n=t;n>=i;n--)r+=this.adapter.viewManager.internal_accumulationSize(n);return{position:this.adapter.viewManager.internal_convertSizeToHeaderPosition(r,a),size:a.size[this.adapter.mainAxis],anchor:a.anchorPoint[this.adapter.mainAxis]}},o._alwaysHeader=function(e,t){var i=0,a=e,r=this.adapter.viewManager.header;return r&&(i=this.adapter.viewManager.internal_getInitHeaderSize(r.group),a=r.index),e!=a&&(i=this._calcSizeToHeader(a,e,i)),{position:this.adapter.viewManager.internal_convertSizeToHeaderPosition(i,t),size:t.size[this.adapter.mainAxis],anchor:t.anchorPoint[this.adapter.mainAxis]}},o._alwaysFooter=function(e,t){var i=0,a=e,r=this.adapter.viewManager.footer;return r&&(i=this.adapter.viewManager.internal_getInitFooterSize(r.group),a=r.index),e!=a&&(i=this._calcSizeToFooter(a,e,i)),{position:this.adapter.viewManager.internal_convertSizeToFooterPosition(i,t),size:t.size[this.adapter.mainAxis],anchor:t.anchorPoint[this.adapter.mainAxis]}},o._calcSizeToHeader=function(e,t,i){for(;;){if(--e<0){if(!this.adapter.viewManager.loopHeader)return i;e=this.adapter.viewManager.groupLength-1}if(i+=this.adapter.viewManager.internal_accumulationSize(e),t==e)return i}},o._calcSizeToFooter=function(e,t,i){for(;;){if(++e>=this.adapter.viewManager.groupLength){if(!this.adapter.viewManager.loopFooter)return i;e=0}if(i+=this.adapter.viewManager.internal_accumulationSize(e),e==t)return i}},n(t,[{key:"enabled",get:function(){return this._enabled},set:function(e){e!=this._enabled&&(this._enabled=e)}},{key:"max",get:function(){var e=this.getContainerOffset(this.containerAnchorPoint);return this.adapter.isArrangeAxisStart?e:this.adapter.mainAxisSize-e}},{key:"min",get:function(){var e=this.getContainerOffset(this.containerAnchorPoint);return this.adapter.isArrangeAxisStart?this.adapter.mainAxisSize-e:e}}]),t}(c)).prototype,"_enabled",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),t(M.prototype,"enabled",[g],Object.getOwnPropertyDescriptor(M.prototype,"enabled"),M.prototype),A=t(M.prototype,"duration",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),x=t(M.prototype,"containerAnchorPoint",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),z=t(M.prototype,"elementAnchorPoint",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),w=M))||w));o._RF.pop()}}}));

System.register("chunks:///_virtual/ChannelBase.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SdkBase.ts"],(function(n){var t,e,o;return{setters:[function(n){t=n.inheritsLoose},function(n){e=n.cclegacy},function(n){o=n.SdkBase}],execute:function(){e._RF.push({},"21f82IsEP5I2rSJKzOstMAI","ChannelBase",void 0);n("ChannelBase",function(n){function e(){for(var t,e=arguments.length,o=new Array(e),r=0;r<e;r++)o[r]=arguments[r];return(t=n.call.apply(n,[this].concat(o))||this).settings=void 0,t}t(e,n);var o=e.prototype;return o.isSupportShare=function(){return!1},o.Init=function(){},o.navigateToMiniProgram=function(n,t,e,o,r){return new Promise((function(n,t){n(!0)}))},o.sendMsg=function(n){},o.setCloudStorage=function(n){},o.getUserSettings=function(){},o.aggreePrivacy=function(){return new Promise((function(n,t){n(!0)}))},o.reportABEvent=function(n,t){console.log("reportABEvent",n,t)},o.getABExpGroup=function(n){return console.log("获取实验分组"+n),0},e}(o));e._RF.pop()}}}));

System.register("chunks:///_virtual/chat_Item.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,s,a,i,n,r,o,l,h,g,c;return{setters:[function(e){t=e.applyDecoratedDescriptor,s=e.inheritsLoose,a=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){n=e.cclegacy,r=e._decorator,o=e.Label,l=e.UITransform,h=e.Node,g=e.Widget,c=e.Component}],execute:function(){var u,m,d,f,b,p,_,L,v;n._RF.push({},"19731fEa31BrqGOk4ZQktW1","chat_Item",void 0);var w=r.ccclass,y=r.property;e("chatItem",(u=w("chatItem"),m=y(o),d=y(o),f=y(l),u((_=t((p=function(e){function t(){for(var t,s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];return t=e.call.apply(e,[this].concat(n))||this,a(t,"nameLabel",_,i(t)),a(t,"messageLabel",L,i(t)),a(t,"messageBg",v,i(t)),t._holder=null,t._messageLabelTr=void 0,t}s(t,e);var n=t.prototype;return n.onLoad=function(){this._messageLabelTr=this.messageLabel.getComponent(l)},n.onEnable=function(){this.messageLabel.node.on(h.EventType.SIZE_CHANGED,this.onMessageSizeChanged,this)},n.onDisable=function(){this.messageLabel.node.off(h.EventType.SIZE_CHANGED,this.onMessageSizeChanged,this)},n.show=function(e){this._holder=e,this._messageLabelTr.width=0,this.nameLabel.string=this._holder.data.name+"",this.showMessage()},n.hide=function(){this._messageLabelTr.width=0,this.messageBg.width=0},n.showMessage=function(){this.messageLabel.overflow=o.Overflow.NONE,this.messageLabel.string=this._holder.data.message},n.onMessageSizeChanged=function(){var e=this;if(!this._holder||!this.node.active)return console.error("没有显示");var t=this._holder.adapter.crossAxisSize-200;if(this._messageLabelTr.width>t)return this.messageLabel.overflow=o.Overflow.RESIZE_HEIGHT,void(this._messageLabelTr.width=t);this.scheduleOnce((function(){console.log("修改背景"),e.messageBg.setContentSize(e._messageLabelTr.width+40,e._messageLabelTr.height+30),e._holder.transform.height=Math.max(e.messageBg.height,100),e.messageBg.getComponent(g).updateAlignment()}))},t}(c)).prototype,"nameLabel",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=t(p.prototype,"messageLabel",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=t(p.prototype,"messageBg",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=p))||b));n._RF.pop()}}}));

System.register("chunks:///_virtual/chat.ts",["./rollupPluginModLoBabelHelpers.js","cc","./index.ts","./chat_Item.ts","./ViewManagerEvent.ts","./ReleaseManager.ts","./ScrollAdapter.ts","./View.ts","./Holder.ts","./enum.ts"],(function(e){var t,n,i,r,s,o,a,l,h,u,c,g,w,p,f,d,M,_,m,y,b,T,v,S;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,r=e.assertThisInitialized,s=e.asyncToGenerator,o=e.regeneratorRuntime},function(e){a=e.cclegacy,l=e._decorator,h=e.Node,u=e.UITransform,c=e.Sprite,g=e.EditBox,w=e.Label,p=e.Tween,f=e.v3,d=e.director,M=e.Color},null,function(e){_=e.chatItem},function(e){m=e.VMEvent},function(e){y=e.ReleaseManager},function(e){b=e.ScrollAdapter},function(e){T=e.View},function(e){v=e.Holder},function(e){S=e.ReleaseState}],execute:function(){var P,H,x,N,z,I,A,B,E,L,D,O,R,V,C,k,F;a._RF.push({},"26318xrl1JNC6F+BNJU9HS2","chat",void 0);var U=l.ccclass,G=l.property,J=(e("chat",(P=U("chat"),H=G(h),x=G(h),N=G(u),z=G(c),I=G(g),A=G(h),B=G(w),P((D=t((L=function(e){function t(){for(var t,n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return t=e.call.apply(e,[this].concat(s))||this,i(t,"myPrefab",D,r(t)),i(t,"youPrefab",O,r(t)),i(t,"header",R,r(t)),i(t,"loading",V,r(t)),i(t,"input",C,r(t)),i(t,"newMsgButton",k,r(t)),i(t,"newMsgLabel",F,r(t)),t._headerTween=void 0,t._loadTween=void 0,t._newMsgShowTween=void 0,t._newMsgHideTween=void 0,t._isHeaderPlay=!1,t._newMsgTotal=0,t._isShowNewMsg=void 0,t}n(t,e);var a=t.prototype;return a.getPrefab=function(e){return 0==e.type?this.myPrefab:this.youPrefab},a.getHolder=function(e,t){return new W(e,t,this)},a.getView=function(){return new J(this)},a.initElement=function(e,t){},a.start=function(){this.releaseManager.on(y.Event.ON_PULL_DOWN,this.onPullDown,this),this._headerTween=new p(this.header).to(.518,{height:this.releaseManager.top*this.mainAxisSize},{easing:"elasticOut"}),this._loadTween=new p(this.loading.node).by(1,{angle:-360}).union().repeatForever(),this._newMsgShowTween=new p(this.newMsgButton).to(.218,{position:f(this.newMsgButton.position.x,60)},{easing:"smooth"}),this._newMsgHideTween=new p(this.newMsgButton).to(.218,{position:f(this.newMsgButton.position.x,-100)},{easing:"smooth"}),this.viewManager.on(m.ON_MAGNETIC,this._onMagnetic,this)},a._onMagnetic=function(e){e?this._newMsgTotal=0:(this.newMsgLabel.string=""+this._newMsgTotal,!this._isShowNewMsg&&this._newMsgTotal>0&&(this._isShowNewMsg=!0,this._newMsgHideTween.stop(),this._newMsgShowTween.start()))},a.onSend=function(){if(0!=this.input.string.length){var e={name:"我",message:this.input.string,type:0};this._newMsgTotal++,this.modelManager.insert(e,0),this.unschedule(this.reply),this.scheduleOnce(this.reply,1)}},a.reply=function(){var e={name:"小娜",message:this.input.string,type:1};this._newMsgTotal++,this.modelManager.insert(e,0)},a.onPullDown=function(){var e=s(o().mark((function e(t){var n,i,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.state!=S.RELEASE){e.next=10;break}if(!this._isHeaderPlay){e.next=10;break}return this._loadTween.start(),t.wait(),e.next=6,this.loadMore();case 6:n=e.sent,this.modelManager.insert(n),this.scheduleOnce((function(){t.release()})),this._loadTween.stop();case 10:i=t.progress,t.state==S.WAIT&&(i=1.5),i>=1.5?this._isHeaderPlay||(this._headerTween=new p(this.header).to(.518,{height:this.releaseManager.top*this.mainAxisSize},{easing:"elasticOut"}),this._headerTween.start(),this._isHeaderPlay=!0):(this._headerTween.stop(),this._isHeaderPlay=!1,this.header.height=t.offset,(r=new M).set(this.loading.color),r.a=255*Math.min(i,1),this.loading.color=r),this.loading.node.angle=-360*t.progress;case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),a.loadMore=function(){var e=this;return new Promise((function(t,n){for(var i=[],r=(e.modelManager.length,10),s=0;s<r;s++){var o={type:s%2,name:s%2==0?"我":"小娜",message:e.modelManager.length+s+" 历史记录历史记录历史记录历史记录历史记录历史记录历史记录历史记录历史记录历史记录历史记录历史记录历史记录历史记录历史记录！"};i.push(o)}e.scheduleOnce((function(){t(i)}),1)}))},a.scrollToHeader=function(){this.scrollManager.scrollToHeader(1)},a.home=function(){d.loadScene("home")},a.update=function(){this._isShowNewMsg&&this.scrollManager.percentage<.1&&(this._isShowNewMsg=!1,this._newMsgTotal=0,this._newMsgShowTween.stop(),this._newMsgHideTween.start())},t}(b)).prototype,"myPrefab",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=t(L.prototype,"youPrefab",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=t(L.prototype,"header",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=t(L.prototype,"loading",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=t(L.prototype,"input",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=t(L.prototype,"newMsgButton",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=t(L.prototype,"newMsgLabel",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=L))||E)),function(e){function t(){return e.apply(this,arguments)||this}n(t,e);var i=t.prototype;return i.onVisible=function(){},i.onDisable=function(){},t}(T)),W=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))||this)._chatItem=null,t}n(t,e);var i=t.prototype;return i.onCreated=function(){this._chatItem=this.node.getComponent(_)},i.onVisible=function(){this._chatItem.show(this)},i.onDisable=function(){this._chatItem.hide()},t}(v);a._RF.pop()}}}));

System.register("chunks:///_virtual/ComboScore.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(o){var e,r,n,t,i,c,u,a,l;return{setters:[function(o){e=o.applyDecoratedDescriptor,r=o.inheritsLoose,n=o.initializerDefineProperty,t=o.assertThisInitialized},function(o){i=o.cclegacy,c=o._decorator,u=o.Node,a=o.Label,l=o.Component}],execute:function(){var s,b,m,p,f,y,h,v,_;i._RF.push({},"9ecc3AX2eVDTJF5vvFEX47U","ComboScore",void 0);var g=c.ccclass,d=c.property;o("ComboScore",(s=g("ComboScore"),b=d({type:[u]}),m=d(a),p=d(u),s((h=e((y=function(o){function e(){for(var e,r=arguments.length,i=new Array(r),c=0;c<r;c++)i[c]=arguments[c];return e=o.call.apply(o,[this].concat(i))||this,n(e,"combo_nums",h,t(e)),n(e,"combo_num",v,t(e)),n(e,"comboPosFix",_,t(e)),e}return r(e,o),e.prototype.showComobScore=function(o){var e=o.combo;o.score;this.combo_nums.forEach((function(o){o.active=e>1})),this.combo_num.string=""+e},e}(l)).prototype,"combo_nums",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),v=e(y.prototype,"combo_num",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=e(y.prototype,"comboPosFix",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=y))||f));i._RF.pop()}}}));

System.register("chunks:///_virtual/CommonCtr.ts",["cc"],(function(t){var c;return{setters:[function(t){c=t.cclegacy}],execute:function(){c._RF.push({},"4e3a0LTq9dNcYeopvBABcb8","CommonCtr",void 0);t("CommonCtr",(function(){}));c._RF.pop()}}}));

System.register("chunks:///_virtual/cross_ads_adapter.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ads_manager.ts","./SdkEventManager.ts","./SdkEventType.ts","./SdkCrossAdManager.ts","./CrossAdConfig.ts"],(function(t){var n,s,e,o,a,i,r,c,d,_;return{setters:[function(t){n=t.inheritsLoose},function(t){s=t.cclegacy,e=t._decorator,o=t.Vec3,a=t.Component},function(t){i=t.ads_manager},function(t){r=t.SdkEventManager},function(t){c=t.SdkEventType},function(t){d=t.SdkCrossAdManager},function(t){_=t.emCrossAdPath}],execute:function(){var u;s._RF.push({},"11c22lB9gxLD4w7RabjoaP+","cross_ads_adapter",void 0);var S=e.ccclass;e.property,t("cross_ads_adapter",S("cross_ads_adapter")(u=function(t){function s(){for(var n,s=arguments.length,e=new Array(s),o=0;o<s;o++)e[o]=arguments[o];return(n=t.call.apply(t,[this].concat(e))||this).nodeList=void 0,n}n(s,t);var e=s.prototype;return e.start=function(){r.getInstance().register(c.CROSS_AD_SHOW_LIST_PLAY,this.onShowListPlay,this).register(c.GET_ADMANAGER_ICON_INFO_SUCCESS,this.onGetIconInfo,this);this.scheduleOnce((function(){d.getInstance().loadLocalAdBoxConfig()}),180)},e.onShowListPlay=function(t,n){var s=this;this.nodeList?this.nodeList.active=t:t&&i.addAdsNode(_.List,this.node,o.ZERO,n).then((function(t){s.nodeList=t,t.active=!0}))},e.onGetIconInfo=function(){r.getInstance().emit(c.CROSS_AD_SHOW_LIST_PLAY,!0)},e.onDestroy=function(){r.getInstance().unregister(c.CROSS_AD_SHOW_LIST_PLAY,this.onShowListPlay,this).unregister(c.GET_ADMANAGER_ICON_INFO_SUCCESS,this.onGetIconInfo,this)},s}(a))||u);s._RF.pop()}}}));

System.register("chunks:///_virtual/CrossAdConfig.ts",["cc"],(function(e){var r;return{setters:[function(e){r=e.cclegacy}],execute:function(){r._RF.push({},"fa4841aZk1PUbYamS4txLmb","CrossAdConfig",void 0);e("emCrossAdPath",function(e){return e.None="none",e.Blink="blink",e.List="list",e.Banner="banner",e}({})),e("CrossRewardConfig",{reward_name:"宝石",reward_url:"",reward_value:1,reward_id:10001,reward_reset:1,exchange_consume:3,exchange_id:1001,exchange_name:"锤子"}),e("CrossAdConfig",{url:"https://elsfkws.nalrer.cn/teris/share_image/jiayi/daoliu/"});r._RF.pop()}}}));

System.register("chunks:///_virtual/CrossAdRewardData.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Boot.ts","./SdkEventManager.ts","./SdkEventType.ts","./CrossAdConfig.ts","./MKLocalStorage.ts"],(function(e){var t,a,r,n,i,s,d;return{setters:[function(e){t=e.createClass},function(e){a=e.cclegacy},null,function(e){r=e.SdkEventManager},function(e){n=e.SdkEventType},function(e){i=e.CrossRewardConfig},function(e){s=e.getItem,d=e.setItem}],execute:function(){a._RF.push({},"0edbfGk1ANKC513QdD9h7Ze","CrossAdRewardData",void 0),e("CrossAdRewardData",function(){function e(){this.krewardState="cad_rwstate",this.krewardValue="cad_rwvalue",this._rewardState={},this._rewardValue=0,this._rewardState=s(this.krewardState,{}),this._rewardValue=s(this.krewardValue,0)}var a=e.prototype;return a.isCanGetReward=function(e){return(this.rewardState[e.toappid]||0)<e.reward_limit},a.gotReward=function(e){var t=this.rewardState,a=t[e.toappid]||0;t[e.toappid]=a+1,this.rewardValue+=e.reward_value,this.rewardState=t;for(var s=i.exchange_consume,d=0;this.rewardValue>=s;)this.rewardValue-=i.exchange_consume,d+=1;r.getInstance().emit(n.CROSS_AD_REWARD_STATE_CHANGE,{appid:e.toappid,canGetReward:this.isCanGetReward(e),rewardValue:this.rewardValue,rewardGetValue:e.reward_value,rewardName:i.reward_name,consumeValue:s}),d>0&&r.getInstance().emit(n.CROSS_AD_REWARD_EXCHANGE_CHANGE,{appid:e.toappid,exchangeCount:d,exchangeId:i.exchange_id,exchangeName:i.exchange_name})},a.clearRewardState=function(){this.rewardState={},this.rewardValue=0},t(e,[{key:"rewardState",get:function(){return this._rewardState},set:function(e){d(this.krewardState,e),this._rewardState=e}},{key:"rewardValue",get:function(){return this._rewardValue},set:function(e){d(this.krewardValue,e),this._rewardValue=e}}],[{key:"inst",get:function(){return null==e._inst&&(e._inst=new e),e._inst}}]),e}())._inst=null,a._RF.pop()}}}));

System.register("chunks:///_virtual/debug-view-runtime-control.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,o,i,n,s,l,r,a,g,h,p,c,C,d,m,u,L;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){s=t.cclegacy,l=t._decorator,r=t.Node,a=t.Color,g=t.Canvas,h=t.UITransform,p=t.instantiate,c=t.Label,C=t.RichText,d=t.Toggle,m=t.Button,u=t.director,L=t.Component}],execute:function(){var f,M,b,v,T,S,x,E,I;s._RF.push({},"b2bd1+njXxJxaFY3ymm06WU","debug-view-runtime-control",void 0);var A=l.ccclass,y=l.property;t("DebugViewRuntimeControl",(f=A("internal.DebugViewRuntimeControl"),M=y(r),b=y(r),v=y(r),f((x=e((S=function(t){function e(){for(var e,o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return e=t.call.apply(t,[this].concat(s))||this,i(e,"compositeModeToggle",x,n(e)),i(e,"singleModeToggle",E,n(e)),i(e,"EnableAllCompositeModeButton",I,n(e)),e._single=0,e.strSingle=["No Single Debug","Vertex Color","Vertex Normal","Vertex Tangent","World Position","Vertex Mirror","Face Side","UV0","UV1","UV Lightmap","Project Depth","Linear Depth","Fragment Normal","Fragment Tangent","Fragment Binormal","Base Color","Diffuse Color","Specular Color","Transparency","Metallic","Roughness","Specular Intensity","IOR","Direct Diffuse","Direct Specular","Direct All","Env Diffuse","Env Specular","Env All","Emissive","Light Map","Shadow","AO","Fresnel","Direct Transmit Diffuse","Direct Transmit Specular","Env Transmit Diffuse","Env Transmit Specular","Transmit All","Direct Internal Specular","Env Internal Specular","Internal All","Fog"],e.strComposite=["Direct Diffuse","Direct Specular","Env Diffuse","Env Specular","Emissive","Light Map","Shadow","AO","Normal Map","Fog","Tone Mapping","Gamma Correction","Fresnel","Transmit Diffuse","Transmit Specular","Internal Specular","TT"],e.strMisc=["CSM Layer Coloration","Lighting With Albedo"],e.compositeModeToggleList=[],e.singleModeToggleList=[],e.miscModeToggleList=[],e.textComponentList=[],e.labelComponentList=[],e.textContentList=[],e.hideButtonLabel=void 0,e._currentColorIndex=0,e.strColor=["<color=#ffffff>","<color=#000000>","<color=#ff0000>","<color=#00ff00>","<color=#0000ff>"],e.color=[a.WHITE,a.BLACK,a.RED,a.GREEN,a.BLUE],e}o(e,t);var s=e.prototype;return s.start=function(){if(this.node.parent.getComponent(g)){var t=this.node.parent.getComponent(h),e=.5*t.width,o=.5*t.height,i=.1*e-e,n=o-.1*o,s=this.node.getChildByName("MiscMode"),l=p(s);l.parent=this.node,l.name="Buttons";var r=p(s);r.parent=this.node,r.name="Titles";for(var u=0;u<2;u++){var L=p(this.EnableAllCompositeModeButton.getChildByName("Label"));L.setPosition(i+(u>0?450:150),n,0),L.setScale(.75,.75,.75),L.parent=r;var f=L.getComponent(c);f.string=u?"----------Composite Mode----------":"----------Single Mode----------",f.color=a.WHITE,f.overflow=0,this.labelComponentList[this.labelComponentList.length]=f}n-=20;for(var M=0,b=0;b<this.strSingle.length;b++,M++){b===this.strSingle.length>>1&&(i+=200,M=0);var v=b?p(this.singleModeToggle):this.singleModeToggle;v.setPosition(i,n-20*M,0),v.setScale(.5,.5,.5),v.parent=this.singleModeToggle.parent;var T=v.getComponentInChildren(C);T.string=this.strSingle[b],this.textComponentList[this.textComponentList.length]=T,this.textContentList[this.textContentList.length]=T.string,v.on(d.EventType.TOGGLE,this.toggleSingleMode,this),this.singleModeToggleList[b]=v}i+=200,this.EnableAllCompositeModeButton.setPosition(i+15,n,0),this.EnableAllCompositeModeButton.setScale(.5,.5,.5),this.EnableAllCompositeModeButton.on(m.EventType.CLICK,this.enableAllCompositeMode,this),this.EnableAllCompositeModeButton.parent=l;var S=this.EnableAllCompositeModeButton.getComponentInChildren(c);this.labelComponentList[this.labelComponentList.length]=S;var x=p(this.EnableAllCompositeModeButton);x.setPosition(i+90,n,0),x.setScale(.5,.5,.5),x.on(m.EventType.CLICK,this.changeTextColor,this),x.parent=l,(S=x.getComponentInChildren(c)).string="TextColor",this.labelComponentList[this.labelComponentList.length]=S;var E=p(this.EnableAllCompositeModeButton);E.setPosition(i+200,n,0),E.setScale(.5,.5,.5),E.on(m.EventType.CLICK,this.hideUI,this),E.parent=this.node.parent,(S=E.getComponentInChildren(c)).string="Hide UI",this.labelComponentList[this.labelComponentList.length]=S,this.hideButtonLabel=S,n-=40;for(var I=0;I<this.strMisc.length;I++){var A=p(this.compositeModeToggle);A.setPosition(i,n-20*I,0),A.setScale(.5,.5,.5),A.parent=s;var y=A.getComponentInChildren(C);y.string=this.strMisc[I],this.textComponentList[this.textComponentList.length]=y,this.textContentList[this.textContentList.length]=y.string,A.getComponent(d).isChecked=!!I,A.on(d.EventType.TOGGLE,I?this.toggleLightingWithAlbedo:this.toggleCSMColoration,this),this.miscModeToggleList[I]=A}n-=150;for(var D=0;D<this.strComposite.length;D++){var B=D?p(this.compositeModeToggle):this.compositeModeToggle;B.setPosition(i,n-20*D,0),B.setScale(.5,.5,.5),B.parent=this.compositeModeToggle.parent;var w=B.getComponentInChildren(C);w.string=this.strComposite[D],this.textComponentList[this.textComponentList.length]=w,this.textContentList[this.textContentList.length]=w.string,B.on(d.EventType.TOGGLE,this.toggleCompositeMode,this),this.compositeModeToggleList[D]=B}}else console.error("debug-view-runtime-control should be child of Canvas")},s.isTextMatched=function(t,e){var o=new String(t),i=o.search(">");return-1===i?t===e:(o=(o=o.substr(i+1)).substr(0,o.search("<")))===e},s.toggleSingleMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strSingle.length;i++)this.isTextMatched(o.string,this.strSingle[i])&&(e.singleMode=i)},s.toggleCompositeMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strComposite.length;i++)this.isTextMatched(o.string,this.strComposite[i])&&e.enableCompositeMode(i,t.isChecked)},s.toggleLightingWithAlbedo=function(t){u.root.debugView.lightingWithAlbedo=t.isChecked},s.toggleCSMColoration=function(t){u.root.debugView.csmLayerColoration=t.isChecked},s.enableAllCompositeMode=function(t){var e=u.root.debugView;e.enableAllCompositeMode(!0);for(var o=0;o<this.compositeModeToggleList.length;o++){this.compositeModeToggleList[o].getComponent(d).isChecked=!0}var i=this.miscModeToggleList[0].getComponent(d);i.isChecked=!1,e.csmLayerColoration=!1,(i=this.miscModeToggleList[1].getComponent(d)).isChecked=!0,e.lightingWithAlbedo=!0},s.hideUI=function(t){var e=this.node.getChildByName("Titles"),o=!e.active;this.singleModeToggleList[0].parent.active=o,this.miscModeToggleList[0].parent.active=o,this.compositeModeToggleList[0].parent.active=o,this.EnableAllCompositeModeButton.parent.active=o,e.active=o,this.hideButtonLabel.string=o?"Hide UI":"Show UI"},s.changeTextColor=function(t){this._currentColorIndex++,this._currentColorIndex>=this.strColor.length&&(this._currentColorIndex=0);for(var e=0;e<this.textComponentList.length;e++)this.textComponentList[e].string=this.strColor[this._currentColorIndex]+this.textContentList[e]+"</color>";for(var o=0;o<this.labelComponentList.length;o++)this.labelComponentList[o].color=this.color[this._currentColorIndex]},s.onLoad=function(){},s.update=function(t){},e}(L)).prototype,"compositeModeToggle",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(S.prototype,"singleModeToggle",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=e(S.prototype,"EnableAllCompositeModeButton",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=S))||T));s._RF.pop()}}}));

System.register("chunks:///_virtual/debug.ts",["cc"],(function(_){var e,D;return{setters:[function(_){e=_.cclegacy,D=_.Color}],execute:function(){e._RF.push({},"b7bf3JPeg5Pz4Pj5H6FXtBa","debug",void 0);_("DEBUG_DRAW_LINE_COLOR",new D(238,124,55,255)),_("DEBUG_DRAW_FILL_COLOR",new D(88,175,64,50)),_("DEBUG_DRAW_BORDER_COLOR",new D(56,120,94,255)),_("DEBUG_DRAW_LIND_WIDTH",3),_("ADAPTER_DEBUG_VIEW",!1),_("ADAPTER_DEBUG_CONTENT",!1);e._RF.pop()}}}));

System.register("chunks:///_virtual/Distort.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SilderScript.ts"],(function(t){var e,i,r,s,n,o,a,l,p,c;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,r=t.initializerDefineProperty,s=t.assertThisInitialized},function(t){n=t.cclegacy,o=t._decorator,a=t.Sprite,l=t.director,p=t.Component},function(t){c=t.SilderScript}],execute:function(){var u,h,d,g,f,y,b,M,v;n._RF.push({},"485adffR3lAOqZJGOwG3PHu","Distort",void 0);var D=o.ccclass,S=o.property;t("Distort",(u=D("Distort"),h=S(c),d=S(c),g=S(a),u((b=e((y=function(t){function e(){for(var e,i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return e=t.call.apply(t,[this].concat(n))||this,r(e,"speed",b,s(e)),r(e,"strength",M,s(e)),r(e,"sprite",v,s(e)),e}i(e,t);var n=e.prototype;return n.start=function(){this.speed.setMin(0),this.speed.setMax(1),this.speed.setValue(.1),this.speed.setTxt("扭曲变化速度"),this.strength.setMin(0),this.strength.setMax(.5),this.strength.setValue(.1),this.strength.setTxt("扭曲变化强度")},n.update=function(){this.sprite.getMaterial(0).setProperty("_speed",this.speed.getValue()),this.sprite.getMaterial(0).setProperty("_strength",this.strength.getValue())},n.onClick=function(){l.loadScene("Main")},e}(p)).prototype,"speed",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=e(y.prototype,"strength",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=e(y.prototype,"sprite",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),f=y))||f));n._RF.pop()}}}));

System.register("chunks:///_virtual/edit_item.ts",["./rollupPluginModLoBabelHelpers.js","cc","./index.ts","./enum.ts","./ScrollManager.ts"],(function(e){var t,i,o,n,r,a,l,s,h,d,u,c,_,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,o=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){r=e.cclegacy,a=e._decorator,l=e.Label,s=e.Tween,h=e.v3,d=e.Node,u=e.Component},null,function(e){c=e.WrapMode,_=e.Layer},function(e){p=e.ADAPTER}],execute:function(){var f,m,g,y,v;r._RF.push({},"7afa7DiG+pHAIh2BaoQNrth","edit_item",void 0);var w=a.ccclass,L=a.property;e("edit_item",(f=w("edit_item"),m=L(l),f((v=t((y=function(e){function t(){for(var t,i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return t=e.call.apply(e,[this].concat(r))||this,o(t,"label",v,n(t)),t._holder=null,t._tween=void 0,t}i(t,e);var r=t.prototype;return r._onTouchMove=function(e){console.log("移动了我");var t=this.node.getPosition();t.add3f(e.getUIDelta().x,e.getUIDelta().y,0),this.node.setPosition(t)},r.show=function(e){this._holder=e,this.label.string=this._holder.data.name,this._holder.data.anim&&(this._holder.data.anim=!1,this.node.setScale(0,1,1),this._tween=new s(this.node).to(.5,{scale:h(1,1,1)},{easing:"backOut"}).start()),this.register()},r.hide=function(){this._tween&&this._tween.stop(),this.node.setScale(1,1,1),this._holder.data.anim=!1},r.updateData=function(){this._holder.data.name="已更新",this._holder.model.update()},r.updateWrap=function(){this._holder.element.wrapBeforeMode=c.Wrap,this._holder.element.update()},r.ignoreLayout=function(){this._holder.element.placeholder=!0,this._holder.element.ignoreLayout=!this._holder.element.ignoreLayout,this._holder.element.ignoreLayout?this._holder.element.layer=_.Medium:this._holder.element.layer=_.Lowest,this._holder.element.update(),this.register()},r.register=function(){this.node.off(d.EventType.TOUCH_MOVE,this._onTouchMove,this),this._holder.element.ignoreLayout?(this.node.on(d.EventType.TOUCH_MOVE,this._onTouchMove,this),this.node[p]=!0):this.node[p]=!1},r.update=function(){},t}(u)).prototype,"label",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=y))||g));r._RF.pop()}}}));

System.register("chunks:///_virtual/edit.ts",["./rollupPluginModLoBabelHelpers.js","cc","./index.ts","./edit_item.ts","./enum.ts","./ScrollAdapter.ts","./View.ts","./Holder.ts"],(function(e){var t,n,r,i,o,a,c,l,s,u,f,h,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,r=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,c=e.Node,l=e.director},null,function(e){s=e.edit_item},function(e){u=e.WrapMode},function(e){f=e.ScrollAdapter},function(e){h=e.View},function(e){p=e.Holder}],execute:function(){var d,m,g,v,y;o._RF.push({},"40a4crgojVJYY/aveXbUFBt","edit",void 0);var b=a.ccclass,M=a.property,w=(e("edit",(d=b("edit"),m=M(c),d((y=t((v=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,r(t,"prefab",y,i(t)),t}n(t,e);var o=t.prototype;return o.getPrefab=function(e){return this.prefab},o.getView=function(){return new w(this)},o.getHolder=function(e,t){return new _(e,t,this)},o.initElement=function(e,t){e.wrapBeforeMode=u.Auto},o.start=function(){for(var e=[],t=0;t<50;t++)e.push({name:t});this.modelManager.insert(e)},o.home=function(){l.loadScene("home")},o.scrollToHeader=function(){this.scrollManager.scrollToPercentage(1,0)},o.scrollToFooter=function(){this.scrollManager.scrollToPercentage(1,1)},o.insert=function(){this.modelManager.insert({name:this.modelManager.length,anim:!0},0)},o.remove=function(){this.modelManager.remove(6,1)},o.move=function(){this.modelManager.move(this.modelManager.length-1,1,0)},o.clear=function(){this.modelManager.clear()},t}(f)).prototype,"prefab",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=v))||g)),function(e){function t(){return e.apply(this,arguments)||this}n(t,e);var r=t.prototype;return r.onVisible=function(){},r.onDisable=function(){},t}(h)),_=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this)._item=null,t}n(t,e);var r=t.prototype;return r.onCreated=function(){this._item=this.node.getComponent(s)},r.onVisible=function(){this._item.show(this)},r.onDisable=function(){this._item.hide()},t}(p);o._RF.pop()}}}));

System.register("chunks:///_virtual/EffectComboComponent.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BlockEventManager.ts","./Event.ts","./UIPlayEffectParticle.ts"],(function(o){var t,e,i,n,r,a,s,c,m,l,p,h;return{setters:[function(o){t=o.applyDecoratedDescriptor,e=o.inheritsLoose,i=o.initializerDefineProperty,n=o.assertThisInitialized},function(o){r=o.cclegacy,a=o._decorator,s=o.Node,c=o.Animation,m=o.Component},function(o){l=o.BlockEventManager},function(o){p=o.BlockEventType},function(o){h=o.UIPlayEffectParticle}],execute:function(){var C,d,b,u,f,A,v,y,g;r._RF.push({},"2bb2czpUtRB1pg3mYWvlYHS","EffectComboComponent",void 0);var k=a.ccclass,P=a.property;o("EffectComboComponent",(C=k("EffectComboComponent"),d=P(s),b=P(s),u=P(s),C((v=t((A=function(o){function t(){for(var t,e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];return t=o.call.apply(o,[this].concat(r))||this,i(t,"rootCombo",v,n(t)),i(t,"rootComboKeep",y,n(t)),i(t,"rootComboAdd",g,n(t)),t.keepAnim=null,t.keepAnimParticles=null,t.addAnim=null,t.addAnimParticles=null,t}e(t,o);var r=t.prototype;return r.onLoad=function(){l.instance.listen(p.BLOCK_COMBO,this.onShowCombo,this),this.keepAnim=this.rootComboKeep.getComponentInChildren(c),this.keepAnimParticles=this.rootComboKeep.getComponent(h),this.addAnim=this.rootComboAdd.getComponentInChildren(c),this.addAnimParticles=this.rootComboAdd.getComponent(h)},r.onShowCombo=function(o,t){if(o){if(t<=2)return this.rootCombo.active&&(this.rootCombo.active=!1),void(this.rootComboKeep.active&&(this.rootComboKeep.active=!1));this.rootCombo.active||(this.rootCombo.active=!0),t<=3?(this.rootComboKeep.active||(this.rootComboKeep.active=!0),this.keepAnim&&(this.keepAnim.play(),this.keepAnimParticles.play())):(this.rootComboAdd.active||(this.rootComboAdd.active=!0),this.addAnim&&(this.addAnim.play(),this.addAnimParticles.play()))}else this.rootCombo.active&&(this.rootCombo.active=!1),this.keepAnim&&(this.keepAnim.stop(),this.keepAnimParticles.stop()),this.addAnim&&(this.addAnim.stop(),this.addAnimParticles.stop()),this.rootComboAdd.active&&(this.rootComboAdd.active=!1),this.rootComboKeep.active&&(this.rootComboKeep.active=!1)},r.onDestroy=function(){l.instance.unlisten(p.BLOCK_COMBO,this.onShowCombo,this)},t}(m)).prototype,"rootCombo",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=t(A.prototype,"rootComboKeep",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=t(A.prototype,"rootComboAdd",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=A))||f));r._RF.pop()}}}));

System.register("chunks:///_virtual/emAdPath.ts",["cc"],(function(e){var c;return{setters:[function(e){c=e.cclegacy}],execute:function(){c._RF.push({},"45262fxUX1IY51JNUCHrGmV","emAdPath",void 0);e("emAdPath",function(e){return e.Score_Relife="score_relife",e.Level_Relife="level_relife",e.Block_Refresh_Single="block_refresh_single",e.Block_Refresh_All="block_refresh_all",e.Block_Unlock_Hammer="block_unlock_hammer",e.Block_Unlock_Rocket_H="block_unlock_rocket_h",e.Block_Unlock_Rocket_V="block_unlock_rocket_V",e.Block_Unlock_Refresh="block_unlock_refresh",e}({}));c._RF.pop()}}}));

System.register("chunks:///_virtual/encode_decode.ts",["cc"],(function(r){var n;return{setters:[function(r){n=r.cclegacy}],execute:function(){n._RF.push({},"a7b574GNWZO4Z/JyNYdmhaQ","encode_decode",void 0);function t(r,n){r[n>>5]|=128<<n%32,r[14+(n+64>>>9<<4)]=n;for(var t=1732584193,e=-271733879,f=-1732584194,i=271733878,d=0;d<r.length;d+=16){var g=t,C=e,A=f,l=i;t=o(t,e,f,i,r[d+0],7,-680876936),i=o(i,t,e,f,r[d+1],12,-389564586),f=o(f,i,t,e,r[d+2],17,606105819),e=o(e,f,i,t,r[d+3],22,-1044525330),t=o(t,e,f,i,r[d+4],7,-176418897),i=o(i,t,e,f,r[d+5],12,1200080426),f=o(f,i,t,e,r[d+6],17,-1473231341),e=o(e,f,i,t,r[d+7],22,-45705983),t=o(t,e,f,i,r[d+8],7,1770035416),i=o(i,t,e,f,r[d+9],12,-1958414417),f=o(f,i,t,e,r[d+10],17,-42063),e=o(e,f,i,t,r[d+11],22,-1990404162),t=o(t,e,f,i,r[d+12],7,1804603682),i=o(i,t,e,f,r[d+13],12,-40341101),f=o(f,i,t,e,r[d+14],17,-1502002290),t=c(t,e=o(e,f,i,t,r[d+15],22,1236535329),f,i,r[d+1],5,-165796510),i=c(i,t,e,f,r[d+6],9,-1069501632),f=c(f,i,t,e,r[d+11],14,643717713),e=c(e,f,i,t,r[d+0],20,-373897302),t=c(t,e,f,i,r[d+5],5,-701558691),i=c(i,t,e,f,r[d+10],9,38016083),f=c(f,i,t,e,r[d+15],14,-660478335),e=c(e,f,i,t,r[d+4],20,-405537848),t=c(t,e,f,i,r[d+9],5,568446438),i=c(i,t,e,f,r[d+14],9,-1019803690),f=c(f,i,t,e,r[d+3],14,-187363961),e=c(e,f,i,t,r[d+8],20,1163531501),t=c(t,e,f,i,r[d+13],5,-1444681467),i=c(i,t,e,f,r[d+2],9,-51403784),f=c(f,i,t,e,r[d+7],14,1735328473),t=a(t,e=c(e,f,i,t,r[d+12],20,-1926607734),f,i,r[d+5],4,-378558),i=a(i,t,e,f,r[d+8],11,-2022574463),f=a(f,i,t,e,r[d+11],16,1839030562),e=a(e,f,i,t,r[d+14],23,-35309556),t=a(t,e,f,i,r[d+1],4,-1530992060),i=a(i,t,e,f,r[d+4],11,1272893353),f=a(f,i,t,e,r[d+7],16,-155497632),e=a(e,f,i,t,r[d+10],23,-1094730640),t=a(t,e,f,i,r[d+13],4,681279174),i=a(i,t,e,f,r[d+0],11,-358537222),f=a(f,i,t,e,r[d+3],16,-722521979),e=a(e,f,i,t,r[d+6],23,76029189),t=a(t,e,f,i,r[d+9],4,-640364487),i=a(i,t,e,f,r[d+12],11,-421815835),f=a(f,i,t,e,r[d+15],16,530742520),t=u(t,e=a(e,f,i,t,r[d+2],23,-995338651),f,i,r[d+0],6,-198630844),i=u(i,t,e,f,r[d+7],10,1126891415),f=u(f,i,t,e,r[d+14],15,-1416354905),e=u(e,f,i,t,r[d+5],21,-57434055),t=u(t,e,f,i,r[d+12],6,1700485571),i=u(i,t,e,f,r[d+3],10,-1894986606),f=u(f,i,t,e,r[d+10],15,-1051523),e=u(e,f,i,t,r[d+1],21,-2054922799),t=u(t,e,f,i,r[d+8],6,1873313359),i=u(i,t,e,f,r[d+15],10,-30611744),f=u(f,i,t,e,r[d+6],15,-1560198380),e=u(e,f,i,t,r[d+13],21,1309151649),t=u(t,e,f,i,r[d+4],6,-145523070),i=u(i,t,e,f,r[d+11],10,-1120210379),f=u(f,i,t,e,r[d+2],15,718787259),e=u(e,f,i,t,r[d+9],21,-343485551),t=h(t,g),e=h(e,C),f=h(f,A),i=h(i,l)}return Array(t,e,f,i)}function e(r,n,t,e,o,c){return h((a=h(h(n,r),h(e,c)))<<(u=o)|a>>>32-u,t);var a,u}function o(r,n,t,o,c,a,u){return e(n&t|~n&o,r,n,c,a,u)}function c(r,n,t,o,c,a,u){return e(n&o|t&~o,r,n,c,a,u)}function a(r,n,t,o,c,a,u){return e(n^t^o,r,n,c,a,u)}function u(r,n,t,o,c,a,u){return e(t^(n|~o),r,n,c,a,u)}function f(r,n){var e=i(r);e.length>16&&(e=t(e,8*r.length));for(var o=Array(16),c=Array(16),a=0;a<16;a++)o[a]=909522486^e[a],c[a]=1549556828^e[a];var u=t(o.concat(i(n)),512+8*n.length);return t(c.concat(u),640)}function h(r,n){var t=(65535&r)+(65535&n);return(r>>16)+(n>>16)+(t>>16)<<16|65535&t}function i(r){for(var n=Array(),t=0;t<8*r.length;t+=8)n[t>>5]|=(255&r.charCodeAt(t/8))<<t%32;return n}function d(r){for(var n="",t=0;t<32*r.length;t+=8)n+=String.fromCharCode(r[t>>5]>>>t%32&255);return n}function g(r){for(var n="0123456789abcdef",t="",e=0;e<4*r.length;e++)t+=n.charAt(r[e>>2]>>e%4*8+4&15)+n.charAt(r[e>>2]>>e%4*8&15);return t}function C(r){for(var n="",t=0;t<4*r.length;t+=3)for(var e=(r[t>>2]>>t%4*8&255)<<16|(r[t+1>>2]>>(t+1)%4*8&255)<<8|r[t+2>>2]>>(t+2)%4*8&255,o=0;o<4;o++)8*t+6*o>32*r.length?n+="":n+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(e>>6*(3-o)&63);return n}var A=r("EncodeDecode",{base64Encode:function(r){for(var n,t,e,o,c,a,u,f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",h="",i=0,d=(r=A.utf8Encode(r)).length;i<d;)o=(n=r.charCodeAt(i++))>>2,c=(3&n)<<4|(t=r.charCodeAt(i++))>>4,a=(15&t)<<2|(e=r.charCodeAt(i++))>>6,u=63&e,isNaN(t)?a=u=64:isNaN(e)&&(u=64),h=h+f.charAt(o)+f.charAt(c)+f.charAt(a)+f.charAt(u);return h},base64Decode:function(r){for(var n,t,e,o,c,a,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",f=0,h=(r=r.replace(/[^A-Za-z0-9\+\/\=]/g,"")).length,i=[];f<h;)n=u.indexOf(r.charAt(f++))<<2|(o=u.indexOf(r.charAt(f++)))>>4,t=(15&o)<<4|(c=u.indexOf(r.charAt(f++)))>>2,e=(3&c)<<6|(a=u.indexOf(r.charAt(f++))),i.push(n),64!=c&&i.push(t),64!=a&&i.push(e);return i},utf8Encode:function(r){for(var n="",t=0,e=(r=r.replace(/\r\n/g,"\n")).length;t<e;t++){var o=r.charCodeAt(t);o<128?n+=String.fromCharCode(o):o>127&&o<2048?(n+=String.fromCharCode(o>>6|192),n+=String.fromCharCode(63&o|128)):(n+=String.fromCharCode(o>>12|224),n+=String.fromCharCode(o>>6&63|128),n+=String.fromCharCode(63&o|128))}return n},utf8Decode:function(r){for(var n,t,e="",o=0,c=n=0,a=r.length;o<a;)(c=r[o])<128?(e+=String.fromCharCode(c),o++):c>191&&c<224?(n=r[o+1],e+=String.fromCharCode((31&c)<<6|63&n),o+=2):(n=r[o+1],t=r[o+2],e+=String.fromCharCode((15&c)<<12|(63&n)<<6|63&t),o+=3);return e},stringToArray:function(r){for(var n=[],t=0,e=r.length;t<e;++t)n.push(r.charCodeAt(t));return new Uint8Array(n)},zlibCompressBase64:function(r){return A.base64Encode(r)},hex_md5:function(r){return g(t(i(r),8*r.length))},b64_md5:function(r){return C(t(i(r),8*r.length))},str_md5:function(r){return d(t(i(r),8*r.length))},hex_hmac_md5:function(r,n){return g(f(r,n))},b64_hmac_md5:function(r,n){return C(f(r,n))},str_hmac_md5:function(r,n){return d(f(r,n))}});n._RF.pop()}}}));

System.register("chunks:///_virtual/EncodeDecode.ts",["cc"],(function(r){var e;return{setters:[function(r){e=r.cclegacy}],execute:function(){e._RF.push({},"2c5e3CGa8lMzJLGwaw3a7Wg","EncodeDecode",void 0);var t=r("EncodeDecode",{base64Encode:function(r){for(var e,o,n,a,c,h,d,f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",i="",C=0,u=(r=t.utf8Encode(r)).length;C<u;)a=(e=r.charCodeAt(C++))>>2,c=(3&e)<<4|(o=r.charCodeAt(C++))>>4,h=(15&o)<<2|(n=r.charCodeAt(C++))>>6,d=63&n,isNaN(o)?h=d=64:isNaN(n)&&(d=64),i=i+f.charAt(a)+f.charAt(c)+f.charAt(h)+f.charAt(d);return i},base64Decode:function(r){for(var e,t,o,n,a,c,h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",d=0,f=(r=r.replace(/[^A-Za-z0-9\+\/\=]/g,"")).length,i=[];d<f;)e=h.indexOf(r.charAt(d++))<<2|(n=h.indexOf(r.charAt(d++)))>>4,t=(15&n)<<4|(a=h.indexOf(r.charAt(d++)))>>2,o=(3&a)<<6|(c=h.indexOf(r.charAt(d++))),i.push(e),64!=a&&i.push(t),64!=c&&i.push(o);return i},utf8Encode:function(r){for(var e="",t=0,o=(r=r.replace(/\r\n/g,"\n")).length;t<o;t++){var n=r.charCodeAt(t);n<128?e+=String.fromCharCode(n):n>127&&n<2048?(e+=String.fromCharCode(n>>6|192),e+=String.fromCharCode(63&n|128)):(e+=String.fromCharCode(n>>12|224),e+=String.fromCharCode(n>>6&63|128),e+=String.fromCharCode(63&n|128))}return e},utf8Decode:function(r){for(var e,t,o="",n=0,a=e=0,c=r.length;n<c;)(a=r[n])<128?(o+=String.fromCharCode(a),n++):a>191&&a<224?(e=r[n+1],o+=String.fromCharCode((31&a)<<6|63&e),n+=2):(e=r[n+1],t=r[n+2],o+=String.fromCharCode((15&a)<<12|(63&e)<<6|63&t),n+=3);return o}});e._RF.pop()}}}));

System.register("chunks:///_virtual/EndlessBestScoreView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EndlessGameOverView.ts","./MK.ts","./BIDefine.ts","./AssetInfoDefine.ts","./SceneMode.ts","./Enumrations.ts","./ProcedureToAdventureLevelSelectV2.ts","./PanelManager.ts","./Boot.ts","./sdk.ts"],(function(e){var n,t,o,c,s,r,i,u,a,l,d,f,p,S,_;return{setters:[function(e){n=e.inheritsLoose},function(e){t=e.cclegacy,o=e._decorator},function(e){c=e.EndlessGameOverView},null,function(e){s=e.BIEventID,r=e.emButtonType,i=e.emButtonScene},function(e){u=e.AssetInfoDefine},function(e){a=e.SceneMode},function(e){l=e.kGameMode},function(e){d=e.ProcedureToAdventureLevelSelectV2},function(e){f=e.PanelManager},function(e){p=e.audio,S=e.fsm},function(e){_=e.SDK}],execute:function(){var v;t._RF.push({},"96ce5CK4m5CR57S5Gexxet5","EndlessBestScoreView",void 0);var m=o.ccclass;o.property,e("default",m("EndlessBestScoreView")(v=function(e){function t(){return e.apply(this,arguments)||this}n(t,e);var o=t.prototype;return o.isCanShowInstersitial=function(){return!1},o.onClickLevel=function(){p.playSubSound(u.audio.touch),_.instance.reportBI(s.btn_click,{btn_type:r.enter_adventure,scene:i.from_new_record_classic}),a.gameMode=l.none,S.changeState(d,"block"),this.closeSelf()},o.onClickLeaderBoardFromBestScore=function(){_.instance.reportBI(s.btn_click,{btn_type:r.enter_leaderboard,scene:i.from_new_record_classic}),f.inst.addPopUpView(u.prefab.friendListRank.path)},t}(c))||v);t._RF.pop()}}}));

System.register("chunks:///_virtual/EndlessBoardView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BoardView.ts","./MK.ts","./EndlessScoreView.ts","./AssetInfoDefine.ts","./PanelManager.ts","./Game.ts","./Boot.ts","./UserScoreLevelData.ts","./Enumrations.ts","./AdSdk.ts","./GuideData.ts","./UserData.ts","./ResManager.ts","./EndlessProgressHelper.ts","./BoardPreviewData.ts","./BlockPlaceholder3.ts","./BlockEntity.ts","./NodePool.ts","./BlockConstData.ts","./BIDefine.ts","./sdk.ts"],(function(e){var t,n,o,i,a,s,r,c,l,h,d,g,u,p,f,v,m,k,b,w,B,H,P,y,S,E,I,M,A,V;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,o=e.initializerDefineProperty,i=e.assertThisInitialized,a=e.asyncToGenerator,s=e.regeneratorRuntime},function(e){r=e.cclegacy,c=e._decorator,l=e.Node,h=e.Mat4,d=e.Vec3},function(e){g=e.BoardView},null,function(e){u=e.EndlessScoreView},function(e){p=e.AssetInfoDefine},function(e){f=e.PanelManager},function(e){v=e.Game},null,function(e){m=e.UserScoreLevelData},function(e){k=e.kGameMode},function(e){b=e.AdSdk},function(e){w=e.GuideData},function(e){B=e.UserData},function(e){H=e.ResManager},function(e){P=e.EndlessProgressHelper},function(e){y=e.BoardPreviewData},function(e){S=e.BlockPlaceholder3},function(e){E=e.BlockEntity},function(e){I=e.NodePoolManager},function(e){M=e.BlockConstData},function(e){A=e.BIEventID},function(e){V=e.SDK}],execute:function(){var D,T,x,R,G,C,O,L,_,N,F;r._RF.push({},"1d533cL+IlAXrAyQDr5aF+r","EndlessBoardView",void 0);var z=c.ccclass,U=c.property;e("EndlessBoardView",(D=z("EndlessBoardView"),T=U(l),x=U(l),R=U(l),G=U(l),D((L=t((O=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return t=e.call.apply(e,[this].concat(a))||this,o(t,"rootScoreView",L,i(t)),o(t,"enhancedButton",_,i(t)),o(t,"clearScreenLabel",N,i(t)),o(t,"clearMultiLabel",F,i(t)),t.enhancedHintBlocks=void 0,t.scoreView=void 0,t.enhanceTips=null,t.isShowingEnhancedHint=!1,t}n(t,e);var r=t.prototype;return r.start=function(){e.prototype.start.call(this),V.instance.reportBI(A.classic_enter,{best:m.inst.getHighestScore()}),this.preloadViews()},r.preloadViews=function(){var e=this;this.scheduleOnce((function(){H.getInstance().preloadAsset([p.prefab.revive.path,p.prefab.setting.path,p.prefab.enlessPreOver.path],"block")}),3),this.scheduleOnce((function(){e.preloadScenes()}),8)},r.preloadScenes=function(){H.getInstance().preloadScene("home","block").then((function(){H.getInstance().preloadScene("level","block").then((function(){H.getInstance().preloadScene("adventure_level_selectv2","block")})).catch(console.error)})).catch(console.error)},r.onDestroy=function(){var t=this.gameManager.scoreHelper;if(t){var n=t.isBestScore;V.instance.reportBI(A.classic_exit,{best:m.inst.getHighestScore(),isNewRecord:n,is_first_game:t.isFirstChallange,round:this.gameManager.getRound()})}e.prototype.onDestroy.call(this)},r.startGame=function(){var t=a(s().mark((function t(){return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.prototype.startGame.call(this);case 2:this.refreshScoreView(),V.instance.reportBI(A.classic_start,{best:m.inst.getHighestScore()});case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.refreshScoreView=function(){if(this.scoreView=this.rootScoreView.getComponent(u),this.scoreView){var e=this.gameManager.scoreHelper;e&&this.scoreView.initData(e.score,e.historyMaxScore)}},r.onClickBg=function(){this.enhancedButton.active=!1,this.hasEnhancedHint=!1},r.onEvtRefreshPreviewBlock=function(t){e.prototype.onEvtRefreshPreviewBlock.call(this,t),this.getGuideDataInst().isGuideFinished()&&this.ShowEnhancedAITips(!1)},r.onRestartGame=function(t){if(e.prototype.onRestartGame.call(this,t),this.refreshScoreView(),this.refreshBoardView(this.gameManager.tableData),this.refreshAllBoardAni(y.previewBoardData),f.inst.removeAllPopUpView(),this.showComboAni(!1),t){var n=m.inst.getHighestScore();V.instance.reportBI(A.classic_start,{best:n}),V.instance.reportBI(A.classic_restart,{best:n})}},r.onGameOver=function(){var t=this;e.prototype.onGameOver.call(this),v.inst.isCanRevive()?b.inst.isRewardedVideoAvailable().then((function(){f.inst.addPopUpView(p.prefab.revive.path,{manager:v.inst,onTimeFinish:function(){t.showEndlessOverView()},mode:k.endless,holder:t,reviveTimes:t.gameManager.getReviveTimes()})})).catch((function(){t.showEndlessOverView()})):(P.getInstance().resetProgressBar(),P.getInstance().resetReachPercent(),this.showEndlessOverView())},r.showEndlessOverView=function(){var e=p.prefab.enlessPreOver,t=this.gameManager.scoreHelper;f.inst.addPopUpView(e.path,{manager:this.gameManager,result:{isBestScore:t.isBestScore,score:t.score,is_first_game:t.isFirstChallange,round:this.gameManager.getRound()}});var n=B.inst;n.isPlayAdventureHandGuide=!1,n.isFirstPlay&&(n.isFirstPlay=!1,n.onlinePlayTimes+=1,n.isPlayAdventureHandGuide=!0),console.log("isPlayAdventureHandGuide"),console.log(n.isPlayAdventureHandGuide)},r.getGuideDataInst=function(){return w.inst},r.clearEnhanceHintBlocks=function(){this.enhancedHintBlocks&&(this.enhancedHintBlocks.forEach((function(e){e.stopOpacityTween(e.blockType),I.inst.getPool("BlockEntityPool").put(e.node)})),this.enhancedHintBlocks.length=0)},r.moveBlock=function(e,t,n){for(var o=this,i=0;i<e.blocks.length;i++)if(this.targetNodeIndex=e.blocks[i].targetNodeIndex,this.targetNodeIndex){this.targetIndex=i;break}var a=this.targetNodeIndex[2],s=this.blockMap.get(a).node,r=e.blocks[this.targetIndex].node.getWorldMatrix();if(h.invert(this.tempMat4,r),d.transformMat4(this.newLocalPos,s.worldPosition,this.tempMat4),e.moveToPosition(this.newLocalPos,t,this.lastChooseNodeIndex),e.IsMoveTargetAsHint(this.targetNodeIndex[1],this.targetNodeIndex[0])){console.log("[moveblock] move to right place");var c=!1;this.gameManager.blockPlaceholders.forEach((function(e){if(!c){var t=e.getComponent(S);if(1==t.enhancedHintSeq){for(var n=t.blockIndex,i=window.BlockConst[n].simple,a=0,s=0;s<i.length;s++)for(var r=0;r<i[0].length;r++)i[s][r]>0&&a++;console.log("[moveblockddd] remove "+a.toString());for(var l=0;l<a;l++){var h=o.enhancedHintBlocks[l];h&&(h.stopOpacityTween(h.blockType),I.inst.getPool("BlockEntityPool").put(h.node))}c=!0,o.enhancedHintBlocks.splice(0,a)}}})),this.gameManager.removePlaceHolderOneHint()}else console.log("[moveblock] move to wrong place"),this.clearEnhanceHintBlocks(),this.gameManager.removePlaceHolderAllHints(),this.hasEnhancedHint=!1;console.log()},r.onShowEnhancedHint=function(){this.enhancedButton.active=!1,this.hasEnhancedHint=!0,this.playEnhancedHintAnim(this.enhanceTips)},r.ShowEnhancedAITips=function(e){if(e)if(console.log("检查加强ai提示 轮次"+this.gameManager.getRound().toString()),this.gameManager.scoreHelper.checkIsCanOpenAITips()){this.gameManager.blockPlaceholders.forEach((function(e){e.getComponent(S).setHintAvailable(!1)})),this.enhanceTips=[];var t=!1;if(this.gameManager.isShowEnhancedHintRound()){var n=this.gameManager.getEnhanceHint();this.enhanceTips=n||[],this.enhanceTips&&this.enhanceTips.length>0?t=!0:console.log("加强ai提示内容为空 ")}else console.log("不在加强ai提示轮次");t?this.hasEnhancedHint||(this.hasEnhancedHint=!0,console.log("加强ai提示 轮次"+this.gameManager.getRound().toString()),this.enhancedButton.active=!0,1==this.enhanceTips[0].clearType?(this.clearScreenLabel.active=!1,this.clearMultiLabel.active=!0):(this.clearScreenLabel.active=!0,this.clearMultiLabel.active=!1)):(console.log("无加强ai提示 轮次"+this.gameManager.getRound().toString()),this.enhancedButton.active=!1)}else this.enhancedButton.active=!1},r.playEnhancedHintAnim=function(e){if(this.enhancedHintBlocks||(this.enhancedHintBlocks=[]),w.inst.isGuideFinished()&&(this.enhancedHintBlocks.forEach((function(e){I.inst.getPool("BlockEntityPool").put(e.node)})),this.gameManager.blockPlaceholders.forEach((function(e){e.getComponent(S).setHintAvailable(!1)})),this.enhancedHintBlocks.length=0,this.gameManager.scoreHelper.checkIsCanOpenAITips()))for(var t=0;t<e.length;t++){var n=e[t];n.blockPlaceHolder.setHintAvailable(!0,n.blockPlaceHolder.enhancedHintSeq),console.log("[playEnhancedHintAnim], blockIndex "+n.blockPlaceHolder.blockIndex.toString()+" "+n.blockPlaceHolder.enhancedHintSeq.toString()),this.playOneBlockHolderHintAnim(n)}},r.playOneBlockHolderHintAnim=function(e){for(var t=e.blockPlaceHolder.blockIndex,n=window.BlockConst[t].simple,o=0;o<n.length;o++)for(var i=0;i<n[0].length;i++){if(0!=n[o][i]){var a=I.inst.getPool("BlockEntityPool").get(),s=a.getComponent(E);if(a.parent=this.node,this.enhancedHintBlocks.push(s),n.length<=0)return void console.error("异常的块配置",t);var r=M.BlockSpriteSize.x,c=(-3.5+i+e.x)*r,l=(3.5-o-e.y)*r;s.node.setPosition(c,l),s.node.active=!0,s.onlyRefreshColorWithTween(e.blockPlaceHolder.blockType,!0)}}},t}(g)).prototype,"rootScoreView",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=t(O.prototype,"enhancedButton",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=t(O.prototype,"clearScreenLabel",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=t(O.prototype,"clearMultiLabel",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=O))||C));r._RF.pop()}}}));

System.register("chunks:///_virtual/EndlessGameOverView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Boot.ts","./MK.ts","./SceneMode.ts","./Enumrations.ts","./AssetInfoDefine.ts","./AdSdk.ts","./ProcedureToHome.ts","./PanelBase.ts","./emAdPath.ts","./SocialDef.ts","./WechatMiniApi.ts","./SdkError.ts","./SdkManager.ts","./LanguageManager.ts","./BIDefine.ts","./FlagData.ts","./ProcedureToAdventureLevelSelectV2.ts","./UserData.ts","./Util.ts","./ResManager.ts","./PanelManager.ts","./MKLocalStorage.ts","./sdk.ts"],(function(e){var t,n,a,i,s,r,o,c,l,u,d,h,g,f,m,_,S,p,v,y,b,I,T,w,C,k,P,M,A,B,L,G,R,D,W,x,F,H,V,E;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,a=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){s=e.cclegacy,r=e._decorator,o=e.Label,c=e.Node,l=e.Sprite,u=e.Tween,d=e.Vec3,h=e.tween},function(e){g=e.audio,f=e.fsm},null,function(e){m=e.SceneMode},function(e){_=e.kGameMode},function(e){S=e.AssetInfoDefine},function(e){p=e.AdSdk},function(e){v=e.ProcedureToHome},function(e){y=e.default},function(e){b=e.emAdPath},function(e){I=e.emSharePath,T=e.emShareType},function(e){w=e.WechatMiniApi},function(e){C=e.emSdkErrorCode},function(e){k=e.SdkManager},function(e){P=e.LanguageManager},function(e){M=e.BIEventID,A=e.emButtonType,B=e.emButtonScene,L=e.emAdStatus},function(e){G=e.FlagData},function(e){R=e.ProcedureToAdventureLevelSelectV2},function(e){D=e.UserData},function(e){W=e.Util},function(e){x=e.ResManager},function(e){F=e.PanelManager},function(e){H=e.getItem,V=e.setItem},function(e){E=e.SDK}],execute:function(){var N,O,U,z,j,K,q,J,Y,Q,X,Z,$,ee,te;s._RF.push({},"08f7cHkYGVCGa3eEeIv5JoS","EndlessGameOverView",void 0);var ne=r.ccclass,ae=r.property;e("EndlessGameOverView",(N=ne("EndlessGameOverView"),O=ae(o),U=ae(o),z=ae(o),j=ae(c),K=ae(o),q=ae(l),N((Q=t((Y=function(e){function t(){for(var t,n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return t=e.call.apply(e,[this].concat(s))||this,a(t,"scoreLabel",Q,i(t)),a(t,"scoreLabelBack",X,i(t)),a(t,"maxScoreLabel",Z,i(t)),a(t,"guideHand",$,i(t)),a(t,"classicPlayTimeDisplay",ee,i(t)),a(t,"classicPlayTimeIcon",te,i(t)),t.curScore=null,t.highScore=null,t.manager=void 0,t}n(t,e);var s=t.prototype;return s.start=function(){m.gameMode==_.endless&&D.inst.setPlayClassicTimesToday(),this.refreshBtnState(),D.inst.isGameOngoing=!1,p.inst.hideMainPageBannerAd(),p.inst.showPopBannerAd(),this.isCanShowInstersitial()&&(G.inst.hasFlag("jump_ad_instertital_endless")?p.inst.showInsterstital("EndlessGameOverView"):G.inst.recordFlag("jump_ad_instertital_endless")),u.stopAllByTarget(this.guideHand),this.PlayAdventureHandGuide()},s.refreshBtnState=function(){var e=this,t=D.inst.getClassicPlayNumToday,n=D.inst.getMaxFreePlayNumToday();this.classicPlayTimeDisplay.string="今日免费"+Math.max(n-t,0).toString()+"/"+n.toString()+" 次",t<n?this.classicPlayTimeIcon.node.active=!1:D.inst.getCanShareReplay()?x.getInstance().loadSpriteFrame("res/texture/revive/UI_Stickerfinish_btn_icon_share","block").then((function(t){e.classicPlayTimeIcon.node.active=!0,e.classicPlayTimeIcon.spriteFrame=t})):x.getInstance().loadSpriteFrame("res/texture/revive/UI_Restart_icon_ad","block").then((function(t){e.classicPlayTimeIcon.node.active=!0,e.classicPlayTimeIcon.spriteFrame=t}))},s.isCanShowInstersitial=function(){return!0},s.onSetData=function(e){this.manager=this.data.manager;var t=this.manager.scoreHelper;this.setScoreData(t.score,t.historyMaxScore),k.getInstance().channel.sendMsg({method:"load_data"}),k.getInstance().channel.setCloudStorage([{key:"score",value:t.historyMaxScore.toString()}]);var n=G.inst.getTimes(M.af_classicgame);E.instance.reportAf(M.af_classicgame,{af_classictimes:n,af_classicscore:t.score,af_classichighest:t.historyMaxScore},!0),G.inst.recordTimes(M.af_classicgame)},s.PlayAdventureHandGuide=function(){this.guideHand.active=!0;var e=new d(200,-80,0);h(this.guideHand).repeatForever(h().to(.5,{position:new d(175,-55,0)},{easing:"circOut"}).to(.5,{position:e},{easing:"circOut"})).start()},s.PlayDigitLoop=function(){var e=this.manager.scoreHelper;this.scoreLabel.string="0000";this.scoreLabel,e.score},s.setScoreData=function(e,t){this.curScore=e,this.highScore=t,this.maxScoreLabel.string=this.highScore.toString(),this.setScore(this.scoreLabel,this.curScore),this.setScore(this.scoreLabelBack,this.curScore);var n=H("game_action_info",{score:0,playCount:0});n.score>e?(n.playCount++,V("game_action_info",n)):(n.playCount=0,n.score=t,V("game_action_info",n))},s.setScore=function(e,t){var n=0,a=t;if(a>0){var i=h().call((function(){var t=(n+=1).toString();e.string=t})),s=1/a,r=h().delay(s);h(e).delay(.533).repeat(a,h().sequence(r,i)).start()}else e.string="0"},s.onClickRetry=function(e,t){var n=this,a=parseInt(t);if(g.playSubSound(S.audio.touch),E.instance.reportBI(M.btn_click,{btn_type:A.enter_classic,scene:B.from_fail_classic}),m.gameMode==_.endless)if(D.inst.getClassicPlayNumToday<D.inst.getMaxFreePlayNumToday())this.manager.retryCurrentLevel(),this.closeSelf();else if(D.inst.tryShareReplay()){var i=W.generateRandomShowOffShare();w.getInstance().showShare(i,I.revive,this,(function(){n.manager.retryCurrentLevel(),n.closeSelf()}),{},(function(){console.log("failed to share")})),this.refreshBtnState()}else E.instance.reportBI(M.ad_begin,{scene:a,begin_num:D.inst.getTodayWatchAdStartGameCount(),ad_status:L.WakeUp}),E.instance.reportBI(M.ad_revivie,{ad_status:L.WakeUp,ad_mode:"home",revive_num:D.inst.getThisGameWatchReviveNum()}),p.inst.showRewardVideoAd(b.Score_Relife).then((function(e){E.instance.reportBI(M.ad_begin,{scene:a,begin_num:D.inst.getTodayWatchAdStartGameCount(),ad_status:L.Finished}),E.instance.reportBI(M.ad_revivie,{ad_status:L.Finished,ad_mode:"home",revive_num:D.inst.getThisGameWatchReviveNum()});var t=D.inst.getThisGameWatchReviveNum();D.inst.setThisGameWatchReviveNum(t+1),t=D.inst.getTodayWatchAdStartGameCount(),D.inst.setTodayWatchAdStartGameCount(t+1),n.manager.retryCurrentLevel(),n.closeSelf()})).catch((function(e){if(e.errMsg==C.Sdk_Ad_Close_Reward)return E.instance.reportBI(M.ad_revivie,{ad_status:L.Closed,ad_mode:"home",revive_num:D.inst.getThisGameWatchReviveNum()}),E.instance.reportBI(M.ad_begin,{scene:a,begin_num:D.inst.getTodayWatchAdStartGameCount(),ad_status:L.Closed}),void k.getInstance().native.showToast(P.translateText("tip_not_finish_watch"));E.instance.reportBI(M.ad_begin,{scene:a,begin_num:D.inst.getTodayWatchAdStartGameCount(),ad_status:L.Error}),k.getInstance().native.showToast(P.translateText("tip_ad_fail"))}))},s.onClickLevel=function(){var e=this;g.playSubSound(S.audio.touch),E.instance.reportBI(M.btn_click,{btn_type:A.enter_adventure,scene:B.from_fail_classic}),m.gameMode=_.none,f.changeState(R,"block"),this.scheduleOnce((function(){e.closeSelf()}),.25)},s.onClickHome=function(){g.playSubSound(S.audio.touch),f.changeState(v,"block"),this.closeSelf()},s.onClickRelife=function(){var e=this;p.inst.showRewardVideoAd(b.Score_Relife).then((function(){g.playSubSound(S.audio.touch),e.node.destroy(),e.manager.relifeCurrentLevel()})).catch((function(e){e.errMsg!=C.Sdk_Ad_Close_Reward&&k.getInstance().native.showToast(P.translateText("tip_ad_fail"))}))},s.onClickShare=function(){var e=Math.random();e<.25?w.getInstance().showShare(T.s_10001,I.start_game,this,null):e<.5?w.getInstance().showShare(T.s_10002,I.start_game,this,null):e<.75?w.getInstance().showShare(T.s_10003,I.start_game,this,null):w.getInstance().showShare(T.s_10004,I.start_game,this,null)},s.onClickHelp=function(){w.getInstance().showShare(T.s_10003,I.start_game,this,null)},s.onWillClose=function(){e.prototype.onWillClose.call(this),p.inst.hidePopBannerAd()},s.onClickLeaderBoard=function(){E.instance.reportBI(M.btn_click,{btn_type:A.enter_leaderboard,scene:B.from_fail_classic}),F.inst.addPopUpView(S.prefab.friendListRank.path)},t}(y)).prototype,"scoreLabel",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=t(Y.prototype,"scoreLabelBack",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=t(Y.prototype,"maxScoreLabel",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$=t(Y.prototype,"guideHand",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ee=t(Y.prototype,"classicPlayTimeDisplay",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),te=t(Y.prototype,"classicPlayTimeIcon",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=Y))||J));s._RF.pop()}}}));

System.register("chunks:///_virtual/EndlessGamePreGameOver.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PanelBase.ts","./PanelManager.ts","./AssetInfoDefine.ts","./Boot.ts","./MK.ts","./UserScoreLevelData.ts","./FlagData.ts","./BIDefine.ts","./EndlessProgressHelper.ts","./sdk.ts"],(function(e){var s,t,a,n,r,i,c,o,l,f,u,d;return{setters:[function(e){s=e.inheritsLoose},function(e){t=e.cclegacy,a=e._decorator},function(e){n=e.default},function(e){r=e.PanelManager},function(e){i=e.AssetInfoDefine},function(e){c=e.audio},null,function(e){o=e.UserScoreLevelData},function(e){l=e.FlagData},function(e){f=e.BIEventID},function(e){u=e.EndlessProgressHelper},function(e){d=e.SDK}],execute:function(){var g;t._RF.push({},"befe8gK+dNEH7DY2DJmHojP","EndlessGamePreGameOver",void 0);var _=a.ccclass;a.property,e("EndlessGamePreGameOver",_("LevelGamePreGameOver")(g=function(e){function t(){return e.apply(this,arguments)||this}return s(t,e),t.prototype.start=function(){var e=this;this.scheduleOnce((function(){e.closeSelf();var s=i.prefab.endlessOver,t=e.data.result,a=l.inst.getTimes(f.af_classicgame);u.getInstance().resetProgressBar(),u.getInstance().resetReachPercent(),t.isBestScore?(s=i.prefab.endlessBest,c.playSubSound(i.audio.level_finish),d.instance.reportBI(f.classic_finish,{af_classicbest:o.inst.getHighestScore(),af_classicnew:!0,af_classictimes:a,af_classicscores:t.score,is_first_game:t.is_first_game,round:t.round})):(c.playSubSound(i.audio.game_over),d.instance.reportBI(f.classic_finish,{af_classicbest:o.inst.getHighestScore(),af_classicnew:!1,af_classictimes:a,af_classicscores:t.score,is_first_game:t.is_first_game,round:t.round})),r.inst.addPopUpView(s.path,{manager:e.data.manager,result:0})}),1.5)},t}(n))||g);t._RF.pop()}}}));

System.register("chunks:///_virtual/EndlessProgressHelper.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"8db5ch37c1EqqSKhZTsvIDf","EndlessProgressHelper",void 0),e("EndlessProgressHelper",function(){function e(e){this.progressStageNumber=void 0,this.currentCompleted=void 0,this.currentReachPercent=void 0,this.progressStageNumber=1,this.currentCompleted=0,this.currentReachPercent=1}e.getInstance=function(){return null==e._instance&&(e._instance=new e),e._instance};var t=e.prototype;return t.resetProgressBar=function(){this.progressStageNumber=1,this.currentCompleted=0},t.resetReachPercent=function(){this.currentReachPercent=1},e}())._instance=void 0,t._RF.pop()}}}));

System.register("chunks:///_virtual/EndlessScoreHelper.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MK.ts","./ScoreHelper.ts","./Event.ts","./UserData.ts","./UserScoreLevelData.ts","./Boot.ts","./BIDefine.ts","./BlockEventManager.ts","./EventType.ts","./ABTestManager.ts","./ABTestDefine.ts","./ResManager.ts","./FlagData.ts","./MKEvent.ts","./sdk.ts"],(function(e){var t,r,s,i,o,c,n,f,a,l,u,h,S,d,g;return{setters:[function(e){t=e.inheritsLoose},function(e){r=e.cclegacy},null,function(e){s=e.ScoreHelper},function(e){i=e.BlockEventType},function(e){o=e.UserData},function(e){c=e.UserScoreLevelData},null,function(e){n=e.BIEventID},function(e){f=e.BlockEventManager},function(e){a=e.Events},function(e){l=e.ABTestManager},function(e){u=e.ABTestParam},function(e){h=e.ResManager},function(e){S=e.FlagData},function(e){d=e.sendEvent},function(e){g=e.SDK}],execute:function(){r._RF.push({},"b1ba17A155AQbbjlkdC1guk","EndlessScoreHelper",void 0);e("EndlessScoreHelper",function(e){function r(t){var r;(r=e.call(this,t)||this).historyMaxScore=0,r.isFirstChallange=!1,r.isBestScore=!1,r.diffcult={},r.diffcultScore=void 0,r.diffScoreArr=void 0,r.diffScoreBuffArr=void 0,r.scoreMap=void 0,r.isTupo=!1;var s=c.inst.getHighestScore();s||(r.isFirstChallange=!0),r.historyMaxScore=s||0,r.diffcult={};var i=l.getInstance().getGroup(u.Diffcult),o=r.getScoreArray(i);return r.diffScoreArr=o,r.diffcultScore=o[0],r.diffScoreBuffArr=new Int32Array(o),r.scoreMap={1:1e3,2:2e3,3:3e3,4:4e3,5:5e3,6:8e3,7:1e4,8:2e4,9:3e4},r}t(r,e);var s=r.prototype;return s.loadConfig=function(){var e=this;return new Promise((function(t,r){h.getInstance().loadAsset("res/configs/global","block").then((function(r){e.configs=r.json.level,t(!0)})).catch(r)}))},s.setHistoryData=function(t){e.prototype.setHistoryData.call(this,t),this.historyMaxScore=c.inst.getHighestScore()||0,this.diffcult=t.diffcult||{},this.diffcultScore=t.diffcultScore||this.diffScoreArr[0]},s.addScore=function(t){e.prototype.addScore.call(this,t),0!=t&&(d(i.EVENT_SCENE_PLAY_SET_SCORE,this.score),c.inst.setLastScore(this.score),this.checkHistoryMaxScore())},s.checkHistoryMaxScore=function(){return this.score>this.historyMaxScore&&(this.historyMaxScore=this.score,this.isBestScore=!0,this.isTupo||(this.isTupo=!0,g.instance.reportBI(n.classic_newrecord,{best:c.inst.getHighestScore(),isNewRecord:!0,score:this.score})),d(i.EVENT_SCENE_PLAY_FLUSH_MAX_SCORE,this.score,this.isFirstChallange),c.inst.updateHighestScore(this.score),this.onUpdateHistoryMaxScore(this.score),!0)},s.loadHistoryMaxScore=function(){this.historyMaxScore=c.inst.getHighestScore()||0},s.onUpdateHistoryMaxScore=function(e){e>0&&!o.inst.isOpenLevel&&(o.inst.isOpenLevel=!0,f.instance.emit(a.UNLOCK_LEVEL))},s.onClearAllBlock=function(e,t){g.instance.reportBI(n.classic_clear_all,{currScore:e,round:t,mode:2})},s.getScoreArray=function(e){return[4e3,6e3,8e3]},s.checkDiffcultScore=function(){if(this.diffcultScore<=this.score){if(1==this.diffcult[this.diffcultScore])return!1;this.diffcult[this.diffcultScore]=1;for(var e=this.diffScoreArr.lastObject(),t=0;t<this.diffScoreArr.length;t++){var r=this.diffScoreArr[t];if(this.score<r){e=r;break}}return this.diffcultScore=e,!S.inst.hasFlag("EndlessDiffShow_"+e)&&(S.inst.recordFlag("EndlessDiffShow_"+e,!0),!0)}return!1},s.checkIsCanOpenAITips=function(){return!!(this.diffScoreArr&&this.diffScoreArr.length>0)&&!(this.diffcultScore>this.diffScoreArr[0])},s.getProgressScoreMap=function(){return this.scoreMap},s.resetGameRecordState=function(){var e=this.diffScoreArr;e&&e.forEach((function(e){S.inst.recordFlag("EndlessDiffShow_"+e,!1)}));var t=this.scoreMap;for(var r in t){var s=t[r];S.inst.recordFlag("kIsPlayedReachPercent_"+s,!1)}},r}(s));r._RF.pop()}}}));

System.register("chunks:///_virtual/EndlessScoreView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Event.ts","./MK.ts","./MKNodeBind.ts","./SceneMode.ts","./Enumrations.ts","./Game.ts","./EndlessProgressHelper.ts","./SdkEventManager.ts","./SdkEventType.ts","./MKEvent.ts"],(function(e){var t,r,i,o,a,n,s,l,c,u,g,p,b,h,f,d,m,v,S,C,y,L,w,E;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){a=e.cclegacy,n=e._decorator,s=e.Label,l=e.ProgressBar,c=e.Node,u=e.Slider,g=e.Tween,p=e.tween,b=e.v3,h=e.Component},function(e){f=e.BlockEventType},null,function(e){d=e.parseNode},function(e){m=e.SceneMode},function(e){v=e.kGameMode},function(e){S=e.Game},function(e){C=e.EndlessProgressHelper},function(e){y=e.SdkEventManager},function(e){L=e.SdkEventType},function(e){w=e.regEvent,E=e.unRegEvent}],execute:function(){var N,P,z,_,M,I,F,A,D,T,V,k,B,H,R,G,O,x,K,U,W,Y,q,j,X,J,Q,Z,$,ee,te,re,ie,oe,ae,ne,se,le,ce,ue,ge,pe,be,he,fe,de,me;a._RF.push({},"e2ae3wvfbxCPqwfBzRVeCaC","EndlessScoreView",void 0);var ve=n.ccclass,Se=n.property,Ce={1:1e3,2:2e3,3:3e3,4:4e3,5:5e3,6:6e3,7:7e3,8:8e3,9:9e3,10:1e4,11:12e3,12:14e3,13:16e3,14:18e3,15:2e4,16:22e3,17:24e3,18:26e3,19:28e3,20:3e4};e("EndlessScoreView",(N=ve("EndlessScoreView"),P=Se(s),z=Se(s),_=Se(l),M=Se(c),I=Se(c),F=Se(s),A=Se(s),D=Se(s),T=Se(s),V=Se(s),k=Se(c),B=Se(c),H=Se(c),R=Se(c),G=Se(c),O=Se(c),x=Se(c),K=Se(c),U=Se(c),W=Se(c),Y=Se(c),q=Se(u),N((J=t((X=function(e){function t(){for(var t,r=arguments.length,a=new Array(r),n=0;n<r;n++)a[n]=arguments[n];return t=e.call.apply(e,[this].concat(a))||this,i(t,"historyscoreLabel",J,o(t)),i(t,"scoreLabel",Q,o(t)),t.score=void 0,i(t,"scoreProgress",Z,o(t)),i(t,"progress",$,o(t)),i(t,"progressFinish",ee,o(t)),i(t,"target1Label",te,o(t)),i(t,"target2Label",re,o(t)),i(t,"target3Label",ie,o(t)),i(t,"target4Label",oe,o(t)),i(t,"target5Label",ae,o(t)),i(t,"target1NotCompleted",ne,o(t)),i(t,"target2NotCompleted",se,o(t)),i(t,"target3NotCompleted",le,o(t)),i(t,"target4NotCompleted",ce,o(t)),i(t,"target5NotCompleted",ue,o(t)),i(t,"target1Completed",ge,o(t)),i(t,"target2Completed",pe,o(t)),i(t,"target3Completed",be,o(t)),i(t,"target4Completed",he,o(t)),i(t,"target5Completed",fe,o(t)),i(t,"progressParticle",de,o(t)),i(t,"progressSlider",me,o(t)),t.gameManager=void 0,t}r(t,e);var a=t.prototype;return a.onLoad=function(){var e=this;d(this),m.gameMode=v.endless,this.score=0,this.scoreProgress.progress=0,this.gameManager=S.inst,this.setScoreProgress(0,!0),w(f.EVENT_SCENE_PLAY_SET_SCORE,this.setScore,this),w(f.EVENT_SCENE_PLAY_FLUSH_MAX_SCORE,this.flushMaxScore,this),w(f.EVENT_SCENE_PLAY_SHOW_NEW_SCORE,this.showNewScoreAct,this),w(f.kEvent_Game_Start,this.loadData,this),y.getInstance().register(L.GAME_SHOW,(function(){e.loadData()}),this),y.getInstance().register(L.GAME_HIDE,(function(){e.hideUI()}),this)},a.hideUI=function(){this.progress.active=!1,this.progressFinish.active=!1},a.loadData=function(){this.setScoreProgress(this.gameManager.scoreHelper.score,!0),C.getInstance().progressStageNumber>4?(this.progress.active=!1,this.progressFinish.active=!0):(this.progress.active=!0,this.progressFinish.active=!1)},a.initData=function(e,t){this.historyscoreLabel&&(this.historyscoreLabel.string=t+""),this.scoreLabel&&(this.scoreLabel.string=""+e),this.loadData()},a.getRewardPos=function(){return this.scoreLabel.node.worldPosition},a.onDestroy=function(){E(this)},a.flushMaxScore=function(e,t){this.historyscoreLabel.string=""+e},a.showNewScoreAct=function(){},a.setScore=function(e){var t=this,r=this.score,i=e-this.score;if(g.stopAllByTarget(this.scoreLabel.node),i>0){this.score=e;var o=p().call((function(){var e=(r+=1).toString();t.scoreLabel.string=e})),a=.5/i,n=p().delay(a);p(this.scoreLabel.node).repeat(i,p().sequence(n,o)).start()}this.score=e,this.setScoreProgress(e,!1)},a.setScoreProgress=function(e,t){this.setProgressBarValue(e,t),this.setLabelString()},a.setLabelString=function(){for(var e=5*(C.getInstance().progressStageNumber-1),t={1:this.target1Label,2:this.target2Label,3:this.target3Label,4:this.target4Label,5:this.target5Label},r=1;r<6;r++){var i=(Ce[e+r]/1e3).toString();t[r].string=i+"K"}},a.setProgressBarValue=function(e,t){if(C.getInstance().progressStageNumber>4)return this.progress.active=!1,void(this.progressFinish.active=!0);this.progress.active=!0,this.progressFinish.active=!1;var r=5*(C.getInstance().progressStageNumber-1)+1,i=0;this.progressParticle.active=!1;for(var o={1:this.target1Completed,2:this.target2Completed,3:this.target3Completed,4:this.target4Completed,5:this.target5Completed},a={1:this.target1NotCompleted,2:this.target2NotCompleted,3:this.target3NotCompleted,4:this.target4NotCompleted,5:this.target5NotCompleted},n=r;n<r+5;n++)e>=Ce[n]&&i++;if(t){for(var s=1;s<6;s++)o[s].active=!1,o[s].scale=b(.5,.5,1),a[s].active=!0,a[s].scale=b(1,1,1);for(var l=1;l<i;l++)o[l].active=!0,o[l].scale=b(1,1,1),a[l].active=!1;i>0&&i<=5&&(o[i].active=!0,o[i].scale=b(1,1,1),a[i].active=!1)}if(5==i){C.getInstance().progressStageNumber++,C.getInstance().currentCompleted=0;for(var c=1;c<6;c++)o[c].active=!1,o[c].scale=b(.5,.5,1),a[c].active=!0,a[c].scale=b(1,1,1);C.getInstance().progressStageNumber>4&&(this.progress.active=!1,this.progressFinish.active=!0),i=0}else for(var u=1;u<i;u++)a[u].active=!1,o[u].active=!0,o[u].scale=b(1,1,1);if(0==i)return this.scoreProgress.progress=0,void(this.progressSlider.progress=0);if(i>C.getInstance().currentCompleted){var g=a[i],h=o[i];p(g).to(.5,{scale:b(.5,.5,1)}).start(),h.active=!0,p(h).delay(.5).to(.5,{scale:b(1,1,1)}).start(),C.getInstance().currentCompleted=i}var f=Ce[r+i-1],d=.25*(i-1)+.25*((e-f)/(Ce[r+i]-f));this.scoreProgress.progress=d;var m=d;m<0&&(m=0),m>0&&(this.progressParticle.active=!0),this.progressSlider.progress=m},t}(h)).prototype,"historyscoreLabel",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Q=t(X.prototype,"scoreLabel",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Z=t(X.prototype,"scoreProgress",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$=t(X.prototype,"progress",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ee=t(X.prototype,"progressFinish",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),te=t(X.prototype,"target1Label",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),re=t(X.prototype,"target2Label",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ie=t(X.prototype,"target3Label",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),oe=t(X.prototype,"target4Label",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ae=t(X.prototype,"target5Label",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ne=t(X.prototype,"target1NotCompleted",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),se=t(X.prototype,"target2NotCompleted",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),le=t(X.prototype,"target3NotCompleted",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ce=t(X.prototype,"target4NotCompleted",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ue=t(X.prototype,"target5NotCompleted",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ge=t(X.prototype,"target1Completed",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),pe=t(X.prototype,"target2Completed",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),be=t(X.prototype,"target3Completed",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),he=t(X.prototype,"target4Completed",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),fe=t(X.prototype,"target5Completed",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),de=t(X.prototype,"progressParticle",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),me=t(X.prototype,"progressSlider",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=X))||j));a._RF.pop()}}}));

System.register("chunks:///_virtual/enum.ts",["cc"],(function(e){var t,r;return{setters:[function(e){t=e.cclegacy,r=e.Enum}],execute:function(){t._RF.push({},"21168fhfp5Aw4tN3YlGEjVv","enum",void 0);var o=e("Orientation",function(e){return e[e.Vertical=0]="Vertical",e[e.Horizontal=1]="Horizontal",e}({})),n=e("MovementType",function(e){return e[e.Unrestricted=0]="Unrestricted",e[e.Elastic=1]="Elastic",e[e.Clamped=2]="Clamped",e}({})),i=e("ArrangeAxis",function(e){return e[e.Start=0]="Start",e[e.End=1]="End",e}({})),u=e("StretchDirection",function(e){return e[e.Auto=0]="Auto",e[e.Header=1]="Header",e[e.Footer=2]="Footer",e[e.Center=3]="Center",e}({})),c=(e("Layer",function(e){return e[e.Lowest=0]="Lowest",e[e.Medium=1]="Medium",e[e.Highest=2]="Highest",e}({})),e("WrapMode",function(e){return e[e.Auto=0]="Auto",e[e.Wrap=1]="Wrap",e[e.Nowrap=2]="Nowrap",e}({})),e("TouchMode",function(e){return e[e.Auto=0]="Auto",e[e.AlwaysAllow=1]="AlwaysAllow",e[e.Disabled=2]="Disabled",e}({}))),a=e("MagneticDirection",function(e){return e[e.Header=0]="Header",e[e.Footer=1]="Footer",e}({})),l=e("ChildAlignment",function(e){return e[e.UpperLeft=0]="UpperLeft",e[e.UpperCenter=1]="UpperCenter",e[e.UpperRight=2]="UpperRight",e[e.MiddleLeft=3]="MiddleLeft",e[e.MiddleCenter=4]="MiddleCenter",e[e.MiddleRight=5]="MiddleRight",e[e.LowerLeft=6]="LowerLeft",e[e.LowerCenter=7]="LowerCenter",e[e.LowerRight=8]="LowerRight",e}({})),L=(e("ScrollDirection",function(e){return e[e.Up=0]="Up",e[e.Down=1]="Down",e[e.Left=2]="Left",e[e.Right=3]="Right",e[e.None=4]="None",e}({})),e("ScrollbarDirection",function(e){return e[e.Top_To_Bottom=0]="Top_To_Bottom",e[e.Bottom_To_Top=1]="Bottom_To_Top",e[e.Left_To_Right=2]="Left_To_Right",e[e.Right_To_Left=3]="Right_To_Left",e}({}))),d=(e("NestedDirection",function(e){return e[e.Both=0]="Both",e[e.Header=1]="Header",e[e.Footer=2]="Footer",e}({})),e("AlwaysScroll",function(e){return e[e.Auto=0]="Auto",e[e.Header=1]="Header",e[e.Footer=2]="Footer",e}({})),e("IndicatorMode",function(e){return e[e.Normal=0]="Normal",e[e.Button=1]="Button",e}({}))),E=e("Transition",function(e){return e[e.None=0]="None",e[e.ColorTint=1]="ColorTint",e[e.SpriteSwap=2]="SpriteSwap",e[e.Scale=3]="Scale",e}({}));e("ReleaseState",function(e){return e.IDLE="IDLE",e.PULL="PULL",e.WAIT="WAIT",e.RELEASE="RELEASE",e}({})),e("HolderEvent",function(e){return e.CREATED="ADAPTER:HOLDER:CREATED",e.VISIBLE="ADAPTER:HOLDER:VISIBLE",e.DISABLE="ADAPTER:HOLDER:DISABLE",e}({})),e("ViewEvent",function(e){return e.VISIBLE="ADAPTER:VIEW:VISIBLE",e.DISABLE="ADAPTER::VIEW:DISABLE",e}({}));r(o),r(n),r(i),r(u),r(a),r(L),r(l),r(c),r(d),r(E),t._RF.pop()}}}));

System.register("chunks:///_virtual/Enumrations.ts",["cc"],(function(e){var n;return{setters:[function(e){n=e.cclegacy}],execute:function(){n._RF.push({},"2c2f5Aj5n9MvbC5Hfpa7jqt","Enumrations",void 0);e("kGameMode",function(e){return e[e.none=0]="none",e[e.escape=1]="escape",e[e.endless=2]="endless",e[e.level=3]="level",e[e.adventure_level=4]="adventure_level",e}({}));n._RF.pop()}}}));

System.register("chunks:///_virtual/Event.ts",["cc"],(function(E){var _;return{setters:[function(E){_=E.cclegacy}],execute:function(){_._RF.push({},"e09a0MqEmBIt7emuACeFwrO","Event",void 0);var T=E("BlockEventType",(function(){}));T.kEvent_Game_Start=50001,T.kEvent_Game_Show_New_Blocks=50002,T.kEvent_Game_Refresh_Board=50003,T.kEvent_Game_Move_Block=50004,T.kEvent_Game_Move_Block_End=50005,T.kEvent_Game_Logic_Move_Block_End=50006,T.kEvent_Game_Lose=50007,T.kEvent_Game_Show_User_Guide=50008,T.EVENT_START_ANI_END=50060,T.EVENT_BOTTOM_SHOW=50061,T.EVENT_TATGET_SCORE_SHOW=50080,T.EVENT_TATGET_COLLECT_SHOW=50081,T.EVENT_ADD_SCORE_ANI_FINISH=50082,T.EVENT_COLLECT_ITEM_END=50099,T.EVENT_PUT_BLOCK_END=50100,T.EVENT_CLEAR_BLOCK_END=50101,T.EVENT_COMBO_BLOCK_END=50102,T.EVENT_CLEAR_ALL_BLOCK_END=50103,T.EVENT_OP_USE_SKILL_ANI_END=50104,T.EVENT_OP_SKILL_DATA=50105,T.kEvent_Game_Show_New_Blocks_History=50106,T.kEvent_Game_Finish_New_Blocks=50107,T.EVENT_SCENE_PLAY_SET_SCORE=50108,T.EVENT_SCENE_PLAY_FLUSH_MAX_SCORE=50109,T.EVENT_SCENE_PLAY_SHOW_NEW_SCORE=50110,T.EVENT_SCENE_PLAY_RESTART=50111,T.EVENT_SCENE_PLAY_RELIFE=50112,T.EVENT_CAMETA_SHAKE=50113,T.kEvent_Game_Init_Show_Hammer=50114,T.kEvent_Game_Init_Use_Hammer=50115,T.kEvent_Game_Init_Show_HRocket=50116,T.kEvent_Game_Init_Use_HRocket=50117,T.EVENT_RESTART_GAME=50173,T.EVENT_SCENE_PLAY_SET_COLLECT=50174,T.EVENT_SCENE_PLAY_LEVEL_NEXT=50175,T.EVENT_SCENE_PLAY_LEVEL_COMPLETE=50176,T.EVENT_SCENE_PLAY_LEVEL_VIEW_REFRESH=50177,T.BLOCK_TOUCH_START=50178,T.BLOCK_COMBO=50179,T.UNLOCK_LEVEL=50180,T.EVENT_GAME_CREATE_NEWGUIDE_BLOCK=50181,T.EVENT_FAILED_RESTART=50182,T.EVENT_BLOCK_CLICKED=50183,T.EVENT_USE_ITEM_HAMMER=50184,T.EVENT_USE_ITEM_VROCKET=50185,T.EVENT_USE_ITEM_HROCKET=50186,T.EVENT_USE_ITEM_REFRESHBLOCK=50187,T.EVENT_USE_ITEM_END=50188,T.EVENT_REFRESH_ITEM_NUM=50189,_._RF.pop()}}}));

System.register("chunks:///_virtual/EventType.ts",["cc"],(function(E){var _;return{setters:[function(E){_=E.cclegacy}],execute:function(){_._RF.push({},"b2545+yVGpEUIns9a78J4BH","EventType",void 0);E("Events",{EVENT_HIDE:-1,EVENT_SHOW:-2,EVENT_PRELOAD_RES:-3,EVENT_SHOW_EFFECT:-4,EVENT_START_ANI_END:60,EVENT_BOTTOM_SHOW:61,EVENT_PIPEI_JOIN:98,EVENT_PIPEI_AWAY:99,EVENT_PIPEI_USER_CHANGE:100,EVENT_PIPEI_EMPETY_ICON:101,EVENT_POLICY_AGREE:102,EVENT_POLICY_SHOW:103,UNLOCK_LEVEL:104,ON_TOUCH_START:105,ON_TOUCH_END:106});_._RF.pop()}}}));

System.register("chunks:///_virtual/fangge_kaichang_ani.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Event.ts","./MK.ts","./MKEvent.ts"],(function(n){var t,o,e,c,a,i;return{setters:[function(n){t=n.inheritsLoose},function(n){o=n.cclegacy,e=n._decorator,c=n.Component},function(n){a=n.BlockEventType},null,function(n){i=n.sendEvent}],execute:function(){var r;o._RF.push({},"3182eZTkxVL44oZ+rVK5c7g","fangge_kaichang_ani",void 0);var u=e.ccclass;e.property,n("fangge_kaichang_ani",u("fangge_kaichang_ani")(r=function(n){function o(){return n.apply(this,arguments)||this}t(o,n);var e=o.prototype;return e.start=function(){},e.onBlockShow=function(){i(a.EVENT_START_ANI_END)},e.onBottomShow=function(){i(a.EVENT_BOTTOM_SHOW)},o}(c))||r);o._RF.pop()}}}));

System.register("chunks:///_virtual/fixed_item.ts",["./rollupPluginModLoBabelHelpers.js","cc","./index.ts"],(function(e){var t,i,r,n,o,l,a,c;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,r=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){o=e.cclegacy,l=e._decorator,a=e.Label,c=e.Component},null],execute:function(){var s,u,d,p,f;o._RF.push({},"20addg1z9tL24Mef9WIwM01","fixed_item",void 0);var h=l.ccclass,_=l.property;e("fixed_item",(s=h("fixed_item"),u=_(a),s((f=t((p=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];return t=e.call.apply(e,[this].concat(o))||this,r(t,"label",f,n(t)),t._holder=void 0,t}i(t,e);var o=t.prototype;return o.show=function(e){this._holder=e,this.label.string=this._holder.data.name},o.hide=function(){},o.update=function(){},t}(c)).prototype,"label",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=p))||d));o._RF.pop()}}}));

System.register("chunks:///_virtual/fixed.ts",["./rollupPluginModLoBabelHelpers.js","cc","./index.ts","./fixed_item.ts","./enum.ts","./ScrollAdapter.ts","./View.ts","./Holder.ts"],(function(e){var t,n,i,r,o,a,l,c,u,f,s,d,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,l=e.Node,c=e.director},null,function(e){u=e.fixed_item},function(e){f=e.Layer},function(e){s=e.ScrollAdapter},function(e){d=e.View},function(e){p=e.Holder}],execute:function(){var h,m,b,g,y,x,v;o._RF.push({},"a0c62+GGSVJfJkgAg7jeAZe","fixed",void 0);var P=a.ccclass,w=a.property,_=(e("fixed",(h=P("fixed"),m=w(l),b=w(l),h((x=t((y=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,i(t,"fixedPrefab",x,r(t)),i(t,"normalPrefab",v,r(t)),t}n(t,e);var o=t.prototype;return o.getPrefab=function(e){return e.fixed?this.fixedPrefab:this.normalPrefab},o.getView=function(){return new _(this)},o.getHolder=function(e,t){return new A(e,t,this)},o.initElement=function(e,t){e.fixed=t.fixed,e.fixed&&(e.layer=f.Medium)},o.home=function(){c.loadScene("home")},o.scrollToHeader=function(){this.scrollManager.scrollToPercentage(1,0)},o.scrollToFooter=function(){this.scrollManager.scrollToPercentage(1,1)},o.start=function(){for(var e=[],t=0;t<1e3;t++){var n={name:t,fixed:t%10==0};e.push(n)}this.modelManager.insert(e)},t}(s)).prototype,"fixedPrefab",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=t(y.prototype,"normalPrefab",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=y))||g)),function(e){function t(){return e.apply(this,arguments)||this}n(t,e);var i=t.prototype;return i.onVisible=function(){},i.onDisable=function(){},t}(d)),A=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))||this)._item=null,t}n(t,e);var i=t.prototype;return i.onCreated=function(){this._item=this.node.getComponent(u)},i.onVisible=function(){this._item.show(this)},i.onDisable=function(){this._item.hide()},t}(p);o._RF.pop()}}}));

System.register("chunks:///_virtual/FlagData.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MKLocalStorage.ts"],(function(t){var n,e,u,i;return{setters:[function(t){n=t.createClass},function(t){e=t.cclegacy},function(t){u=t.getItem,i=t.setItem}],execute:function(){e._RF.push({},"977bep+SplJOrTF17uv6+qE","FlagData",void 0),t("FlagData",function(){function t(){this.updateTimes("OpenSettingView",0)}var e=t.prototype;return e.hasFlag=function(t){var n=u(t);return null!=n&&null!=n&&n},e.recordFlag=function(t,n){void 0===n&&(n=!0),i(t,n)},e.getTimes=function(t){var n=u(t);return null==n||null==n?0:n},e.recordTimes=function(t){var n=this.getTimes(t)+1;return i(t,n),n},e.updateTimes=function(t,n){i(t,n)},e.isTimesEnough=function(t,n){return this.getTimes(t)>=n},n(t,null,[{key:"inst",get:function(){return null==t._inst&&(t._inst=new t),t._inst}}]),t}())._inst=null,e._RF.pop()}}}));

System.register("chunks:///_virtual/FlowLight.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SilderScript.ts"],(function(e){var t,i,r,n,a,s,l,o,p,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,r=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){a=e.cclegacy,s=e._decorator,l=e.Sprite,o=e.director,p=e.Component},function(e){u=e.SilderScript}],execute:function(){var d,h,c,b,f,g,y,m,w,x,M;a._RF.push({},"ba20dR1r/9B+6KFxUbOba6B","FlowLight",void 0);var W=s.ccclass,v=s.executeInEditMode,F=s.property;e("FlowLight",(d=W("FlowLight"),h=F(u),c=F(u),b=F(u),f=F(l),d(g=v((m=t((y=function(e){function t(){for(var t,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return t=e.call.apply(e,[this].concat(a))||this,r(t,"speed",m,n(t)),r(t,"lineWidth",w,n(t)),r(t,"radian",x,n(t)),r(t,"sprite",M,n(t)),t}i(t,e);var a=t.prototype;return a.start=function(){this.speed.setMin(1),this.speed.setMax(10),this.speed.setTxt("流光速度"),this.speed.setValue(1),this.lineWidth.setMin(0),this.lineWidth.setMax(1),this.lineWidth.setTxt("流光宽度"),this.lineWidth.setValue(.1),this.radian.setMin(0),this.radian.setMax(3.14),this.radian.setValue(.52),this.radian.setTxt("弧度")},a.update=function(){this.sprite.material.setProperty("_speed",this.speed.getValue()),this.sprite.material.setProperty("_lineWidth",this.lineWidth.getValue()),this.sprite.material.setProperty("_radian",this.radian.getValue())},a.onClick=function(){o.loadScene("Main")},t}(p)).prototype,"speed",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=t(y.prototype,"lineWidth",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),x=t(y.prototype,"radian",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=t(y.prototype,"sprite",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g=y))||g)||g));a._RF.pop()}}}));

System.register("chunks:///_virtual/friend.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SdkManager.ts","./MK.ts","./MKEvent.ts"],(function(n){var t,e,s,o,i,r;return{setters:[function(n){t=n.inheritsLoose},function(n){e=n.cclegacy,s=n._decorator,o=n.Component},function(n){i=n.SdkManager},null,function(n){r=n.regEvent}],execute:function(){var a;e._RF.push({},"0bb16FNP3FMuoaTKuH/3H1t","friend",void 0);var c=s.ccclass;s.property,n("friend",c("friend")(a=function(n){function e(){for(var t,e=arguments.length,s=new Array(e),o=0;o<e;o++)s[o]=arguments[o];return(t=n.call.apply(n,[this].concat(s))||this).stop=void 0,t.scroe=void 0,t.ifShowRankList=void 0,t}t(e,n);var s=e.prototype;return s.onLoad=function(){r(50108,this.setScore,this)},s.start=function(){var n=i.getInstance().channel.settings;n&&n.WxFriendInteraction&&i.getInstance().channel.sendMsg({method:"load_data"})},s.setStop=function(n){this.stop=n,n||i.getInstance().channel.sendMsg({method:9})},s.setScore=function(n){this.scroe=n,this.updateFriendCanvas()},s.updateFriendCanvas=function(){var n=i.getInstance().channel.settings;n&&(null!=n.WxFriendInteraction?0!=n.WxFriendInteraction&&(this.ifShowRankList||i.getInstance().channel.sendMsg({method:5,score:this.scroe})):i.getInstance().channel.getUserSettings())},s.showRankList=function(){},e}(o))||a);e._RF.pop()}}}));

System.register("chunks:///_virtual/FriendRankListView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UserScoreLevelData.ts","./PanelBase.ts","./SdkManager.ts","./UserData.ts"],(function(e){var n,t,i,r,s,o,a,c;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,i=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){s=e.cclegacy,o=e._decorator,a=e.Node},null,function(e){c=e.default},null,null],execute:function(){var l,u,p,f,d;s._RF.push({},"793ac0pXfRFu6xpKvyERcdQ","FriendRankListView",void 0);var y=o.ccclass,v=o.property;e("FriendRankListView",(l=y("FriendRankListView"),u=v(a),l((d=n((f=function(e){function n(){for(var n,t=arguments.length,s=new Array(t),o=0;o<t;o++)s[o]=arguments[o];return n=e.call.apply(e,[this].concat(s))||this,i(n,"noPermission",d,r(n)),n}t(n,e);var s=n.prototype;return s.onLoad=function(){this.noPermission.active=!1,this.setMaskLayerEnable(!1)},s.start=function(){},s.setPermissionStatus=function(e){this.noPermission.active=e},s.onDestroy=function(){},n}(c)).prototype,"noPermission",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=f))||p));s._RF.pop()}}}));

System.register("chunks:///_virtual/FsmState.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var n,e;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy}],execute:function(){var a;t("Fsm",void 0),e._RF.push({},"51887UvfbZP4I4QBpKLtwoq","FsmState",void 0),function(t){var e=function(){function t(t){this.name=void 0,this.Data=new Map,this.name=t}var n=t.prototype;return n.changeState=function(t){s.inst.changeState(t)},n.onEnter=function(){},n.onExit=function(){},t}();t.FsmState=e;var a=function(t){function e(){return t.call(this,"F1")||this}return n(e,t),e}(e),i=function(t){function e(){return t.call(this,"F2")||this}return n(e,t),e}(e),s=function(){function t(){this.currentState=void 0,this.states=new Map}var n=t.prototype;return n.getState=function(t){var n=this.states.get(t.toString());return null==n&&(n=new t,this.states.set(t.toString(),n)),n},n.changeState=function(t,n){var e,a,i=this.getState(t);null==(e=this.currentState)||e.onExit(),this.currentState=i,this.setData(t,"defaultKey",n),null==(a=this.currentState)||a.onEnter()},n.test=function(){var t=this;this.changeState(a),this.setData(i,"key1","你好"),setTimeout((function(){t.changeState(i),console.log("数据是 "+t.getData(i,"key1"))}),1e4)},n.setData=function(t,n,e){this.getState(t).Data.set(n,e)},n.getData=function(t,n){return this.getState(t).Data.get(n)},t}();s.inst=new s,t.FsmManager=s}(a||(a=t("Fsm",{}))),e._RF.pop()}}}));

System.register("chunks:///_virtual/GaBase.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SdkBase.ts","./SdkConfig.ts","./SdkUtils.ts"],(function(e){var t,i,n,s,d,o;return{setters:[function(e){t=e.inheritsLoose},function(e){i=e.cclegacy},function(e){n=e.SdkBase},function(e){s=e.SystemInfo,d=e.UserInfo},function(e){o=e.SdkUtils}],execute:function(){i._RF.push({},"b004aE94xVINanwEfYn3pBN","GaBase",void 0);e("GaBase",function(e){function i(t,i,n,s,d,o,h){var a;return(a=e.call(this,t,i,n,s,d,o)||this).tag="bi and ga",a.env=r.None,a._timetag=void 0,a.nettype=void 0,a.rec_type=void 0,a.rec_id=void 0,a.cloud_id=void 0,a.receive_time=void 0,a.user_id=void 0,a.game_id=void 0,a.client_id=void 0,a.device_id=void 0,a.ip_addr=void 0,a.phone_maker=void 0,a.phone_model=void 0,a.phone_carrier=void 0,a.reserved=void 0,a.env=h,a.http=n,a}t(i,e);var n=i.prototype;return n.assemblelog=function(e,t){var i=(new Date).getTime();i-this._timetag>6e4&&(this._timetag=i,this.nettype="0");var n=t.join("\t");this.getSystemInfo();var s=this.cloud_id+"\t"+this.rec_type+"\t"+i+"\t"+this.rec_id+"\t"+this.receive_time+"\t"+e+"\t"+this.user_id+"\t"+this.game_id+"\t"+this.client_id+"\t"+this.device_id+"\t"+this.ip_addr+"\t"+this.nettype+"\t"+this.phone_maker+"\t"+this.phone_model+"\t"+this.phone_carrier+"\t"+n+"\t"+this.reserved;return this.trimTab0(s)},n.trimTab0=function(e){return null==e||null==e?"":e.replace(/(\t0)*$/,"")},n.getSystemInfo=function(){this.cloud_id=s.cloudId,this.rec_type="1",this.rec_id="0",this.receive_time="0",this.user_id=d.userId||"0",this.game_id=s.gameId,this.client_id=s.clientId,this.device_id=this.device_id||o.getLocalUUID(),this.ip_addr="#IP",this.nettype="0",this.phone_maker="0",this.phone_model=d.model,this.phone_carrier="0",this.reserved="0"},i}(n));var r=e("emGaEnv",function(e){return e.None="none",e.Online="online",e.SimOnline="sim",e.Test="test",e}({}));i._RF.pop()}}}));

System.register("chunks:///_virtual/GaClickStatEventDef.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"81b81CRojBLY4FmOTp/M6j5","GaClickStatEventDef",void 0);t("clickStatEventType",{clickStatEventTypeUserFrom:99990001,clickStatEventTypeUserShare:99990002,clickStatEventTypeClickFirstAd:99990003,clickStatEventTypeClickShowQRCode:99990004,clickStatEventTypeClickDirectToMiniGameSuccess:99990005,clickStatEventTypeClickDirectToMiniGameFail:99990006,clickStatEventTypeClickAdBtn:99990007,clickStatEventTypeClickWXPayStart:99990008,clickStatEventCreatPayOrderSuccess:99990009,clickStatEventCreatPayOrderFail:99990010,clickStatEventTypeWXPaySuccess:99990011,clickStatEventTypeWXPayFail:99990012,clickStatEventTypeOnShowTYWXVersionSubmit:99990013,clickStatEventTypeSubmitVersionInfo:9999,clickStatEventTypeWxLoginStart:10001,clickStatEventTypeWxLoginSuccess:10002,clickStatEventTypeWxLoginFailed:10003,clickStatEventTypeAuthorizationStart:10004,clickStatEventTypeAuthorizationSuccess:10005,clickStatEventTypeAuthorizationFailed:10006,clickStatEventTypeLoginSDKStart:10007,clickStatEventTypeLoginSDKSuccess:10008,clickStatEventTypeLoginSDKFailed:10009,clickStatEventTypeTCPStart:10010,clickStatEventTypeTCPSuccess:10011,clickStatEventTypeTCPFailed:10012,clickStatEventTypeSmsSendSuccess:10013,clickStatEventTypeSmsSendFailed:10014,clickStatEventTypeSmsBindSuccess:10015,clickStatEventTypeSmsBindFailed:10016});e._RF.pop()}}}));

System.register("chunks:///_virtual/Game.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Event.ts","./MK.ts","./BlockType.ts","./Random.ts","./BlockPlaceholder3.ts","./EndlessScoreHelper.ts","./GuideData.ts","./BlockGenerateMaster.ts","./UserScoreLevelData.ts","./AssetInfoDefine.ts","./NodePool.ts","./SceneMode.ts","./Enumrations.ts","./BlockConstData.ts","./LevelGuideData.ts","./UserChangeData.ts","./BlockGenerateNative.ts","./FlagData.ts","./BIDefine.ts","./ResManager.ts","./BlockGenetateWasmEndless.ts","./UserData.ts","./RemoteConfig.ts","./MKEvent.ts","./MsgData.ts","./sdk.ts"],(function(e){var t,i,o,r,n,s,l,a,c,u,h,f,d,v,m,k,g,b,p,P,G,T,B,D,R,H;return{setters:[function(e){t=e.createClass},function(e){i=e.cclegacy,o=e.instantiate},function(e){r=e.BlockEventType},null,function(e){n=e.BlockItemConst},function(e){s=e.Random},function(e){l=e.BlockPlaceholder3},function(e){a=e.EndlessScoreHelper},function(e){c=e.GuideData},function(e){u=e.BlockGenerateMaster},function(e){h=e.UserScoreLevelData},function(e){f=e.AssetInfoDefine},function(e){d=e.NodePoolManager},function(e){v=e.SceneMode},function(e){m=e.kGameMode},function(e){k=e.BlockConstData},function(e){g=e.LevelGuideData},function(e){b=e.UserChangeData},null,function(e){p=e.FlagData},function(e){P=e.BIEventID},function(e){G=e.ResManager},null,function(e){T=e.UserData},function(e){B=e.RemoteConfig},function(e){D=e.sendEvent},function(e){R=e.MsgData},function(e){H=e.SDK}],execute:function(){i._RF.push({},"8c7d8taUUdEk5TCjSuz7NQM","Game",void 0);e("Game",function(){function e(){this.RELIFE_EASY_TIMES=6,this.blockNumber=8,this.diamonTypeStart=100,this.tableData=void 0,this.blockPlaceholders=void 0,this.blockPlacesMap=void 0,this.scoreHelper=void 0,this.blockGenerate=void 0,this.levelData=void 0,this.reviviTimes=void 0,this.canMoveBlock=void 0,this.lastShowClearRound=0,this.showClearRoundInterval=5,this.lastEnhancedRound=0,this.historyLevelData=void 0,this.adRefreshBlockTimes=0,this.changeAllTimes=0,this.refreshAllTimes=0,this.isGameOver=!1,this.afterRelifeTimes=0,this.initNodePool()}var i=e.prototype;return i.canShowClearRound=function(){return console.log("this.blockGenerate.round "+this.blockGenerate.round+" this.lastShowClearRound "+this.lastShowClearRound),this.blockGenerate.round-this.lastShowClearRound<=this.showClearRoundInterval?(console.log("return false"),!1):(this.lastShowClearRound=this.blockGenerate.round,!0)},i.getMaxReviviTimes=function(){return B.getInstance().ReviviTimesEndless},i.isCanRevive=function(){return this.reviviTimes<this.getMaxReviviTimes()},i.getReviveTimes=function(){return this.reviviTimes},i.getNextBlock=function(){return this.blockGenerate.getNextBlockType(this.scoreHelper.score,this.tableData)},i.getNextPreviewBlocks=function(){return this.blockGenerate.getNextPreviewBlocks(this.scoreHelper.score,this.tableData)},i.getRelifePreviewBlocks=function(){var e=this;return this.blockGenerate.getPreviewBlocksAfterRelife(0,0,this.tableData,(function(t){return e.canPutBlock(t)}))},i.getPreviewBlocks=function(){var e=this;return new Promise((function(t,i){if(v.gameMode==m.endless){if(!c.inst.isGuideFinished()){var o=c.inst.getNewUserGuidePreviews();return e.lastShowClearRound=3,void t({blockIds:o.blockIds,isRecommendHigh:!1,color:o.colors,multiArr:[],allcArr:[]})}}else if(v.gameMode==m.level){if(!g.inst.isGuideFinished()){var r=c.inst.getNewUserGuidePreviews();return void t({blockIds:r.blockIds,isRecommendHigh:!1,color:r.colors,multiArr:[],allcArr:[]})}}else if(v.gameMode==m.adventure_level&&!g.inst.isGuideFinished()){var n=c.inst.getNewUserGuidePreviews();return void t({blockIds:n.blockIds,isRecommendHigh:!1,color:n.colors,multiArr:[],allcArr:[]})}if(e.afterRelifeTimes==e.RELIFE_EASY_TIMES)return e.afterRelifeTimes--,void t(e.blockGenerate.getPreviewBlocksAfterRelife(0,0,e.tableData,(function(t){return e.canPutBlock(t)})));e.afterRelifeTimes>0?(e.afterRelifeTimes--,e.blockGenerate.getPreviewBlocks(e.scoreHelper.score,e.scoreHelper.getComboTimes(),e.scoreHelper.collectNum,-1,0,e.tableData,(function(t){return e.canPutBlock(t)}),e.scoreHelper.clearAllFillScore).then(t).catch(i)):e.blockGenerate.getPreviewBlocks(e.scoreHelper.score,e.scoreHelper.getComboTimes(),e.scoreHelper.collectNum,0,0,e.tableData,(function(t){return e.canPutBlock(t)}),e.scoreHelper.clearAllFillScore).then(t).catch(i)}))},i.getAdRefreshBlock=function(){for(var e=[],t=0;t<3;t++){var i=this.blockPlacesMap.get(t);if(i&&i.isValid){var o=i.getComponent(l);o&&e.push(o.blockIndex+1)}}return this.blockGenerate.getAdRefreshBlockIndex(this.scoreHelper.score,this.tableData,e)},i.getNodePoolWithPoolType=function(e){return d.inst.getPool(e)},i.startGame=function(){this.canMoveBlock=!0,this.scoreHelper&&this.scoreHelper.clear();T.inst.getClassicPlayNumToday,T.inst.getMaxFreePlayNumToday(),T.inst.getClassicPlayNumToday;this.scoreHelper=new a,this.scoreHelper.loadConfig(),this.lastEnhancedRound=0,this.blockGenerate&&this.blockGenerate.clear(),this.blockGenerate=new u(s.inst,this.scoreHelper,"game_action_info"),this.resetGameState(),this.initTableData(),this.initNodePool(),T.inst.isGameOngoing=!0,T.inst.setThisGameWatchReviveNum(0)},i.initItemData=function(){b.inst.isCanUseItem()&&(b.inst.useItem(),this.addChangeAllTimes())},i.getMaxRefreshBlockTimes=function(){return 2},i.isCanRefreshBlock=function(){return!1},i.onAdRefreshBlock=function(){this.adRefreshBlockTimes+=1,this.updateLevelHistoryData()},i.getMaxChangeAllTimes=function(){return 3},i.isCanChangeAll=function(){return this.changeAllTimes>0},i.addChangeAllTimes=function(){this.changeAllTimes=this.getMaxChangeAllTimes()},i.useChangeAllTimes=function(){this.changeAllTimes-=1},i.getMaxRefreshAllTimes=function(){return 1},i.isCanRefreshAll=function(){return this.refreshAllTimes<this.getMaxRefreshAllTimes()},i.onAdRefreshAllBlock=function(){this.refreshAllTimes+=1},i.resetGameState=function(){this.reviviTimes=0,this.afterRelifeTimes=0,this.adRefreshBlockTimes=0,this.refreshAllTimes=0},i.onBeginByHistory=function(){},i.onBeginNewGame=function(){this.resetGameRecordState()},i.resetGameRecordState=function(){T.inst.isNewRecordPlayed=!1,this.scoreHelper.resetGameRecordState()},i.clear=function(){this.scoreHelper&&this.scoreHelper.clear(),this.scoreHelper=null,this.blockGenerate&&this.blockGenerate.clear(),this.blockGenerate=null,this.tableData=null},i.destroy=function(){this.clear(),e._inst=null},i.checkGameEnd=function(){var e=this.blockPlaceholders;if(0==e.length)return!1;for(var t=0;t<e.length;t++){var i=e[t].getComponent(l);if(this.canPutBlock(i.blockIndex))return this.isGameOver=!1,!1}return this.isGameOver=!0,this.lastShowClearRound=0,!0},i.getAiHelpTipCoord=function(){var e=this;return new Promise((function(t,i){var o=e.blockPlaceholders;if(o)if(0!=o.length){for(var r=function(){var r=o[n].getComponent(l);if(e.canPutBlock(r.blockIndex))return e.blockGenerate.getBlockAiTipCoord(e.tableData,r.blockIndex+1,1).then((function(e){t({item:e,holder:r})})).catch(i),{v:void 0}},n=0;n<o.length;n++){var s=r();if("object"==typeof s)return s.v}i(null)}else i(null);else i(null)}))},i.endGame=function(){this.tableData=null,this.blockGenerate=null,this.scoreHelper&&this.scoreHelper.clear(),this.scoreHelper=null},i.getBlockGroupPoolName=function(){return"BlockGroupPool"},i.putBlock=function(e){var t=e.getComponent(l);if(t){var i=t.blockIndex,o=0;if(i<1e3){var s,a,c;this.getNodePoolWithPoolType(this.getBlockGroupPoolName()).put(e);var u=null==(s=this.blockPlaceholders)?void 0:s.indexOf(e);u>-1&&(this.blockPlaceholders.splice(u,1),this.blockPlacesMap.has(u)&&this.blockPlacesMap.set(u,null)),t.hasPut=!0,o=window.BlockConst[i].count,D(r.EVENT_PUT_BLOCK_END,null==(a=R)||null==(c=a.Login)?void 0:c.userId,o)}else 1001!=i&&1002!=i&&1003!=i||this.getNodePoolWithPoolType("HammerBlockGroupPool").put(e),o=n[i].count}},i.getClearRowAndCol=function(e){var t;void 0===e&&(e=null),e=null!=(t=e)?t:this.tableData;for(var i=[],o=0;o<this.blockNumber;o++){for(var r=!0,n=0;n<this.blockNumber&&(r=r&&e[o][n]>0);n++);r&&i.push(o)}for(var s=[],l=0;l<this.blockNumber;l++){for(var a=!0,c=0;c<this.blockNumber&&(a=a&&e[c][l]>0);c++);a&&s.push(l)}return[i,s]},i.canPutBlock=function(e){if(-1==e)return!1;for(var t=window.BlockConst,i=0;i<this.blockNumber;i++)for(var o=0;o<this.blockNumber;o++){var r=t[e];if(!r)return console.error(t,"找不到block->",e),!1;if(this._mergeData(r.block,this.tableData,i,o))return!0}return!1},i.initNodePool=function(){this.createPool("BlockEntityPool","res/prefab/blocks/blockEntity",100),this.createPool("BlockGroupPool","res/prefab/blocks/block-normal",1),this.createPool("BlockClearAni_H","res/prefab/blocks/ef_cleaarup_heng_pb",6),this.createPool("BlockClearAni_V","res/prefab/blocks/ef_cleaarup_shu_pb",6);var e=f.prefab,t=e.cool;d.initPool(t.path,t.bundle,1);var i=e.addScore;d.initPool(i.path,i.bundle,1);var o=e.comboScore;d.initPool(o.path,o.bundle,1);var r=e.newRecord;d.initPool(r.path,r.bundle,1);var n=e.clear_all;d.initPool(n.path,n.bundle,1);var s=e.diffult_change;d.initPool(s.path,s.bundle,1);var l=e.reachPercent;d.initPool(l.path,l.bundle,1)},i.createPool=function(e,t,i,r){void 0===r&&(r="block");var n=G.getInstance().loadAssetSync(t,r);if(null!=n){var s=d.inst.createPool(e);n&&(s.cloneNode=o(n),s.size=i)}else d.initPool(e,r,i)},i.zeroTableData=function(e){if(this.tableData)for(var t=this.tableData,i=0;i<t.length;i++)for(var o=0;o<t[i].length;o++)t[i][o]=0;else this.tableData=Array.from({length:e},(function(){return Array.from({length:e},(function(){return 0}))}))},i.initTableData=function(){var e=this.blockNumber;if(this.zeroTableData(e),v.gameMode==m.endless&&!c.inst.isGuideFinished())return this.initWithGuideData(!1,c.inst.getGuideBoard()),null;var t=this.getHistoryLevelData();if(t){this.historyLevelData=t,this.scoreHelper.setHistoryData(t),this.blockGenerate.setHistoryData(t),this.reviviTimes=t.reviviTimes||0,this.adRefreshBlockTimes=t.refreshTimes||0,this.refreshAllTimes=t.refreshAllTimes||0,this.changeAllTimes=t.changeAllTimes||0;var i=t.board;if(i)for(var o=0;o<e;o++)for(var r=0;r<e;r++){var n=i[o][r];this.tableData[o][r]=n}return this.onBeginByHistory(),t}return this.scoreHelper.loadHistoryMaxScore(),this.onBeginNewGame(),null},i.initWithGuideData=function(e,t){void 0===e&&(e=!0);var i=this.blockNumber;if(t)for(var o=0;o<i;o++)for(var n=0;n<i;n++){var s=t[o][n],l=-3;l=s>0?s:0==s?-3:0,this.tableData[o][n]=l}if(v.gameMode==m.endless){var a=c.inst.step,u=v.gameMode,h=P.guide_step+"_"+u+"_"+a+"_0";p.inst.hasFlag(h)||(H.instance.reportBI(P.guide_step,{g_step:a,g_mode:u,g_state:0},!0),p.inst.recordFlag(h))}e&&D(r.kEvent_Game_Show_User_Guide)},i.getHistoryLevelData=function(){var e=h.inst.getHistoryLevelData();return e&&1==e.isGameOver?(h.inst.clearLevelHistoryData(),null):e},i._mergeData=function(e,t,i,o){void 0===i&&(i=0),void 0===o&&(o=0);for(var r=0;r<e.length;r++)for(var n=0;n<e[r].length;n++)if(0!=e[r][n]){var s=r+i-2,l=n+o-2;if(s<0||s>=this.blockNumber)return!1;if(l<0||l>=this.blockNumber)return!1;if(0!=t[s][l])return!1}return!0},i.getBlockSimpleConfig=function(e,t){if(e>1e3)return n[e].simple;var i=t,o=[[]],r=window.BlockConst[e].simple;o=new Array(r.length);for(var s=0;s<r.length;s++){var l=r[s];o[s]=new Array(l.length);for(var a=0;a<l.length;a++){var c=l[a];o[s][a]=c>0?i:0}}return o},i.clearLevelHistoryData=function(){h.inst.clearLevelHistoryData()},i.updateLevelHistoryData=function(){if(v.gameMode!=m.endless||c.inst.isGuideFinished()){if(this.levelData={hardNum:0,hardType:0,initDifficulty:0,id:0,board:this.tableData,score:this.scoreHelper.score,skillScore:this.scoreHelper.skillScore,continuousCount:this.scoreHelper.continuousCount,collect:null,preview:this.getPreviewsStoreData(),reviviTimes:this.reviviTimes,refreshTimes:this.adRefreshBlockTimes,refreshAllTimes:this.refreshAllTimes,changeAllTimes:this.changeAllTimes,isGameOver:this.isGameOver?1:0,round:this.blockGenerate.round||0},v.gameMode==m.endless){var e=this.scoreHelper;this.levelData.diffcult=e.diffcult,this.levelData.diffcultScore=e.diffcultScore}h.inst.updateLevelHistoryData(this.levelData)}},i.getPreviewsStoreData=function(){for(var e=[],t=0;t<3;t++){var i={},o=this.blockPlacesMap.get(t);if(o&&o.isValid){var r=o.getComponent(l);i=r&&!r.hasPut?{order:t,used:0,config:r.blocksData,bid:r.blockIndex}:{order:t,used:1,config:null,bid:-1}}else i={order:t,used:1,config:null,bid:-2};e.push(i)}return e},i.relifeCurrentLevel=function(){this.onRelifeCurrentLevelBefore(),D(r.kEvent_Game_Show_New_Blocks)},i.onRelifeCurrentLevelBefore=function(){this.afterRelifeTimes=this.RELIFE_EASY_TIMES,this.reviviTimes++,D(r.EVENT_SCENE_PLAY_RELIFE)},i.retryCurrentLevel=function(){this.clearLevelHistoryData(),this.startGame(),D(r.kEvent_Game_Show_New_Blocks),D(r.EVENT_SCENE_PLAY_RESTART,!0)},i.checkClearAllBlock=function(){for(var e=0;e<k.BoardHeight;e++)for(var t=0;t<k.BoardWidth;t++)if(this.tableData[e][t]>0)return!1;return!0},i.getRound=function(){if(this.blockGenerate)return this.blockGenerate.round},i.onUpdate=function(e){this.blockGenerate&&this.blockGenerate.onUpdate(e)},i.isShowEnhancedHintRound=function(){if(!this.blockGenerate)return!1;var e=this.getRound();return e-this.lastEnhancedRound>=0||e==this.lastEnhancedRound},i.getEnhanceHint=function(){if(!this.blockGenerate)return!1;var e=new Array;this.blockPlacesMap.forEach((function(t,i){if(t){var o=t.getComponent(l);if(o&&!o.hasPut){var r=o.parseHint();r&&e.push(r)}}})),e.length>0&&(e.sort((function(e,t){return e.seq-t.seq})),this.lastEnhancedRound=this.getRound());for(var t=0;t<e.length-1;t++)e[t].seq==e[t+1].seq&&(e.splice(t,1),t--);return e},i.removePlaceHolderOneHint=function(){if(!this.blockGenerate)return!1;this.blockPlacesMap.forEach((function(e,t){e&&e.getComponent(l).removeOneHint()}))},i.removePlaceHolderAllHints=function(){if(!this.blockGenerate)return!1;this.blockPlacesMap.forEach((function(e,t){e&&e.getComponent(l).removeAllHints()}))},t(e,null,[{key:"inst",get:function(){return this._inst||(this._inst=new e),this._inst}}]),e}())._inst=void 0,i._RF.pop()}}}));

System.register("chunks:///_virtual/GameDefine.ts",["cc"],(function(e){var i;return{setters:[function(e){i=e.cclegacy}],execute:function(){i._RF.push({},"93323nIaIhHWZdQCTu9V5TQ","GameDefine",void 0);e("buildInfo",{gameVersion:"6.4.9",internalGameVersion:0,hotVersion:"6.4.8",debug:!1,cryptoConfig:!1,service:2,onlyEndless:!1,bundle:{block:{bundleName:"block",url:"",hashVersion:"",version:"1.0.1",loadingScene:"loading",scene:"game",home:"home",theme:"fish",loadDir:[],preloadDir:["res/"]},level:{cat:"res/configs/level",bear:"res/configs/level_bear",sheep:"res/configs/level_sheep",fruit:"res/configs/level_fruit",qixi:"res/configs/level_qixi",moon:"res/configs/level_moon",fish:"res/configs/level_fish"}},serverUrl:{},hotUpdate:{main:{manifestFile:"manifest/main/project"},template:{manifestFile:"manifest/template/project"}}});i._RF.pop()}}}));

System.register("chunks:///_virtual/GameRoot.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MK.ts","./MsgData.ts","./PanelManager.ts","./ProcedureLaunch.ts","./NodePool.ts","./ResManager.ts","./NetManager.ts","./ToastManager.ts","./Boot.ts","./MKUtil.ts","./MKHttp.ts","./Global.ts","./MKLog.ts","./MKEvent.ts","./EventType.ts"],(function(t){var n,e,o,i,a,r,s,c,u,l,f,p,g,d,M,m,h,b,y,E,I,D,N,R,v,P,_,G,K;return{setters:[function(t){n=t.applyDecoratedDescriptor,e=t.inheritsLoose,o=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){a=t.cclegacy,r=t._decorator,s=t.AudioSource,c=t.Node,u=t.game,l=t.director,f=t.Game,p=t.assert,g=t.Component},null,function(t){d=t.MsgData},function(t){M=t.PanelManager},function(t){m=t.ProcedureLaunch},function(t){h=t.NodePoolManager},function(t){b=t.ResManager},function(t){y=t.NetManager},function(t){E=t.ToastManager},function(t){I=t.fsm,D=t.audio},function(t){N=t.MKUtil},function(t){R=t.MKHttp},function(t){v=t.Global},function(t){P=t.log,_=t.error},function(t){G=t.sendEvent},function(t){K=t.Events}],execute:function(){var S,T,L,U,k,H,A,w,z,V;a._RF.push({},"6d9cdQdax1Afb7kPMFPANec","GameRoot",void 0);var C=r.ccclass,F=r.property,x=r.requireComponent;t("GameRoot",(S=C("GameRoot"),T=x(s),L=F(c),U=F(c),k=F(c),S(H=T((w=n((A=function(t){function n(){for(var n,e=arguments.length,a=new Array(e),r=0;r<e;r++)a[r]=arguments[r];return n=t.call.apply(t,[this].concat(a))||this,o(n,"panel",w,i(n)),o(n,"pool",z,i(n)),o(n,"panelMask",V,i(n)),n}e(n,t);var a=n.prototype;return a.onLoad=function(){u.frameRate=60,l.addPersistRootNode(this.node),b.getInstance().Init(),E.getInstance().Init(),this.listenGameState(),this.initAudio(),M.inst.setRootNode(this.panel,this.panelMask),h.inst.rootNode=this.pool,I.changeState(m)},a.start=function(){},a.openID2UserID=function(t){console.log("login id = "+t),console.log(N.getSDKURL()),R.post({url:N.getSDKURL(),param:{token:t,nonce:"1",type:v.PlatformTest},callback:function(t,n){0==n.error_code?(P("success",n.result),d.UserInfo=n.result):_("error_code:"+n.error_code,n.error_info)}})},a.listenGameState=function(){u.on(f.EVENT_HIDE,(function(){P("game hide ~"),G(K.EVENT_HIDE)})),u.on(f.EVENT_SHOW,(function(){P("game show ~"),G(K.EVENT_SHOW)}))},a.initAudio=function(){var t=this.node.getComponent(s);p(t),D.init(t)},a.initData=function(){},a.onDestroy=function(){b.getInstance().UnInit(),y.getInstance().UnInit()},n}(g)).prototype,"panel",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=n(A.prototype,"pool",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=n(A.prototype,"panelMask",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=A))||H)||H));a._RF.pop()}}}));

System.register("chunks:///_virtual/Global.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var a,o;return{setters:[function(e){a=e.createClass},function(e){o=e.cclegacy}],execute:function(){o._RF.push({},"5318fnUVoVMOJxaeFdUJB4B","Global",void 0);var i=e("Global",function(){function e(){}return a(e,null,[{key:"curGameID",get:function(){return this._curGameID},set:function(e){this._curGameID=e}}]),e}());i.initHome=void 0,i.isHaveUseProp=void 0,i.shareNumberOpenDefault={},i.totalclearnumber=void 0,i.shareTimes=void 0,i.previousShowClearnGiftTimes=void 0,i.playhistorydata=void 0,i.BoardView=void 0,i.Board=void 0,i.storescorevalue=void 0,i.useReviveCoinTimes=void 0,i.shareReviveTimes=void 0,i.reviveCoin=void 0,i.dailyClearCountView=void 0,i.changeSkinTimes=void 0,i.hadshowredpacket=void 0,i.hadChangeSkins=void 0,i.enterGifted=void 0,i.resignCard=void 0,i.isRestart=!1,i.hallLastPage="hp_normal",i._curGameID=1,i.startGameTime=0,i.curGameType=1,i.curMatchID=6001,i.oneGameTime=300,i.curGameSN="",i.curTokenNeed=0,i.curCreditNeed=0,i.gotohall_type=1,i.hall_gameover_ss1=0,i.hall_gameover_ss2=0,i.hall_gameover_pp1=null,i.hall_gameover_pp2="unknown",i.hall_gameover_sn=null,i.PlatformTest=4,i.PlatformGoogle=1,i.PlatformFacebook=2,i.PlatformApple=3,i.Lbl_curCredit=0,i.Lbl_curToken=0,i.Lbl_curXp=0,i.Lbl_tarCredit=0,i.Lbl_tarToken=0,i.Lbl_tarXp=0,i.TActivity_match=1,i.TActivity_tour=2,i.TActivity_task=3,i.TActivity_lvlup=4,i.TActivity_newrank=5,i.advice_type=6,i.GameInfo_type=7,i.LevelSelectBoard=new Map,o._RF.pop()}}}));

System.register("chunks:///_virtual/GooglePlayChannel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ChannelBase.ts"],(function(n){var e,t,o;return{setters:[function(n){e=n.inheritsLoose},function(n){t=n.cclegacy},function(n){o=n.ChannelBase}],execute:function(){t._RF.push({},"fbad08lLBRDhb+0XHp6u0BM","GooglePlayChannel",void 0);n("GooglePlayChannel",function(n){function t(){return n.apply(this,arguments)||this}return e(t,n),t.prototype.isSupportShare=function(){return!1},t}(o));t._RF.pop()}}}));

System.register("chunks:///_virtual/Group.ts",["./rollupPluginModLoBabelHelpers.js","cc","./enum.ts"],(function(i){var t,e,n;return{setters:[function(i){t=i.createClass},function(i){e=i.cclegacy},function(i){n=i.StretchDirection}],execute:function(){e._RF.push({},"c701cxQvelFbLzv3DVRhj2t","Group",void 0);i("Group",function(){function i(i){this._adapter=void 0,this._index=-1,this._models=[],this._size={x:0,y:0},this._oldSize={x:0,y:0},this._anchorPoint={x:.5,y:.5},this._position={x:0,y:0},this._oldPosition={x:0,y:0},this._totalMinSize={x:0,y:0},this._totalPreferredSize={x:0,y:0},this._totalFlexibleSize={x:0,y:0},this._isFixed=!1,this._fixedIndex=-1,this._adapter=i,this.internal_reset()}var e=i.prototype;return e.findModelIndex=function(i){return this.models.findIndex((function(t){return t.index==i}))},e.internal_reset=function(){this._models=[],this._size={x:0,y:0},this._oldSize={x:0,y:0},this._anchorPoint={x:.5,y:.5},this._position={x:0,y:0},this._oldPosition={x:0,y:0},this._totalMinSize={x:0,y:0},this._totalPreferredSize={x:0,y:0},this._totalFlexibleSize={x:0,y:0},this._isFixed=!1,this._fixedIndex=-1,this._setAnchorPoint()},e.internal_setPosition=function(i){var t=this.adapter.mainAxis;this.oldPosition[t]=this.position[t],this.position[t]=i},e.internal_setIndex=function(i){this._index=i},e.internal_insert=function(i,t,e){t.internal_reset();var n=this.models;if(this.internal_reset(),this._fixedIndex=i.fixedIndex,!e)for(var s=0;s<n.length;s++){var r=n[s];if(!(r.index<i.modelIndex))break;if(!this._insertHandler(r,t))return i.modelIndex=r.index,i.fixedIndex=this.isFixed?this.index:i.fixedIndex,!0}for(var o=i.modelIndex;o<this.adapter.modelManager.length;o++){var a=this.adapter.modelManager.get(o);if(!this._insertHandler(a,t))return i.modelIndex=a.index,i.fixedIndex=this.isFixed?this.index:i.fixedIndex,a.index}return!1},e.internal_includes=function(i){for(var t=this,e=function(){var e=i[n];if(-1!=t.models.findIndex((function(i){return i.data==e})))return{v:!0}},n=0;n<i.length;n++){var s=e();if("object"==typeof s)return s.v}return!1},e._insertHandler=function(i,t){if(t.internal_isWrap(i,this))return t.internal_reset(),!1;t.internal_push(i),i.element.fixed&&(this._isFixed=!0,this._fixedIndex=-1);var e=this.adapter.mainAxis,n=this.adapter.crossAxis;return(!i.element.ignoreLayout||i.element.ignoreLayout&&i.element.placeholder)&&(this.size[e]=Math.max(this.size[e],i.size[e]*i.scale[e])),this.size[n]=this.adapter.crossAxisSize,this.oldSize[e]=this.size[e],this.oldSize[n]=this.size[n],this.models.push(i),!0},e._setAnchorPoint=function(){switch(this.adapter.viewManager.stretchDirection){case n.Center:this.anchorPoint[this.adapter.mainAxis]=.5;break;case n.Header:this.anchorPoint[this.adapter.mainAxis]=1-this.adapter.mainAxisAnchorPoint;break;default:this.anchorPoint[this.adapter.mainAxis]=this.adapter.mainAxisAnchorPoint}},t(i,[{key:"adapter",get:function(){return this._adapter}},{key:"index",get:function(){return this._index}},{key:"models",get:function(){return this._models}},{key:"size",get:function(){return this._size}},{key:"oldSize",get:function(){return this._oldSize}},{key:"anchorPoint",get:function(){return this._anchorPoint}},{key:"position",get:function(){return this._position}},{key:"oldPosition",get:function(){return this._oldPosition}},{key:"totalMinSize",get:function(){return this._totalMinSize}},{key:"totalPreferredSize",get:function(){return this._totalPreferredSize}},{key:"totalFlexibleSize",get:function(){return this._totalFlexibleSize}},{key:"isFixed",get:function(){return this._isFixed}},{key:"fixedIndex",get:function(){return this._fixedIndex}}]),i}());e._RF.pop()}}}));

System.register("chunks:///_virtual/GuideData.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MKLocalStorage.ts"],(function(e){var t,r,i,s;return{setters:[function(e){t=e.createClass},function(e){r=e.cclegacy},function(e){i=e.getItem,s=e.setItem}],execute:function(){r._RF.push({},"dd9fawlazVDwJmVJMLUg9D5","GuideData",void 0);var o="kGuide_Finish_Step",n=e("GuideData",function(){function e(){this.openGuideStep=3,this._step=void 0,this._step=i(o,1)}var r=e.prototype;return r.isGuideFinished=function(){return this._step>e.Boards[this.openGuideStep].id},r.isLastGuide=function(){return this._step==e.Boards[this.openGuideStep].id},r.getGuidePreviews=function(){var t=this.step;return e.Boards.hasOwnProperty(t)?e.Boards[t].preview:[-1,1,-1]},r.getNewUserGuidePreviews=function(){var t=this.step;return e.Boards.hasOwnProperty(t)?{blockIds:e.Boards[t].preview,colors:[-1,e.Boards[t].color,-1]}:{blockIds:[-1,1,-1],colors:[-1,4,-1]}},r.getGuideBoard=function(){var t=this.step;return e.Boards.hasOwnProperty(t)?e.Boards[t].board:e.Boards[1].board},r.getGuideFill=function(){var t=this.step;return e.Boards.hasOwnProperty(t)?e.Boards[t].fill:e.Boards[1].fill},t(e,[{key:"step",get:function(){return this._step},set:function(e){this._step=e,s(o,e)}}],[{key:"inst",get:function(){return null==e._inst&&(e._inst=new e),e._inst}}]),e}());n._inst=null,n.Boards={1:{id:1,board:[[0,0,0,5,5,5,0,0],[0,0,0,4,4,4,0,0],[0,0,0,2,2,2,0,0],[0,0,0,6,6,6,0,0],[0,0,0,-3,-3,-3,0,0],[0,0,0,7,7,7,0,0],[0,0,0,1,1,1,0,0],[0,0,0,3,3,3,0,0]],score:30,collect:[],preview:[-1,6,-1],fill:[[4,4]],color:4},2:{id:2,board:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[5,4,-3,2,6,7,1,3],[5,4,-3,2,6,7,1,3],[5,4,-3,2,6,7,1,3],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],score:0,collect:[],preview:[-1,7,-1],fill:[[3,2]],color:4},3:{id:3,board:[[0,0,0,5,5,0,0,0],[0,0,0,5,5,0,0,0],[0,0,0,2,2,0,0,0],[5,5,2,-3,-3,2,5,5],[5,5,2,-3,-3,2,5,5],[0,0,0,2,2,0,0,0],[0,0,0,5,5,0,0,0],[0,0,0,5,5,0,0,0]],score:0,collect:[],preview:[-1,16,-1],fill:[[3,3],[3,4],[4,3],[4,4]],color:1}},r._RF.pop()}}}));

System.register("chunks:///_virtual/HammerManager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var r,n,t,o;return{setters:[function(e){r=e.inheritsLoose},function(e){n=e.cclegacy,t=e._decorator,o=e.Component}],execute:function(){var a;n._RF.push({},"7e5e4MCO3BF0J4TRlzElKYR","HammerManager",void 0);var c=t.ccclass;t.property,e("HammerManager",c("HammerManager")(a=function(e){function n(){return e.apply(this,arguments)||this}r(n,e);var t=n.prototype;return t.start=function(){},t.onDestroy=function(){},n}(o))||a);n._RF.pop()}}}));

System.register("chunks:///_virtual/HammerTouchMove.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MK.ts","./Event.ts","./BlockConstData.ts","./AssetInfoDefine.ts","./BlockEventManager.ts","./Boot.ts","./MKEvent.ts"],(function(t){var o,e,i,n,s,h,c,a,u,r,d,l,T;return{setters:[function(t){o=t.inheritsLoose},function(t){e=t.cclegacy,i=t._decorator,n=t.Node,s=t.Vec3,h=t.tween,c=t.Component},null,function(t){a=t.BlockEventType},function(t){u=t.BlockConstData},function(t){r=t.AssetInfoDefine},function(t){d=t.BlockEventManager},function(t){l=t.audio},function(t){T=t.sendEvent}],execute:function(){var v;e._RF.push({},"0b235MR4ixJU7jtZHcDHMzZ","HammerTouchMove",void 0);var g=i.ccclass;i.property,t("HammerTouchMove",g("HammerTouchMove")(v=function(t){function e(){for(var o,e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];return(o=t.call.apply(t,[this].concat(i))||this).touchHeight=void 0,o.targetNode=void 0,o.SCALE_TOUCH=1,o.targetPosition=void 0,o.lastTouchTime=0,o.clickDelta=300,o.touchId=0,o.canEnd=!1,o.canMove=!1,o.sumDis=0,o}o(e,t);var i=e.prototype;return i.start=function(){var t;this.touchHeight=3*u.BlockSpriteSize.y,this.targetNode=null!=(t=this.targetNode)?t:this.node,this.node.on(n.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(n.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.on(n.EventType.TOUCH_END,this.onTouchEnd,this),this.node.on(n.EventType.TOUCH_CANCEL,this.onTouchCancel,this),this.clickDelta=Math.max(this.clickDelta,1e3*u.BlockParam.clickTime)},i.onTouchStart=function(t){if(!(Date.now()-this.lastTouchTime<this.clickDelta)){this.touchId=t.getID(),this.lastTouchTime=Date.now(),d.instance.emit(a.BLOCK_TOUCH_START,t),l.playSubSound(r.audio.block_pick),this.canMove=!0,this.canEnd=!0;var o=new s(this.SCALE_TOUCH,this.SCALE_TOUCH,1),e=new s(this.node.position.x,this.node.position.y+this.touchHeight,0);h(this.node).to(u.BlockParam.clickTime,{scale:o,position:e},{easing:"sineOut"}).start(),this.node.setSiblingIndex(7),this.targetNode=this.node,this.targetPosition=new s(this.targetNode.position.x,this.touchHeight+this.targetNode.position.y)}},i.onTouchEnd=function(t){this.handleTouchEnd(t)},i.onTouchCancel=function(t){this.handleTouchEnd(t)},i.handleTouchEnd=function(t){this.canEnd&&this.touchId==t.getID()&&(this.canMove=!1,this.canEnd=!1,this.touchId=0,T(a.kEvent_Game_Move_Block_End,this.node,this.sumDis),this.sumDis=0)},i.onTouchMove=function(t){if(this.sumDis+=t.getDelta().length(),this.canMove&&this.touchId==t.getID()){var o=t.getUIDelta();this.targetPosition=this.targetPosition.add3f(o.x,o.y,0),this.targetNode.setPosition(this.targetPosition),T(a.kEvent_Game_Move_Block,this.node,this.sumDis)}},e}(c))||v);e._RF.pop()}}}));

System.register("chunks:///_virtual/helper.ts",["cc"],(function(n){var t;return{setters:[function(n){t=n.cclegacy}],execute:function(){t._RF.push({},"d16dfIj/wBDe7lg2eRhY7du","helper",void 0);var r=n("Helper",function(){function n(){}return n.smoothStep=function(n,t,r){return t*(r=-2*(r=this.clamp01(r))*r*r+3*r*r)+n*(1-r)},n.smoothDamp=function(n,t,r,e,o,a){var i=2/(e=Math.max(1e-4,e)),u=i*a,c=1/(1+u+.48*u*u+.235*u*u*u),x=n-t,p=t,f=o*e,h=(r+i*(x=this.clamp(x,0-f,f)))*a;r=(r-i*h)*c;var s=(t=n-x)+(x+h)*c;return p-n>0==s>p&&(r=((s=p)-p)/a),{velocity:r,position:s}},n.clamp01=function(n){return this.clamp(n,0,1)},n.clamp=function(n,t,r){return void 0===t&&(t=0),void 0===r&&(r=1),Math.min(Math.max(n,t),r)},n.sign=function(n){return n>=0?1:-1},n.lerp=function(n,t,r){return n+(t-n)*this.clamp01(r)},n.approximately=function(n,t){return Math.abs(t-n)<Math.max(1e-4*Math.max(Math.abs(n),Math.abs(t)),8*this.Epsilon)},n.round=function(n,t){return Math.round(n*Math.pow(10,t))/Math.pow(10,t)},n.pingpang=function(n){var t=n;t=Math.abs(n);var r=Math.trunc(t);return r%2==0?t-=r:t=1-(t-r),t},n.isNumber=function(n){return"number"==typeof n&&!isNaN(n)},n.progress=function(n,t,r,e){return n+(t-n)*e},n.getGuid=function(){var n=(new Date).getTime();return window.performance&&"function"==typeof window.performance.now&&(n+=performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var r=(n+16*Math.random())%16|0;return n=Math.floor(n/16),("x"==t?r:3&r|8).toString(16)}))},n}());r.Epsilon=1401298e-51,r.Infinity=1/0,t._RF.pop()}}}));

System.register("chunks:///_virtual/Holder.ts",["./rollupPluginModLoBabelHelpers.js","cc","./helper.ts","./ModelManager.ts"],(function(e){var t,i,s,n,o,a,h;return{setters:[function(e){t=e.createClass},function(e){i=e.cclegacy,s=e._decorator,n=e.Node,o=e.UITransform},function(e){a=e.Helper},function(e){h=e.ModelManager}],execute:function(){var r;i._RF.push({},"06194IgtVlOubt8kvkPRvBb","Holder",void 0);var d=s.ccclass;s.property,e("Holder",d("Holder")(r=function(){function e(e,t,i){this._node=void 0,this._transform=void 0,this._code=void 0,this._adapter=void 0,this._model=void 0,this._view=void 0,this._fixedIndex=-1,this._oldData=null,this._oldElement=null,this._isCallCreated=!1,this._isLayout=!1,this._node=e,this._code=t,this._adapter=i,this._transform=this.node.getComponent(o)}var i=e.prototype;return i.internal_visible=function(e,t,i){var s=this;this._view=e,this._model=t,this._oldElement=Object.assign({},t.element),this._model.element.update=this._updateElement.bind(this),this._oldData=this.data,i&&(this.node.active=!0,this._isCallCreated||(this._isCallCreated=!0,this.onCreated()),this.element.fixed&&(this._fixedIndex=this.view.group.models.findIndex((function(e){return e.index==s.model.index}))),this.transform.setContentSize(this.model.size.x,this.model.size.y),this.node.setScale(this.model.scale.x,this.model.scale.y),this._register(),this.onVisible(),this._model.update=this._updateHandler.bind(this))},i._updateElement=function(){this._oldElement.layer!=this.element.layer&&(this.node.parent=this.adapter.scrollManager.getLayerNode(this.element.layer),this._oldElement.layer=this.element.layer),(this._oldElement.wrapAfterMode!=this.element.wrapAfterMode||this._oldElement.wrapBeforeMode!=this.element.wrapBeforeMode||this._oldElement.ignoreLayout!=this.element.ignoreLayout||this.element.ignoreLayout&&this._oldElement.placeholder!=this.element.placeholder)&&(this.adapter.viewManager.internal_updateVisibleView(this.model.index),this._oldElement.wrapAfterMode=this.element.wrapAfterMode,this._oldElement.wrapBeforeMode=this.element.wrapBeforeMode,this._oldElement.ignoreLayout=this.element.ignoreLayout,this._oldElement.placeholder=this.element.placeholder)},i._updateHandler=function(){this._model.update=function(){},this.onVisible(),this._model.update=this._updateHandler.bind(this)},i.internal_disable=function(){this.adapter.scrollManager.internal_disableTouchTarget(this.node),this.onDisable(),this._unregister(),this._model.update=function(){},this._model.element.update=function(){},this._view=null,this._model=null,this._fixedIndex=-1,this._isLayout=!1,this._oldData=null,this.node.active=!1},i.internal_layout=function(){var e={x:this.model.size.x,y:this.model.size.y};this.adapter.layoutManager.isControlMainAxisSize&&(e[this.adapter.mainAxis]=this.model.layoutSize[this.adapter.mainAxis]),this.adapter.layoutManager.isControlCrossAxisSize&&(e[this.adapter.crossAxis]=this.model.layoutSize[this.adapter.crossAxis]),this._isLayout=!0,this.transform.setContentSize(e.x,e.y),this._isLayout=!1,this.node.setPosition(this.model.position.x,this.model.position.y)},i._register=function(){this.node.on(n.EventType.SIZE_CHANGED,this._onSizeChanged,this),this.node.on(n.EventType.TRANSFORM_CHANGED,this._onScaleChanged,this),this.node.on(n.EventType.ANCHOR_CHANGED,this._onAnchorPointChanged,this),this._adapter.modelManager.on(h.Event.ON_UPDATE,this._updateHandler,this)},i._unregister=function(){this.node.off(n.EventType.SIZE_CHANGED,this._onSizeChanged,this),this.node.off(n.EventType.TRANSFORM_CHANGED,this._onScaleChanged,this),this.node.off(n.EventType.ANCHOR_CHANGED,this._onAnchorPointChanged,this),this._adapter.modelManager.off(h.Event.ON_UPDATE,this._updateHandler,this)},i._onSizeChanged=function(){if(!this._isLayout){var e=a.approximately(this.model.size[this.adapter.mainAxis],this.transform.contentSize[this.adapter.mainAxis]),t=a.approximately(this.model.size[this.adapter.crossAxis],this.transform.contentSize[this.adapter.crossAxis]);this.model.size.x=this.transform.width,this.model.size.y=this.transform.height,e&&t||this.view.internal_holderChanged(e)}},i._onScaleChanged=function(e){if(e==n.TransformBit.SCALE&&(this.adapter.layoutManager.controlScaleWidth||this.adapter.layoutManager.controlScaleHeight)){var t=a.approximately(this.model.scale[this.adapter.mainAxis],this.node.scale[this.adapter.mainAxis]),i=a.approximately(this.model.scale[this.adapter.crossAxis],this.node.scale[this.adapter.crossAxis]);this.model.scale.x=this.node.scale.x,this.model.scale.y=this.node.scale.y,t&&i||this.view.internal_holderChanged(t)}},i._onAnchorPointChanged=function(){var e=a.approximately(this.model.anchorPoint[this.adapter.mainAxis],this.transform.anchorPoint[this.adapter.mainAxis]),t=a.approximately(this.model.anchorPoint[this.adapter.crossAxis],this.transform.anchorPoint[this.adapter.crossAxis]);this.model.anchorPoint.x=this.transform.anchorPoint.x,this.model.anchorPoint.y=this.transform.anchorPoint.y,e&&t||this.view.internal_holderChanged(e)},t(e,[{key:"node",get:function(){return this._node}},{key:"transform",get:function(){return this._transform}},{key:"code",get:function(){return this._code}},{key:"adapter",get:function(){return this._adapter}},{key:"model",get:function(){return this._model}},{key:"view",get:function(){return this._view}},{key:"data",get:function(){return this._model&&this._model.data}},{key:"fixedIndex",get:function(){return this._fixedIndex}},{key:"oldData",get:function(){return this._oldData}},{key:"element",get:function(){return this._model&&this._model.element}},{key:"index",get:function(){return this._model&&this._model.index}}]),e}())||r);i._RF.pop()}}}));

System.register("chunks:///_virtual/Home.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Global.ts","./MK.ts","./MKEvent.ts","./EventType.ts","./GameDefine.ts"],(function(e){var r,o,i,n,t,s,l,a,u,g,c,p,b,f;return{setters:[function(e){r=e.applyDecoratedDescriptor,o=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){t=e.cclegacy,s=e._decorator,l=e.ProgressBar,a=e.Label,u=e.Component},function(e){g=e.Global},null,function(e){c=e.regEvent,p=e.unRegEvent},function(e){b=e.Events},function(e){f=e.buildInfo}],execute:function(){var d,h,m,v,E,y,P,H,L;t._RF.push({},"44792dnGTFApblEV/FY3ww9","Home",void 0);var D=s.ccclass,N=s.property;e("Home",(d=D("Home"),h=N(l),m=N(a),v=N(a),d((P=r((y=function(e){function r(){var r;return r=e.call(this)||this,i(r,"loadingProgress",P,n(r)),i(r,"loadingLabel",H,n(r)),i(r,"labelVersion",L,n(r)),r.progressNumber=void 0,r}o(r,e);var t=r.prototype;return t.onLoad=function(){!0!==g.initHome&&(g.initHome=!0),this.progressNumber=0,this.loadingProgress.progress=0,c(b.EVENT_PRELOAD_RES,this.onEvtProgress,this),this.labelVersion.string="version : "+f.bundle[2048].version},t.start=function(){},t.onDestroy=function(){p(this)},t.onEvtProgress=function(e,r){this.progressNumber=e/r,this.loadingProgress.progress<this.progressNumber&&(this.loadingProgress.progress=this.progressNumber)},r}(u)).prototype,"loadingProgress",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),H=r(y.prototype,"loadingLabel",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=r(y.prototype,"labelVersion",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E=y))||E));t._RF.pop()}}}));

System.register("chunks:///_virtual/home2.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(o){var t,e,r,n,c;return{setters:[function(o){t=o.inheritsLoose},function(o){e=o.cclegacy,r=o._decorator,n=o.director,c=o.Component}],execute:function(){var i;e._RF.push({},"a402fmmXFtF6r0IWio7Y0gD","home",void 0);var u=r.ccclass;r.property,o("home",u("home")(i=function(o){function e(){return o.apply(this,arguments)||this}t(e,o);var r=e.prototype;return r.start=function(){},r.go=function(o,t){n.loadScene(t)},e}(c))||i);e._RF.pop()}}}));

System.register("chunks:///_virtual/horiznal_scale_card_item.ts",["./rollupPluginModLoBabelHelpers.js","cc","./index.ts","./helper.ts"],(function(e){var t,r,i,a,n,o,l,s,h;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,i=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){n=e.cclegacy,o=e._decorator,l=e.Label,s=e.Component},null,function(e){h=e.Helper}],execute:function(){var c,d,p,_,u;n._RF.push({},"f2e355YhhRGGLGODyETS6Zp","horiznal_scale_card_item",void 0);var f=o.ccclass,m=o.property;e("horiznal_scale_card_item",(c=f("horiznal_scale_card_item"),d=m(l),c((u=t((_=function(e){function t(){for(var t,r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return t=e.call.apply(e,[this].concat(n))||this,i(t,"label",u,a(t)),t._holder=void 0,t}r(t,e);var n=t.prototype;return n.start=function(){},n.show=function(e){this._holder=e,this.label.string=e.data.name},n.hide=function(){},n.click=function(){350==this._holder.transform.height?this._holder.transform.height=200:this._holder.transform.height=350},n.lateUpdate=function(){if(this._holder&&this._holder.model){this._holder.view.index;var e=this._holder.adapter.scrollManager.content.convertToWorldSpaceAR(this.node.position),t=this._holder.adapter.scrollManager.view.convertToNodeSpaceAR(e),r=this._holder.adapter.centerManager.getContainerOffset(),i=Math.abs(t[this._holder.adapter.mainAxis])-r,a=Math.abs(i)/this._holder.adapter.mainAxisSize;a=1-a,a=h.clamp(a,.3,1);var n=this.node.getScale();n[this._holder.adapter.mainAxis]=a,this.node.setScale(n)}},t}(s)).prototype,"label",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=_))||p));n._RF.pop()}}}));

System.register("chunks:///_virtual/horiznal_scale_card.ts",["./rollupPluginModLoBabelHelpers.js","cc","./index.ts","./horiznal_scale_card_item.ts","./ScrollAdapter.ts","./View.ts","./Holder.ts"],(function(t){var n,r,e,i,o,c,a,l,s,u,f;return{setters:[function(t){n=t.applyDecoratedDescriptor,r=t.inheritsLoose,e=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){o=t.cclegacy,c=t._decorator,a=t.Prefab},null,function(t){l=t.horiznal_scale_card_item},function(t){s=t.ScrollAdapter},function(t){u=t.View},function(t){f=t.Holder}],execute:function(){var p,h,d,_,y;o._RF.push({},"35843AWcvNIBYC11Ij8+wfZ","horiznal_scale_card",void 0);var b=c.ccclass,g=c.property,v=(t("horiznal_scale_card",(p=b("horiznal_scale_card"),h=g(a),p((y=n((_=function(t){function n(){for(var n,r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return n=t.call.apply(t,[this].concat(o))||this,e(n,"prefab",y,i(n)),n}r(n,t);var o=n.prototype;return o.getPrefab=function(t){return this.prefab},o.getHolder=function(t,n){return new w(t,n,this)},o.getView=function(){return new v(this)},o.initElement=function(t,n){},o.start=function(){for(var t=[],n=0;n<20;n++)t.push({name:n,index:n});this.modelManager.insert(t)},o.click=function(){this.scrollManager.scrollToHeader(0)},o.click2=function(){this.scrollManager.scrollToFooter(1)},n}(s)).prototype,"prefab",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=_))||d)),function(t){function n(){return t.apply(this,arguments)||this}r(n,t);var e=n.prototype;return e.onVisible=function(){},e.onDisable=function(){},n}(u)),w=function(t){function n(){for(var n,r=arguments.length,e=new Array(r),i=0;i<r;i++)e[i]=arguments[i];return(n=t.call.apply(t,[this].concat(e))||this)._script=null,n}r(n,t);var e=n.prototype;return e.onCreated=function(){this._script=this.node.getComponent(l)},e.onVisible=function(){this._script.show(this)},e.onDisable=function(){this._script.hide()},n}(f);o._RF.pop()}}}));

System.register("chunks:///_virtual/HttpBase.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SdkBase.ts","./SdkError.ts"],(function(t){var e,r,n,o;return{setters:[function(t){e=t.inheritsLoose},function(t){r=t.cclegacy},function(t){n=t.SdkBase},function(t){o=t.emSdkErrorCode}],execute:function(){r._RF.push({},"137f6grIepPDb3xFJ2Z482d","HttpBase",void 0);var a=t("emContentType",function(t){return t[t.JSON=0]="JSON",t[t.FORM_URLENCODED=1]="FORM_URLENCODED",t[t.MULTIPART_FORM_DATA=2]="MULTIPART_FORM_DATA",t[t.TEXT_PLAIN=3]="TEXT_PLAIN",t}({}));t("HttpBase",function(t){function r(){return t.apply(this,arguments)||this}e(r,t);var n=r.prototype;return n.test=function(){},n.getPostRequestInit=function(t,e,r){var n,o="application/x-www-form-urlencoded";if(r===a.JSON)o="application/json",n=e;else if(r===a.FORM_URLENCODED)o="application/x-www-form-urlencoded",n=new URLSearchParams(e).toString();else if(r===a.MULTIPART_FORM_DATA){o="multipart/form-data";var s=new FormData;for(var c in e)Object.prototype.hasOwnProperty.call(e,c)&&s.append(c,e[c]);n=s}else r===a.TEXT_PLAIN&&(o="text/plain",n=e);return{contentType:o,body:n}},n.post=function(t,e,r){var n=this;return new Promise((function(a,s){var c=n.getPostRequestInit(t,e,r),i=new Headers;i.set("Content-Type",c.contentType);var u={body:c.body,method:"POST",headers:i};fetch(t,u).then((function(t){t.json().then(a).catch((function(t){s({errMsg:o.Net_Post_Res_Error,errData:t})}))})).catch((function(t){s({errMsg:o.Net_Get_Req_Error,errData:t.message})}))}))},n.get=function(t,e){return new Promise((function(r,n){var a=e?t+"?"+new URLSearchParams(e).toString():t;fetch(a).then((function(t){t.json().then(r).catch((function(t){n({errMsg:o.Net_Post_Res_Error,errData:t})}))})).catch((function(t){n({errMsg:o.Net_Get_Req_Error,errData:t.message})}))}))},r}(n));r._RF.pop()}}}));

System.register("chunks:///_virtual/index.ts",["cc","./CenterManager.ts","./LayoutManager.ts","./ModelManager.ts","./PageViewManager.ts","./ReleaseManager.ts","./ScrollManager.ts","./ViewManager.ts","./Group.ts","./Holder.ts","./Manager.ts","./ScrollAdapter.ts","./View.ts","./Indicator.ts","./Scrollbar.ts","./debug.ts","./enum.ts","./interface.ts","./helper.ts"],(function(e){var n;return{setters:[function(e){n=e.cclegacy},function(n){e("CenterManager",n.CenterManager)},function(n){e("LayoutManager",n.LayoutManager)},function(n){e("ModelManager",n.ModelManager)},function(n){e("PageViewManager",n.PageViewManager)},function(n){var r={};r.ReleaseEvent=n.ReleaseEvent,r.ReleaseManager=n.ReleaseManager,e(r)},function(n){var r={};r.ADAPTER=n.ADAPTER,r.ScrollManager=n.ScrollManager,e(r)},function(n){e("ViewManager",n.ViewManager)},function(n){e("Group",n.Group)},function(n){e("Holder",n.Holder)},function(n){e("Manager",n.Manager)},function(n){e("ScrollAdapter",n.ScrollAdapter)},function(n){e("View",n.View)},function(n){e("Indicator",n.Indicator)},function(n){e("Scrollbar",n.Scrollbar)},function(n){var r={};r.ADAPTER_DEBUG_CONTENT=n.ADAPTER_DEBUG_CONTENT,r.ADAPTER_DEBUG_VIEW=n.ADAPTER_DEBUG_VIEW,r.DEBUG_DRAW_BORDER_COLOR=n.DEBUG_DRAW_BORDER_COLOR,r.DEBUG_DRAW_FILL_COLOR=n.DEBUG_DRAW_FILL_COLOR,r.DEBUG_DRAW_LIND_WIDTH=n.DEBUG_DRAW_LIND_WIDTH,r.DEBUG_DRAW_LINE_COLOR=n.DEBUG_DRAW_LINE_COLOR,e(r)},function(n){var r={};r.AlwaysScroll=n.AlwaysScroll,r.ArrangeAxis=n.ArrangeAxis,r.ChildAlignment=n.ChildAlignment,r.HolderEvent=n.HolderEvent,r.IndicatorMode=n.IndicatorMode,r.Layer=n.Layer,r.MagneticDirection=n.MagneticDirection,r.MovementType=n.MovementType,r.NestedDirection=n.NestedDirection,r.Orientation=n.Orientation,r.ReleaseState=n.ReleaseState,r.ScrollDirection=n.ScrollDirection,r.ScrollbarDirection=n.ScrollbarDirection,r.StretchDirection=n.StretchDirection,r.TouchMode=n.TouchMode,r.Transition=n.Transition,r.ViewEvent=n.ViewEvent,r.WrapMode=n.WrapMode,e(r)},null,function(n){e("Helper",n.Helper)}],execute:function(){n._RF.push({},"5be24sUODxN4578M0VnyahK","index",void 0),n._RF.pop()}}}));

System.register("chunks:///_virtual/Indicator.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ScrollAdapter.ts","./enum.ts","./PageViewManager.ts"],(function(e){var t,i,n,a,r,o,l,s,c,p,u,h,d,g,f,_,y,m,v,C;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,a=e.assertThisInitialized,r=e.createClass},function(e){o=e.cclegacy,l=e._decorator,s=e.SpriteFrame,c=e.Color,p=e.Node,u=e.Sprite,h=e.UITransform,d=e.Button,g=e.EventHandler,f=e.Layout,_=e.Component,y=e.Size},function(e){m=e.ScrollAdapter},function(e){v=e.IndicatorMode},function(e){C=e.PageViewManager}],execute:function(){var S,w,M,b,z,I,E,L,P,T,A;o._RF.push({},"39a65BHli1DW4GsARI0mFR5","Indicator",void 0);var N=l.ccclass,R=l.property;e("Indicator",(S=N("Indicator"),w=R(m),M=R({type:s}),b=R({type:v}),S((E=t((I=function(e){function t(){for(var t,i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,n(t,"adapter",E,a(t)),n(t,"spriteFrame",L,a(t)),n(t,"indicatorMode",P,a(t)),n(t,"cellSize",T,a(t)),n(t,"spacing",A,a(t)),t._indicators=[],t._layout=null,t._color=new c,t}i(t,e);var o=t.prototype;return o.__preload=function(){this.adapter&&(this.adapter.pageViewManager.on(C.Event.ON_PAGE_LENGTH_CHANGED,this._onPageLengthChanged,this),this.adapter.pageViewManager.on(C.Event.ON_SCROLL_PAGE_END,this._onScrollPageEnd,this))},o._onScrollPageEnd=function(){this.changedState()},o._onPageLengthChanged=function(){if(this.adapter){var e=this._indicators,t=this.adapter.viewManager.groupLength;if(t!==e.length){var i=0;if(t>e.length)for(i=0;i<t;++i)e[i]||(e[i]=this._createIndicator(i));else for(i=e.length-t;i>0;--i){var n=e[i-1];this.node.removeChild(n.node),e.splice(i-1,1)}this.layout&&this.layout.enabledInHierarchy&&this.layout.updateLayout(),this.changedState()}}},o._createIndicator=function(e){var t=new p;t.layer=this.node.layer;var i=t.addComponent(u);i.spriteFrame=this.spriteFrame,i.sizeMode=u.SizeMode.CUSTOM,t.parent=this.node;var n=t.getComponent(h);if(n.setContentSize(this.cellSize),this.indicatorMode==v.Button){var a=t.getComponent(d)||t.addComponent(d),r=new g;r.component="Indicator",r.handler="_click",r.target=this.node,r.customEventData=e,a.clickEvents.push(r)}return n},o._click=function(e,t){this.adapter.pageViewManager.scrollToPage(this.adapter.pageViewManager.pageTurningSpeed,t)},o.changedState=function(){var e=this._indicators;if(0!==e.length&&this.adapter){var t=this.adapter.pageViewManager.currentIndex;if(!(t>=e.length)){for(var i=0;i<e.length;++i){var n=e[i].getComponent(u);this._color.set(n.color),this._color.a=127.5,n.color=this._color}if(e[t]){var a=e[t].getComponent(u);this._color.set(a.color),this._color.a=255,a.color=this._color}}}},r(t,[{key:"layout",get:function(){return null==this._layout&&(this._layout=this.getComponent(f)||this.addComponent(f),this.adapter.isHorizontal?(this._layout.type=f.Type.HORIZONTAL,this._layout.spacingX=this.spacing):(this._layout.type=f.Type.VERTICAL,this._layout.spacingY=this.spacing),this._layout.resizeMode=f.ResizeMode.CONTAINER),this._layout}}]),t}(_)).prototype,"adapter",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=t(I.prototype,"spriteFrame",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=t(I.prototype,"indicatorMode",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return v.Normal}}),T=t(I.prototype,"cellSize",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new y(10,10)}}),A=t(I.prototype,"spacing",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),z=I))||z));o._RF.pop()}}}));

System.register("chunks:///_virtual/interface.ts",["cc"],(function(){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"3d52dVTlbBOz7Wijt15IBJI","interface",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/InterfaceCtr.ts",["cc"],(function(){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"73066aOJ9dNsIe7IysIKQYa","InterfaceCtr",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/IPanelManager.ts",["cc"],(function(){var e;return{setters:[function(n){e=n.cclegacy}],execute:function(){e._RF.push({},"2ca88+minFDV5snU0MsSRGt","IPanelManager",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/IronSourceAd.ts",["./rollupPluginModLoBabelHelpers.js","cc","./JsbNativeCall.ts","./AdBase.ts","./SdkError.ts","./TimerRecord.ts","./MK.ts","./AdDef.ts","./MKUtil.ts"],(function(e){var a,r,n,i,l,o,d,t,c,s;return{setters:[function(e){a=e.inheritsLoose},function(e){r=e.cclegacy,n=e.sys},function(e){i=e.JsbNativeCall},function(e){l=e.AdBase},function(e){o=e.emSdkErrorCode},function(e){d=e.SdkTimerRecord,t=e.emTimerRecordKeys},null,function(e){c=e.AD_POSITION},function(e){s=e.MKUtil}],execute:function(){r._RF.push({},"97d76ZdyGBFibq9i7tQyh7y","IronSourceAd",void 0);e("IronSourceAd",function(e){function r(){for(var a,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(a=e.call.apply(e,[this].concat(n))||this).IOS_KEY="190df2a45",a.ANDROID_KEY="190df2a45",a._rewardVideoSuccessCallback=void 0,a._rewardVideoFailureCallback=void 0,a._rewardVideoLoadSuccessCallback=void 0,a._rewardVideoLoadFailureCallback=void 0,a._rewardVideoRewarded=void 0,a._interstitialSuccessCallback=void 0,a._interstitialFailureCallback=void 0,a._interstitialRewarded=void 0,a._offerwallSuccessCallback=void 0,a._offerwallFailureCallback=void 0,a._offerwallRewarded=void 0,a._bannerLoaded=void 0,a._bannerLoadSuccessCallback=void 0,a._bannerLoadFailureCallback=void 0,a.bannerParams=void 0,a.canShowBanner=!0,a}a(r,e);var i=r.prototype;return i.Init=function(){var e=this,a={appKey:n.platform==n.Platform.IOS?this.IOS_KEY:this.ANDROID_KEY,debug:!1,onSuccess:function(){window.addEventListener("rewardedVideoFailed",(function(a){e._rewardVideoRewarded=!1,e._rewardVideoSuccessCallback=null;try{e._rewardVideoFailureCallback&&e._rewardVideoFailureCallback({errMsg:o.Sdk_Ad_On_Error,errData:a,errCode:a.errorCode,errInfo:a.errorMesssage})}catch(e){console.error(e)}e._rewardVideoFailureCallback=null,e._rewardVideoLoadSuccessCallback=null;try{e._rewardVideoLoadFailureCallback&&e._rewardVideoLoadFailureCallback({errMsg:o.Sdk_Ad_On_Error,errData:a,errCode:a.errorCode,errInfo:a.errorMesssage})}catch(e){console.error(e)}e._rewardVideoLoadFailureCallback=null})),window.addEventListener("rewardedVideoRewardReceived",(function(a){e._rewardVideoRewarded=!0})),window.addEventListener("rewardedVideoEnded",(function(){})),window.addEventListener("rewardedVideoStarted",(function(){})),window.addEventListener("rewardedVideoAvailabilityChanged",(function(a){a.available?e._rewardVideoLoadSuccessCallback&&e._rewardVideoLoadSuccessCallback():e._rewardVideoLoadFailureCallback&&e._rewardVideoLoadFailureCallback()})),window.addEventListener("rewardedVideoClosed",(function(){if(e._rewardVideoRewarded){e._rewardVideoFailureCallback=null,e._rewardVideoRewarded=!1;try{e._rewardVideoSuccessCallback&&e._rewardVideoSuccessCallback()}catch(e){console.error(e)}e._rewardVideoSuccessCallback=null}else{e._rewardVideoSuccessCallback=null,e._rewardVideoRewarded=!1;try{e._rewardVideoFailureCallback&&e._rewardVideoFailureCallback({errMsg:o.Sdk_Ad_Close_Reward,errData:""})}catch(e){console.error(e)}e._rewardVideoFailureCallback=null}})),window.addEventListener("rewardedVideoOpened",(function(){})),window.addEventListener("interstitialLoaded",(function(){})),window.addEventListener("interstitialShown",(function(){e._interstitialRewarded=!0})),window.addEventListener("interstitialShowFailed",(function(){e._interstitialRewarded=!1,e._interstitialSuccessCallback=null;try{e._interstitialFailureCallback&&e._interstitialFailureCallback({errMsg:o.Sdk_Ad_Show_Error,errData:""})}catch(e){console.error(e)}e._interstitialFailureCallback=null})),window.addEventListener("interstitialClicked",(function(){})),window.addEventListener("interstitialClosed",(function(){if(d.getInstance().start(t.Show_Insert_Ad),e._interstitialRewarded){e._interstitialRewarded=!1,e._interstitialFailureCallback=null;try{e._interstitialSuccessCallback&&e._interstitialSuccessCallback()}catch(e){console.error(e)}e._interstitialSuccessCallback=null}else{e._interstitialRewarded=!1,e._interstitialSuccessCallback=null;try{e._interstitialFailureCallback&&e._interstitialFailureCallback({errMsg:o.Sdk_Ad_Close_Reward,errData:""})}catch(e){console.error(e)}e._interstitialFailureCallback=null}})),window.addEventListener("interstitialWillOpen",(function(){})),window.addEventListener("interstitialFailedToLoad",(function(){})),window.addEventListener("offerwallClosed",(function(){if(e._offerwallRewarded){e._offerwallRewarded=!1,e._offerwallFailureCallback=null;try{e._offerwallSuccessCallback&&e._offerwallSuccessCallback()}catch(e){console.error(e)}e._offerwallSuccessCallback=null}else{e._offerwallRewarded=!1,e._offerwallSuccessCallback=null;try{e._offerwallFailureCallback&&e._offerwallFailureCallback()}catch(e){console.error(e)}e._offerwallFailureCallback=null}})),window.addEventListener("offerwallCreditFailed",(function(){e._offerwallRewarded=!1,e._offerwallSuccessCallback=null;try{e._offerwallFailureCallback&&e._offerwallFailureCallback()}catch(e){console.error(e)}e._offerwallFailureCallback=null})),window.addEventListener("offerwallCreditReceived",(function(a){e._offerwallRewarded=!0})),window.addEventListener("offerwallShowFailed",(function(){e._offerwallRewarded=!1,e._offerwallSuccessCallback=null;try{e._offerwallFailureCallback&&e._offerwallFailureCallback()}catch(e){console.error(e)}e._offerwallFailureCallback=null})),window.addEventListener("offerwallShown",(function(){e._offerwallRewarded=!0})),window.addEventListener("offerwallAvailabilityChanged",(function(e){})),window.addEventListener("bannerDidLoad",(function(){if(e._bannerLoaded=!0,e._bannerLoadSuccessCallback&&e._bannerLoadSuccessCallback(),e._bannerLoadSuccessCallback=null,e.canShowBanner){if(e.isShowingBanner)return;e.showBannerAd("",!0).then((function(){})).catch((function(){}))}else e.showBannerAd("",!1).then((function(){})).catch((function(){}))})),window.addEventListener("bannerFailedToLoad",(function(){e._bannerLoadFailureCallback&&e._bannerLoadFailureCallback(),e._bannerLoadFailureCallback=null,e._bannerLoaded=!1})),window.addEventListener("bannerDidClick",(function(){})),window.addEventListener("bannerWillPresentScreen",(function(){})),window.addEventListener("bannerDidDismissScreen",(function(){})),window.addEventListener("bannerWillLeaveApplication",(function(){}))},onFailure:function(e){}},r=s.deviceId();u("init",{appKey:a.appKey,providedUserId:r,debug:a.debug,position:c.BOTTOM_CENTER,rewardAdUnitID:n.platform==n.Platform.IOS?"b01acb6f3cef032b":"b7185d5d9d219277",bannerAdUnitID:n.platform==n.Platform.IOS?"64a0a1ecc3f44253":"8afe63622b877501",insertAdUnitID:n.platform==n.Platform.IOS?"0ff8cf8b7e326f28":"37a302939fe0a904",userId:r,x:0,y:0,w:0,h:0},(function(){w(a.onSuccess)&&a.onSuccess()}),a.onFailure)},i.UnInit=function(){},i.setDynamicUserId=function(e){if(!1===(e=f(e,{})).hasOwnProperty("userId"))throw new Error("IronSourceAds::setUserId - missing userId IronSourceAds.setUserId({userId:'example'})");u("setDynamicUserId",{userId:e.userId},e.onSuccess,e.onFailure)},i.setConsent=function(e){if(!1===(e=f(e,{})).hasOwnProperty("consent"))throw new Error("IronSourceAds::setConsent - missing consent IronSourceAds.setConsent({consent:true})");u("setConsent",{consent:e.consent},e.onSuccess,e.onFailure)},i.validateIntegration=function(e){u("validateIntegration",{},(e=f(e,{})).onSuccess,e.onFailure)},i.loadRewardedVideoAd=function(e,a){var r=this;return new Promise((function(e,a){u("loadRewardedVideo",{},(function(){r._rewardVideoLoadSuccessCallback=e,r._rewardVideoLoadFailureCallback=a}),(function(e){a(e)}))}))},i.showRewardedVideoAd=function(e,a){var r=this;return new Promise((function(e,a){if(1==r.isPlayVideoAd)return r.logger.error("showRewardedVideoAd:","同时多次拉取"),void a({errMsg:o.Sdk_Ad_Show_Repeat_Error,errData:""});r.isPlayVideoAd=!0,r._rewardVideoSuccessCallback=function(){r.isPlayVideoAd=!1,e(!0)},r._rewardVideoFailureCallback=a,u("showRewardedVideo",{placement:"DefaultRewardedVideo"},(function(){}),(function(e){r.isPlayVideoAd=!1,a(e)}))}))},i.hasRewardedVideo=function(){return new Promise((function(e,a){u("hasRewardedVideo",{},(function(r){"true"==r?e(!0):a()}),a)}))},i.loadBannerAd=function(e,a,r){var n=this;return new Promise((function(e,a){var r="DefaultBanner",i="bottom",l="smart";n._bannerLoadFailureCallback=a,n._bannerLoadSuccessCallback=e,u("loadBanner",{placement:r,size:l,position:i},(function(){}),(function(){}))}))},i.showBannerAd=function(e,a){var r=this;return new Promise((function(e,n){if(a)if(r.canShowBanner=!0,r.isShowingBanner)r.logger.error("重复展示banner",""),n({errMsg:o.Sdk_Ad_Show_Repeat_Error,errData:""});else{var i={position:0,x:0,y:0};u("showBanner",{position:i.position,x:i.x,y:i.y},(function(){r.canShowBanner?(r.isShowingBanner=!0,e(!0)):(r.logger.error("bannerAd显示失败","广告延迟导致显示发生在上次隐藏之后"),r.bannerAd.hide(),n({errMsg:o.Sdk_Ad_Show_Error,errData:"广告延迟导致显示发生在上次隐藏之后"}))}),(function(e){r.isShowingBanner=!1,r.logger.error("bannerAd显示失败",e),n({errMsg:o.Sdk_Ad_Show_Error,errData:e})}))}else r.canShowBanner=!1,u("hideBanner",{},e,n),r.isShowingBanner=!1}))},i.hasOfferwall=function(e){u("hasOfferwall",{},(e=f(e,{})).onSuccess,e.onFailure)},i.showOfferwall=function(e){u("showOfferwall",{placement:(e=f(e,{placement:"DefaultOfferWall"})).placement},e.onSuccess,e.onFailure)},i.loadInterstitialAd=function(e,a){return new Promise((function(e,a){u("loadInterstitial",{},e,a)}))},i.showInterstitialAd=function(e){var a=this;return new Promise((function(e,r){u("showInterstitial",{placement:"DefaultInterstitial"},(function(){a._interstitialFailureCallback=r,a._interstitialSuccessCallback=e}),r)}))},i.hasInterstitial=function(){return new Promise((function(e,a){u("hasInterstitial",{},e,a)}))},i.isRewardedVideoCappedForPlacement=function(e){u("isRewardedVideoCappedForPlacement",{placement:(e=f(e,{placement:"DefaultRewardedVideo"})).placement},e.onSuccess,e.onFailure)},r}(l));function u(e,a,r,n){i.exec("AdMaxPlugin",e,a,(function(e){w(r)&&r(e)}),(function(e){w(n)&&n(e)}))}function w(e){return!0===(e&&"[object Function]"==={}.toString.call(e))}function f(e,a){if(void 0===e)return f({},a);for(var r in a)a.hasOwnProperty(r)&&!1===e.hasOwnProperty(r)&&(e[r]=a[r]);return e}r._RF.pop()}}}));

System.register("chunks:///_virtual/item_page.ts",["./rollupPluginModLoBabelHelpers.js","cc","./index.ts","./page_item.ts","./ScrollAdapter.ts","./View.ts","./Holder.ts"],(function(e){var t,n,i,r,o,a,l,u,c,s,p,f;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,l=e.Label,u=e.Node},null,function(e){c=e.page_item},function(e){s=e.ScrollAdapter},function(e){p=e.View},function(e){f=e.Holder}],execute:function(){var h,d,b,g,m,_,y;o._RF.push({},"333d6buM2ZC6ab6/F873WSZ","item_page",void 0);var v=a.ccclass,w=a.property,D=(e("item_page",(h=v("item_page"),d=w(l),b=w(u),h((_=t((m=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,i(t,"label",_,r(t)),i(t,"prefab",y,r(t)),t._holder=null,t}n(t,e);var o=t.prototype;return o.getPrefab=function(e){return this.prefab},o.getView=function(){return new D(this)},o.getHolder=function(e,t){return new V(e,t,this)},o.initElement=function(e,t){},o.show=function(e){this._holder=e,this.label.string=this._holder.data.name;for(var t=[],n=0;n<10;n++)t.push({name:n});this.modelManager.insert(t)},o.hide=function(){this.modelManager.clear()},t}(s)).prototype,"label",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=t(m.prototype,"prefab",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=m))||g)),function(e){function t(){return e.apply(this,arguments)||this}n(t,e);var i=t.prototype;return i.onVisible=function(){},i.onDisable=function(){},t}(p)),V=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))||this)._item=null,t}n(t,e);var i=t.prototype;return i.onCreated=function(){this._item=this.node.getComponent(c)},i.onVisible=function(){this._item.show(this)},i.onDisable=function(){this._item.hide()},t}(f);o._RF.pop()}}}));

System.register("chunks:///_virtual/JsbNativeCall.ts",["cc"],(function(a){var e,t,n;return{setters:[function(a){e=a.cclegacy,t=a.native,n=a.sys}],execute:function(){e._RF.push({},"27c06gZ6fJBk71zl2F/JNub","JsbNativeCall",void 0);var c=a("JsbNativeCall",function(){function a(){}return a.init=function(){t.jsbBridgeWrapper.addNativeEventListener("emitWindowEvent",(function(e){var t=JSON.parse(e),n=t.event,c=t.data;a.emitWindowEvent(n,c)})),t.jsbBridgeWrapper.addNativeEventListener("callBackCallSuccess",(function(e){var t=JSON.parse(e),n=t.event,c=t.data;a.callBackCallSuccess(n,c)})),t.jsbBridgeWrapper.addNativeEventListener("callBackCallFailure",(function(e){var t=JSON.parse(e),n=t.event,c=t.data;a.callBackCallFailure(n,c)}))},a.addEventListener=function(a,e){t.jsbBridgeWrapper.addNativeEventListener(a,(function(a){if(a&&a.length>0){var t=JSON.parse(a);e(t)}else e()}))},a.removeEventListener=function(a,e){t.jsbBridgeWrapper.removeNativeEventListener(a,e)},a.getCallbackContext=function(e){if(a._callbackMaps.hasOwnProperty(e)){var t=a._callbackMaps[e];return delete a._callbackMaps[e],t}return null},a.setCallbackContext=function(e){a._callbackMaps[e.callbackId]=e},a.getCallBackId=function(){return a._callbackId++,a._callbackId+""},a._exec=function(a,e,c,l){if(n.os==n.OS.ANDROID)t.reflection.callStaticMethod("com.brix.jsb.JsbCall","exec","(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)V",a,e,c,l);else if(n.os==n.OS.IOS){var r={service:a,action:e,params:c,callbackId:l};t.jsbBridgeWrapper.dispatchEventToNative("JsbCall",JSON.stringify(r))}},a.exec=function(e,t,n,c,l){var r={success:c,failure:l,callbackId:a.getCallBackId()};a.setCallbackContext(r),a._exec(e,t,JSON.stringify(n),r.callbackId)},a.callBackCallSuccess=function(e,t){var n=a.getCallbackContext(e);n&&n.hasOwnProperty("success")&&"function"==typeof n.success&&n.success(t)},a.callBackCallFailure=function(e,t){var n=a.getCallbackContext(e);n&&n.hasOwnProperty("failure")&&"function"==typeof n.success&&n.failure(t)},a.emitWindowEvent=function(e,t){var n=a.createEvent(e,t);window.dispatchEvent(n)},a.createEvent=function(a,e){var t=new window.Event(a);if(e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t._result=e,t},a}());c._callbackMaps={},c._callbackId=0,window.JsbNativeCall=c,e._RF.pop()}}}));

System.register("chunks:///_virtual/jy_wxsdk_1.3.8.min.js",["./cjs-loader.mjs"],(function(t,e){var r;return{setters:[function(t){r=t.default}],execute:function(){t("default",void 0);var n=t("__cjsMetaURL",e.meta.url);r.define(n,(function(e,r,n,o,i){!function(){var t={9306:function(t,e,r){var n=r(4901),o=r(6823),i=TypeError;t.exports=function(t){if(n(t))return t;throw new i(o(t)+" is not a function")}},5548:function(t,e,r){var n=r(3517),o=r(6823),i=TypeError;t.exports=function(t){if(n(t))return t;throw new i(o(t)+" is not a constructor")}},3506:function(t,e,r){var n=r(3925),o=String,i=TypeError;t.exports=function(t){if(n(t))return t;throw new i("Can't set "+o(t)+" as a prototype")}},6469:function(t,e,r){var n=r(8227),o=r(2360),i=r(4913).f,a=n("unscopables"),u=Array.prototype;void 0===u[a]&&i(u,a,{configurable:!0,value:o(null)}),t.exports=function(t){u[a][t]=!0}},7829:function(t,e,r){var n=r(8183).charAt;t.exports=function(t,e,r){return e+(r?n(t,e).length:1)}},679:function(t,e,r){var n=r(1625),o=TypeError;t.exports=function(t,e){if(n(e,t))return t;throw new o("Incorrect invocation")}},8551:function(t,e,r){var n=r(34),o=String,i=TypeError;t.exports=function(t){if(n(t))return t;throw new i(o(t)+" is not an object")}},5652:function(t,e,r){var n=r(9039);t.exports=n((function(){if("function"==typeof ArrayBuffer){var t=new ArrayBuffer(8);Object.isExtensible(t)&&Object.defineProperty(t,"a",{value:8})}}))},235:function(t,e,r){var n=r(9213).forEach,o=r(4598)("forEach");t.exports=o?[].forEach:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}},7916:function(t,e,r){var n=r(6080),o=r(9565),i=r(8981),a=r(6319),u=r(4209),c=r(3517),s=r(6198),f=r(4659),l=r(81),p=r(851),d=Array;t.exports=function(t){var e=i(t),r=c(this),y=arguments.length,h=y>1?arguments[1]:void 0,v=void 0!==h;v&&(h=n(h,y>2?arguments[2]:void 0));var g,b,_,m,S,O,w=p(e),E=0;if(!w||this===d&&u(w))for(g=s(e),b=r?new this(g):d(g);g>E;E++)O=v?h(e[E],E):e[E],f(b,E,O);else for(S=(m=l(e,w)).next,b=r?new this:[];!(_=o(S,m)).done;E++)O=v?a(m,h,[_.value,E],!0):_.value,f(b,E,O);return b.length=E,b}},9617:function(t,e,r){var n=r(5397),o=r(5610),i=r(6198),a=function(t){return function(e,r,a){var u=n(e),c=i(u);if(0===c)return!t&&-1;var s,f=o(a,c);if(t&&r!=r){for(;c>f;)if((s=u[f++])!=s)return!0}else for(;c>f;f++)if((t||f in u)&&u[f]===r)return t||f||0;return!t&&-1}};t.exports={includes:a(!0),indexOf:a(!1)}},9213:function(t,e,r){var n=r(6080),o=r(9504),i=r(7055),a=r(8981),u=r(6198),c=r(1469),s=o([].push),f=function(t){var e=1===t,r=2===t,o=3===t,f=4===t,l=6===t,p=7===t,d=5===t||l;return function(y,h,v,g){for(var b,_,m=a(y),S=i(m),O=u(S),w=n(h,v),E=0,P=g||c,A=e?P(y,O):r||p?P(y,0):void 0;O>E;E++)if((d||E in S)&&(_=w(b=S[E],E,m),t))if(e)A[E]=_;else if(_)switch(t){case 3:return!0;case 5:return b;case 6:return E;case 2:s(A,b)}else switch(t){case 4:return!1;case 7:s(A,b)}return l?-1:o||f?f:A}};t.exports={forEach:f(0),map:f(1),filter:f(2),some:f(3),every:f(4),find:f(5),findIndex:f(6),filterReject:f(7)}},597:function(t,e,r){var n=r(9039),o=r(8227),i=r(7388),a=o("species");t.exports=function(t){return i>=51||!n((function(){var e=[];return(e.constructor={})[a]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},4598:function(t,e,r){var n=r(9039);t.exports=function(t,e){var r=[][t];return!!r&&n((function(){r.call(null,e||function(){return 1},1)}))}},7680:function(t,e,r){var n=r(9504);t.exports=n([].slice)},4488:function(t,e,r){var n=r(7680),o=Math.floor;t.exports=function t(e,r){var i=e.length;if(i<8)for(var a,u,c=1;c<i;){for(u=c,a=e[c];u&&r(e[u-1],a)>0;)e[u]=e[--u];u!==c++&&(e[u]=a)}else for(var s=o(i/2),f=t(n(e,0,s),r),l=t(n(e,s),r),p=f.length,d=l.length,y=0,h=0;y<p||h<d;)e[y+h]=y<p&&h<d?r(f[y],l[h])<=0?f[y++]:l[h++]:y<p?f[y++]:l[h++];return e}},7433:function(t,e,r){var n=r(4376),o=r(3517),i=r(34),a=r(8227)("species"),u=Array;t.exports=function(t){var e;return n(t)&&(e=t.constructor,(o(e)&&(e===u||n(e.prototype))||i(e)&&null===(e=e[a]))&&(e=void 0)),void 0===e?u:e}},1469:function(t,e,r){var n=r(7433);t.exports=function(t,e){return new(n(t))(0===e?0:e)}},6319:function(t,e,r){var n=r(8551),o=r(9539);t.exports=function(t,e,r,i){try{return i?e(n(r)[0],r[1]):e(r)}catch(e){o(t,"throw",e)}}},4428:function(t,e,r){var n=r(8227)("iterator"),o=!1;try{var i=0,a={next:function(){return{done:!!i++}},return:function(){o=!0}};a[n]=function(){return this},Array.from(a,(function(){throw 2}))}catch(t){}t.exports=function(t,e){try{if(!e&&!o)return!1}catch(t){return!1}var r=!1;try{var i={};i[n]=function(){return{next:function(){return{done:r=!0}}}},t(i)}catch(t){}return r}},4576:function(t,e,r){var n=r(9504),o=n({}.toString),i=n("".slice);t.exports=function(t){return i(o(t),8,-1)}},6955:function(t,e,r){var n=r(2140),o=r(4901),i=r(4576),a=r(8227)("toStringTag"),u=Object,c="Arguments"===i(function(){return arguments}());t.exports=n?i:function(t){var e,r,n;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(r=function(t,e){try{return t[e]}catch(t){}}(e=u(t),a))?r:c?i(e):"Object"===(n=i(e))&&o(e.callee)?"Arguments":n}},6938:function(t,e,r){var n=r(2360),o=r(2106),i=r(6279),a=r(6080),u=r(679),c=r(4117),s=r(2652),f=r(1088),l=r(2529),p=r(7633),d=r(3724),y=r(3451).fastKey,h=r(1181),v=h.set,g=h.getterFor;t.exports={getConstructor:function(t,e,r,f){var l=t((function(t,o){u(t,p),v(t,{type:e,index:n(null),first:void 0,last:void 0,size:0}),d||(t.size=0),c(o)||s(o,t[f],{that:t,AS_ENTRIES:r})})),p=l.prototype,h=g(e),b=function(t,e,r){var n,o,i=h(t),a=_(t,e);return a?a.value=r:(i.last=a={index:o=y(e,!0),key:e,value:r,previous:n=i.last,next:void 0,removed:!1},i.first||(i.first=a),n&&(n.next=a),d?i.size++:t.size++,"F"!==o&&(i.index[o]=a)),t},_=function(t,e){var r,n=h(t),o=y(e);if("F"!==o)return n.index[o];for(r=n.first;r;r=r.next)if(r.key===e)return r};return i(p,{clear:function(){for(var t=h(this),e=t.first;e;)e.removed=!0,e.previous&&(e.previous=e.previous.next=void 0),e=e.next;t.first=t.last=void 0,t.index=n(null),d?t.size=0:this.size=0},delete:function(t){var e=this,r=h(e),n=_(e,t);if(n){var o=n.next,i=n.previous;delete r.index[n.index],n.removed=!0,i&&(i.next=o),o&&(o.previous=i),r.first===n&&(r.first=o),r.last===n&&(r.last=i),d?r.size--:e.size--}return!!n},forEach:function(t){for(var e,r=h(this),n=a(t,arguments.length>1?arguments[1]:void 0);e=e?e.next:r.first;)for(n(e.value,e.key,this);e&&e.removed;)e=e.previous},has:function(t){return!!_(this,t)}}),i(p,r?{get:function(t){var e=_(this,t);return e&&e.value},set:function(t,e){return b(this,0===t?0:t,e)}}:{add:function(t){return b(this,t=0===t?0:t,t)}}),d&&o(p,"size",{configurable:!0,get:function(){return h(this).size}}),l},setStrong:function(t,e,r){var n=e+" Iterator",o=g(e),i=g(n);f(t,e,(function(t,e){v(this,{type:n,target:t,state:o(t),kind:e,last:void 0})}),(function(){for(var t=i(this),e=t.kind,r=t.last;r&&r.removed;)r=r.previous;return t.target&&(t.last=r=r?r.next:t.state.first)?l("keys"===e?r.key:"values"===e?r.value:[r.key,r.value],!1):(t.target=void 0,l(void 0,!0))}),r?"entries":"values",!r,!0),p(e)}}},6468:function(t,e,r){var n=r(6518),o=r(4475),i=r(9504),a=r(2796),u=r(6840),c=r(3451),s=r(2652),f=r(679),l=r(4901),p=r(4117),d=r(34),y=r(9039),h=r(4428),v=r(687),g=r(3167);t.exports=function(t,e,r){var b=-1!==t.indexOf("Map"),_=-1!==t.indexOf("Weak"),m=b?"set":"add",S=o[t],O=S&&S.prototype,w=S,E={},P=function(t){var e=i(O[t]);u(O,t,"add"===t?function(t){return e(this,0===t?0:t),this}:"delete"===t?function(t){return!(_&&!d(t))&&e(this,0===t?0:t)}:"get"===t?function(t){return _&&!d(t)?void 0:e(this,0===t?0:t)}:"has"===t?function(t){return!(_&&!d(t))&&e(this,0===t?0:t)}:function(t,r){return e(this,0===t?0:t,r),this})};if(a(t,!l(S)||!(_||O.forEach&&!y((function(){(new S).entries().next()})))))w=r.getConstructor(e,t,b,m),c.enable();else if(a(t,!0)){var A=new w,j=A[m](_?{}:-0,1)!==A,k=y((function(){A.has(1)})),L=h((function(t){new S(t)})),R=!_&&y((function(){for(var t=new S,e=5;e--;)t[m](e,e);return!t.has(-0)}));L||((w=e((function(t,e){f(t,O);var r=g(new S,t,w);return p(e)||s(e,r[m],{that:r,AS_ENTRIES:b}),r}))).prototype=O,O.constructor=w),(k||R)&&(P("delete"),P("has"),b&&P("get")),(R||j)&&P(m),_&&O.clear&&delete O.clear}return E[t]=w,n({global:!0,constructor:!0,forced:w!==S},E),v(w,t),_||r.setStrong(w,t,b),w}},7740:function(t,e,r){var n=r(9297),o=r(5031),i=r(7347),a=r(4913);t.exports=function(t,e,r){for(var u=o(e),c=a.f,s=i.f,f=0;f<u.length;f++){var l=u[f];n(t,l)||r&&n(r,l)||c(t,l,s(e,l))}}},1436:function(t,e,r){var n=r(8227)("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(r){try{return e[n]=!1,"/./"[t](e)}catch(t){}}return!1}},2211:function(t,e,r){var n=r(9039);t.exports=!n((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}))},2529:function(t){t.exports=function(t,e){return{value:t,done:e}}},6699:function(t,e,r){var n=r(3724),o=r(4913),i=r(6980);t.exports=n?function(t,e,r){return o.f(t,e,i(1,r))}:function(t,e,r){return t[e]=r,t}},6980:function(t){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},4659:function(t,e,r){var n=r(3724),o=r(4913),i=r(6980);t.exports=function(t,e,r){n?o.f(t,e,i(0,r)):t[e]=r}},3640:function(t,e,r){var n=r(8551),o=r(4270),i=TypeError;t.exports=function(t){if(n(this),"string"===t||"default"===t)t="string";else if("number"!==t)throw new i("Incorrect hint");return o(this,t)}},2106:function(t,e,r){var n=r(283),o=r(4913);t.exports=function(t,e,r){return r.get&&n(r.get,e,{getter:!0}),r.set&&n(r.set,e,{setter:!0}),o.f(t,e,r)}},6840:function(t,e,r){var n=r(4901),o=r(4913),i=r(283),a=r(9433);t.exports=function(t,e,r,u){u||(u={});var c=u.enumerable,s=void 0!==u.name?u.name:e;if(n(r)&&i(r,s,u),u.global)c?t[e]=r:a(e,r);else{try{u.unsafe?t[e]&&(c=!0):delete t[e]}catch(t){}c?t[e]=r:o.f(t,e,{value:r,enumerable:!1,configurable:!u.nonConfigurable,writable:!u.nonWritable})}return t}},6279:function(t,e,r){var n=r(6840);t.exports=function(t,e,r){for(var o in e)n(t,o,e[o],r);return t}},9433:function(t,e,r){var n=r(4475),o=Object.defineProperty;t.exports=function(t,e){try{o(n,t,{value:e,configurable:!0,writable:!0})}catch(r){n[t]=e}return e}},4606:function(t,e,r){var n=r(6823),o=TypeError;t.exports=function(t,e){if(!delete t[e])throw new o("Cannot delete property "+n(e)+" of "+n(t))}},3724:function(t,e,r){var n=r(9039);t.exports=!n((function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]}))},4055:function(t,e,r){var n=r(4475),o=r(34),i=n.document,a=o(i)&&o(i.createElement);t.exports=function(t){return a?i.createElement(t):{}}},6837:function(t){var e=TypeError;t.exports=function(t){if(t>9007199254740991)throw e("Maximum allowed index exceeded");return t}},7400:function(t){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},9296:function(t,e,r){var n=r(4055)("span").classList,o=n&&n.constructor&&n.constructor.prototype;t.exports=o===Object.prototype?void 0:o},8834:function(t,e,r){var n=r(9392).match(/firefox\/(\d+)/i);t.exports=!!n&&+n[1]},7290:function(t,e,r){var n=r(516),o=r(9088);t.exports=!n&&!o&&"object"==typeof window&&"object"==typeof document},6763:function(t){t.exports="function"==typeof Bun&&Bun&&"string"==typeof Bun.version},516:function(t){t.exports="object"==typeof Deno&&Deno&&"object"==typeof Deno.version},3202:function(t,e,r){var n=r(9392);t.exports=/MSIE|Trident/.test(n)},28:function(t,e,r){var n=r(9392);t.exports=/ipad|iphone|ipod/i.test(n)&&"undefined"!=typeof Pebble},8119:function(t,e,r){var n=r(9392);t.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(n)},9088:function(t,e,r){var n=r(4475),o=r(4576);t.exports="process"===o(n.process)},6765:function(t,e,r){var n=r(9392);t.exports=/web0s(?!.*chrome)/i.test(n)},9392:function(t){t.exports="undefined"!=typeof navigator&&String(navigator.userAgent)||""},7388:function(t,e,r){var n,o,i=r(4475),a=r(9392),u=i.process,c=i.Deno,s=u&&u.versions||c&&c.version,f=s&&s.v8;f&&(o=(n=f.split("."))[0]>0&&n[0]<4?1:+(n[0]+n[1])),!o&&a&&(!(n=a.match(/Edge\/(\d+)/))||n[1]>=74)&&(n=a.match(/Chrome\/(\d+)/))&&(o=+n[1]),t.exports=o},9160:function(t,e,r){var n=r(9392).match(/AppleWebKit\/(\d+)\./);t.exports=!!n&&+n[1]},8727:function(t){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},6518:function(t,e,r){var n=r(4475),o=r(7347).f,i=r(6699),a=r(6840),u=r(9433),c=r(7740),s=r(2796);t.exports=function(t,e){var r,f,l,p,d,y=t.target,h=t.global,v=t.stat;if(r=h?n:v?n[y]||u(y,{}):n[y]&&n[y].prototype)for(f in e){if(p=e[f],l=t.dontCallGetSet?(d=o(r,f))&&d.value:r[f],!s(h?f:y+(v?".":"#")+f,t.forced)&&void 0!==l){if(typeof p==typeof l)continue;c(p,l)}(t.sham||l&&l.sham)&&i(p,"sham",!0),a(r,f,p,t)}}},9039:function(t){t.exports=function(t){try{return!!t()}catch(t){return!0}}},9228:function(t,e,r){r(7495);var n=r(9565),o=r(6840),i=r(7323),a=r(9039),u=r(8227),c=r(6699),s=u("species"),f=RegExp.prototype;t.exports=function(t,e,r,l){var p=u(t),d=!a((function(){var e={};return e[p]=function(){return 7},7!==""[t](e)})),y=d&&!a((function(){var e=!1,r=/a/;return"split"===t&&((r={}).constructor={},r.constructor[s]=function(){return r},r.flags="",r[p]=/./[p]),r.exec=function(){return e=!0,null},r[p](""),!e}));if(!d||!y||r){var h=/./[p],v=e(p,""[t],(function(t,e,r,o,a){var u=e.exec;return u===i||u===f.exec?d&&!a?{done:!0,value:n(h,e,r,o)}:{done:!0,value:n(t,r,e,o)}:{done:!1}}));o(String.prototype,t,v[0]),o(f,p,v[1])}l&&c(f[p],"sham",!0)}},2744:function(t,e,r){var n=r(9039);t.exports=!n((function(){return Object.isExtensible(Object.preventExtensions({}))}))},8745:function(t,e,r){var n=r(616),o=Function.prototype,i=o.apply,a=o.call;t.exports="object"==typeof Reflect&&Reflect.apply||(n?a.bind(i):function(){return a.apply(i,arguments)})},6080:function(t,e,r){var n=r(7476),o=r(9306),i=r(616),a=n(n.bind);t.exports=function(t,e){return o(t),void 0===e?t:i?a(t,e):function(){return t.apply(e,arguments)}}},616:function(t,e,r){var n=r(9039);t.exports=!n((function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")}))},566:function(t,e,r){var n=r(9504),o=r(9306),i=r(34),a=r(9297),u=r(7680),c=r(616),s=Function,f=n([].concat),l=n([].join),p={};t.exports=c?s.bind:function(t){var e=o(this),r=e.prototype,n=u(arguments,1),c=function r(){var o=f(n,u(arguments));return this instanceof r?function(t,e,r){if(!a(p,e)){for(var n=[],o=0;o<e;o++)n[o]="a["+o+"]";p[e]=s("C,a","return new C("+l(n,",")+")")}return p[e](t,r)}(e,o.length,o):e.apply(t,o)};return i(r)&&(c.prototype=r),c}},9565:function(t,e,r){var n=r(616),o=Function.prototype.call;t.exports=n?o.bind(o):function(){return o.apply(o,arguments)}},350:function(t,e,r){var n=r(3724),o=r(9297),i=Function.prototype,a=n&&Object.getOwnPropertyDescriptor,u=o(i,"name"),c=u&&"something"===function(){}.name,s=u&&(!n||n&&a(i,"name").configurable);t.exports={EXISTS:u,PROPER:c,CONFIGURABLE:s}},6706:function(t,e,r){var n=r(9504),o=r(9306);t.exports=function(t,e,r){try{return n(o(Object.getOwnPropertyDescriptor(t,e)[r]))}catch(t){}}},7476:function(t,e,r){var n=r(4576),o=r(9504);t.exports=function(t){if("Function"===n(t))return o(t)}},9504:function(t,e,r){var n=r(616),o=Function.prototype,i=o.call,a=n&&o.bind.bind(i,i);t.exports=n?a:function(t){return function(){return i.apply(t,arguments)}}},7751:function(t,e,r){var n=r(4475),o=r(4901);t.exports=function(t,e){return arguments.length<2?(r=n[t],o(r)?r:void 0):n[t]&&n[t][e];var r}},851:function(t,e,r){var n=r(6955),o=r(5966),i=r(4117),a=r(6269),u=r(8227)("iterator");t.exports=function(t){if(!i(t))return o(t,u)||o(t,"@@iterator")||a[n(t)]}},81:function(t,e,r){var n=r(9565),o=r(9306),i=r(8551),a=r(6823),u=r(851),c=TypeError;t.exports=function(t,e){var r=arguments.length<2?u(t):e;if(o(r))return i(n(r,t));throw new c(a(t)+" is not iterable")}},6933:function(t,e,r){var n=r(9504),o=r(4376),i=r(4901),a=r(4576),u=r(655),c=n([].push);t.exports=function(t){if(i(t))return t;if(o(t)){for(var e=t.length,r=[],n=0;n<e;n++){var s=t[n];"string"==typeof s?c(r,s):"number"!=typeof s&&"Number"!==a(s)&&"String"!==a(s)||c(r,u(s))}var f=r.length,l=!0;return function(t,e){if(l)return l=!1,e;if(o(this))return e;for(var n=0;n<f;n++)if(r[n]===t)return e}}}},5966:function(t,e,r){var n=r(9306),o=r(4117);t.exports=function(t,e){var r=t[e];return o(r)?void 0:n(r)}},4475:function(t,e,r){var n=function(t){return t&&t.Math===Math&&t};t.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof r.g&&r.g)||n("object"==typeof this&&this)||function(){return this}()||Function("return this")()},9297:function(t,e,r){var n=r(9504),o=r(8981),i=n({}.hasOwnProperty);t.exports=Object.hasOwn||function(t,e){return i(o(t),e)}},421:function(t){t.exports={}},3138:function(t){t.exports=function(t,e){try{1===arguments.length?console.error(t):console.error(t,e)}catch(t){}}},397:function(t,e,r){var n=r(7751);t.exports=n("document","documentElement")},5917:function(t,e,r){var n=r(3724),o=r(9039),i=r(4055);t.exports=!n&&!o((function(){return 7!==Object.defineProperty(i("div"),"a",{get:function(){return 7}}).a}))},7055:function(t,e,r){var n=r(9504),o=r(9039),i=r(4576),a=Object,u=n("".split);t.exports=o((function(){return!a("z").propertyIsEnumerable(0)}))?function(t){return"String"===i(t)?u(t,""):a(t)}:a},3167:function(t,e,r){var n=r(4901),o=r(34),i=r(2967);t.exports=function(t,e,r){var a,u;return i&&n(a=e.constructor)&&a!==r&&o(u=a.prototype)&&u!==r.prototype&&i(t,u),t}},3706:function(t,e,r){var n=r(9504),o=r(4901),i=r(7629),a=n(Function.toString);o(i.inspectSource)||(i.inspectSource=function(t){return a(t)}),t.exports=i.inspectSource},3451:function(t,e,r){var n=r(6518),o=r(9504),i=r(421),a=r(34),u=r(9297),c=r(4913).f,s=r(8480),f=r(298),l=r(4124),p=r(3392),d=r(2744),y=!1,h=p("meta"),v=0,g=function(t){c(t,h,{value:{objectID:"O"+v++,weakData:{}}})},b=t.exports={enable:function(){b.enable=function(){},y=!0;var t=s.f,e=o([].splice),r={};r[h]=1,t(r).length&&(s.f=function(r){for(var n=t(r),o=0,i=n.length;o<i;o++)if(n[o]===h){e(n,o,1);break}return n},n({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:f.f}))},fastKey:function(t,e){if(!a(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!u(t,h)){if(!l(t))return"F";if(!e)return"E";g(t)}return t[h].objectID},getWeakData:function(t,e){if(!u(t,h)){if(!l(t))return!0;if(!e)return!1;g(t)}return t[h].weakData},onFreeze:function(t){return d&&y&&l(t)&&!u(t,h)&&g(t),t}};i[h]=!0},1181:function(t,e,r){var n,o,i,a=r(8622),u=r(4475),c=r(34),s=r(6699),f=r(9297),l=r(7629),p=r(6119),d=r(421),y="Object already initialized",h=u.TypeError,v=u.WeakMap;if(a||l.state){var g=l.state||(l.state=new v);g.get=g.get,g.has=g.has,g.set=g.set,n=function(t,e){if(g.has(t))throw new h(y);return e.facade=t,g.set(t,e),e},o=function(t){return g.get(t)||{}},i=function(t){return g.has(t)}}else{var b=p("state");d[b]=!0,n=function(t,e){if(f(t,b))throw new h(y);return e.facade=t,s(t,b,e),e},o=function(t){return f(t,b)?t[b]:{}},i=function(t){return f(t,b)}}t.exports={set:n,get:o,has:i,enforce:function(t){return i(t)?o(t):n(t,{})},getterFor:function(t){return function(e){var r;if(!c(e)||(r=o(e)).type!==t)throw new h("Incompatible receiver, "+t+" required");return r}}}},4209:function(t,e,r){var n=r(8227),o=r(6269),i=n("iterator"),a=Array.prototype;t.exports=function(t){return void 0!==t&&(o.Array===t||a[i]===t)}},4376:function(t,e,r){var n=r(4576);t.exports=Array.isArray||function(t){return"Array"===n(t)}},4901:function(t){var e="object"==typeof document&&document.all;t.exports=void 0===e&&void 0!==e?function(t){return"function"==typeof t||t===e}:function(t){return"function"==typeof t}},3517:function(t,e,r){var n=r(9504),o=r(9039),i=r(4901),a=r(6955),u=r(7751),c=r(3706),s=function(){},f=u("Reflect","construct"),l=/^\s*(?:class|function)\b/,p=n(l.exec),d=!l.test(s),y=function(t){if(!i(t))return!1;try{return f(s,[],t),!0}catch(t){return!1}},h=function(t){if(!i(t))return!1;switch(a(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return d||!!p(l,c(t))}catch(t){return!0}};h.sham=!0,t.exports=!f||o((function(){var t;return y(y.call)||!y(Object)||!y((function(){t=!0}))||t}))?h:y},6575:function(t,e,r){var n=r(9297);t.exports=function(t){return void 0!==t&&(n(t,"value")||n(t,"writable"))}},2796:function(t,e,r){var n=r(9039),o=r(4901),i=/#|\.prototype\./,a=function(t,e){var r=c[u(t)];return r===f||r!==s&&(o(e)?n(e):!!e)},u=a.normalize=function(t){return String(t).replace(i,".").toLowerCase()},c=a.data={},s=a.NATIVE="N",f=a.POLYFILL="P";t.exports=a},4117:function(t){t.exports=function(t){return null==t}},34:function(t,e,r){var n=r(4901);t.exports=function(t){return"object"==typeof t?null!==t:n(t)}},3925:function(t,e,r){var n=r(34);t.exports=function(t){return n(t)||null===t}},6395:function(t){t.exports=!1},788:function(t,e,r){var n=r(34),o=r(4576),i=r(8227)("match");t.exports=function(t){var e;return n(t)&&(void 0!==(e=t[i])?!!e:"RegExp"===o(t))}},757:function(t,e,r){var n=r(7751),o=r(4901),i=r(1625),a=r(7040),u=Object;t.exports=a?function(t){return"symbol"==typeof t}:function(t){var e=n("Symbol");return o(e)&&i(e.prototype,u(t))}},2652:function(t,e,r){var n=r(6080),o=r(9565),i=r(8551),a=r(6823),u=r(4209),c=r(6198),s=r(1625),f=r(81),l=r(851),p=r(9539),d=TypeError,y=function(t,e){this.stopped=t,this.result=e},h=y.prototype;t.exports=function(t,e,r){var v,g,b,_,m,S,O,w=r&&r.that,E=!(!r||!r.AS_ENTRIES),P=!(!r||!r.IS_RECORD),A=!(!r||!r.IS_ITERATOR),j=!(!r||!r.INTERRUPTED),k=n(e,w),L=function(t){return v&&p(v,"normal",t),new y(!0,t)},R=function(t){return E?(i(t),j?k(t[0],t[1],L):k(t[0],t[1])):j?k(t,L):k(t)};if(P)v=t.iterator;else if(A)v=t;else{if(!(g=l(t)))throw new d(a(t)+" is not iterable");if(u(g)){for(b=0,_=c(t);_>b;b++)if((m=R(t[b]))&&s(h,m))return m;return new y(!1)}v=f(t,g)}for(S=P?t.next:v.next;!(O=o(S,v)).done;){try{m=R(O.value)}catch(t){p(v,"throw",t)}if("object"==typeof m&&m&&s(h,m))return m}return new y(!1)}},9539:function(t,e,r){var n=r(9565),o=r(8551),i=r(5966);t.exports=function(t,e,r){var a,u;o(t);try{if(!(a=i(t,"return"))){if("throw"===e)throw r;return r}a=n(a,t)}catch(t){u=!0,a=t}if("throw"===e)throw r;if(u)throw a;return o(a),r}},3994:function(t,e,r){var n=r(7657).IteratorPrototype,o=r(2360),i=r(6980),a=r(687),u=r(6269),c=function(){return this};t.exports=function(t,e,r,s){var f=e+" Iterator";return t.prototype=o(n,{next:i(+!s,r)}),a(t,f,!1,!0),u[f]=c,t}},1088:function(t,e,r){var n=r(6518),o=r(9565),i=r(6395),a=r(350),u=r(4901),c=r(3994),s=r(2787),f=r(2967),l=r(687),p=r(6699),d=r(6840),y=r(8227),h=r(6269),v=r(7657),g=a.PROPER,b=a.CONFIGURABLE,_=v.IteratorPrototype,m=v.BUGGY_SAFARI_ITERATORS,S=y("iterator"),O="keys",w="values",E="entries",P=function(){return this};t.exports=function(t,e,r,a,y,v,A){c(r,e,a);var j,k,L,R=function(t){if(t===y&&D)return D;if(!m&&t&&t in x)return x[t];switch(t){case O:case w:case E:return function(){return new r(this,t)}}return function(){return new r(this)}},I=e+" Iterator",T=!1,x=t.prototype,C=x[S]||x["@@iterator"]||y&&x[y],D=!m&&C||R(y),N="Array"===e&&x.entries||C;if(N&&(j=s(N.call(new t)))!==Object.prototype&&j.next&&(i||s(j)===_||(f?f(j,_):u(j[S])||d(j,S,P)),l(j,I,!0,!0),i&&(h[I]=P)),g&&y===w&&C&&C.name!==w&&(!i&&b?p(x,"name",w):(T=!0,D=function(){return o(C,this)})),y)if(k={values:R(w),keys:v?D:R(O),entries:R(E)},A)for(L in k)(m||T||!(L in x))&&d(x,L,k[L]);else n({target:e,proto:!0,forced:m||T},k);return i&&!A||x[S]===D||d(x,S,D,{name:y}),h[e]=D,k}},7657:function(t,e,r){var n,o,i,a=r(9039),u=r(4901),c=r(34),s=r(2360),f=r(2787),l=r(6840),p=r(8227),d=r(6395),y=p("iterator"),h=!1;[].keys&&("next"in(i=[].keys())?(o=f(f(i)))!==Object.prototype&&(n=o):h=!0),!c(n)||a((function(){var t={};return n[y].call(t)!==t}))?n={}:d&&(n=s(n)),u(n[y])||l(n,y,(function(){return this})),t.exports={IteratorPrototype:n,BUGGY_SAFARI_ITERATORS:h}},6269:function(t){t.exports={}},6198:function(t,e,r){var n=r(8014);t.exports=function(t){return n(t.length)}},283:function(t,e,r){var n=r(9504),o=r(9039),i=r(4901),a=r(9297),u=r(3724),c=r(350).CONFIGURABLE,s=r(3706),f=r(1181),l=f.enforce,p=f.get,d=String,y=Object.defineProperty,h=n("".slice),v=n("".replace),g=n([].join),b=u&&!o((function(){return 8!==y((function(){}),"length",{value:8}).length})),_=String(String).split("String"),m=t.exports=function(t,e,r){"Symbol("===h(d(e),0,7)&&(e="["+v(d(e),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),r&&r.getter&&(e="get "+e),r&&r.setter&&(e="set "+e),(!a(t,"name")||c&&t.name!==e)&&(u?y(t,"name",{value:e,configurable:!0}):t.name=e),b&&r&&a(r,"arity")&&t.length!==r.arity&&y(t,"length",{value:r.arity});try{r&&a(r,"constructor")&&r.constructor?u&&y(t,"prototype",{writable:!1}):t.prototype&&(t.prototype=void 0)}catch(t){}var n=l(t);return a(n,"source")||(n.source=g(_,"string"==typeof e?e:"")),t};Function.prototype.toString=m((function(){return i(this)&&p(this).source||s(this)}),"toString")},741:function(t){var e=Math.ceil,r=Math.floor;t.exports=Math.trunc||function(t){var n=+t;return(n>0?r:e)(n)}},1955:function(t,e,r){var n,o,i,a,u,c=r(4475),s=r(3389),f=r(6080),l=r(9225).set,p=r(8265),d=r(8119),y=r(28),h=r(6765),v=r(9088),g=c.MutationObserver||c.WebKitMutationObserver,b=c.document,_=c.process,m=c.Promise,S=s("queueMicrotask");if(!S){var O=new p,w=function(){var t,e;for(v&&(t=_.domain)&&t.exit();e=O.get();)try{e()}catch(t){throw O.head&&n(),t}t&&t.enter()};d||v||h||!g||!b?!y&&m&&m.resolve?((a=m.resolve(void 0)).constructor=m,u=f(a.then,a),n=function(){u(w)}):v?n=function(){_.nextTick(w)}:(l=f(l,c),n=function(){l(w)}):(o=!0,i=b.createTextNode(""),new g(w).observe(i,{characterData:!0}),n=function(){i.data=o=!o}),S=function(t){O.head||n(),O.add(t)}}t.exports=S},6043:function(t,e,r){var n=r(9306),o=TypeError,i=function(t){var e,r;this.promise=new t((function(t,n){if(void 0!==e||void 0!==r)throw new o("Bad Promise constructor");e=t,r=n})),this.resolve=n(e),this.reject=n(r)};t.exports.f=function(t){return new i(t)}},5749:function(t,e,r){var n=r(788),o=TypeError;t.exports=function(t){if(n(t))throw new o("The method doesn't accept regular expressions");return t}},2703:function(t,e,r){var n=r(4475),o=r(9039),i=r(9504),a=r(655),u=r(3802).trim,c=r(7452),s=n.parseInt,f=n.Symbol,l=f&&f.iterator,p=/^[+-]?0x/i,d=i(p.exec),y=8!==s(c+"08")||22!==s(c+"0x16")||l&&!o((function(){s(Object(l))}));t.exports=y?function(t,e){var r=u(a(t));return s(r,e>>>0||(d(p,r)?16:10))}:s},4213:function(t,e,r){var n=r(3724),o=r(9504),i=r(9565),a=r(9039),u=r(1072),c=r(3717),s=r(8773),f=r(8981),l=r(7055),p=Object.assign,d=Object.defineProperty,y=o([].concat);t.exports=!p||a((function(){if(n&&1!==p({b:1},p(d({},"a",{enumerable:!0,get:function(){d(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var t={},e={},r=Symbol("assign detection"),o="abcdefghijklmnopqrst";return t[r]=7,o.split("").forEach((function(t){e[t]=t})),7!==p({},t)[r]||u(p({},e)).join("")!==o}))?function(t,e){for(var r=f(t),o=arguments.length,a=1,p=c.f,d=s.f;o>a;)for(var h,v=l(arguments[a++]),g=p?y(u(v),p(v)):u(v),b=g.length,_=0;b>_;)h=g[_++],n&&!i(d,v,h)||(r[h]=v[h]);return r}:p},2360:function(t,e,r){var n,o=r(8551),i=r(6801),a=r(8727),u=r(421),c=r(397),s=r(4055),f=r(6119),l="prototype",p="script",d=f("IE_PROTO"),y=function(){},h=function(t){return"<"+p+">"+t+"</"+p+">"},v=function(t){t.write(h("")),t.close();var e=t.parentWindow.Object;return t=null,e},g=function(){try{n=new ActiveXObject("htmlfile")}catch(t){}var t,e;g="undefined"!=typeof document?document.domain&&n?v(n):(e=s("iframe"),"java"+p+":",e.style.display="none",c.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(h("document.F=Object")),t.close(),t.F):v(n);for(var r=a.length;r--;)delete g[l][a[r]];return g()};u[d]=!0,t.exports=Object.create||function(t,e){var r;return null!==t?(y[l]=o(t),r=new y,y[l]=null,r[d]=t):r=g(),void 0===e?r:i.f(r,e)}},6801:function(t,e,r){var n=r(3724),o=r(8686),i=r(4913),a=r(8551),u=r(5397),c=r(1072);e.f=n&&!o?Object.defineProperties:function(t,e){a(t);for(var r,n=u(e),o=c(e),s=o.length,f=0;s>f;)i.f(t,r=o[f++],n[r]);return t}},4913:function(t,e,r){var n=r(3724),o=r(5917),i=r(8686),a=r(8551),u=r(6969),c=TypeError,s=Object.defineProperty,f=Object.getOwnPropertyDescriptor,l="enumerable",p="configurable",d="writable";e.f=n?i?function(t,e,r){if(a(t),e=u(e),a(r),"function"==typeof t&&"prototype"===e&&"value"in r&&d in r&&!r[d]){var n=f(t,e);n&&n[d]&&(t[e]=r.value,r={configurable:p in r?r[p]:n[p],enumerable:l in r?r[l]:n[l],writable:!1})}return s(t,e,r)}:s:function(t,e,r){if(a(t),e=u(e),a(r),o)try{return s(t,e,r)}catch(t){}if("get"in r||"set"in r)throw new c("Accessors not supported");return"value"in r&&(t[e]=r.value),t}},7347:function(t,e,r){var n=r(3724),o=r(9565),i=r(8773),a=r(6980),u=r(5397),c=r(6969),s=r(9297),f=r(5917),l=Object.getOwnPropertyDescriptor;e.f=n?l:function(t,e){if(t=u(t),e=c(e),f)try{return l(t,e)}catch(t){}if(s(t,e))return a(!o(i.f,t,e),t[e])}},298:function(t,e,r){var n=r(4576),o=r(5397),i=r(8480).f,a=r(7680),u="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return u&&"Window"===n(t)?function(t){try{return i(t)}catch(t){return a(u)}}(t):i(o(t))}},8480:function(t,e,r){var n=r(1828),o=r(8727).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return n(t,o)}},3717:function(t,e){e.f=Object.getOwnPropertySymbols},2787:function(t,e,r){var n=r(9297),o=r(4901),i=r(8981),a=r(6119),u=r(2211),c=a("IE_PROTO"),s=Object,f=s.prototype;t.exports=u?s.getPrototypeOf:function(t){var e=i(t);if(n(e,c))return e[c];var r=e.constructor;return o(r)&&e instanceof r?r.prototype:e instanceof s?f:null}},4124:function(t,e,r){var n=r(9039),o=r(34),i=r(4576),a=r(5652),u=Object.isExtensible,c=n((function(){}));t.exports=c||a?function(t){return!!o(t)&&(!a||"ArrayBuffer"!==i(t))&&(!u||u(t))}:u},1625:function(t,e,r){var n=r(9504);t.exports=n({}.isPrototypeOf)},1828:function(t,e,r){var n=r(9504),o=r(9297),i=r(5397),a=r(9617).indexOf,u=r(421),c=n([].push);t.exports=function(t,e){var r,n=i(t),s=0,f=[];for(r in n)!o(u,r)&&o(n,r)&&c(f,r);for(;e.length>s;)o(n,r=e[s++])&&(~a(f,r)||c(f,r));return f}},1072:function(t,e,r){var n=r(1828),o=r(8727);t.exports=Object.keys||function(t){return n(t,o)}},8773:function(t,e){var r={}.propertyIsEnumerable,n=Object.getOwnPropertyDescriptor,o=n&&!r.call({1:2},1);e.f=o?function(t){var e=n(this,t);return!!e&&e.enumerable}:r},2967:function(t,e,r){var n=r(6706),o=r(8551),i=r(3506);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,r={};try{(t=n(Object.prototype,"__proto__","set"))(r,[]),e=r instanceof Array}catch(t){}return function(r,n){return o(r),i(n),e?t(r,n):r.__proto__=n,r}}():void 0)},3179:function(t,e,r){var n=r(2140),o=r(6955);t.exports=n?{}.toString:function(){return"[object "+o(this)+"]"}},4270:function(t,e,r){var n=r(9565),o=r(4901),i=r(34),a=TypeError;t.exports=function(t,e){var r,u;if("string"===e&&o(r=t.toString)&&!i(u=n(r,t)))return u;if(o(r=t.valueOf)&&!i(u=n(r,t)))return u;if("string"!==e&&o(r=t.toString)&&!i(u=n(r,t)))return u;throw new a("Can't convert object to primitive value")}},5031:function(t,e,r){var n=r(7751),o=r(9504),i=r(8480),a=r(3717),u=r(8551),c=o([].concat);t.exports=n("Reflect","ownKeys")||function(t){var e=i.f(u(t)),r=a.f;return r?c(e,r(t)):e}},9167:function(t,e,r){var n=r(4475);t.exports=n},1103:function(t){t.exports=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}}},916:function(t,e,r){var n=r(4475),o=r(550),i=r(4901),a=r(2796),u=r(3706),c=r(8227),s=r(7290),f=r(516),l=r(6395),p=r(7388),d=o&&o.prototype,y=c("species"),h=!1,v=i(n.PromiseRejectionEvent),g=a("Promise",(function(){var t=u(o),e=t!==String(o);if(!e&&66===p)return!0;if(l&&(!d.catch||!d.finally))return!0;if(!p||p<51||!/native code/.test(t)){var r=new o((function(t){t(1)})),n=function(t){t((function(){}),(function(){}))};if((r.constructor={})[y]=n,!(h=r.then((function(){}))instanceof n))return!0}return!e&&(s||f)&&!v}));t.exports={CONSTRUCTOR:g,REJECTION_EVENT:v,SUBCLASSING:h}},550:function(t,e,r){var n=r(4475);t.exports=n.Promise},3438:function(t,e,r){var n=r(8551),o=r(34),i=r(6043);t.exports=function(t,e){if(n(t),o(e)&&e.constructor===t)return e;var r=i.f(t);return(0,r.resolve)(e),r.promise}},537:function(t,e,r){var n=r(550),o=r(4428),i=r(916).CONSTRUCTOR;t.exports=i||!o((function(t){n.all(t).then(void 0,(function(){}))}))},1056:function(t,e,r){var n=r(4913).f;t.exports=function(t,e,r){r in t||n(t,r,{configurable:!0,get:function(){return e[r]},set:function(t){e[r]=t}})}},8265:function(t){var e=function(){this.head=null,this.tail=null};e.prototype={add:function(t){var e={item:t,next:null},r=this.tail;r?r.next=e:this.head=e,this.tail=e},get:function(){var t=this.head;if(t)return null===(this.head=t.next)&&(this.tail=null),t.item}},t.exports=e},6682:function(t,e,r){var n=r(9565),o=r(8551),i=r(4901),a=r(4576),u=r(7323),c=TypeError;t.exports=function(t,e){var r=t.exec;if(i(r)){var s=n(r,t,e);return null!==s&&o(s),s}if("RegExp"===a(t))return n(u,t,e);throw new c("RegExp#exec called on incompatible receiver")}},7323:function(t,e,r){var n,o,i=r(9565),a=r(9504),u=r(655),c=r(7979),s=r(8429),f=r(5745),l=r(2360),p=r(1181).get,d=r(3635),y=r(8814),h=f("native-string-replace",String.prototype.replace),v=RegExp.prototype.exec,g=v,b=a("".charAt),_=a("".indexOf),m=a("".replace),S=a("".slice),O=(o=/b*/g,i(v,n=/a/,"a"),i(v,o,"a"),0!==n.lastIndex||0!==o.lastIndex),w=s.BROKEN_CARET,E=void 0!==/()??/.exec("")[1];(O||E||w||d||y)&&(g=function(t){var e,r,n,o,a,s,f,d=this,y=p(d),P=u(t),A=y.raw;if(A)return A.lastIndex=d.lastIndex,e=i(g,A,P),d.lastIndex=A.lastIndex,e;var j=y.groups,k=w&&d.sticky,L=i(c,d),R=d.source,I=0,T=P;if(k&&(L=m(L,"y",""),-1===_(L,"g")&&(L+="g"),T=S(P,d.lastIndex),d.lastIndex>0&&(!d.multiline||d.multiline&&"\n"!==b(P,d.lastIndex-1))&&(R="(?: "+R+")",T=" "+T,I++),r=new RegExp("^(?:"+R+")",L)),E&&(r=new RegExp("^"+R+"$(?!\\s)",L)),O&&(n=d.lastIndex),o=i(v,k?r:d,T),k?o?(o.input=S(o.input,I),o[0]=S(o[0],I),o.index=d.lastIndex,d.lastIndex+=o[0].length):d.lastIndex=0:O&&o&&(d.lastIndex=d.global?o.index+o[0].length:n),E&&o&&o.length>1&&i(h,o[0],r,(function(){for(a=1;a<arguments.length-2;a++)void 0===arguments[a]&&(o[a]=void 0)})),o&&j)for(o.groups=s=l(null),a=0;a<j.length;a++)s[(f=j[a])[0]]=o[f[1]];return o}),t.exports=g},7979:function(t,e,r){var n=r(8551);t.exports=function(){var t=n(this),e="";return t.hasIndices&&(e+="d"),t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.unicodeSets&&(e+="v"),t.sticky&&(e+="y"),e}},1034:function(t,e,r){var n=r(9565),o=r(9297),i=r(1625),a=r(7979),u=RegExp.prototype;t.exports=function(t){var e=t.flags;return void 0!==e||"flags"in u||o(t,"flags")||!i(u,t)?e:n(a,t)}},8429:function(t,e,r){var n=r(9039),o=r(4475).RegExp,i=n((function(){var t=o("a","y");return t.lastIndex=2,null!==t.exec("abcd")})),a=i||n((function(){return!o("a","y").sticky})),u=i||n((function(){var t=o("^r","gy");return t.lastIndex=2,null!==t.exec("str")}));t.exports={BROKEN_CARET:u,MISSED_STICKY:a,UNSUPPORTED_Y:i}},3635:function(t,e,r){var n=r(9039),o=r(4475).RegExp;t.exports=n((function(){var t=o(".","s");return!(t.dotAll&&t.test("\n")&&"s"===t.flags)}))},8814:function(t,e,r){var n=r(9039),o=r(4475).RegExp;t.exports=n((function(){var t=o("(?<a>b)","g");return"b"!==t.exec("b").groups.a||"bc"!=="b".replace(t,"$<a>c")}))},7750:function(t,e,r){var n=r(4117),o=TypeError;t.exports=function(t){if(n(t))throw new o("Can't call method on "+t);return t}},3389:function(t,e,r){var n=r(4475),o=r(3724),i=Object.getOwnPropertyDescriptor;t.exports=function(t){if(!o)return n[t];var e=i(n,t);return e&&e.value}},3470:function(t){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}},9472:function(t,e,r){var n,o=r(4475),i=r(8745),a=r(4901),u=r(6763),c=r(9392),s=r(7680),f=r(2812),l=o.Function,p=/MSIE .\./.test(c)||u&&((n=o.Bun.version.split(".")).length<3||"0"===n[0]&&(n[1]<3||"3"===n[1]&&"0"===n[2]));t.exports=function(t,e){var r=e?2:1;return p?function(n,o){var u=f(arguments.length,1)>r,c=a(n)?n:l(n),p=u?s(arguments,r):[],d=u?function(){i(c,this,p)}:c;return e?t(d,o):t(d)}:t}},7633:function(t,e,r){var n=r(7751),o=r(2106),i=r(8227),a=r(3724),u=i("species");t.exports=function(t){var e=n(t);a&&e&&!e[u]&&o(e,u,{configurable:!0,get:function(){return this}})}},687:function(t,e,r){var n=r(4913).f,o=r(9297),i=r(8227)("toStringTag");t.exports=function(t,e,r){t&&!r&&(t=t.prototype),t&&!o(t,i)&&n(t,i,{configurable:!0,value:e})}},6119:function(t,e,r){var n=r(5745),o=r(3392),i=n("keys");t.exports=function(t){return i[t]||(i[t]=o(t))}},7629:function(t,e,r){var n=r(6395),o=r(4475),i=r(9433),a="__core-js_shared__",u=t.exports=o[a]||i(a,{});(u.versions||(u.versions=[])).push({version:"3.36.0",mode:n?"pure":"global",copyright:"© 2014-2024 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.36.0/LICENSE",source:"https://github.com/zloirock/core-js"})},5745:function(t,e,r){var n=r(7629);t.exports=function(t,e){return n[t]||(n[t]=e||{})}},2293:function(t,e,r){var n=r(8551),o=r(5548),i=r(4117),a=r(8227)("species");t.exports=function(t,e){var r,u=n(t).constructor;return void 0===u||i(r=n(u)[a])?e:o(r)}},8183:function(t,e,r){var n=r(9504),o=r(1291),i=r(655),a=r(7750),u=n("".charAt),c=n("".charCodeAt),s=n("".slice),f=function(t){return function(e,r){var n,f,l=i(a(e)),p=o(r),d=l.length;return p<0||p>=d?t?"":void 0:(n=c(l,p))<55296||n>56319||p+1===d||(f=c(l,p+1))<56320||f>57343?t?u(l,p):n:t?s(l,p,p+2):f-56320+(n-55296<<10)+65536}};t.exports={codeAt:f(!1),charAt:f(!0)}},706:function(t,e,r){var n=r(350).PROPER,o=r(9039),i=r(7452);t.exports=function(t){return o((function(){return!!i[t]()||"​᠎"!=="​᠎"[t]()||n&&i[t].name!==t}))}},3802:function(t,e,r){var n=r(9504),o=r(7750),i=r(655),a=r(7452),u=n("".replace),c=RegExp("^["+a+"]+"),s=RegExp("(^|[^"+a+"])["+a+"]+$"),f=function(t){return function(e){var r=i(o(e));return 1&t&&(r=u(r,c,"")),2&t&&(r=u(r,s,"$1")),r}};t.exports={start:f(1),end:f(2),trim:f(3)}},4495:function(t,e,r){var n=r(7388),o=r(9039),i=r(4475).String;t.exports=!!Object.getOwnPropertySymbols&&!o((function(){var t=Symbol("symbol detection");return!i(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&n&&n<41}))},8242:function(t,e,r){var n=r(9565),o=r(7751),i=r(8227),a=r(6840);t.exports=function(){var t=o("Symbol"),e=t&&t.prototype,r=e&&e.valueOf,u=i("toPrimitive");e&&!e[u]&&a(e,u,(function(t){return n(r,this)}),{arity:1})}},1296:function(t,e,r){var n=r(4495);t.exports=n&&!!Symbol.for&&!!Symbol.keyFor},9225:function(t,e,r){var n,o,i,a,u=r(4475),c=r(8745),s=r(6080),f=r(4901),l=r(9297),p=r(9039),d=r(397),y=r(7680),h=r(4055),v=r(2812),g=r(8119),b=r(9088),_=u.setImmediate,m=u.clearImmediate,S=u.process,O=u.Dispatch,w=u.Function,E=u.MessageChannel,P=u.String,A=0,j={},k="onreadystatechange";p((function(){n=u.location}));var L=function(t){if(l(j,t)){var e=j[t];delete j[t],e()}},R=function(t){return function(){L(t)}},I=function(t){L(t.data)},T=function(t){u.postMessage(P(t),n.protocol+"//"+n.host)};_&&m||(_=function(t){v(arguments.length,1);var e=f(t)?t:w(t),r=y(arguments,1);return j[++A]=function(){c(e,void 0,r)},o(A),A},m=function(t){delete j[t]},b?o=function(t){S.nextTick(R(t))}:O&&O.now?o=function(t){O.now(R(t))}:E&&!g?(a=(i=new E).port2,i.port1.onmessage=I,o=s(a.postMessage,a)):u.addEventListener&&f(u.postMessage)&&!u.importScripts&&n&&"file:"!==n.protocol&&!p(T)?(o=T,u.addEventListener("message",I,!1)):o=k in h("script")?function(t){d.appendChild(h("script"))[k]=function(){d.removeChild(this),L(t)}}:function(t){setTimeout(R(t),0)}),t.exports={set:_,clear:m}},1240:function(t,e,r){var n=r(9504);t.exports=n(1..valueOf)},5610:function(t,e,r){var n=r(1291),o=Math.max,i=Math.min;t.exports=function(t,e){var r=n(t);return r<0?o(r+e,0):i(r,e)}},5397:function(t,e,r){var n=r(7055),o=r(7750);t.exports=function(t){return n(o(t))}},1291:function(t,e,r){var n=r(741);t.exports=function(t){var e=+t;return e!=e||0===e?0:n(e)}},8014:function(t,e,r){var n=r(1291),o=Math.min;t.exports=function(t){var e=n(t);return e>0?o(e,9007199254740991):0}},8981:function(t,e,r){var n=r(7750),o=Object;t.exports=function(t){return o(n(t))}},2777:function(t,e,r){var n=r(9565),o=r(34),i=r(757),a=r(5966),u=r(4270),c=r(8227),s=TypeError,f=c("toPrimitive");t.exports=function(t,e){if(!o(t)||i(t))return t;var r,c=a(t,f);if(c){if(void 0===e&&(e="default"),r=n(c,t,e),!o(r)||i(r))return r;throw new s("Can't convert object to primitive value")}return void 0===e&&(e="number"),u(t,e)}},6969:function(t,e,r){var n=r(2777),o=r(757);t.exports=function(t){var e=n(t,"string");return o(e)?e:e+""}},2140:function(t,e,r){var n={};n[r(8227)("toStringTag")]="z",t.exports="[object z]"===String(n)},655:function(t,e,r){var n=r(6955),o=String;t.exports=function(t){if("Symbol"===n(t))throw new TypeError("Cannot convert a Symbol value to a string");return o(t)}},6823:function(t){var e=String;t.exports=function(t){try{return e(t)}catch(t){return"Object"}}},3392:function(t,e,r){var n=r(9504),o=0,i=Math.random(),a=n(1..toString);t.exports=function(t){return"Symbol("+(void 0===t?"":t)+")_"+a(++o+i,36)}},7040:function(t,e,r){var n=r(4495);t.exports=n&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},8686:function(t,e,r){var n=r(3724),o=r(9039);t.exports=n&&o((function(){return 42!==Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},2812:function(t){var e=TypeError;t.exports=function(t,r){if(t<r)throw new e("Not enough arguments");return t}},8622:function(t,e,r){var n=r(4475),o=r(4901),i=n.WeakMap;t.exports=o(i)&&/native code/.test(String(i))},511:function(t,e,r){var n=r(9167),o=r(9297),i=r(1951),a=r(4913).f;t.exports=function(t){var e=n.Symbol||(n.Symbol={});o(e,t)||a(e,t,{value:i.f(t)})}},1951:function(t,e,r){var n=r(8227);e.f=n},8227:function(t,e,r){var n=r(4475),o=r(5745),i=r(9297),a=r(3392),u=r(4495),c=r(7040),s=n.Symbol,f=o("wks"),l=c?s.for||s:s&&s.withoutSetter||a;t.exports=function(t){return i(f,t)||(f[t]=u&&i(s,t)?s[t]:l("Symbol."+t)),f[t]}},7452:function(t){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},8706:function(t,e,r){var n=r(6518),o=r(9039),i=r(4376),a=r(34),u=r(8981),c=r(6198),s=r(6837),f=r(4659),l=r(1469),p=r(597),d=r(8227),y=r(7388),h=d("isConcatSpreadable"),v=y>=51||!o((function(){var t=[];return t[h]=!1,t.concat()[0]!==t})),g=function(t){if(!a(t))return!1;var e=t[h];return void 0!==e?!!e:i(t)};n({target:"Array",proto:!0,arity:1,forced:!v||!p("concat")},{concat:function(t){var e,r,n,o,i,a=u(this),p=l(a,0),d=0;for(e=-1,n=arguments.length;e<n;e++)if(g(i=-1===e?a:arguments[e]))for(o=c(i),s(d+o),r=0;r<o;r++,d++)r in i&&f(p,d,i[r]);else s(d+1),f(p,d++,i);return p.length=d,p}})},113:function(t,e,r){var n=r(6518),o=r(9213).find,i=r(6469),a="find",u=!0;a in[]&&Array(1)[a]((function(){u=!1})),n({target:"Array",proto:!0,forced:u},{find:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}}),i(a)},1629:function(t,e,r){var n=r(6518),o=r(235);n({target:"Array",proto:!0,forced:[].forEach!==o},{forEach:o})},3418:function(t,e,r){var n=r(6518),o=r(7916);n({target:"Array",stat:!0,forced:!r(4428)((function(t){Array.from(t)}))},{from:o})},4423:function(t,e,r){var n=r(6518),o=r(9617).includes,i=r(9039),a=r(6469);n({target:"Array",proto:!0,forced:i((function(){return!Array(1).includes()}))},{includes:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}}),a("includes")},5276:function(t,e,r){var n=r(6518),o=r(7476),i=r(9617).indexOf,a=r(4598),u=o([].indexOf),c=!!u&&1/u([1],1,-0)<0;n({target:"Array",proto:!0,forced:c||!a("indexOf")},{indexOf:function(t){var e=arguments.length>1?arguments[1]:void 0;return c?u(this,t,e)||0:i(this,t,e)}})},4346:function(t,e,r){r(6518)({target:"Array",stat:!0},{isArray:r(4376)})},3792:function(t,e,r){var n=r(5397),o=r(6469),i=r(6269),a=r(1181),u=r(4913).f,c=r(1088),s=r(2529),f=r(6395),l=r(3724),p="Array Iterator",d=a.set,y=a.getterFor(p);t.exports=c(Array,"Array",(function(t,e){d(this,{type:p,target:n(t),index:0,kind:e})}),(function(){var t=y(this),e=t.target,r=t.index++;if(!e||r>=e.length)return t.target=void 0,s(void 0,!0);switch(t.kind){case"keys":return s(r,!1);case"values":return s(e[r],!1)}return s([r,e[r]],!1)}),"values");var h=i.Arguments=i.Array;if(o("keys"),o("values"),o("entries"),!f&&l&&"values"!==h.name)try{u(h,"name",{value:"values"})}catch(t){}},4782:function(t,e,r){var n=r(6518),o=r(4376),i=r(3517),a=r(34),u=r(5610),c=r(6198),s=r(5397),f=r(4659),l=r(8227),p=r(597),d=r(7680),y=p("slice"),h=l("species"),v=Array,g=Math.max;n({target:"Array",proto:!0,forced:!y},{slice:function(t,e){var r,n,l,p=s(this),y=c(p),b=u(t,y),_=u(void 0===e?y:e,y);if(o(p)&&(r=p.constructor,(i(r)&&(r===v||o(r.prototype))||a(r)&&null===(r=r[h]))&&(r=void 0),r===v||void 0===r))return d(p,b,_);for(n=new(void 0===r?v:r)(g(_-b,0)),l=0;b<_;b++,l++)b in p&&f(n,l,p[b]);return n.length=l,n}})},6910:function(t,e,r){var n=r(6518),o=r(9504),i=r(9306),a=r(8981),u=r(6198),c=r(4606),s=r(655),f=r(9039),l=r(4488),p=r(4598),d=r(8834),y=r(3202),h=r(7388),v=r(9160),g=[],b=o(g.sort),_=o(g.push),m=f((function(){g.sort(void 0)})),S=f((function(){g.sort(null)})),O=p("sort"),w=!f((function(){if(h)return h<70;if(!(d&&d>3)){if(y)return!0;if(v)return v<603;var t,e,r,n,o="";for(t=65;t<76;t++){switch(e=String.fromCharCode(t),t){case 66:case 69:case 70:case 72:r=3;break;case 68:case 71:r=4;break;default:r=2}for(n=0;n<47;n++)g.push({k:e+n,v:r})}for(g.sort((function(t,e){return e.v-t.v})),n=0;n<g.length;n++)e=g[n].k.charAt(0),o.charAt(o.length-1)!==e&&(o+=e);return"DGBEFHACIJK"!==o}}));n({target:"Array",proto:!0,forced:m||!S||!O||!w},{sort:function(t){void 0!==t&&i(t);var e=a(this);if(w)return void 0===t?b(e):b(e,t);var r,n,o=[],f=u(e);for(n=0;n<f;n++)n in e&&_(o,e[n]);for(l(o,function(t){return function(e,r){return void 0===r?-1:void 0===e?1:void 0!==t?+t(e,r)||0:s(e)>s(r)?1:-1}}(t)),r=u(o),n=0;n<r;)e[n]=o[n++];for(;n<f;)c(e,n++);return e}})},9089:function(t,e,r){var n=r(6518),o=r(9504),i=Date,a=o(i.prototype.getTime);n({target:"Date",stat:!0},{now:function(){return a(new i)}})},9572:function(t,e,r){var n=r(9297),o=r(6840),i=r(3640),a=r(8227)("toPrimitive"),u=Date.prototype;n(u,a)||o(u,a,i)},3288:function(t,e,r){var n=r(9504),o=r(6840),i=Date.prototype,a="Invalid Date",u="toString",c=n(i[u]),s=n(i.getTime);String(new Date(NaN))!==a&&o(i,u,(function(){var t=s(this);return t==t?c(this):a}))},4170:function(t,e,r){var n=r(6518),o=r(566);n({target:"Function",proto:!0,forced:Function.bind!==o},{bind:o})},2010:function(t,e,r){var n=r(3724),o=r(350).EXISTS,i=r(9504),a=r(2106),u=Function.prototype,c=i(u.toString),s=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,f=i(s.exec);n&&!o&&a(u,"name",{configurable:!0,get:function(){try{return f(s,c(this))[1]}catch(t){return""}}})},5081:function(t,e,r){var n=r(6518),o=r(4475);n({global:!0,forced:o.globalThis!==o},{globalThis:o})},3110:function(t,e,r){var n=r(6518),o=r(7751),i=r(8745),a=r(9565),u=r(9504),c=r(9039),s=r(4901),f=r(757),l=r(7680),p=r(6933),d=r(4495),y=String,h=o("JSON","stringify"),v=u(/./.exec),g=u("".charAt),b=u("".charCodeAt),_=u("".replace),m=u(1..toString),S=/[\uD800-\uDFFF]/g,O=/^[\uD800-\uDBFF]$/,w=/^[\uDC00-\uDFFF]$/,E=!d||c((function(){var t=o("Symbol")("stringify detection");return"[null]"!==h([t])||"{}"!==h({a:t})||"{}"!==h(Object(t))})),P=c((function(){return'"\\udf06\\ud834"'!==h("\udf06\ud834")||'"\\udead"'!==h("\udead")})),A=function(t,e){var r=l(arguments),n=p(e);if(s(n)||void 0!==t&&!f(t))return r[1]=function(t,e){if(s(n)&&(e=a(n,this,y(t),e)),!f(e))return e},i(h,null,r)},j=function(t,e,r){var n=g(r,e-1),o=g(r,e+1);return v(O,t)&&!v(w,o)||v(w,t)&&!v(O,n)?"\\u"+m(b(t,0),16):t};h&&n({target:"JSON",stat:!0,arity:3,forced:E||P},{stringify:function(t,e,r){var n=l(arguments),o=i(E?A:h,null,n);return P&&"string"==typeof o?_(o,S,j):o}})},8523:function(t,e,r){r(6468)("Map",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),r(6938))},6033:function(t,e,r){r(8523)},2892:function(t,e,r){var n=r(6518),o=r(6395),i=r(3724),a=r(4475),u=r(9167),c=r(9504),s=r(2796),f=r(9297),l=r(3167),p=r(1625),d=r(757),y=r(2777),h=r(9039),v=r(8480).f,g=r(7347).f,b=r(4913).f,_=r(1240),m=r(3802).trim,S="Number",O=a[S],w=u[S],E=O.prototype,P=a.TypeError,A=c("".slice),j=c("".charCodeAt),k=s(S,!O(" 0o1")||!O("0b1")||O("+0x1")),L=function t(e){var r,n=arguments.length<1?0:O(function(t){var e=y(t,"number");return"bigint"==typeof e?e:function(t){var e,r,n,o,i,a,u,c,s=y(t,"number");if(d(s))throw new P("Cannot convert a Symbol value to a number");if("string"==typeof s&&s.length>2)if(s=m(s),43===(e=j(s,0))||45===e){if(88===(r=j(s,2))||120===r)return NaN}else if(48===e){switch(j(s,1)){case 66:case 98:n=2,o=49;break;case 79:case 111:n=8,o=55;break;default:return+s}for(a=(i=A(s,2)).length,u=0;u<a;u++)if((c=j(i,u))<48||c>o)return NaN;return parseInt(i,n)}return+s}(e)}(e));return p(E,r=this)&&h((function(){_(r)}))?l(Object(n),this,t):n};L.prototype=E,k&&!o&&(E.constructor=L),n({global:!0,constructor:!0,wrap:!0,forced:k},{Number:L});var R=function(t,e){for(var r,n=i?v(e):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),o=0;n.length>o;o++)f(e,r=n[o])&&!f(t,r)&&b(t,r,g(e,r))};o&&w&&R(u[S],w),(k||o)&&R(u[S],O)},9085:function(t,e,r){var n=r(6518),o=r(4213);n({target:"Object",stat:!0,arity:2,forced:Object.assign!==o},{assign:o})},9904:function(t,e,r){r(6518)({target:"Object",stat:!0,sham:!r(3724)},{create:r(2360)})},4185:function(t,e,r){var n=r(6518),o=r(3724),i=r(4913).f;n({target:"Object",stat:!0,forced:Object.defineProperty!==i,sham:!o},{defineProperty:i})},3921:function(t,e,r){var n=r(6518),o=r(2652),i=r(4659);n({target:"Object",stat:!0},{fromEntries:function(t){var e={};return o(t,(function(t,r){i(e,t,r)}),{AS_ENTRIES:!0}),e}})},3851:function(t,e,r){var n=r(6518),o=r(9039),i=r(5397),a=r(7347).f,u=r(3724);n({target:"Object",stat:!0,forced:!u||o((function(){a(1)})),sham:!u},{getOwnPropertyDescriptor:function(t,e){return a(i(t),e)}})},9773:function(t,e,r){var n=r(6518),o=r(4495),i=r(9039),a=r(3717),u=r(8981);n({target:"Object",stat:!0,forced:!o||i((function(){a.f(1)}))},{getOwnPropertySymbols:function(t){var e=a.f;return e?e(u(t)):[]}})},875:function(t,e,r){var n=r(6518),o=r(9039),i=r(8981),a=r(2787),u=r(2211);n({target:"Object",stat:!0,forced:o((function(){a(1)})),sham:!u},{getPrototypeOf:function(t){return a(i(t))}})},9432:function(t,e,r){var n=r(6518),o=r(8981),i=r(1072);n({target:"Object",stat:!0,forced:r(9039)((function(){i(1)}))},{keys:function(t){return i(o(t))}})},287:function(t,e,r){r(6518)({target:"Object",stat:!0},{setPrototypeOf:r(2967)})},6099:function(t,e,r){var n=r(2140),o=r(6840),i=r(3179);n||o(Object.prototype,"toString",i,{unsafe:!0})},8940:function(t,e,r){var n=r(6518),o=r(2703);n({global:!0,forced:parseInt!==o},{parseInt:o})},6499:function(t,e,r){var n=r(6518),o=r(9565),i=r(9306),a=r(6043),u=r(1103),c=r(2652);n({target:"Promise",stat:!0,forced:r(537)},{all:function(t){var e=this,r=a.f(e),n=r.resolve,s=r.reject,f=u((function(){var r=i(e.resolve),a=[],u=0,f=1;c(t,(function(t){var i=u++,c=!1;f++,o(r,e,t).then((function(t){c||(c=!0,a[i]=t,--f||n(a))}),s)})),--f||n(a)}));return f.error&&s(f.value),r.promise}})},2003:function(t,e,r){var n=r(6518),o=r(6395),i=r(916).CONSTRUCTOR,a=r(550),u=r(7751),c=r(4901),s=r(6840),f=a&&a.prototype;if(n({target:"Promise",proto:!0,forced:i,real:!0},{catch:function(t){return this.then(void 0,t)}}),!o&&c(a)){var l=u("Promise").prototype.catch;f.catch!==l&&s(f,"catch",l,{unsafe:!0})}},436:function(t,e,r){var n,o,i,a=r(6518),u=r(6395),c=r(9088),s=r(4475),f=r(9565),l=r(6840),p=r(2967),d=r(687),y=r(7633),h=r(9306),v=r(4901),g=r(34),b=r(679),_=r(2293),m=r(9225).set,S=r(1955),O=r(3138),w=r(1103),E=r(8265),P=r(1181),A=r(550),j=r(916),k=r(6043),L="Promise",R=j.CONSTRUCTOR,I=j.REJECTION_EVENT,T=j.SUBCLASSING,x=P.getterFor(L),C=P.set,D=A&&A.prototype,N=A,B=D,M=s.TypeError,F=s.document,V=s.process,U=k.f,K=U,J=!!(F&&F.createEvent&&s.dispatchEvent),G="unhandledrejection",Y=function(t){var e;return!(!g(t)||!v(e=t.then))&&e},q=function(t,e){var r,n,o,i=e.value,a=1===e.state,u=a?t.ok:t.fail,c=t.resolve,s=t.reject,l=t.domain;try{u?(a||(2===e.rejection&&$(e),e.rejection=1),!0===u?r=i:(l&&l.enter(),r=u(i),l&&(l.exit(),o=!0)),r===t.promise?s(new M("Promise-chain cycle")):(n=Y(r))?f(n,r,c,s):c(r)):s(i)}catch(t){l&&!o&&l.exit(),s(t)}},z=function(t,e){t.notified||(t.notified=!0,S((function(){for(var r,n=t.reactions;r=n.get();)q(r,t);t.notified=!1,e&&!t.rejection&&W(t)})))},H=function(t,e,r){var n,o;J?((n=F.createEvent("Event")).promise=e,n.reason=r,n.initEvent(t,!1,!0),s.dispatchEvent(n)):n={promise:e,reason:r},!I&&(o=s["on"+t])?o(n):t===G&&O("Unhandled promise rejection",r)},W=function(t){f(m,s,(function(){var e,r=t.facade,n=t.value;if(X(t)&&(e=w((function(){c?V.emit("unhandledRejection",n,r):H(G,r,n)})),t.rejection=c||X(t)?2:1,e.error))throw e.value}))},X=function(t){return 1!==t.rejection&&!t.parent},$=function(t){f(m,s,(function(){var e=t.facade;c?V.emit("rejectionHandled",e):H("rejectionhandled",e,t.value)}))},Q=function(t,e,r){return function(n){t(e,n,r)}},Z=function(t,e,r){t.done||(t.done=!0,r&&(t=r),t.value=e,t.state=2,z(t,!0))},tt=function t(e,r,n){if(!e.done){e.done=!0,n&&(e=n);try{if(e.facade===r)throw new M("Promise can't be resolved itself");var o=Y(r);o?S((function(){var n={done:!1};try{f(o,r,Q(t,n,e),Q(Z,n,e))}catch(t){Z(n,t,e)}})):(e.value=r,e.state=1,z(e,!1))}catch(r){Z({done:!1},r,e)}}};if(R&&(B=(N=function(t){b(this,B),h(t),f(n,this);var e=x(this);try{t(Q(tt,e),Q(Z,e))}catch(t){Z(e,t)}}).prototype,(n=function(t){C(this,{type:L,done:!1,notified:!1,parent:!1,reactions:new E,rejection:!1,state:0,value:void 0})}).prototype=l(B,"then",(function(t,e){var r=x(this),n=U(_(this,N));return r.parent=!0,n.ok=!v(t)||t,n.fail=v(e)&&e,n.domain=c?V.domain:void 0,0===r.state?r.reactions.add(n):S((function(){q(n,r)})),n.promise})),o=function(){var t=new n,e=x(t);this.promise=t,this.resolve=Q(tt,e),this.reject=Q(Z,e)},k.f=U=function(t){return t===N||void 0===t?new o(t):K(t)},!u&&v(A)&&D!==Object.prototype)){i=D.then,T||l(D,"then",(function(t,e){var r=this;return new N((function(t,e){f(i,r,t,e)})).then(t,e)}),{unsafe:!0});try{delete D.constructor}catch(t){}p&&p(D,B)}a({global:!0,constructor:!0,wrap:!0,forced:R},{Promise:N}),d(N,L,!1,!0),y(L)},3362:function(t,e,r){r(436),r(6499),r(2003),r(7743),r(1481),r(280)},7743:function(t,e,r){var n=r(6518),o=r(9565),i=r(9306),a=r(6043),u=r(1103),c=r(2652);n({target:"Promise",stat:!0,forced:r(537)},{race:function(t){var e=this,r=a.f(e),n=r.reject,s=u((function(){var a=i(e.resolve);c(t,(function(t){o(a,e,t).then(r.resolve,n)}))}));return s.error&&n(s.value),r.promise}})},1481:function(t,e,r){var n=r(6518),o=r(6043);n({target:"Promise",stat:!0,forced:r(916).CONSTRUCTOR},{reject:function(t){var e=o.f(this);return(0,e.reject)(t),e.promise}})},280:function(t,e,r){var n=r(6518),o=r(7751),i=r(6395),a=r(550),u=r(916).CONSTRUCTOR,c=r(3438),s=o("Promise"),f=i&&!u;n({target:"Promise",stat:!0,forced:i||u},{resolve:function(t){return c(f&&this===s?a:this,t)}})},825:function(t,e,r){var n=r(6518),o=r(7751),i=r(8745),a=r(566),u=r(5548),c=r(8551),s=r(34),f=r(2360),l=r(9039),p=o("Reflect","construct"),d=Object.prototype,y=[].push,h=l((function(){function t(){}return!(p((function(){}),[],t)instanceof t)})),v=!l((function(){p((function(){}))})),g=h||v;n({target:"Reflect",stat:!0,forced:g,sham:g},{construct:function(t,e){u(t),c(e);var r=arguments.length<3?t:u(arguments[2]);if(v&&!h)return p(t,e,r);if(t===r){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var n=[null];return i(y,n,e),new(i(a,t,n))}var o=r.prototype,l=f(s(o)?o:d),g=i(t,l,e);return s(g)?g:l}})},888:function(t,e,r){var n=r(6518),o=r(9565),i=r(34),a=r(8551),u=r(6575),c=r(7347),s=r(2787);n({target:"Reflect",stat:!0},{get:function t(e,r){var n,f,l=arguments.length<3?e:arguments[2];return a(e)===l?e[r]:(n=c.f(e,r))?u(n)?n.value:void 0===n.get?void 0:o(n.get,l):i(f=s(e))?t(f,r,l):void 0}})},4864:function(t,e,r){var n=r(3724),o=r(4475),i=r(9504),a=r(2796),u=r(3167),c=r(6699),s=r(2360),f=r(8480).f,l=r(1625),p=r(788),d=r(655),y=r(1034),h=r(8429),v=r(1056),g=r(6840),b=r(9039),_=r(9297),m=r(1181).enforce,S=r(7633),O=r(8227),w=r(3635),E=r(8814),P=O("match"),A=o.RegExp,j=A.prototype,k=o.SyntaxError,L=i(j.exec),R=i("".charAt),I=i("".replace),T=i("".indexOf),x=i("".slice),C=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,D=/a/g,N=/a/g,B=new A(D)!==D,M=h.MISSED_STICKY,F=h.UNSUPPORTED_Y;if(a("RegExp",n&&(!B||M||w||E||b((function(){return N[P]=!1,A(D)!==D||A(N)===N||"/a/i"!==String(A(D,"i"))}))))){for(var V=function t(e,r){var n,o,i,a,f,h,v=l(j,this),g=p(e),b=void 0===r,S=[],O=e;if(!v&&g&&b&&e.constructor===t)return e;if((g||l(j,e))&&(e=e.source,b&&(r=y(O))),e=void 0===e?"":d(e),r=void 0===r?"":d(r),O=e,w&&"dotAll"in D&&(o=!!r&&T(r,"s")>-1)&&(r=I(r,/s/g,"")),n=r,M&&"sticky"in D&&(i=!!r&&T(r,"y")>-1)&&F&&(r=I(r,/y/g,"")),E&&(e=(a=function(t){for(var e,r=t.length,n=0,o="",i=[],a=s(null),u=!1,c=!1,f=0,l="";n<=r;n++){if("\\"===(e=R(t,n)))e+=R(t,++n);else if("]"===e)u=!1;else if(!u)switch(!0){case"["===e:u=!0;break;case"("===e:L(C,x(t,n+1))&&(n+=2,c=!0),o+=e,f++;continue;case">"===e&&c:if(""===l||_(a,l))throw new k("Invalid capture group name");a[l]=!0,i[i.length]=[l,f],c=!1,l="";continue}c?l+=e:o+=e}return[o,i]}(e))[0],S=a[1]),f=u(A(e,r),v?this:j,t),(o||i||S.length)&&(h=m(f),o&&(h.dotAll=!0,h.raw=t(function(t){for(var e,r=t.length,n=0,o="",i=!1;n<=r;n++)"\\"!==(e=R(t,n))?i||"."!==e?("["===e?i=!0:"]"===e&&(i=!1),o+=e):o+="[\\s\\S]":o+=e+R(t,++n);return o}(e),n)),i&&(h.sticky=!0),S.length&&(h.groups=S)),e!==O)try{c(f,"source",""===O?"(?:)":O)}catch(e){}return f},U=f(A),K=0;U.length>K;)v(V,A,U[K++]);j.constructor=V,V.prototype=j,g(o,"RegExp",V,{constructor:!0})}S("RegExp")},7495:function(t,e,r){var n=r(6518),o=r(7323);n({target:"RegExp",proto:!0,forced:/./.exec!==o},{exec:o})},8781:function(t,e,r){var n=r(350).PROPER,o=r(6840),i=r(8551),a=r(655),u=r(9039),c=r(1034),s="toString",f=RegExp.prototype,l=f[s],p=u((function(){return"/a/b"!==l.call({source:"a",flags:"b"})})),d=n&&l.name!==s;(p||d)&&o(f,s,(function(){var t=i(this);return"/"+a(t.source)+"/"+a(c(t))}),{unsafe:!0})},1699:function(t,e,r){var n=r(6518),o=r(9504),i=r(5749),a=r(7750),u=r(655),c=r(1436),s=o("".indexOf);n({target:"String",proto:!0,forced:!c("includes")},{includes:function(t){return!!~s(u(a(this)),u(i(t)),arguments.length>1?arguments[1]:void 0)}})},7764:function(t,e,r){var n=r(8183).charAt,o=r(655),i=r(1181),a=r(1088),u=r(2529),c="String Iterator",s=i.set,f=i.getterFor(c);a(String,"String",(function(t){s(this,{type:c,string:o(t),index:0})}),(function(){var t,e=f(this),r=e.string,o=e.index;return o>=r.length?u(void 0,!0):(t=n(r,o),e.index+=t.length,u(t,!1))}))},1761:function(t,e,r){var n=r(9565),o=r(9228),i=r(8551),a=r(4117),u=r(8014),c=r(655),s=r(7750),f=r(5966),l=r(7829),p=r(6682);o("match",(function(t,e,r){return[function(e){var r=s(this),o=a(e)?void 0:f(e,t);return o?n(o,e,r):new RegExp(e)[t](c(r))},function(t){var n=i(this),o=c(t),a=r(e,n,o);if(a.done)return a.value;if(!n.global)return p(n,o);var s=n.unicode;n.lastIndex=0;for(var f,d=[],y=0;null!==(f=p(n,o));){var h=c(f[0]);d[y]=h,""===h&&(n.lastIndex=l(o,u(n.lastIndex),s)),y++}return 0===y?null:d}]}))},5746:function(t,e,r){var n=r(9565),o=r(9228),i=r(8551),a=r(4117),u=r(7750),c=r(3470),s=r(655),f=r(5966),l=r(6682);o("search",(function(t,e,r){return[function(e){var r=u(this),o=a(e)?void 0:f(e,t);return o?n(o,e,r):new RegExp(e)[t](s(r))},function(t){var n=i(this),o=s(t),a=r(e,n,o);if(a.done)return a.value;var u=n.lastIndex;c(u,0)||(n.lastIndex=0);var f=l(n,o);return c(n.lastIndex,u)||(n.lastIndex=u),null===f?-1:f.index}]}))},744:function(t,e,r){var n=r(9565),o=r(9504),i=r(9228),a=r(8551),u=r(4117),c=r(7750),s=r(2293),f=r(7829),l=r(8014),p=r(655),d=r(5966),y=r(6682),h=r(8429),v=r(9039),g=h.UNSUPPORTED_Y,b=Math.min,_=o([].push),m=o("".slice),S=!v((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var r="ab".split(t);return 2!==r.length||"a"!==r[0]||"b"!==r[1]})),O="c"==="abbc".split(/(b)*/)[1]||4!=="test".split(/(?:)/,-1).length||2!=="ab".split(/(?:ab)*/).length||4!==".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length;i("split",(function(t,e,r){var o="0".split(void 0,0).length?function(t,r){return void 0===t&&0===r?[]:n(e,this,t,r)}:e;return[function(e,r){var i=c(this),a=u(e)?void 0:d(e,t);return a?n(a,e,i,r):n(o,p(i),e,r)},function(t,n){var i=a(this),u=p(t);if(!O){var c=r(o,i,u,n,o!==e);if(c.done)return c.value}var d=s(i,RegExp),h=i.unicode,v=(i.ignoreCase?"i":"")+(i.multiline?"m":"")+(i.unicode?"u":"")+(g?"g":"y"),S=new d(g?"^(?:"+i.source+")":i,v),w=void 0===n?4294967295:n>>>0;if(0===w)return[];if(0===u.length)return null===y(S,u)?[u]:[];for(var E=0,P=0,A=[];P<u.length;){S.lastIndex=g?0:P;var j,k=y(S,g?m(u,P):u);if(null===k||(j=b(l(S.lastIndex+(g?P:0)),u.length))===E)P=f(u,P,h);else{if(_(A,m(u,E,P)),A.length===w)return A;for(var L=1;L<=k.length-1;L++)if(_(A,k[L]),A.length===w)return A;P=E=j}}return _(A,m(u,E)),A}]}),O||!S,g)},2762:function(t,e,r){var n=r(6518),o=r(3802).trim;n({target:"String",proto:!0,forced:r(706)("trim")},{trim:function(){return o(this)}})},6761:function(t,e,r){var n=r(6518),o=r(4475),i=r(9565),a=r(9504),u=r(6395),c=r(3724),s=r(4495),f=r(9039),l=r(9297),p=r(1625),d=r(8551),y=r(5397),h=r(6969),v=r(655),g=r(6980),b=r(2360),_=r(1072),m=r(8480),S=r(298),O=r(3717),w=r(7347),E=r(4913),P=r(6801),A=r(8773),j=r(6840),k=r(2106),L=r(5745),R=r(6119),I=r(421),T=r(3392),x=r(8227),C=r(1951),D=r(511),N=r(8242),B=r(687),M=r(1181),F=r(9213).forEach,V=R("hidden"),U="Symbol",K="prototype",J=M.set,G=M.getterFor(U),Y=Object[K],q=o.Symbol,z=q&&q[K],H=o.RangeError,W=o.TypeError,X=o.QObject,$=w.f,Q=E.f,Z=S.f,tt=A.f,et=a([].push),rt=L("symbols"),nt=L("op-symbols"),ot=L("wks"),it=!X||!X[K]||!X[K].findChild,at=function(t,e,r){var n=$(Y,e);n&&delete Y[e],Q(t,e,r),n&&t!==Y&&Q(Y,e,n)},ut=c&&f((function(){return 7!==b(Q({},"a",{get:function(){return Q(this,"a",{value:7}).a}})).a}))?at:Q,ct=function(t,e){var r=rt[t]=b(z);return J(r,{type:U,tag:t,description:e}),c||(r.description=e),r},st=function t(e,r,n){e===Y&&t(nt,r,n),d(e);var o=h(r);return d(n),l(rt,o)?(n.enumerable?(l(e,V)&&e[V][o]&&(e[V][o]=!1),n=b(n,{enumerable:g(0,!1)})):(l(e,V)||Q(e,V,g(1,b(null))),e[V][o]=!0),ut(e,o,n)):Q(e,o,n)},ft=function(t,e){d(t);var r=y(e),n=_(r).concat(yt(r));return F(n,(function(e){c&&!i(lt,r,e)||st(t,e,r[e])})),t},lt=function(t){var e=h(t),r=i(tt,this,e);return!(this===Y&&l(rt,e)&&!l(nt,e))&&(!(r||!l(this,e)||!l(rt,e)||l(this,V)&&this[V][e])||r)},pt=function(t,e){var r=y(t),n=h(e);if(r!==Y||!l(rt,n)||l(nt,n)){var o=$(r,n);return!o||!l(rt,n)||l(r,V)&&r[V][n]||(o.enumerable=!0),o}},dt=function(t){var e=Z(y(t)),r=[];return F(e,(function(t){l(rt,t)||l(I,t)||et(r,t)})),r},yt=function(t){var e=t===Y,r=Z(e?nt:y(t)),n=[];return F(r,(function(t){!l(rt,t)||e&&!l(Y,t)||et(n,rt[t])})),n};s||(j(z=(q=function(){if(p(z,this))throw new W("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?v(arguments[0]):void 0,e=T(t),r=function t(r){var n=void 0===this?o:this;n===Y&&i(t,nt,r),l(n,V)&&l(n[V],e)&&(n[V][e]=!1);var a=g(1,r);try{ut(n,e,a)}catch(r){if(!(r instanceof H))throw r;at(n,e,a)}};return c&&it&&ut(Y,e,{configurable:!0,set:r}),ct(e,t)})[K],"toString",(function(){return G(this).tag})),j(q,"withoutSetter",(function(t){return ct(T(t),t)})),A.f=lt,E.f=st,P.f=ft,w.f=pt,m.f=S.f=dt,O.f=yt,C.f=function(t){return ct(x(t),t)},c&&(k(z,"description",{configurable:!0,get:function(){return G(this).description}}),u||j(Y,"propertyIsEnumerable",lt,{unsafe:!0}))),n({global:!0,constructor:!0,wrap:!0,forced:!s,sham:!s},{Symbol:q}),F(_(ot),(function(t){D(t)})),n({target:U,stat:!0,forced:!s},{useSetter:function(){it=!0},useSimple:function(){it=!1}}),n({target:"Object",stat:!0,forced:!s,sham:!c},{create:function(t,e){return void 0===e?b(t):ft(b(t),e)},defineProperty:st,defineProperties:ft,getOwnPropertyDescriptor:pt}),n({target:"Object",stat:!0,forced:!s},{getOwnPropertyNames:dt}),N(),B(q,U),I[V]=!0},9463:function(t,e,r){var n=r(6518),o=r(3724),i=r(4475),a=r(9504),u=r(9297),c=r(4901),s=r(1625),f=r(655),l=r(2106),p=r(7740),d=i.Symbol,y=d&&d.prototype;if(o&&c(d)&&(!("description"in y)||void 0!==d().description)){var h={},v=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:f(arguments[0]),e=s(y,this)?new d(t):void 0===t?d():d(t);return""===t&&(h[e]=!0),e};p(v,d),v.prototype=y,y.constructor=v;var g="Symbol(description detection)"===String(d("description detection")),b=a(y.valueOf),_=a(y.toString),m=/^Symbol\((.*)\)[^)]+$/,S=a("".replace),O=a("".slice);l(y,"description",{configurable:!0,get:function(){var t=b(this);if(u(h,t))return"";var e=_(t),r=g?O(e,7,-1):S(e,m,"$1");return""===r?void 0:r}}),n({global:!0,constructor:!0,forced:!0},{Symbol:v})}},1510:function(t,e,r){var n=r(6518),o=r(7751),i=r(9297),a=r(655),u=r(5745),c=r(1296),s=u("string-to-symbol-registry"),f=u("symbol-to-string-registry");n({target:"Symbol",stat:!0,forced:!c},{for:function(t){var e=a(t);if(i(s,e))return s[e];var r=o("Symbol")(e);return s[e]=r,f[r]=e,r}})},2259:function(t,e,r){r(511)("iterator")},2675:function(t,e,r){r(6761),r(1510),r(7812),r(3110),r(9773)},7812:function(t,e,r){var n=r(6518),o=r(9297),i=r(757),a=r(6823),u=r(5745),c=r(1296),s=u("symbol-to-string-registry");n({target:"Symbol",stat:!0,forced:!c},{keyFor:function(t){if(!i(t))throw new TypeError(a(t)+" is not a symbol");if(o(s,t))return s[t]}})},5700:function(t,e,r){var n=r(511),o=r(8242);n("toPrimitive"),o()},2480:function(t,e,r){r(5081)},3500:function(t,e,r){var n=r(4475),o=r(7400),i=r(9296),a=r(235),u=r(6699),c=function(t){if(t&&t.forEach!==a)try{u(t,"forEach",a)}catch(e){t.forEach=a}};for(var s in o)o[s]&&c(n[s]&&n[s].prototype);c(i)},2953:function(t,e,r){var n=r(4475),o=r(7400),i=r(9296),a=r(3792),u=r(6699),c=r(687),s=r(8227)("iterator"),f=a.values,l=function(t,e){if(t){if(t[s]!==f)try{u(t,s,f)}catch(e){t[s]=f}if(c(t,e,!0),o[e])for(var r in a)if(t[r]!==a[r])try{u(t,r,a[r])}catch(e){t[r]=a[r]}}};for(var p in o)l(n[p]&&n[p].prototype,p);l(i,"DOMTokenList")},5575:function(t,e,r){var n=r(6518),o=r(4475),i=r(9472)(o.setInterval,!0);n({global:!0,bind:!0,forced:o.setInterval!==i},{setInterval:i})},4599:function(t,e,r){var n=r(6518),o=r(4475),i=r(9472)(o.setTimeout,!0);n({global:!0,bind:!0,forced:o.setTimeout!==i},{setTimeout:i})},6031:function(t,e,r){r(5575),r(4599)},8272:function(t){t.exports=JSON.parse('{"version":"1.3.8","env":"prod"}')}},r={};function n(e){var o=r[e];if(void 0!==o)return o.exports;var i=r[e]={exports:{}};return t[e].call(i.exports,i,i.exports,n),i.exports}n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),function(){var t,r,o,i,a,u,c,s,f,l;function p(t,e){if(t){if("string"==typeof t)return d(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?d(t,e):void 0}}function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function y(t){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function h(t){var e=function(t,e){if("object"!=y(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=y(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==y(e)?e:String(e)}n(2675),n(9463),n(2259),n(5700),n(3792),n(9572),n(2892),n(4185),n(6099),n(8940),n(3362),n(7764),n(2953),n(4170),n(9904),n(3851),n(875),n(287),n(825),n(888),n(5276),n(9089),n(3288),n(6033),n(9085),n(8781),function(t){t[t.none=1e3]="none",t[t.wx=1001]="wx",t[t.qq=1002]="qq",t[t.tt=1003]="tt",t[t.ks=1004]="ks",t[t.taobao=1005]="taobao",t[t.oppo=1006]="oppo",t[t.alipay=1007]="alipay"}(t||(t={})),function(t){t.EVENT="event",t.LOAD="load",t.ERROR="error",t.AD="ad",t.STAGE="stage",t.SHARE="share",t.LEVEL_UP="level_up",t.ADX="adx",t.MEMORY_WARN="memory_warn",t.ENTER_GAME="enter_game",t.CREATE_ROLE="create_role",t.ONLINE="online"}(r||(r={})),function(t){t.PullUp="pull",t.Success="success",t.Fail="fail"}(o||(o={})),function(t){t.PullUp="pull",t.Success="success",t.Fail="fail",t.Reward="reward"}(i||(i={})),function(t){t.Banner="banner",t.RewardVideo="reward_video",t.Interstitial="interstitial",t.BlockAd="block",t.BoxAd="box",t.GridAd="grid",t.CustomAd="native_express"}(a||(a={})),function(t){t.PreLoadPull="pre_load_pull",t.PreLoadSuccess="pre_load_success",t.PreLoadFail="pre_load_fail",t.Pull="pull",t.LoadSuccess="load_success",t.LoadFail="load_fail",t.Show="show",t.PlayComplete="play_complete",t.Close="close",t.Click="click",t.Skip="skip",t.Hide="hide",t.LoadTimeOut="load_timeout",t.Error="error"}(u||(u={})),function(t){t[t.Null=0]="Null",t[t.Loading=1]="Loading",t[t.Loaded=2]="Loaded",t[t.Closing=3]="Closing",t[t.closed=4]="closed"}(c||(c={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.MODERATE=1]="MODERATE",t[t.LOW=2]="LOW",t[t.CRITICAL=3]="CRITICAL"}(s||(s={})),function(t){t[t.CODE_OF_INIT_SUCCESS=1e3]="CODE_OF_INIT_SUCCESS",t[t.CODE_OF_INIT_FAILURE=1001]="CODE_OF_INIT_FAILURE",t[t.CODE_OF_LOGIN_SUCCESS=2e3]="CODE_OF_LOGIN_SUCCESS",t[t.CODE_OF_LOGIN_FAILURE=2001]="CODE_OF_LOGIN_FAILURE",t[t.CODE_OF_LOGIN_CANCEL=2002]="CODE_OF_LOGIN_CANCEL",t[t.CODE_OF_LOGOUT_SUCCESS=3e3]="CODE_OF_LOGOUT_SUCCESS",t[t.CODE_OF_LOGOUT_FAILURE=3001]="CODE_OF_LOGOUT_FAILURE",t[t.CODE_OF_CREATE_ORDER_SUCCESS=4e3]="CODE_OF_CREATE_ORDER_SUCCESS",t[t.CODE_OF_CREATE_ORDER_FAILURE=4001]="CODE_OF_CREATE_ORDER_FAILURE",t[t.CODE_OF_PAY_SUCCESS=4003]="CODE_OF_PAY_SUCCESS",t[t.CODE_OF_PAY_FAILURE=4004]="CODE_OF_PAY_FAILURE",t[t.CODE_OF_PAY_CANCEL=4005]="CODE_OF_PAY_CANCEL"}(f||(f={})),function(t){t[t.ERROR_CODE_OF_SERVER_ERROR=-500]="ERROR_CODE_OF_SERVER_ERROR",t[t.ERROR_CODE_OF_UNSUPPORTED=-1001]="ERROR_CODE_OF_UNSUPPORTED",t[t.ERROR_CODE_OF_UNDEFINED_DATA=-5001]="ERROR_CODE_OF_UNDEFINED_DATA",t[t.ERROR_CODE_OF_ERROR_DATA=-5002]="ERROR_CODE_OF_ERROR_DATA",t[t.ERROR_CODE_OF_ERROR_PARAMS=-5003]="ERROR_CODE_OF_ERROR_PARAMS",t[t.ERROR_CODE_OF_PLATFROM_ERROR=-6001]="ERROR_CODE_OF_PLATFROM_ERROR"}(l||(l={})),n(8706),n(4782),n(1629),n(3418),n(4346),n(6910),n(2010),n(9432),n(4864),n(7495),n(1761),n(5746),n(3500);var v=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,r;return e=t,(r=[{key:"getUrlParam",value:function(t){var e=new RegExp("(^|&)"+t+"=([^&]*)(&|$)","i"),r=window.location.search.substring(1).match(e);return r?decodeURIComponent(r[2]):""}},{key:"http_build_query",value:function(t){var e="";for(var r in t){var n=t[r];e+="".concat(r,"=").concat(n,"&")}return e=e.slice(0,e.length-1),"".concat(encodeURI(e))}},{key:"isNotEmptyObj",value:function(t){return t&&"object"===y(t)&&Object.keys(t).length>0}},{key:"getTime",value:function(){var t=new Date;return t.getFullYear()+"-"+(t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-"+(t.getDate()<10?"0"+t.getDate():t.getDate())+" "+(t.getHours()<10?"0"+t.getHours():t.getHours())+":"+(t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes())+":"+(t.getSeconds()<10?"0"+t.getSeconds():t.getSeconds())}},{key:"cloneObj",value:function(t){if(null===t||"object"!==y(t))return t;var e=Array.isArray(t)?[]:{};return Object.keys(t).forEach((function(r){e[r]=t[r]})),e}},{key:"randomChart",value:function(t){for(var e="",r=0;r<t;r++)e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".charAt(Math.floor(52*Math.random()));return e}},{key:"ksort",value:function(t){var e={},r=Object.keys(t);return r.sort(),r.forEach((function(r){e[r]=t[r]})),e}},{key:"call",value:function(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];t&&t.apply(void 0,r)}},{key:"call_once",value:function(t){if(!t.isDeleted){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];t&&t.apply(void 0,r),t.isDeleted=!0}}},{key:"judgePositiveInt",value:function(t){return!!/(^[1-9]\d*$)/.test(t)}},{key:"isObj",value:function(t){return t&&"object"===y(t)}},{key:"isContainInArray",value:function(t,e){return t&&-1!=t.indexOf(e)}},{key:"isTimeStamp",value:function(t){return!isNaN(Number(t))&&t.toString().match("^[0-9]{10}$")&&t.toString().match("^[0-9]{13}$").length>0}},{key:"stringToJson",value:function(t){return JSON.parse(t)}},{key:"jsonToString",value:function(t){return JSON.stringify(t)}},{key:"mapToJsonStr",value:function(e){return JSON.stringify(t.mapToObj(e))}},{key:"jsonStrToMap",value:function(e){return t.objToMap(JSON.parse(e))}},{key:"mapToObj",value:function(t){var e,r,n=Object.create(null),o=function(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=p(t))){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw i}}}}(t);try{for(o.s();!(e=o.n()).done;){var i=(r=e.value,2,function(t){if(Array.isArray(t))return t}(r)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,u=[],c=!0,s=!1;try{for(i=(r=r.call(t)).next,0;!(c=(n=i.call(r)).done)&&(u.push(n.value),2!==u.length);c=!0);}catch(t){s=!0,o=t}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw o}}return u}}(r)||p(r,2)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a=i[0],u=i[1];n[a]=u}}catch(t){o.e(t)}finally{o.f()}return n}},{key:"objToMap",value:function(t){for(var e=new Map,r=0,n=Object.keys(t);r<n.length;r++){var o=n[r];e.set(o,t[o])}return e}},{key:"random",value:function(t,e){return e<t?t:Math.floor(Math.random()*(e-t+1))+t}},{key:"hasCapital",value:function(t){return null!=t.match(/^.*[A-Z]+.*$/)}},{key:"obj2Str",value:function(t){if(null!=t){var e="";for(var r in t){var n=y(t[r]);"undefined"!=n&&(e.length>0&&(e+="&"),e+="object"==n?r+"="+JSON.stringify(t[r]):r+"="+t[r])}if(0!=e.length)return e}}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,h(n.key),n)}}(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function g(t){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function b(t){var e=function(t,e){if("object"!=g(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=g(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==g(e)?e:String(e)}var _=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,r;return e=t,(r=[{key:"setDebug",value:function(e){t.isDebug=e}},{key:"error",value:function(){for(var t,e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];(t=console).error.apply(t,["[JYSDK "+v.getTime()+"]"].concat(r))}},{key:"debug",value:function(){if(t.isDebug){for(var e,r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];(e=console).log.apply(e,["[JYSDK "+v.getTime()+"]"].concat(n))}}},{key:"info",value:function(){for(var t,e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];(t=console).info.apply(t,["[JYSDK "+v.getTime()+"]"].concat(r))}},{key:"warn",value:function(){for(var t,e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];(t=console).warn.apply(t,["[JYSDK "+v.getTime()+"]"].concat(r))}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,b(n.key),n)}}(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();_.isDebug=!1;var m=_;n(2480);var S=n(8272),O="prod"==S.env?{SDK_API_SERVER:"https://pt-sdk-api.jingyougz.com",LOG_API_SERVER:"https://pt-log.game.jingyougz.com"}:"prev"==S.env?{SDK_API_SERVER:"https://pt-sdk-api-prev.jingyougz.com",LOG_API_SERVER:"https://pt-log.game.jingyougz.com"}:{SDK_API_SERVER:"https://pt-sdk-api-dev.jingyougz.com",LOG_API_SERVER:"https://pt-log-dev.game.jingyougz.com"},w={init:"".concat(O.SDK_API_SERVER,"/api/v1/app/init"),sdk_log:"".concat(O.SDK_API_SERVER,"/api/v1/log"),game_log:"".concat(O.LOG_API_SERVER,"/api/v1/game"),online_params:"".concat(O.SDK_API_SERVER,"/api/v1/config/online_params"),func_switch:"".concat(O.SDK_API_SERVER,"/api/v1/config/func_switch"),game_video:"".concat(O.SDK_API_SERVER,"/api/v1/config/game_video"),pay_open_state:"".concat(O.SDK_API_SERVER,"/api/v1/config/pay_open_state"),mini_game_switch:"".concat(O.SDK_API_SERVER,"/api/v1/config/mini_game_switch"),share:"".concat(O.SDK_API_SERVER,"/api/v1/config/share"),login:"".concat(O.SDK_API_SERVER,"/api/v1/platform/login"),update_info:"".concat(O.SDK_API_SERVER,"/api/v1/account/update_info"),abtest:"".concat(O.SDK_API_SERVER,"/api/v1/abtest/group"),create_pay_order:"".concat(O.SDK_API_SERVER,"/api/v1/pay/order/create"),midas_balance:"".concat(O.SDK_API_SERVER,"/api/v1/pay/midas/balance"),midas_consume:"".concat(O.SDK_API_SERVER,"/api/v1/pay/midas/consume"),sensitive_word_check:"".concat(O.SDK_API_SERVER,"/api/v1/platform/sensitive_word/check"),http_raw_params:"".concat(O.SDK_API_SERVER,"/api/v1/platform/special/http_raw_params"),adx_config:"".concat(O.SDK_API_SERVER,"/api/v1/activity/adx"),adx_report:"".concat(O.SDK_API_SERVER,"/api/v1/activity/adx/report")},E={PLATFORM:1001,SDKVersion:S.version},P={ERROR:4,DEBUG:1,INFO:2,WARN:3};function A(t){return(A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function j(t){var e=function(t,e){if("object"!=A(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=A(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==A(e)?e:String(e)}var k=function(){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e)}var r,n;return r=e,(n=[{key:"client",value:function(){var t=null;try{t=window.wx||window.qq||window.ks||window.tt||window.my||globalThis.my&&globalThis.my.tb}catch(t){}return t}},{key:"post",value:function(t,e,r){return this._http(this.RequestMethod.POST,t,e,r)}},{key:"get",value:function(t,e,r){return v.isNotEmptyObj(e)&&(t=this._urlBindParams(t,e)),t.indexOf(".html")>0?this._http(this.RequestMethod.GET,t,null,r,"text"):this._http(this.RequestMethod.GET,t,null,r)}},{key:"_http",value:function(e,r,n,o,i){var a=this;return new Promise((function(u,c){a._isNative()?E.PLATFORM==t.taobao?a._nativeTaobaoHttp(e,r,n).then((function(t){t.code&&0!=t.code?c(t):u(t)})).catch((function(t){c(t)})):a._nativeHttp(e,r,n,o,i).then((function(t){t.code&&0!=t.code?c(t):u(t)})).catch((function(t){c(t)})):a._webHttp(e,r,n,o,i).then((function(t){t.code&&0!=t.code?c(t):u(t)})).catch((function(t){c(t)}))}))}},{key:"_isNative",value:function(){return this.client()&&this.client().request}},{key:"_nativeHttp",value:function(e,r,n,o,i){var a=this;return new Promise((function(u,c){var s={url:r,data:n,header:o,method:e,dataType:i=i||"json",success:function(t){m.debug("网络请求发送成功",t);var e=v.isNotEmptyObj(t)&&t.data||{};v.isNotEmptyObj(e)&&e.code&&1!=e.code?(m.error("返回Code状态异常",e),c(e)):u(e)},fail:function(t){m.error("网络请求发送失败",t),c(t)},complete:function(t){m.debug("网络请求发送完成",t)}};E.PLATFORM==t.alipay&&(delete s.header,s.headers=o),a.client()&&a.client().request(s)}))}},{key:"_nativeTaobaoHttp",value:function(t,e,r){var n=this;t==this.RequestMethod.GET&&r&&(e=this._urlBindParams(e,r));var o={enableSystemParams:!1};return e==w.http_raw_params&&(o={enableSystemParams:!0}),new Promise((function(i,a){var u={url:e,method:t,body:t==n.RequestMethod.POST?r:{},options:o,success:function(t){m.debug("TAOBAO网络请求发送成功",t);var e=JSON.parse(t.content)||{};v.isNotEmptyObj(e)&&e.code&&1!=e.code?(m.error("TAOBAO返回Code状态异常",e),a(e)):i(e)},fail:function(t){m.error("TAOBAO网络请求发送失败",t),a(t)}};n.client()&&n.client().request(u)}))}},{key:"_webHttp",value:function(t,e,r,n){var o=this,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"json";return new Promise((function(a,u){var c=new XMLHttpRequest;t==o.RequestMethod.GET&&r&&(e=o._urlBindParams(e,r)),c.open(t,e),c.onreadystatechange=function(){4==c.readyState&&200==c.status&&("json"==i?(m.debug("网络请求发送成功",c.responseText),""===c.responseText?a(c.responseText):a(JSON.parse(c.responseText))):(m.debug("网络请求发送成功",c.response),a(c.response)))},c.onerror=function(){m.error("网络请求发送失败"),u("")};var s="";switch(t){case o.RequestMethod.POST:c.setRequestHeader("Content-type","application/x-www-form-urlencoded"),s=v.http_build_query(r);break;case o.RequestMethod.GET:s=r?JSON.stringify(r):""}"blob"!=i&&"arraybuffer"!=i||(c.responseType=i),v.isNotEmptyObj(n)&&Object.keys(n).forEach((function(t){c.setRequestHeader(t,n[t])})),c.send(s)}))}},{key:"_urlBindParams",value:function(t,e){var r="?";for(var n in e){var o="object"===A(e[n])?JSON.stringify(e[n]):e[n];r+="".concat(n,"=").concat(o,"&")}return r=r.slice(0,r.length-1),"".concat(t).concat(encodeURI(r))}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,j(n.key),n)}}(r,n),Object.defineProperty(r,"prototype",{writable:!1}),e}();k.RequestMethod={GET:"GET",POST:"POST"};var L=k;function R(t){return(R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function I(t){var e=function(t,e){if("object"!=R(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=R(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==R(e)?e:String(e)}var T=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.user_id="",this.open_id="",this.pf_openid="",this.nickname="",this.avatar="",this.token="",this.access_token="",this.ping_interval=0}var e,r;return e=t,(r=[{key:"reset",value:function(){this.user_id="",this.open_id="",this.pf_openid="",this.nickname="",this.avatar="",this.token="",this.access_token="",this.ping_interval=0}},{key:"toString",value:function(){return"[user_id: "+this.user_id+", open_id: "+this.open_id+", pf_openid: "+this.pf_openid+", nickname: "+this.nickname+", avatar: "+this.avatar+", token: "+this.token+", ping_interval: "+this.ping_interval+"]"}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,I(n.key),n)}}(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function x(t){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function C(t){var e=function(t,e){if("object"!=x(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=x(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==x(e)?e:String(e)}var D=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.server_id="",this.server_name="",this.role_id="",this.role_name="",this.role_level=0,this.role_vip=0}var e,r;return e=t,(r=[{key:"update",value:function(t){this.server_id=t.server_id,this.server_name=t.server_name,this.role_id=t.role_id,this.role_name=t.role_name,this.role_level=t.role_level,this.role_vip=t.role_vip}},{key:"toString",value:function(){return"[server_id: "+this.server_id+", server_name: "+this.server_name+", role_id: "+this.role_id+", role_name: "+this.role_name+", role_level: "+this.role_level+", role_vip: "+this.role_vip+"]"}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,C(n.key),n)}}(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function N(t){return(N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function B(t){var e=function(t,e){if("object"!=N(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=N(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==N(e)?e:String(e)}var M=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.app_state=!0,this.login_state=!0,this.pay_state=!0}var e,r;return e=t,(r=[{key:"toString",value:function(){return"[app_id: "+this.app_id+", channel_id: "+this.channel_id+", app_state: "+this.app_state+", login_state: "+this.login_state+", pay_state: "+this.pay_state+"]"}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,B(n.key),n)}}(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function F(t){for(var e,r,n="",o=-1;++o<t.length;)e=t.charCodeAt(o),r=o+1<t.length?t.charCodeAt(o+1):0,55296<=e&&e<=56319&&56320<=r&&r<=57343&&(e=65536+((1023&e)<<10)+(1023&r),o++),e<=127?n+=String.fromCharCode(e):e<=2047?n+=String.fromCharCode(192|e>>>6&31,128|63&e):e<=65535?n+=String.fromCharCode(224|e>>>12&15,128|e>>>6&63,128|63&e):e<=2097151&&(n+=String.fromCharCode(240|e>>>18&7,128|e>>>12&63,128|e>>>6&63,128|63&e));return n}function V(t,e,r,n,o,i){return Y((a=Y(Y(e,t),Y(n,i)))<<(u=o)|a>>>32-u,r);var a,u}function U(t,e,r,n,o,i,a){return V(e&r|~e&n,t,e,o,i,a)}function K(t,e,r,n,o,i,a){return V(e&n|r&~n,t,e,o,i,a)}function J(t,e,r,n,o,i,a){return V(e^r^n,t,e,o,i,a)}function G(t,e,r,n,o,i,a){return V(r^(e|~n),t,e,o,i,a)}function Y(t,e){var r=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(r>>16)<<16|65535&r}var q=function(t){return""==t?t:function(t){for(var e,r="0123456789abcdef",n="",o=0;o<t.length;o++)e=t.charCodeAt(o),n+=r.charAt(e>>>4&15)+r.charAt(15&e);return n}(function(t){return function(t){for(var e="",r=0;r<32*t.length;r+=8)e+=String.fromCharCode(t[r>>5]>>>r%32&255);return e}(function(t,e){t[e>>5]|=128<<e%32,t[14+(e+64>>>9<<4)]=e;for(var r=1732584193,n=-271733879,o=-1732584194,i=271733878,a=0;a<t.length;a+=16){var u=r,c=n,s=o,f=i;r=U(r,n,o,i,t[a+0],7,-680876936),i=U(i,r,n,o,t[a+1],12,-389564586),o=U(o,i,r,n,t[a+2],17,606105819),n=U(n,o,i,r,t[a+3],22,-1044525330),r=U(r,n,o,i,t[a+4],7,-176418897),i=U(i,r,n,o,t[a+5],12,1200080426),o=U(o,i,r,n,t[a+6],17,-1473231341),n=U(n,o,i,r,t[a+7],22,-45705983),r=U(r,n,o,i,t[a+8],7,1770035416),i=U(i,r,n,o,t[a+9],12,-1958414417),o=U(o,i,r,n,t[a+10],17,-42063),n=U(n,o,i,r,t[a+11],22,-1990404162),r=U(r,n,o,i,t[a+12],7,1804603682),i=U(i,r,n,o,t[a+13],12,-40341101),o=U(o,i,r,n,t[a+14],17,-1502002290),r=K(r,n=U(n,o,i,r,t[a+15],22,1236535329),o,i,t[a+1],5,-165796510),i=K(i,r,n,o,t[a+6],9,-1069501632),o=K(o,i,r,n,t[a+11],14,643717713),n=K(n,o,i,r,t[a+0],20,-373897302),r=K(r,n,o,i,t[a+5],5,-701558691),i=K(i,r,n,o,t[a+10],9,38016083),o=K(o,i,r,n,t[a+15],14,-660478335),n=K(n,o,i,r,t[a+4],20,-405537848),r=K(r,n,o,i,t[a+9],5,568446438),i=K(i,r,n,o,t[a+14],9,-1019803690),o=K(o,i,r,n,t[a+3],14,-187363961),n=K(n,o,i,r,t[a+8],20,1163531501),r=K(r,n,o,i,t[a+13],5,-1444681467),i=K(i,r,n,o,t[a+2],9,-51403784),o=K(o,i,r,n,t[a+7],14,1735328473),r=J(r,n=K(n,o,i,r,t[a+12],20,-1926607734),o,i,t[a+5],4,-378558),i=J(i,r,n,o,t[a+8],11,-2022574463),o=J(o,i,r,n,t[a+11],16,1839030562),n=J(n,o,i,r,t[a+14],23,-35309556),r=J(r,n,o,i,t[a+1],4,-1530992060),i=J(i,r,n,o,t[a+4],11,1272893353),o=J(o,i,r,n,t[a+7],16,-155497632),n=J(n,o,i,r,t[a+10],23,-1094730640),r=J(r,n,o,i,t[a+13],4,681279174),i=J(i,r,n,o,t[a+0],11,-358537222),o=J(o,i,r,n,t[a+3],16,-722521979),n=J(n,o,i,r,t[a+6],23,76029189),r=J(r,n,o,i,t[a+9],4,-640364487),i=J(i,r,n,o,t[a+12],11,-421815835),o=J(o,i,r,n,t[a+15],16,530742520),r=G(r,n=J(n,o,i,r,t[a+2],23,-995338651),o,i,t[a+0],6,-198630844),i=G(i,r,n,o,t[a+7],10,1126891415),o=G(o,i,r,n,t[a+14],15,-1416354905),n=G(n,o,i,r,t[a+5],21,-57434055),r=G(r,n,o,i,t[a+12],6,1700485571),i=G(i,r,n,o,t[a+3],10,-1894986606),o=G(o,i,r,n,t[a+10],15,-1051523),n=G(n,o,i,r,t[a+1],21,-2054922799),r=G(r,n,o,i,t[a+8],6,1873313359),i=G(i,r,n,o,t[a+15],10,-30611744),o=G(o,i,r,n,t[a+6],15,-1560198380),n=G(n,o,i,r,t[a+13],21,1309151649),r=G(r,n,o,i,t[a+4],6,-145523070),i=G(i,r,n,o,t[a+11],10,-1120210379),o=G(o,i,r,n,t[a+2],15,718787259),n=G(n,o,i,r,t[a+9],21,-343485551),r=Y(r,u),n=Y(n,c),o=Y(o,s),i=Y(i,f)}return Array(r,n,o,i)}(function(t){for(var e=Array(t.length>>2),r=0;r<e.length;r++)e[r]=0;for(r=0;r<8*t.length;r+=8)e[r>>5]|=(255&t.charCodeAt(r/8))<<r%32;return e}(t),8*t.length))}(F(t)))};function z(t){return(z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function H(t){var e=function(t,e){if("object"!=z(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=z(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==z(e)?e:String(e)}var W=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._baseData=t._baseData,this._appInfo=t._appInfo,this._platformConfig=t._platfromConfig,this._userInfo=t._userInfo,this._roleInfo=t._roleInfo}var e,r;return e=t,(r=[{key:"_getHeader",value:function(){return this._userInfo.token?{Authorization:"Bearer "+this._userInfo.token}:{}}},{key:"httpGet",value:function(t,e,r){return this._api(t,e,"GET",r)}},{key:"httpPost",value:function(t,e,r){return this._api(t,e,"POST",r)}},{key:"_api",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:L.RequestMethod.POST,n=arguments.length>3?arguments[3]:void 0,o={};return Object.assign(o,this._baseData),Object.assign(o,{open_id:this._userInfo.open_id,pf_openid:this._userInfo.pf_openid,user_id:this._userInfo.user_id}),v.isNotEmptyObj(e)&&Object.assign(o,e),o=this.doSign(o),m.debug("请求参数:",o),n=n||this._getHeader(),m.debug("请求详情:",r,t,o,n),new Promise((function(e,i){r===L.RequestMethod.POST?L.post(t,o,n).then((function(t){e(t)})).catch((function(t){i(t)})):L.get(t,o,n).then((function(t){e(t)})).catch((function(t){i(t)}))}))}},{key:"doSign",value:function(t){delete t.t,t.sign,t.t=Math.floor(Date.now()/1e3),t=v.ksort(t);var e=["app_id","channel_id","aid","ad_group","sdk_ver","sdk_type","client_ver","t","trace_id","device_id","os","os_ver"],r="";for(var n in t)if(-1!=e.indexOf(n)){var o=t[n];r+="".concat(n,"=").concat(o,"&")}r=r.slice(0,r.length-1);var i=q(r+this._appInfo.app_key);return t.sign=i,t}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,H(n.key),n)}}(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();W._baseData={app_id:"",channel_id:"",aid:0,ad_group:0,sdk_ver:"",sdk_type:"minigame",client_ver:"",os:"",os_ver:"",query:"",referrer:"",device_info:"",brand:"",model:"",scene:0,device_id:"",device_uuid:"",trace_id:""},W._appInfo=new M,W._userInfo=new T,W._roleInfo=new D,W._platfromConfig={open_share_listen:!1,share_image_id:"",share_image_url:"",share_title:"",kefu_msg_title:"",kefu_msg_path:"",kefu_msg_img:""};var X=W;function $(t){return($="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Q(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Z(n.key),n)}}function Z(t){var e=function(t,e){if("object"!=$(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=$(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==$(e)?e:String(e)}n(4423),n(1699),n(6031);var tt=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.errCode=0,this.errMsg="",this.errCode=e,this.errMsg=r}var e,r,n;return e=t,n=[{key:"create",value:function(){return new t(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,arguments.length>1&&void 0!==arguments[1]?arguments[1]:"")}}],(r=[{key:"toString",value:function(){return"[errCode: "+this.errCode+", errMsg: "+this.errMsg+"]"}}])&&Q(e.prototype,r),n&&Q(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function et(t){return(et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function rt(t,e,r){return e=ot(e),function(t,e){if(e&&("object"===et(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,nt()?Reflect.construct(e,r||[],ot(t).constructor):e.apply(t,r))}function nt(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(nt=function(){return!!t})()}function ot(t){return(ot=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function it(t,e){return(it=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function at(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ut(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,st(n.key),n)}}function ct(t,e,r){return e&&ut(t.prototype,e),r&&ut(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function st(t){var e=function(t,e){if("object"!=et(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=et(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==et(e)?e:String(e)}var ft=function(){function t(){at(this,t),this._Logger=function(t){function e(){return at(this,e),rt(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&it(t,e)}(e,t),ct(e)}(m)}return ct(t,[{key:"app",value:function(){return t._app}},{key:"init",value:function(e){t._app=e}},{key:"isSupported",value:function(){return!1}},{key:"getAllKeys",value:function(){return[]}},{key:"key",value:function(t){return null}},{key:"setItem",value:function(t,e,r){return!1}},{key:"getItem",value:function(t){return null}},{key:"removeItem",value:function(t){return!1}},{key:"clear",value:function(){return!1}}]),t}();function lt(t){return(lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function pt(t){var e=function(t,e){if("object"!=lt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=lt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==lt(e)?e:String(e)}function dt(t,e,r){return e=ht(e),function(t,e){if(e&&("object"===lt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,yt()?Reflect.construct(e,r||[],ht(t).constructor):e.apply(t,r))}function yt(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(yt=function(){return!!t})()}function ht(t){return(ht=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function vt(t,e){return(vt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}n(2762);var gt=new(function(e){function r(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),dt(this,r,arguments)}var n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&vt(t,e)}(r,e),n=r,(o=[{key:"isSupported",value:function(){var t=this.app();return!(!v.isNotEmptyObj(t)||!t.getStorageSync)||(m.warn("当前环境不支持app.getStorageSync"),!1)}},{key:"getAllKeys",value:function(){if(!this.isSupported())return[];var t=this.app(),e=[];try{if(t.getStorageInfoSync){var r=t.getStorageInfoSync();r&&(e=r.keys)}}catch(t){}return e}},{key:"key",value:function(t){return this.isSupported()?void 0===t?null:this.getAllKeys()[t]||null:null}},{key:"setItem",value:function(e,r,n){if(!this.isSupported())return!1;if(void 0===e)return!1;if(""===(e=e.toString().trim()))return!1;if(void 0===r)return!1;var o=this.app();try{if(o.setStorageSync)return"string"==typeof r&&(r=encodeURIComponent(r)),E.PLATFORM==t.alipay?o.setStorageSync({key:e,data:r}):o.setStorageSync(e,r),!0}catch(t){}return!1}},{key:"getItem",value:function(e){if(!this.isSupported())return null;if(void 0===e)return null;if(""===(e=e.toString().trim()))return null;var r=null,n=this.app();try{if(E.PLATFORM==t.alipay){var o=n.getStorageSync({key:e});o.success&&(r=o.data)}else r=n.getStorageSync(e)}catch(t){m.error("获取StoorageItem Error",t)}return r?"string"==typeof r?decodeURIComponent(r):r:null}},{key:"removeItem",value:function(e){if(!this.isSupported())return!1;var r=this.app();try{if(r.removeStorageSync)return E.PLATFORM==t.alipay?r.removeStorageSync({key:e}):r.removeStorageSync(e),!0;if(r.deleteStorageSync)return r.deleteStorageSync({key:e}),!0}catch(t){}return!1}},{key:"clear",value:function(){if(!this.isSupported())return!1;try{var t=this.app();if(t.clearStorageSync)return t.clearStorageSync(),!0}catch(t){}return!1}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,pt(n.key),n)}}(n.prototype,o),Object.defineProperty(n,"prototype",{writable:!1}),r}(ft));function bt(t){return(bt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _t(t){var e=function(t,e){if("object"!=bt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=bt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==bt(e)?e:String(e)}function mt(t,e,r){return e=Ot(e),function(t,e){if(e&&("object"===bt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,St()?Reflect.construct(e,r||[],Ot(t).constructor):e.apply(t,r))}function St(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(St=function(){return!!t})()}function Ot(t){return(Ot=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function wt(t,e){return(wt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Et=new(function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),mt(this,e,arguments)}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&wt(t,e)}(e,t),r=e,(n=[{key:"isSupported",value:function(){return!!window.localStorage||(m.warn("当前环境不支持window.localStorage"),!1)}},{key:"getAllKeys",value:function(){if(!this.isSupported())return[];for(var t=[],e=0,r=window.localStorage.length;e<r;e++)t.push(this.key[e]);return t}},{key:"key",value:function(t){return this.isSupported()?void 0===t?null:window.localStorage.key(t)||null:null}},{key:"setItem",value:function(t,e,r){if(!this.isSupported())return!1;if(void 0===t)return!1;if(""===(t=t.toString().trim()))return!1;if(void 0===e)return!1;var n=window.localStorage;return"string"==typeof e&&(e=encodeURIComponent(e)),n.setItem(t,e),!0}},{key:"getItem",value:function(t){if(!this.isSupported())return null;if(void 0===t)return null;if(""===(t=t.toString().trim()))return null;var e=window.localStorage.getItem(t);return e?"string"==typeof e?decodeURIComponent(e):e:null}},{key:"removeItem",value:function(t){if(!this.isSupported())return!1;var e=window.localStorage;return!!this.getItem(t)&&(e.removeItem(t),!0)}},{key:"clear",value:function(){return!!this.isSupported()&&(window.localStorage.clear(),!0)}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,_t(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(ft));function Pt(t){return(Pt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function At(t){var e=function(t,e){if("object"!=Pt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Pt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Pt(e)?e:String(e)}function jt(t,e,r){return e=Lt(e),function(t,e){if(e&&("object"===Pt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,kt()?Reflect.construct(e,r||[],Lt(t).constructor):e.apply(t,r))}function kt(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(kt=function(){return!!t})()}function Lt(t){return(Lt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Rt(t,e){return(Rt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}n(744);var It=new(function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),jt(this,e,arguments)}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Rt(t,e)}(e,t),r=e,(n=[{key:"isSupported",value:function(){return!!document.cookie||(m.warn("当前环境不支持document.cookie"),!1)}},{key:"getAllKeys",value:function(){if(!this.isSupported())return[];for(var t=document.cookie.split(/;\s*/),e=[],r=0,n=t.length;r<n;r++){var o=t[r].split("=");e.push(o[0])}return e}},{key:"key",value:function(t){if(!this.isSupported())return null;if(void 0===t)return null;var e=document.cookie.split(/;\s*/)[t];return e?e.split("=")[0]:null}},{key:"setItem",value:function(t,e,r){if(!this.isSupported())return!1;if(void 0===t)return!1;if(""===(t=t.toString().trim()))return!1;if(void 0===e)return!1;"string"==typeof e&&(e=encodeURIComponent(e));var n="".concat(t,"=").concat(e);if("object"===Pt(r)&&null!==r)for(var o=Object.keys(r),i=0,a=o.length;i<a;i++)n+=";".concat(o[i],"=").concat(r[o[i]]);return document.cookie=n,!0}},{key:"getItem",value:function(t){if(!this.isSupported())return null;if(void 0===t)return null;if(""===(t=t.toString().trim()))return null;for(var e=document.cookie.split(/;\s*/),r=0,n=e.length;r<n;r++){var o=e[r].split("=");if(o[0]===t)return o[1]?"string"==typeof o[1]?decodeURIComponent(o[1]):o[1]:null}return null}},{key:"removeItem",value:function(t){return this.setItem(t,null,{Expires:"Thu, 01 Jan 1970 00:00:00 GMT","Max-Age":-1})}},{key:"clear",value:function(){var t=this;if(!this.isSupported())return!1;var e=!0;return this.getAllKeys().forEach((function(r){var n=t.removeItem(r);n||(e=n)})),e}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,At(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(ft));function Tt(t){return(Tt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xt(t){var e=function(t,e){if("object"!=Tt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Tt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Tt(e)?e:String(e)}function Ct(t,e,r){return e=Bt(e),function(t,e){if(e&&("object"===Tt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Dt()?Reflect.construct(e,r||[],Bt(t).constructor):e.apply(t,r))}function Dt(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Dt=function(){return!!t})()}function Nt(){return(Nt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Bt(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Bt(t){return(Bt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Mt(t,e){return(Mt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Ft=new(function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=Ct(this,e,arguments)).storage=null,t}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Mt(t,e)}(e,t),r=e,(n=[{key:"init",value:function(t){Nt(Bt(e.prototype),"init",this).call(this,t),gt.isSupported()?this.storage=gt:Et.isSupported()?this.storage=Et:It.isSupported()&&(this.storage=It)}},{key:"isSupported",value:function(){return this.storage?this.storage.isSupported():Nt(Bt(e.prototype),"isSupported",this).call(this)}},{key:"getAllKeys",value:function(){return this.storage?this.storage.getAllKeys():Nt(Bt(e.prototype),"getAllKeys",this).call(this)}},{key:"key",value:function(t){return this.storage?this.storage.key(t):Nt(Bt(e.prototype),"key",this).call(this,t)}},{key:"setItem",value:function(t,r,n){return this.storage?this.storage.setItem(t,r,n):Nt(Bt(e.prototype),"setItem",this).call(this,t,r,n)}},{key:"getItem",value:function(t){return this.storage?this.storage.getItem(t):Nt(Bt(e.prototype),"getItem",this).call(this,t)}},{key:"removeItem",value:function(t){return this.storage?this.storage.removeItem(t):Nt(Bt(e.prototype),"removeItem",this).call(this,t)}},{key:"clear",value:function(){return this.storage?this.storage.clear():Nt(Bt(e.prototype),"clear",this).call(this)}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,xt(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(ft));function Vt(t){return(Vt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ut(){return(Ut="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ht(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Kt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Jt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Yt(n.key),n)}}function Gt(t,e,r){return e&&Jt(t.prototype,e),r&&Jt(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Yt(t){var e=function(t,e){if("object"!=Vt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Vt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Vt(e)?e:String(e)}function qt(t,e,r){return e=Ht(e),function(t,e){if(e&&("object"===Vt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,zt()?Reflect.construct(e,r||[],Ht(t).constructor):e.apply(t,r))}function zt(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(zt=function(){return!!t})()}function Ht(t){return(Ht=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Wt(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Xt(t,e)}function Xt(t,e){return(Xt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var $t="jysdk_request_fail_list",Qt=function(t){function e(t){var r;return Kt(this,e),(r=qt(this,e)).getLogTag=function(){return e.LOG_TAG},r.SDKLogger=function(t){function e(){return Kt(this,e),qt(this,e,arguments)}return Wt(e,t),Gt(e)}(e.SDKLogger),r.msgSecCheckExtraParams={},r._onShowCallbackList={},r._onShowCallbackCount=0,e.LOG_TAG=t,r.createSDKInstance(),r.createADInstance(),r}return Wt(e,t),Gt(e,[{key:"preLoadBanner",value:function(t,e){(!this.isNotEmptyObj(this.app)||!this._adModOfBanner||void 0!==this._adModOfBanner.preLoadBanner(t,e))&&m.error("当前平台/环境不支持预加载Banner广告")}},{key:"showBanner",value:function(t,e,r){(!this.isNotEmptyObj(this.app)||!this._adModOfBanner||void 0!==this._adModOfBanner.showBanner(t,e,r))&&m.error("当前平台/环境不支持显示Banner广告")}},{key:"hideBanner",value:function(t){(!this.isNotEmptyObj(this.app)||!this._adModOfBanner||void 0!==this._adModOfBanner.hideBanner(t))&&m.error("当前平台/环境不支持隐藏Banner广告")}},{key:"preLoadVideo",value:function(t,e){(!this.isNotEmptyObj(this.app)||!this._adModOfVideo||void 0!==this._adModOfVideo.preLoadVideo(t,e))&&m.error("当前平台/环境不支持预加载激励视频广告")}},{key:"showRewardVideo",value:function(t,e){(!this.isNotEmptyObj(this.app)||!this._adModOfVideo||void 0!==this._adModOfVideo.showRewardVideo(t,e))&&m.error("当前平台/环境不支持显示激励视频广告")}},{key:"showInterstitialAd",value:function(t,e){(!this.isNotEmptyObj(this.app)||!this._adModOfInterstitial||void 0!==this._adModOfInterstitial.showInterstitialAd(t,e))&&m.error("当前平台/环境不支持显示插屏广告")}},{key:"hideInterstitialAd",value:function(){(!this.isNotEmptyObj(this.app)||!this._adModOfInterstitial||void 0!==this._adModOfInterstitial.hideInterstitialAd())&&m.error("当前平台/环境不支持隐藏插屏广告")}},{key:"setGlobalListener",value:function(t){this.globalListener=t}},{key:"init",value:function(t){this.app?(this.SDKLogger.debug("初始化成功"),t&&t.onInitSuccess()):(this.SDKLogger.error("初始化失败: 平台对象为null"),t&&t.onInitFailure(tt.create(-1,"初始化失败: 平台对象为null")))}},{key:"login",value:function(t){m.error("当前平台/环境不支持【login】"),t&&t.onLoginFailure(tt.create(-1,"当前平台/环境不支持"))}},{key:"getUserInfo",value:function(){var t=this;return m.debug("获取用户信息"),new Promise((function(e){e({avatar:t._userInfo.avatar,nickname:t._userInfo.nickname})}))}},{key:"logout",value:function(t){m.error("当前平台/环境不支持【logout】"),t&&t.onLogoutFailure(tt.create(-1,"当前平台/环境不支持"))}},{key:"pay",value:function(t,e){m.error("当前平台/环境不支持【pay】")}},{key:"loadingStart",value:function(){}},{key:"loadingEnd",value:function(){}},{key:"createRole",value:function(t){}},{key:"enterGame",value:function(t){}},{key:"levelUp",value:function(t){}},{key:"stageStart",value:function(t){}},{key:"stageEnd",value:function(t,e){}},{key:"shareAppMessage",value:function(t,e,r,n){m.error("当前平台/环境不支持【shareAppMessage】")}},{key:"onShareAppMessage",value:function(t,e,r,n){m.error("当前平台/环境不支持【onShareAppMessage】")}},{key:"isNotEmptyObj",value:function(t){var e=v.isNotEmptyObj(t);return!e&&this.SDKLogger.error("请先完成平台SDK加载"),e}},{key:"onShow",value:function(){Tn._onShow()}},{key:"onHide",value:function(){Tn._onHide()}},{key:"getLaunchOptions",value:function(){return{scene:"unknown",query:"{}",referrer:{}}}},{key:"getShareQueryInfo",value:function(){return{from_share_id:"",from_share_image_id:0,from_share_user:"",from_share_aid:0,from_share_ad_group:0}}},{key:"getDeviceInfo",value:function(){return{brand:"",model:"",os:"android",os_ver:"1.0",device_info:"{}"}}},{key:"getMsgSecCheckExtraParams",value:function(){return this.msgSecCheckExtraParams}},{key:"addOnShowFunc",value:function(t){var e=this._onShowCallbackCount;return this._onShowCallbackList[e]=t,this._onShowCallbackCount++,e}},{key:"onNetWorkStatusChange",value:function(t){}},{key:"offNetWorkStatusChange",value:function(t){}},{key:"saveRequestURLDataToStorage",value:function(t,e){if(Ft.isSupported())try{var r=this.getRquestURLDataListByStorage();r.set(t,e),Ft.setItem($t,v.mapToJsonStr(r)),this.SDKLogger.debug("【补传】同步数据缓存成功, 当前缓存数："+r.size)}catch(t){this.SDKLogger.error("【补传】同步数据缓存失败")}}},{key:"getRquestURLDataListByStorage",value:function(){var t=new Map;if(Ft.isSupported())try{var e=Ft.getItem($t);if(e){var r=v.stringToJson(e);r&&(t=v.objToMap(r),this.SDKLogger.debug("【补传】同步读取数据缓存列表成功, 数据缓存数："+t.size))}}catch(t){this.SDKLogger.error("【补传】同步读取数据缓存数据列表失败")}return t}},{key:"removeRequestURLDataOfStorage",value:function(t){if(t&&Ft.isSupported())try{var e=this.getRquestURLDataListByStorage();if(e&&e.has(t)){var r=e.delete(t);Ft.setItem($t,v.mapToJsonStr(e)),r?this.SDKLogger.debug("【补传】同步删除缓存数据成功: key: "+t+" | 剩余缓存数："+e.size):this.SDKLogger.error("【补传】同步删除缓存数据失败")}}catch(t){this.SDKLogger.error("【补传】同步删除缓存数据失败")}}},{key:"createOrder",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r={role_id:this._roleInfo.role_id,role_name:this._roleInfo.role_name,role_level:this._roleInfo.role_level,role_vip:this._roleInfo.role_vip,server_id:this._roleInfo.server_id,server_name:this._roleInfo.server_name,product_id:t.product_id||"",product_name:t.product_name||"",cp_order_no:t.cp_order_no||"",cp_order_money:t.cp_order_money||0,cp_extra:t.extra||"",notify_url:t.notify_url||""};return r=Object.assign(r,e),this.httpPost(w.create_pay_order,r)}},{key:"_deductGameCurrency",value:function(t,e){var r=this;return new Promise((function(n,o){var i={order_no:t,pf_openid:r._userInfo.pf_openid,pay_id:e};r.httpGet(w.midas_consume,i).then((function(t){var e=t.data;m.debug("扣除游戏币成功",e),n(e)})).catch((function(t){var e={errcode:-1,errmsg:JSON.stringify(t)};m.debug("扣除游戏币异常",e),o({err:e})}))}))}},{key:"loginServer",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;this.httpPost(w.login,e).then((function(e){var n,o,i,a,u,c,s,f;e&&0==parseInt(e.code)&&e.data?(t._userInfo.user_id=String(null!==(n=e.data.user.user_id)&&void 0!==n?n:""),t._userInfo.open_id=String(null!==(o=e.data.user.open_id)&&void 0!==o?o:""),t._userInfo.pf_openid=String(null!==(i=e.data.platform.open_id)&&void 0!==i?i:""),t._userInfo.nickname=String(null!==(a=e.data.user.nickname)&&void 0!==a?a:""),t._userInfo.avatar=String(null!==(u=e.data.user.avatar)&&void 0!==u?u:""),t._userInfo.token=String(null!==(c=e.data.token)&&void 0!==c?c:""),t._userInfo.access_token=String(null!==(s=e.data.access_token)&&void 0!==s?s:""),t._userInfo.ping_interval=parseInt(null!==(f=e.data.user.ping.interval)&&void 0!==f?f:0),m.debug("登录成功",t._userInfo),r&&r.onLoginSuccess(t._userInfo)):(m.error("登录失败",e),r&&r.onLoginFailure(tt.create(-1,JSON.stringify(e))))})).catch((function(t){m.debug("登录失败",t),r&&r.onLoginFailure(tt.create(-1,JSON.stringify(t)))}))}}]),e}(X);Qt.LOG_TAG="",Qt.SDKLogger=function(t){function e(){return Kt(this,e),qt(this,e,arguments)}return Wt(e,t),Gt(e,null,[{key:"error",value:function(){for(var t,r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];n[0]="["+Qt.LOG_TAG+"] "+n[0],(t=Ut(Ht(e),"error",this)).call.apply(t,[this].concat(n))}},{key:"debug",value:function(){for(var t,r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];n[0]="["+Qt.LOG_TAG+"] "+n[0],(t=Ut(Ht(e),"debug",this)).call.apply(t,[this].concat(n))}},{key:"warn",value:function(){for(var t,r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];n[0]="["+Qt.LOG_TAG+"] "+n[0],(t=Ut(Ht(e),"warn",this)).call.apply(t,[this].concat(n))}}]),e}(m);var Zt=Qt;function te(t){return(te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ee(){return(ee="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ce(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function re(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,oe(n.key),n)}}function ne(t,e,r){return e&&re(t.prototype,e),r&&re(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function oe(t){var e=function(t,e){if("object"!=te(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=te(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==te(e)?e:String(e)}function ie(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ae(t,e,r){return e=ce(e),function(t,e){if(e&&("object"===te(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,ue()?Reflect.construct(e,r||[],ce(t).constructor):e.apply(t,r))}function ue(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(ue=function(){return!!t})()}function ce(t){return(ce=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function se(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&fe(t,e)}function fe(t,e){return(fe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var le=function(t){function e(){var t;return ie(this,e),(t=ae(this,e,arguments)).sdk=e.sdk,t.app=e.app,t.AdLogger=e.AdLogger,t}return se(e,t),ne(e)}(X);le.sdk=function(){var t=yr.shareInstance();return!t&&m.error("SDK未初始化或初始化失败"),t},le.app=function(){var t=le.sdk()?le.sdk().app:null;return!t&&m.error("平台SDK未初始化或初始化失败"),t},le.AdLogger=function(t){function e(){return ie(this,e),ae(this,e,arguments)}return se(e,t),ne(e,null,[{key:"error",value:function(){for(var t,r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];n[0]="["+le.sdk().getLogTag()+"] "+n[0],(t=ee(ce(e),"error",this)).call.apply(t,[this].concat(n))}},{key:"debug",value:function(){for(var t,r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];n[0]="["+le.sdk().getLogTag()+"] "+n[0],(t=ee(ce(e),"debug",this)).call.apply(t,[this].concat(n))}},{key:"warn",value:function(){for(var t,r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];n[0]="["+le.sdk().getLogTag()+"] "+n[0],(t=ee(ce(e),"warn",this)).call.apply(t,[this].concat(n))}}]),e}(m);var pe=le;function de(t){return(de="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ye(t,e,r){return e=ve(e),function(t,e){if(e&&("object"===de(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,he()?Reflect.construct(e,r||[],ve(t).constructor):e.apply(t,r))}function he(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(he=function(){return!!t})()}function ve(t){return(ve=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ge(t,e){return(ge=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function be(t){return(be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _e(t){var e=function(t,e){if("object"!=be(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=be(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==be(e)?e:String(e)}function me(t,e,r){return e=Oe(e),function(t,e){if(e&&("object"===be(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Se()?Reflect.construct(e,r||[],Oe(t).constructor):e.apply(t,r))}function Se(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Se=function(){return!!t})()}function Oe(t){return(Oe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function we(t,e){return(we=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Ee=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),me(this,e,arguments)}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&we(t,e)}(e,t),r=e,(n=[{key:"preLoadBanner",value:function(t,e){var r=this;if(this.AdLogger.debug("预加载Banner广告配置",t),void 0===this.app().createBannerAd)return this.AdLogger.error("当前平台不支持createBannerAd"),void e(u.PreLoadFail,"当前平台不支持createBannerAd");if(!t||!t.style||!t.adUnitId)return this.AdLogger.error("预加载Banner广告配置参数错误, 请核查, 当前配置",t),void e(u.PreLoadFail,"预加载Banner广告配置参数错误, 请核查, 当前配置:"+JSON.stringify(t));if(this._bannerAd)return this.AdLogger.error("请勿重复调用Banner广告预加载"),void e(u.PreLoadFail,"重复调用Banner广告预加载");this._bannerAd=this.app().createBannerAd(t);var n=this.app().getSystemInfoSync(),o=n.screenWidth,i=n.screenHeight,a=n.model,c=-1!=a.indexOf("iPhone X")||-1!=a.indexOf("iPhone11"),s=0;c&&(s=-1),v.isNotEmptyObj(this._bannerAd)?(this.removePreLoadBannerAdAllListener(),this._onPreLoadBannerAdLoad=function(){r.AdLogger.debug("预加载Banner广告加载成功"),r._bannerLoaded=!0,r.removePreLoadBannerAdAllListener(),e(u.PreLoadSuccess)},this._onPreLoadBannerAdError=function(t){r.AdLogger.error("预加载Banner广告出现异常",t),r._bannerLoaded=!1,r.removePreLoadBannerAdAllListener(),e(u.PreLoadFail,"预加载Banner广告出现异常, 错误信息:"+JSON.stringify(t))},this._onPreLoadBannerAdResize=function(e){r.AdLogger.debug("预加载Banner尺寸变化",e),r._bannerAd&&r._bannerAd.offResize(r._onPreLoadBannerAdResize),r._bannerAd&&(r._bannerAd.adSize=v.cloneObj(e)),t.onResize&&"function"==typeof t.onResize?(r.AdLogger.debug("预加载Banner自定义处理尺寸变化事件",e),r._bannerAd&&t.onResize(r._bannerAd,e,t.style)):(r._bannerAd&&(r._bannerAd.style.left=o/2-e.width/2+.1),r._bannerAd&&(r._bannerAd.style.top=i-e.height+s+.1))},this._bannerAd.onLoad(this._onPreLoadBannerAdLoad),this._bannerAd.onError(this._onPreLoadBannerAdError),this._bannerAd.onResize(this._onPreLoadBannerAdResize)):(this.AdLogger.error("预加载Banner广告失败, 创建后的Banner广告对象为空"),e(u.PreLoadFail,"预加载Banner广告失败, 创建后的Banner广告对象为空"))}},{key:"showBanner",value:function(t,e,r){var n=this;if(this.AdLogger.debug("触发Banner显示",t,e),void 0===this.app().createBannerAd)return this.AdLogger.error("当前平台不支持createBannerAd"),void r(u.Error,"当前平台不支持createBannerAd");if(!e||!e.style||!e.adUnitId)return this.AdLogger.error("Banner广告配置参数错误, 请核查, 当前配置:",e),void r(u.Error,"Banner广告配置参数错误, 请核查, 当前配置:"+JSON.stringify(e));if(void 0===e.style.left||void 0===e.style.top||void 0===e.style.width||void 0===e.style.height)return this.AdLogger.error("Banner广告尺寸配置参数错误, 请核查, 当前配置:",e),void r(u.Error,"'Banner广告尺寸配置参数错误, 当前配置:"+JSON.stringify(e));this.removePreLoadBannerAdAllListener(),this.removeBannerAdAllListener(),this._bannerVisible=!0;var o=this._bannerAd;if(v.isNotEmptyObj(o)&&(this.AdLogger.debug("使用缓存Banner对象",o),this._bannerLoaded?(e.onRedraw&&"function"==typeof e.onRedraw&&(o.adSize&&this._bannerVisible&&this._bannerLoaded?(this.AdLogger.debug("Banner onRedraw",o.adSize),e.onRedraw(o,o.adSize,e.style)):this.AdLogger.error("Banner onRedraw 无法触发, 有以下可能性: OnResizeRes为空/当前Banner未加载/当前Banner为隐藏状态")),o.show().then((function(){n.AdLogger.debug("Banner广告显示成功"),n._bannerVisible?r(u.Show):(n.AdLogger.debug("Banner广告立即隐藏"),n.hideBanner())})).catch((function(t){n.AdLogger.error("Banner广告显示失败",t),r(u.Error,"Banner广告显示失败:"+JSON.stringify(t))}))):(this.AdLogger.error("Banner未完成加载, 清楚旧的Banner对象"),o.hide(),o.destroy(),o=this._bannerAd=null)),!v.isNotEmptyObj(o)&&(this.AdLogger.debug("创建Banner对象"),o=this._bannerAd=this.app().createBannerAd({adUnitId:e.adUnitId,adIntervals:e.adIntervals||null,style:e.style}),this.AdLogger.debug("创建的bannerAd对象属性：",Object.keys(o)),!v.isNotEmptyObj(o)))return this.AdLogger.debug("创建的bannerAd对象为空"),void r(u.Error,"创建的bannerAd对象为空");var i=this.app().getSystemInfoSync(),a=i.screenWidth,c=i.screenHeight,s=i.model,f=-1!=s.indexOf("iPhone X")||-1!=s.indexOf("iPhone11"),l=0;f&&(l=-1),this._onBannerAdError=function(t){n.AdLogger.error("Banner广告出现异常",t),n.removeBannerAdAllListener(),n._bannerAd=null,r(u.Error,"Banner广告出现异常"+JSON.stringify(t))},this._onBannerAdLoad=function(){n.AdLogger.debug("Banner广告加载成功"),o&&o.offLoad(n._onBannerAdLoad),n._bannerLoaded=!0,r(u.LoadSuccess),n._bannerVisible?o&&o.show().then((function(){n.AdLogger.debug("Banner广告显示成功"),n._bannerVisible?r(u.Show):n.hideBanner()})).catch((function(t){n.AdLogger.error("Banner广告显示失败",t),r(u.Error,"Banner广告显示失败:"+JSON.stringify(t))})):n.AdLogger.debug("Banner当前状态为隐藏, 不处理onResize后续显示动作")},this._onBannerResize=function(t){n.AdLogger.debug("Banner尺寸变化",t),o&&o.offResize(n._onBannerResize),o&&(o.adSize=v.cloneObj(t)),e.onResize&&"function"==typeof e.onResize?(n.AdLogger.debug("自定义处理尺寸变化事件",JSON.stringify(t)),o&&e.onResize(o,t,e.style)):(o&&(o.style.left=a/2-t.width/2+.1),o&&(o.style.top=c-t.height+l+.1))},o.onError(this._onBannerAdError),o.onLoad(this._onBannerAdLoad),o.onResize(this._onBannerResize)}},{key:"hideBanner",value:function(t){this.AdLogger.debug("隐藏Banner"),this._bannerVisible=!1,this._bannerAd?(this._bannerAd.hide(),this._bannerAd.destroy(),this._bannerAd=null,t&&t(u.Hide)):this.AdLogger.warn("hideBanner无效，BannerAd对象不存在")}},{key:"removePreLoadBannerAdAllListener",value:function(){v.isNotEmptyObj(this._bannerAd)&&(this._onPreLoadBannerAdLoad&&this._bannerAd.offLoad(this._onPreLoadBannerAdLoad),this._onPreLoadBannerAdError&&this._bannerAd.offError(this._onPreLoadBannerAdError),this._onPreLoadBannerAdResize&&this._bannerAd.offResize(this._onPreLoadBannerAdResize))}},{key:"removeBannerAdAllListener",value:function(){v.isNotEmptyObj(this._bannerAd)&&(this._onBannerAdLoad&&this._bannerAd.offLoad(this._onBannerAdLoad),this._onBannerAdError&&this._bannerAd.offError(this._onBannerAdError),this._onBannerResize&&this._bannerAd.offResize(this._onBannerResize))}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,_e(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=ye(this,e,arguments))._bannerAd=null,t._onPreLoadBannerAdLoad=null,t._onPreLoadBannerAdResize=null,t._onBannerAdLoad=null,t._onBannerAdError=null,t._onBannerResize=null,t._bannerVisible=!1,t._bannerLoaded=!1,t._lastLoadBannerTime=0,t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ge(t,e)}(e,t),r=e,Object.defineProperty(r,"prototype",{writable:!1}),r;var r}(pe));function Pe(t){return(Pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ae(t,e,r){return e=ke(e),function(t,e){if(e&&("object"===Pe(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,je()?Reflect.construct(e,r||[],ke(t).constructor):e.apply(t,r))}function je(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(je=function(){return!!t})()}function ke(t){return(ke=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Le(t,e){return(Le=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Re(t){return(Re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ie(t){var e=function(t,e){if("object"!=Re(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Re(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Re(e)?e:String(e)}function Te(t,e,r){return e=Ce(e),function(t,e){if(e&&("object"===Re(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,xe()?Reflect.construct(e,r||[],Ce(t).constructor):e.apply(t,r))}function xe(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(xe=function(){return!!t})()}function Ce(t){return(Ce=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function De(t,e){return(De=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Ne=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Te(this,e,arguments)}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&De(t,e)}(e,t),r=e,(n=[{key:"preLoadVideo",value:function(t,e){var r=this;if(this.AdLogger.debug("预加载视频广告配置",JSON.stringify(t)),void 0===this.app().createRewardedVideoAd)return this.AdLogger.error("当前平台不支持createRewardedVideoAd"),void e(u.PreLoadFail,"当前平台不支持createRewardedVideoAd");if(!t||!t.adUnitId)return this.AdLogger.error("预加载视频广告配置参数错误，请核查, 当前配置参数",t),void e(u.PreLoadFail,"预加载视频广告配置参数错误, 当前配置参数:"+JSON.stringify(t));var n=t.adUnitId,o=this._rewardedVideoAds[n];if(o)return this.AdLogger.error("请勿重复调用激励视频预加载"),void e(u.PreLoadFail,"请勿重复调用激励视频预加载");if(t.multiton=!0,o=this._rewardedVideoAds[n]=this.app().createRewardedVideoAd(t),v.isNotEmptyObj(o)){this.removePreLoadVideoAdAllListener(n);var i=this._onPreLoadVideoAdLoads[n]=function(){r.AdLogger.debug("激励视频预加载完成"),r._hasPreLoadVideoAds[n]=!0,c(),e(u.PreLoadSuccess)},a=this._onPreLoadVideoAdErrors[n]=function(t){r.AdLogger.error("激励视频预加载出现异常",t),r._hasPreLoadVideoAds[n]=!1,c(),e(u.PreLoadFail,"激励视频预加载出现异常"+JSON.stringify(t))},c=function(){v.isNotEmptyObj(o)&&(i&&o.offLoad(i),a&&o.offError(a))};o.onLoad(i),o.onError(a)}else this.AdLogger.error("预加载视频失败，创建后的激励视频对象为空"),e(u.PreLoadFail,"预加载视频失败，创建后的激励视频对象为空")}},{key:"showRewardVideo",value:function(t,e){var r=this;if(this.AdLogger.debug("激励视频配置",t),void 0===this.app().createRewardedVideoAd)return this.AdLogger.error("当前平台不支持createRewardedVideoAd"),void e(u.Error,"当前平台不支持createRewardedVideoAd");if(!t||!t.adUnitId)return this.AdLogger.error("激励视频配置参数错误, 请核查, 当前配置参数",t),void e(u.Error,"配置参数错误, 请核查, 当前配置参数:"+JSON.stringify(t));var n=t.adUnitId;this.removePreLoadVideoAdAllListener(n),this.removeVideoAdAllListener(n),this.removeADTimeOut();var o=!1,i=this._rewardedVideoAds[n];if(v.isNotEmptyObj(i)||(this.AdLogger.debug("创建激励视频广告"),o=!0,this._hasPreLoadVideoAds[n]=!1,t.multiton=!0,i=this._rewardedVideoAds[n]=this.app().createRewardedVideoAd(t)),!v.isNotEmptyObj(i))return this.AdLogger.error("激励视频显示失败, 视频对象为空"),void e(u.Error,"激励视频显示失败, 视频对象为空");var a=t.timeout||1e4;a&&"number"==typeof a&&a>0&&(this.AdLogger.debug("添加广告拉取超时设定，超时时间设置为："+a+"毫秒"),this.runTimeOut=!0,this.adTimeOut=setTimeout((function(){r.runTimeOut&&(r.AdLogger.warn("触发广告拉取超时"),r.isADTimeOut=!0,y(),e(u.LoadTimeOut,"激励视频广告拉取超时"))}),a));var c=function(){r.adTimeOut&&(r.AdLogger.debug("移除广告拉取超时设定"),r.runTimeOut=!1,clearTimeout(r.adTimeOut),r.adTimeOut=null)};if(this._hasPreLoadVideoAds[n]&&1==this._hasPreLoadVideoAds[n]){if(this.AdLogger.debug("使用已加载完成的激励视频广告"),c(),this._hasPreLoadVideoAds[n]=!1,this.isADTimeOut)return;i.show().then((function(){r.AdLogger.debug("激励视频显示成功"),e(u.Show)})).catch((function(t){r.AdLogger.error("激励视频显示失败",t),e(u.Error,"使用已加载完成的激励视频显示失败"+JSON.stringify(t))}))}else o||(this.AdLogger.debug("主动load加载广告"),i.load());var s=this._onVideoAdLoads[n]=function(){if(r.AdLogger.debug("激励视频加载完成"),e(u.LoadSuccess),v.isNotEmptyObj(i)){if(c(),s&&i.offLoad(s),r.isADTimeOut)return;i.show().then((function(){r.AdLogger.debug("激励视频显示成功"),e(u.Show)})).catch((function(t){r.AdLogger.error("激励视频显示失败",t),e(u.Error,"激励视频显示失败"+JSON.stringify(t))}))}},f=this._onVideoAdNextLoads[n]=function(){r.AdLogger.debug("激励视频自动加载下一条广告完成"),v.isNotEmptyObj(i)&&(f&&i.offLoad(f),p&&i.offError(p)),r._hasPreLoadVideoAds[n]=!0},l=this._onVideoAdErrors[n]=function(t){r.AdLogger.error("激励视频出现异常",t),y(),e(u.Error,"激励视频出现异常:"+JSON.stringify(t))},p=this._onVideoAdNextErrors[n]=function(t){r.AdLogger.debug("激励视频自动加载下一条广告异常",t),v.isNotEmptyObj(i)&&(f&&i.offLoad(f),p&&i.offError(p)),r._hasPreLoadVideoAds[n]=!1},d=this._onVideoAdCloses[n]=function(t){r.AdLogger.debug("激励视频点击关闭",t),v.isNotEmptyObj(i)&&(f&&i.onLoad(f),p&&i.onError(p)),y(),e(u.Close),t&&t.isEnded||void 0===t?(r.AdLogger.debug("激励视频播放成功"),e(u.PlayComplete)):(r.AdLogger.debug("激励视频中途退出"),e(u.Skip))},y=function(){r.AdLogger.debug("激励视频移除所有事件监听"),c(),v.isNotEmptyObj(i)&&(s&&i.offLoad(s),l&&i.offError(l),d&&i.offClose(d))};i.onLoad(s),i.onError(l),i.onClose(d)}},{key:"removePreLoadVideoAdAllListener",value:function(t){v.isNotEmptyObj(this._rewardedVideoAds[t])&&(this._onPreLoadVideoAdLoads[t]&&this._rewardedVideoAds[t].offLoad(this._onPreLoadVideoAdLoads[t]),this._onPreLoadVideoAdErrors[t]&&this._rewardedVideoAds[t].offError(this._onPreLoadVideoAdErrors[t]))}},{key:"removeVideoAdAllListener",value:function(t){v.isNotEmptyObj(this._rewardedVideoAds[t])&&(this._onVideoAdLoads[t]&&this._rewardedVideoAds[t].offLoad(this._onVideoAdLoads[t]),this._onVideoAdNextLoads[t]&&this._rewardedVideoAds[t].offLoad(this._onVideoAdNextLoads[t]),this._onVideoAdErrors[t]&&this._rewardedVideoAds[t].offError(this._onVideoAdErrors[t]),this._onVideoAdNextErrors[t]&&this._rewardedVideoAds[t].offError(this._onVideoAdNextErrors[t]),this._onVideoAdCloses[t]&&this._rewardedVideoAds[t].offClose(this._onVideoAdCloses[t]))}},{key:"removeADTimeOut",value:function(){this.runTimeOut=!1,this.isADTimeOut=!1,this.adTimeOut&&(clearTimeout(this.adTimeOut),this.adTimeOut=null)}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ie(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=Ae(this,e,arguments))._rewardedVideoAd=null,t._hasPreLoadVideoAd=!1,t._rewardedVideoAds={},t._hasPreLoadVideoAds={},t._onPreLoadVideoAdLoads={},t._onPreLoadVideoAdErrors={},t._onVideoAdLoads={},t._onVideoAdErrors={},t._onVideoAdCloses={},t._onVideoAdNextLoads={},t._onVideoAdNextErrors={},t.adTimeOut=null,t.runTimeOut=!1,t.isADTimeOut=!1,t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Le(t,e)}(e,t),r=e,Object.defineProperty(r,"prototype",{writable:!1}),r;var r}(pe));function Be(t){return(Be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Me(t,e,r){return e=Ve(e),function(t,e){if(e&&("object"===Be(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Fe()?Reflect.construct(e,r||[],Ve(t).constructor):e.apply(t,r))}function Fe(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Fe=function(){return!!t})()}function Ve(t){return(Ve=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ue(t,e){return(Ue=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Ke(t){return(Ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Je(t){var e=function(t,e){if("object"!=Ke(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Ke(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ke(e)?e:String(e)}function Ge(t,e,r){return e=qe(e),function(t,e){if(e&&("object"===Ke(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Ye()?Reflect.construct(e,r||[],qe(t).constructor):e.apply(t,r))}function Ye(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Ye=function(){return!!t})()}function qe(t){return(qe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ze(t,e){return(ze=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var He=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Ge(this,e,arguments)}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ze(t,e)}(e,t),r=e,(n=[{key:"showInterstitialAd",value:function(t,e){var r=this;if(this.AdLogger.debug("插屏广告配置",t),void 0===this.app().createInterstitialAd)return this.AdLogger.error("当前平台不支持createInterstitialAd"),void e(u.Error,"当前平台不支持createInterstitialAd");if(!t||!t.adUnitId)return this.AdLogger.error("插屏广告配置参数错误，请核查, 当前配置参数",t),void e(u.Error,"插屏广告配置参数错误，请核查, 当前配置参数"+JSON.stringify(t));this._interstitialAd=null;var n=this._interstitialAd=this.app().createInterstitialAd(t);if(!v.isNotEmptyObj(n))return this.AdLogger.error("插屏广告显示失败, 插屏广告对象为空"),void e(u.Error,"插屏广告显示失败, 插屏广告对象为空");var o=function(){try{n.show().then((function(){r.AdLogger.debug("插屏广告显示成功"),e(u.Show)})).catch((function(t){r.AdLogger.error("插屏广告显示失败:",t),e(u.Error,"插屏广告显示失败:"+JSON.stringify(t))}))}catch(t){r.AdLogger.error("插屏广告显示失败:",t),e(u.Error,"插屏广告显示失败:"+JSON.stringify(t))}};try{n.load().then(o).catch((function(t){r.AdLogger.error("插屏广告加载失败",t),e(u.LoadFail,"插屏广告加载失败:"+JSON.stringify(t))}))}catch(t){this.AdLogger.error("插屏广告加载失败:",t),e(u.LoadFail,"插屏广告加载失败:"+JSON.stringify(t))}var i=function(){r.AdLogger.debug("插屏广告点击关闭"),s(),e(u.Close)},a=function t(){r.AdLogger.debug("插屏广告加载完成"),!n.load&&o(),n&&n.offLoad(t),e(u.LoadSuccess)},c=function(t){r.AdLogger.error("插屏广告出现异常",t),s(),e(u.Error,"插屏广告出现异常:"+JSON.stringify(t))},s=function(){n&&n.offClose(i),n&&n.offLoad(a),n&&n.offError(c)};n.onClose(i),n.onLoad(a),n.onError(c)}},{key:"hideInterstitialAd",value:function(){}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Je(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=Me(this,e,arguments))._interstitialAd=null,t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ue(t,e)}(e,t),r=e,Object.defineProperty(r,"prototype",{writable:!1}),r;var r}(pe));function We(t){return(We="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Xe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,$e(n.key),n)}}function $e(t){var e=function(t,e){if("object"!=We(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=We(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==We(e)?e:String(e)}var Qe=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.order_no="",this.trade_no="",this.pay_code_url=""}var e,r,n;return e=t,n=[{key:"build",value:function(){return new t}}],(r=[{key:"withOrderNo",value:function(t){return this.order_no=t,this}},{key:"withTradeNo",value:function(t){return this.trade_no=t,this}},{key:"withPayCodeURL",value:function(t){return this.pay_code_url=t,this}}])&&Xe(e.prototype,r),n&&Xe(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Ze(t){return(Ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function tr(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,er(n.key),n)}}function er(t){var e=function(t,e){if("object"!=Ze(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Ze(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ze(e)?e:String(e)}var rr=function(t,e,r){return e&&tr(t.prototype,e),r&&tr(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}));rr.APP_ID="app_id",rr.APP_KEY="app_key",rr.SDK_CACHE_DEVICE_ID="jysdk_cache_device_id",rr.SDK_CACHE_DEVICE_UUID="jysdk_cache_device_uuid",rr.SDK_CACHE_AID="jysdk_cache_aid",rr.SDK_CACHE_AD_GROUP="jysdk_cache_ad_group",rr.SDK_CACHE_ABTEST="jysdk_abtest",rr.WECHAT_CUSTOM_SERVICE_PURCHASE_DEFAULT_IMG="https://static.game.jingyougz.com/images/h5sdk/purchase.png",rr.PAY_TYPE_NONE=0,rr.PAY_TYPE_WX_JSAPI=1002,rr.PAY_TYPE_WX_SCAN=1004,rr.PAY_TYPE_WX_MIDAS=3001,rr.PAY_TYPE_QQ_MIDAS=3002,rr.PAY_TYPE_KS_MINIGAME=3003,rr.PAY_TYPE_TT_MINI_GAME=3005,rr.PAY_TYPE_OPPO_MINI_GAME=3006,rr.PAY_TYPE_ALIPAY_MINI_GAME=3007;var nr=rr;function or(t){return(or="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ir(t){var e=function(t,e){if("object"!=or(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=or(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==or(e)?e:String(e)}function ar(t,e,r){return e=sr(e),function(t,e){if(e&&("object"===or(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,ur()?Reflect.construct(e,r||[],sr(t).constructor):e.apply(t,r))}function ur(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(ur=function(){return!!t})()}function cr(){return(cr="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=sr(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function sr(t){return(sr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function fr(t,e){return(fr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var lr=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=ar(this,e,arguments))._shareId=0,t._curShareInfo=null,t}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&fr(t,e)}(e,t),r=e,(n=[{key:"createSDKInstance",value:function(){var t=this;this.app=window.wx||{},v.isNotEmptyObj(this.app)?(this.app.onShow((function(){if(t.SDKLogger.debug("WX OnShow"),t.onShow(),!(t._onShowCallbackCount<1))for(var e in t._onShowCallbackList){var r=t._onShowCallbackList[e];r&&r()}})),this.app.onHide((function(){t.SDKLogger.debug("WX OnHide"),t.onHide()}))):m.error("当前运行环境非微信小游戏,请切换到微信小游戏运行环境下调用SDK"),this.addOnShowFunc((function(){t._checkShareRet()}))}},{key:"createADInstance",value:function(){this._adModOfBanner=new Ee,this._adModOfVideo=new Ne,this._adModOfInterstitial=new He}},{key:"getLaunchOptions",value:function(){if(!v.isNotEmptyObj(this.app))return cr(sr(e.prototype),"getLaunchOptions",this).call(this);var t=this.app.getLaunchOptionsSync();m.info("获取小游戏冷启动时的参数",t);var r=Ft.getAllKeys(),n=this._appInfo.app_id+"_"+nr.SDK_CACHE_AID,o=this._appInfo.app_id+"_"+nr.SDK_CACHE_AD_GROUP,i=t.query||{},a=parseInt(i.m_aid||0),u=parseInt(i.m_adgroup||0);return r.includes(n)&&r.includes(o)?(a=parseInt(Ft.getItem(n)||0),u=parseInt(Ft.getItem(o)||0)):(Ft.setItem(n,a),Ft.setItem(o,u)),{scene:t.scene||"unknown",query:JSON.stringify(i||{}),referrer:JSON.stringify(t.referrerInfo||{}),aid:a,ad_group:u}}},{key:"getShareQueryInfo",value:function(){if(!v.isNotEmptyObj(this.app))return cr(sr(e.prototype),"getShareQueryInfo",this).call(this);var t=this.app.getLaunchOptionsSync();return this.SDKLogger.debug("获取进入游戏的分享传值信息",t),{from_share_id:t.query.m_share_id||"",from_share_image_id:t.query.m_share_image_id||0,from_share_user:t.query.m_share_from_user||"",from_share_aid:t.query.m_share_from_aid||0,from_share_ad_group:t.query.m_share_from_ad_group||0}}},{key:"getDeviceInfo",value:function(){if(!v.isNotEmptyObj(this.app))return cr(sr(e.prototype),"getDeviceInfo",this).call(this);var t=this.app.getSystemInfoSync(),r=t.system.split(" ");return{brand:t.brand,model:t.model,os:r.length>=2?r[0].toLowerCase():"unkown",os_ver:r.length>=2?r[1].toLowerCase():"unkown",device_info:JSON.stringify(t)}}},{key:"login",value:function(t){var e=this;v.isNotEmptyObj(this.app)&&this.app.login({success:function(r){if(r.code){e.SDKLogger.debug("login调用成功",r);var n={pf_session:r.code};e.loginServer(n,t)}else e.SDKLogger.error("login调用失败",r.errMsg),t&&t.onLoginFailure(tt.create(-1,r.errMsg))},fail:function(r){e.SDKLogger.error("login调用失败",JSON.stringify(r)),t&&t.onLoginFailure(tt.create(-1,JSON.stringify(r)))}})}},{key:"getUserInfo",value:function(){var t=this;return m.debug("获取用户信息"),new Promise((function(e,r){t.app.getSetting({success:function(n){if(n.authSetting["scope.userInfo"])t.app.getUserInfo({success:function(r){var n,o,i,a;t.SDKLogger.info("获取用户头像昵称成功",r.userInfo);var u=null!==(o=null===(n=null==r?void 0:r.userInfo)||void 0===n?void 0:n.avatarUrl)&&void 0!==o?o:"",c=null!==(a=null===(i=null==r?void 0:r.userInfo)||void 0===i?void 0:i.nickName)&&void 0!==a?a:"";e({avatar:u,nickname:c})},fail:function(t){r("获取用户信息失败, error:"+JSON.stringify(t))}});else{t.SDKLogger.info("创建授权按钮");var o=t.app().getSystemInfoSync(),i=o.screenWidth,a=o.screenHeight,u=o.pixelRatio,c=Math.ceil(i*u),s=Math.ceil(a*u),f=t.app.createUserInfoButton({type:"text",text:"",style:{left:0,top:0,width:c,height:s,backgroundColor:"#ff0000"}});f.onTap((function(r){var n,o,i,a;f.hide(),t.SDKLogger.info("获取用户头像昵称成功",r.userInfo);var u=null!==(o=null===(n=null==r?void 0:r.userInfo)||void 0===n?void 0:n.avatarUrl)&&void 0!==o?o:"",c=null!==(a=null===(i=null==r?void 0:r.userInfo)||void 0===i?void 0:i.nickName)&&void 0!==a?a:"";e({avatar:u,nickname:c})})),f.show()}},fail:function(t){r("获取用户信息失败, error:"+JSON.stringify(t))}})}))}},{key:"pay",value:function(t,e){var r=this;this.app.checkSession({success:function(){r.doPay(t,e)},fail:function(){m.warn("session 已过期，需要重新登录");var n=Qe.build().withOrderNo(t.order_no||"");r.login({onLoginSuccess:function(n){m.debug("登录态失效, 重新登录成功",n.toString()),r.doPay(t,e)},onLoginFailure:function(t){m.debug("登录态失效, 重新登录失败",t),r.app.showModal({title:"温馨提示",content:"下单失败, 登录态已失效",confirmText:"我知道了",showCancel:!1}),e&&e.onPayFailure(n,tt.create(-1,"下单失败, 登录态已失效, 重新登录失败"))},onLoginCancel:function(){r.app.showModal({title:"温馨提示",content:"下单失败, 登录态已失效",confirmText:"我知道了",showCancel:!1}),e&&e.onPayFailure(n,tt.create(-1,"下单失败, 登录态已失效，取消登录"))}})}})}},{key:"doPay",value:function(t,e){var r=this;if(!v.isNotEmptyObj(t))return m.error("请确保传入支付请求参数!");m.info("当前操作系统",this._baseData.os),m.info("支付请求参数",t);var n={cp_order_no:t.order_no,cp_order_money:t.order_money,cp_extra:t.extra||"",product_id:t.product_id||"",product_name:t.product_name||"",notify_url:t.notify_url||""},o=Qe.build().withOrderNo(t.order_no||"");this.createOrder(n).then((function(i){var a=i.data,u=a.pay_ways||[];if(o.withTradeNo(a.order_no||""),u.length>0){var c=u[0].pay_code_url||"";o.withPayCodeURL(c)}if(e&&e.onCreateOrderSuccess(o),m.info("创建订单成功, params:",n," | res:",i),u.length>0){var s=u[0],f=parseInt(s.pay_type);f==nr.PAY_TYPE_NONE?(m.error("暂不支持支付, params:",n," | res:",i),r.app.showModal({title:"温馨提示",content:"游戏暂时不支持支付",confirmText:"我知道了",showCancel:!1}),e&&e.onPayFailure(o,tt.create(l.ERROR_CODE_OF_UNSUPPORTED,"支付功能未开启"))):f==nr.PAY_TYPE_WX_MIDAS?r._midasPay(o,a,e):f==nr.PAY_TYPE_WX_JSAPI?r._startPaymentInMP(t,o,e):f==nr.PAY_TYPE_WX_SCAN?o.pay_code_url?e&&e.onPaySuccess(o):e&&e.onPayFailure(o,tt.create(l.ERROR_CODE_OF_ERROR_DATA,"支付返回数据异常")):e&&e.onPayFailure(o,tt.create(l.ERROR_CODE_OF_UNDEFINED_DATA,"支付返回数据异常"))}else m.error("支付方式配置为空，无法拉起支付 params:",n," | res:",i),r.app.showModal({title:"温馨提示",content:"游戏暂时不支持支付",confirmText:"我知道了",showCancel:!1}),e&&e.onPayFailure(o,tt.create(l.ERROR_CODE_OF_UNSUPPORTED,"服务器返回支付方式为空, 暂不支持支付"))})).catch((function(t){m.error("支付发生错误, params:",n," | err:",t),e&&e.onCreateOrderFailure(o,tt.create(l.ERROR_CODE_OF_SERVER_ERROR,JSON.stringify(t)))}))}},{key:"_midasPay",value:function(t,e,r){"ios"==this._baseData.os&&(m.error("该功能不支持IOS系统","当前设备系统",this._baseData.os),r&&r.onPayFailure(t,tt.create(-1,"当前系统不支持米大师支付"))),this._requestMidasPay(t,e,r)}},{key:"_requestMidasPay",value:function(t,e,r){var n=this,o=parseInt(e.pay_ways[0].pay_id||0);0==o&&r.onPayFailure(t,tt.create(-1,"支付方式配置异常"));var i=e.midas_offerid,a={mode:"game",env:parseInt(e.env),offerId:i,currencyType:"CNY",buyQuantity:parseInt(e.buy_quality),outTradeNo:e.order_no,success:function(e){m.info("米大师支付成功回调, res:",e," | cp_order_no:",t.order_no," | order_no:",t.trade_no);var i=!1,a=function(){m.debug("请求扣除游戏币","cp_order_no:",t.order_no," | order_no:",t.trade_no),n._deductGameCurrency(t.trade_no,o).then((function(e){i=!0,m.info("米大师扣除扣除游戏币成功, res:",e," | cp_order_no:",t.order_no," | order_no:",t.trade_no),r&&r.onPaySuccess(t)})).catch((function(e){m.error("米大师扣除游戏币失败",e),r&&r.onPayFailure(t,tt.create(-1,"米大师扣除游戏币失败"))}))};a(),setTimeout((function(){i||a()}),2e3),setTimeout((function(){i||a()}),5e3)},fail:function(e){m.error("米大师支付失败回调, res:",e," | cp_order_no:",t.order_no," | order_no:",t.trade_no),1==e.errCode?r&&r.onPayCancel(t):r&&r.onPayFailure(t,tt.create(-1,JSON.stringify(e)))},complete:function(t){}};this.SDKLogger.debug("米大师拉起参数",a),v.isNotEmptyObj(this.app)&&this.app.requestMidasPayment(a)}},{key:"_startPaymentInMP",value:function(t,e,r){var n=this,o=t.kefu_msg_title||this._platformConfig.kefu_msg_title,i=t.kefu_msg_path||this._platformConfig.kefu_msg_path,a=t.kefu_msg_img||this._platformConfig.kefu_msg_img||nr.WECHAT_CUSTOM_SERVICE_PURCHASE_DEFAULT_IMG;this.SDKLogger.info("客服消息-充值参数:",t,"| cp_order_no:",e.order_no," | order_no:",e.trade_no),v.isNotEmptyObj(this.app)&&this.app.openCustomerServiceConversation({showMessageCard:!0,sendMessageTitle:o,sendMessagePath:i,sendMessageImg:a,success:function(t){n.SDKLogger.info("【客服消息】跳转成功",t)},fail:function(t){n.SDKLogger.error("【客服消息】跳转失败",t),r&&r.onPayFailure(e,tt.create(-1,JSON.stringify(t)))},complete:function(t){n.SDKLogger.info("【客服消息】跳转完成",t)}})}},{key:"shareAppMessage",value:function(t,e,r,n){this._shareId+=1,this.SDKLogger.debug("主动拉起分享参数",t),v.isNotEmptyObj(this.app)&&this.app.shareAppMessage(t),this._curShareInfo={id:this._shareId,delay:e,success:r,fail:n,time:Date.now()}}},{key:"onShareAppMessage",value:function(t,e,r,n){this._shareId+=1,this.SDKLogger.debug("右上角分享参数",JSON.stringify(t)),this._curShareInfo={id:this._shareId,delay:e,success:r,fail:n,time:Date.now()}}},{key:"_checkShareRet",value:function(){var t=this._curShareInfo;if(this.SDKLogger.debug("分享信息",JSON.stringify(t)),this._curShareInfo=null,t){if(t.id!=this._shareId)return;var e=!1,r=1e3*parseInt(t.delay||3),n=Date.now()-t.time;this.SDKLogger.debug("分享回调间隔时间",n),n>=r&&(e=!0),this.SDKLogger.debug("分享结果",e),e?t.success&&t.success():t.fail&&t.fail()}}},{key:"onNetWorkStatusChange",value:function(t){v.isNotEmptyObj(this.app)&&this.app.onNetworkStatusChange&&this.app.onNetworkStatusChange((function(e){e&&t({isConnected:e.isConnected,networkType:e.networkType})}))}},{key:"offNetWorkStatusChange",value:function(t){v.isNotEmptyObj(this.app)&&this.app.offNetworkStatusChange&&this.app.offNetworkStatusChange(t)}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ir(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(Zt);function pr(t){return(pr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function dr(t){var e=function(t,e){if("object"!=pr(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=pr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==pr(e)?e:String(e)}var yr=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,r;return e=t,(r=[{key:"shareInstance",value:function(){return null==t._sdk&&(console.log("[JYSDK] 当前运行平台: 微信小游戏"),t._sdk=new lr("WX SDK")),t._sdk}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,dr(n.key),n)}}(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function hr(t){return(hr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function vr(t,e,r){return e=br(e),function(t,e){if(e&&("object"===hr(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,gr()?Reflect.construct(e,r||[],br(t).constructor):e.apply(t,r))}function gr(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(gr=function(){return!!t})()}function br(t){return(br=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _r(t,e){return(_r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var mr=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=vr(this,e,arguments)).sdk=e.sdk,t.app=e.app,t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_r(t,e)}(e,t),r=e,Object.defineProperty(r,"prototype",{writable:!1}),r;var r}(X);mr.sdk=function(){var t=yr.shareInstance();return!t&&m.error("SDK未初始化或初始化失败"),t},mr.app=function(){var t=mr.sdk()?mr.sdk().app:null;return!t&&m.error("平台SDK未初始化或初始化失败"),t};var Sr=mr;function Or(t){return(Or="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function wr(t){var e=function(t,e){if("object"!=Or(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Or(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Or(e)?e:String(e)}function Er(t,e,r){return e=Ar(e),function(t,e){if(e&&("object"===Or(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Pr()?Reflect.construct(e,r||[],Ar(t).constructor):e.apply(t,r))}function Pr(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Pr=function(){return!!t})()}function Ar(t){return(Ar=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function jr(t,e){return(jr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var kr=function(e){function n(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),(t=Er(this,n,arguments))._isInited=!1,t}var o,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&jr(t,e)}(n,e),o=n,(i=[{key:"_init",value:function(t){this._isInited||(t.debug&&m.setDebug(!0),m.debug("SDK初始化参数",t),m.debug("当前SDK版本",E.SDKVersion),m.debug("SDK初始化工作开始"),this._appInfo.app_id=t.app_id,this._appInfo.app_key=t.app_key,this._appInfo.channel_id=t.channel_id,this._baseData.client_ver=t.version||"",this.sdk()?Ft.init(this.app()):m.error("未知平台类型，请检查配置"),this._initBaseData(),this._isInited=!0)}},{key:"_initBaseData",value:function(){this._baseData.app_id=this._appInfo.app_id,this._baseData.channel_id=this._appInfo.channel_id,this._baseData.sdk_ver=E.SDKVersion;var t=this._appInfo.app_id+"_"+nr.SDK_CACHE_DEVICE_ID,e=Ft.getItem(t),r=Math.floor(Date.now()/1e3)+v.randomChart(32);this._baseData.trace_id=r,this._baseData.device_id=e||"";var n=this._appInfo.app_id+"_"+nr.SDK_CACHE_DEVICE_UUID,o=Ft.getItem(n);if(o||(o=Math.floor(Date.now()/1e3)+v.randomChart(22),Ft.setItem(n,o)),this._baseData.device_uuid=o,this.sdk()&&this.app()){var i=this.sdk().getLaunchOptions();Object.assign(this._baseData,i);var a=this.sdk().getDeviceInfo();Object.assign(this._baseData,a);var u=this.sdk().getShareQueryInfo();Object.assign(this._baseData,u)}m.info("SDK初始化基础数据",this._baseData)}},{key:"_request",value:function(e,n){var o=this,i=v.cloneObj(this._baseData),u={open_id:this._userInfo.open_id||"",user_id:this._userInfo.user_id||0,pf_openid:this._userInfo.pf_openid||""};i=Object.assign(i,e),i=Object.assign(i,u),(i=Object.assign(i,this._roleInfo)).log_type=n,m.debug("日志请求参数",n,i);var c=w.game_log,s=!1;-1!=[r.CREATE_ROLE,r.LEVEL_UP,r.ENTER_GAME].indexOf(i.log_type)&&(c=w.sdk_log,s=!0),E.PLATFORM!=t.tt&&E.PLATFORM!=t.ks||n!=r.AD||e.ad_type!=a.RewardVideo||(c=w.sdk_log,s=!0),c&&(s?this.httpPost(c,i).then((function(){})).catch((function(){m.error("网络不稳定，数据上报发送失败！缓存数据到本地缓存"),o.saveRequestURLDataToStorage(c,i)})):this.httpGet(c,i).then((function(){})).catch((function(){m.error("网络不稳定，数据上报发送失败！缓存数据到本地缓存"),o.saveRequestURLDataToStorage(c,i)})))}},{key:"saveRequestURLDataToStorage",value:function(t,e){if(v.isObj(e)){var r=Date.now().toString();e.request_flag=1,e.request_create_time=r;var n=t+"||"+JSON.stringify(e);this.sdk().saveRequestURLDataToStorage(r,n)}}},{key:"getRquestURLDataListByStorage",value:function(){var t=new Map;return this.sdk()&&(t=this.sdk().getRquestURLDataListByStorage()),t}},{key:"removeRequestURLDataOfStorage",value:function(t){t&&this.sdk()&&this.sdk().removeRequestURLDataOfStorage(t)}},{key:"_setUproleInfo",value:function(t){return v.isNotEmptyObj(t)?"string"!=typeof t.server_id?(m.error("请确保传入server_id且为string类型数据"),!1):"string"!=typeof t.server_name?(m.error("请确保传入server_name且为string类型数据"),!1):"string"!=typeof t.role_id?(m.error("请确保传入role_id且为string类型数据"),!1):"string"!=typeof t.role_name?(m.error("请确保传入role_name且为string类型数据"),!1):"number"!=typeof t.role_level||t.role_level<0?(m.error("请确保传入role_level且必须大于或等于0, 为number类型数据"),!1):"number"!=typeof t.role_vip||t.role_vip<0?(m.error("请确保传入role_vip且必须大于或等于0, 为number类型数据"),!1):(this._roleInfo.update(t),m.info("***当前游戏玩家信息***",this._roleInfo.toString()),!0):(m.error("请确保传入角色信息!"),!1)}},{key:"_msgSecCheck",value:function(t){var e=this;return new Promise((function(r,n){t&&0!=t.length||(m.error("请检查是否传入content!"),n("请确保传入content, 且不能为空")),e.httpPost(w.sensitive_word_check,{content:t}).then((function(t){m.debug("内容安全检查成功",t.data),r(t.data)})).catch((function(t){m.debug("内容安全检查失败",t),n(t)}))}))}},{key:"_payable",value:function(){var t=this;return new Promise((function(e,r){t._userInfo.access_token||(m.error("当前账号未登录, 请先登录!"),r("当前账号未登录, 请先登录!")),t.httpGet(w.pay_open_state).then((function(t){m.debug("GetIsOpenPay成功",t.data),e(t.data)})).catch((function(t){m.debug("GetIsOpenPay失败",t),r(t)}))}))}},{key:"_miniGameSwitch",value:function(){var t=this;return new Promise((function(e,r){t.httpGet(w.mini_game_switch).then((function(t){m.debug("GetMiniGameSwitch成功",t.data),e(t.data)})).catch((function(t){m.debug("GetMiniGameSwitch失败",t),r(t)}))}))}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,wr(n.key),n)}}(o.prototype,i),Object.defineProperty(o,"prototype",{writable:!1}),n}(Sr);function Lr(t){return(Lr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Rr(t){var e=function(t,e){if("object"!=Lr(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Lr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Lr(e)?e:String(e)}function Ir(t,e,r){return e=xr(e),function(t,e){if(e&&("object"===Lr(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Tr()?Reflect.construct(e,r||[],xr(t).constructor):e.apply(t,r))}function Tr(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Tr=function(){return!!t})()}function xr(t){return(xr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Cr(t,e){return(Cr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Dr=new(function(e){function n(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),(t=Ir(this,n,arguments)).isVisible=!0,t._pingTimer=null,t._sdkInitTime=Date.now(),t._loadTime=Date.now(),t._sumLoadTTL=0,t._stageTime=Math.floor(Date.now()/1e3),t._sumStageTTL=0,t._eventTriggerMap={},t._stageSubmitMap={},t._errorMap={},t._logMap={},t}var o,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Cr(t,e)}(n,e),o=n,(i=[{key:"_init",value:function(){this._sdkInitTime=Date.now(),this._initErrorListener(),this._initMemoryWarnListener(),this._initLogMap()}},{key:"_onShow",value:function(){this.isVisible=!0,this._loadTime=Date.now(),this._stageTime=Math.floor(Date.now()/1e3)}},{key:"_onHide",value:function(){this.isVisible=!1,this._sumLoadTTL+=Math.round((Date.now()-this._loadTime)/1e3),this._sumStageTTL+=Math.floor(Date.now()/1e3)-this._stageTime}},{key:"_initErrorListener",value:function(){var e=this;m.debug("初始化错误上报监听器");var r=function(t,r,n,o){if(t){var i=q(t);e._errorMap[i]||(e._errorMap[i]=1,e._errorReport(t,P.ERROR,r,n,o))}};if(this.app()&&this.app().onError)E.PLATFORM===t.ks?this.app().onError((function(t){var e;e=t&&"object"==Lr(t)?t.message||"":t||"",r(e,"",P.ERROR,"")})):this.app().onError((function(t){if(t){var e=t.message||"",n=t.stack||"";r(e,"",P.ERROR,n)}}));else{var n=window.onerror;window.onerror=function(t,e,o,i,a){var u=t,c="";a&&a.stack&&(c=a.stack,r(u,e,o,c)),n&&n.call(window,t,e,o,i,a)}}}},{key:"_initMemoryWarnListener",value:function(){var t=this;m.debug("初始化内存告警上报监听器"),this.app()&&this.app().onMemoryWarning&&this.app().onMemoryWarning((function(e){m.debug("触发内存告警上报，当前系统："+t._baseData.os,JSON.stringify(e));var r=0;if(e){var n=0;"number"==typeof e?n=e:"object"==Lr(e)&&e.level&&(n=e.level),5==n?r=s.MODERATE:10==n?r=s.LOW:15==n&&(r=s.CRITICAL)}t._sendMemoryWarnLog(r)}))}},{key:"_initLogMap",value:function(){this._logMap={}}},{key:"_createRole",value:function(t){m.debug("触发创建角色日志上报",t),this._setUproleInfo(t)&&(this._request(null,r.CREATE_ROLE),this.sdk()&&this.app()&&this.sdk().createRole(this._roleInfo))}},{key:"_enterGame",value:function(t){m.debug("触发进入游戏日志上报",t),this._setUproleInfo(t)&&(this._request(null,r.ENTER_GAME),this.sdk()&&this.app()&&this.sdk().enterGame(this._roleInfo))}},{key:"_levelUp",value:function(t){var e=this;m.debug("触发等级上报",t),this._setUproleInfo(t)&&(e._request(null,r.LEVEL_UP),e.sdk()&&e.app()&&e.sdk().levelUp(e._roleInfo))}},{key:"_sendLoadingLog",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"start";m.debug("触发加载性能分析上报");var e=0,n={start:"start_loading",end:"end_loading"}[t];if(this._logMap[n])return m.error("已触发过性能分析[".concat(n,"]日志上报，请勿重复上报"));if("start"===t)e=Math.round((Date.now()-this._loadTime)/1e3+this._sumLoadTTL),this._loadTime=Date.now(),this._sumLoadTTL=0,this.sdk()&&this.app()&&this.sdk().loadingStart();else{if("end"!==t)return void m.error("性能分析传入类型错误,请使用start_loding(开始加载)和end_loading(结束加载), 非法类型[".concat(t,"]"));if(!this._logMap.start_loading)return m.error("请先完成开始加载上报");e=Math.round((Date.now()-this._loadTime)/1e3+this._sumLoadTTL),this.sdk()&&this.app()&&this.sdk().loadingEnd()}var o={load_time:e,load_type:n};m.debug("性能分析上报",o),this._request(o,r.LOAD),this._logMap[n]=!0}},{key:"_stageStart",value:function(t){if(m.debug("触发关卡开始上报, 关卡ID:",t),!t)return m.error("关卡数据错误, 关卡ID不可为空",t);var e=Math.floor(Date.now()/1e3);this._stageTime=e,this._stageSubmitMap[t]={enter_time:e};var n={stage_id:t,stage_step:1};m.debug("触发关卡开始上报参数",n),this._request(n,r.STAGE),this.sdk()&&this.app()&&this.sdk().stageStart(t)}},{key:"_stageEnd",value:function(t,e){if(m.debug("触发关卡结束上报, 关卡ID:",t," Success:",e),!t)return m.error("关卡数据错误, 关卡ID不可为空",t);if("boolean"!=typeof e)return m.error("`success`参数类型错误, 必须为Boolean值");var n=Math.floor(Date.now()/1e3);if(!this._stageSubmitMap[t])return m.error("当前关卡并未先触发关卡开始上报，会导致统计数据异常");this._stageSubmitMap[t].complete_time=n;var o=n-this._stageTime+this._sumStageTTL;this._sumStageTTL=0;var i={stage_id:t,stage_ttl:o,stage_step:2};e||(i.stage_step=3),m.debug("触发关卡结束上报参数",i),this._request(i,r.STAGE),this.sdk()&&this.app()&&this.sdk().stageEnd(t,e)}},{key:"_sendEvent",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!t)return m.error("事件值不能为空");if(!["number","string"].includes(Lr(t)))return m.error("事件值类型错误",t);m.debug("事件参数",e);var n=1;if(this._eventTriggerMap[t]){var o=this._eventTriggerMap[t].lastTime;if(n=parseInt(this._eventTriggerMap[t].num),Date.now()-o<1e3&&n>=10)return m.error("同一个事件1秒钟内最大只能触发10次",t)}if(t.toString().length>64)return m.error("Key长度不能大于64",t);var i=null;if(e&&"object"===Lr(e)){i={};var a=0;for(var u in e){if("string"!=typeof u){m.error("key只允许字符串类型");break}if(a>3){m.error("目前只允许三个Key存在");break}if("string"==typeof e[u]&&(""===e[u]||"undefined"===e[u]||"NaN"===e[u]||e[u].toString().length>512)){m.error("data中每个值不能为空字符串,undefined,null,NaN");break}if("number"!=typeof e[u]&&"string"!=typeof e[u]&&"boolean"!=typeof e[u]){m.error("data中每个值的类型必须为Number或者String或者Boolean");break}m.debug(u,e[u]),i[u]=e[u],a++}}if(this._eventTriggerMap[t]){var c=this._eventTriggerMap[t].lastTime;Date.now()-c<1e3&&(n+=1)}this._eventTriggerMap[t]={lastTime:Date.now(),num:n};var s={event:t,event_params:i?JSON.stringify(i):""};this._request(s,r.EVENT)}},{key:"_errorReport",value:function(t,e,n,o,i){if(t=t||"",i=i||"",n=n||"",o=o<0?0:o,e&&P[e])if(t&&0!=t.trim().length){var a={error_level:e,error_trace:i,error_file:n,error_line:o,error_msg:t,error_md5:q(t)};m.debug("[BI] 错误日志上报",a),this._request(a,r.ERROR)}else m.warn("[BI] 错误日志上报被拒绝：由于错误信息为空，不进行日志上报，请检查是否传入错误信息！");else m.warn("[BI] 错误日志上报被拒绝：由于错误等级不符合规则，不进行日志上报，请检查是否正确传入错误等级！")}},{key:"_startPing",value:function(){var t=this;if(!this._pingTimer&&0!=this._userInfo.ping_interval){m.debug("***开启时长统计***");var e={online_ttl:this._userInfo.ping_interval};this._pingTimer=setInterval((function(){t.isVisible?(m.debug("当前页面可见，发送Ping"),t._request(e,r.ONLINE)):m.warn("当前页面不可见, 不发送Ping")}),1e3*this._userInfo.ping_interval)}}},{key:"_stopPing",value:function(){m.debug("***关闭时长统计***"),clearInterval(this._pingTimer),this._pingTimer=null}},{key:"_sendAdLog",value:function(t,e,n){var o={ad_scene:t,ad_type:e,ad_action:n,ad_error:arguments.length>3&&void 0!==arguments[3]?arguments[3]:""};m.debug("发送广告行为日志",o),this._request(o,r.AD)}},{key:"_sendShareLog",value:function(t,e){var n={share_id:t,share_image_id:0,share_action:e};m.debug("发送分享行为日志",JSON.stringify(n)),this._request(n,r.SHARE)}},{key:"_sendAdxLog",value:function(t,e,n){var o={adx_pos:t,adx_id:e,adx_action:n};m.debug("发送交叉导流行为日志",JSON.stringify(o)),this._request(o,r.ADX)}},{key:"_sendMemoryWarnLog",value:function(t){var e={memory_level:t};m.debug("发送内存告警日志，请求参数：",JSON.stringify(e)),this._request(e,r.MEMORY_WARN)}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Rr(n.key),n)}}(o.prototype,i),Object.defineProperty(o,"prototype",{writable:!1}),n}(kr));function Nr(t){return(Nr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Br(t){var e=function(t,e){if("object"!=Nr(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Nr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Nr(e)?e:String(e)}function Mr(t,e,r){return e=Vr(e),function(t,e){if(e&&("object"===Nr(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Fr()?Reflect.construct(e,r||[],Vr(t).constructor):e.apply(t,r))}function Fr(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Fr=function(){return!!t})()}function Vr(t){return(Vr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ur(t,e){return(Ur=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}n(3921);var Kr=new(function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=Mr(this,e,arguments))._funcConfig=null,t}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ur(t,e)}(e,t),r=e,(n=[{key:"get",value:function(){var t=this;return m.debug("获取功能开关"),new Promise((function(e,r){t._funcConfig?e(Object.fromEntries(t._funcConfig)):t.httpGet(w.func_switch).then((function(n){var o;m.debug("获取功能开关配置结果",n);var i=null!==(o=n.data)&&void 0!==o?o:null;if(i instanceof Object)return t._funcConfig=new Map,Object.keys(i).forEach((function(e){var r=!1;try{r=1==parseInt(i[e])}catch(t){}t._funcConfig.set(e,r)})),void e(Object.fromEntries(t._funcConfig));m.error("功能开关配置读取失败：配置不存在"),r(tt.create(-1,"配置不存在"))})).catch((function(t){m.error("功能开关配置读取失败",JSON.stringify(t)),r(t)}))}))}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Br(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(kr));function Jr(t){return(Jr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Gr(t){var e=function(t,e){if("object"!=Jr(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Jr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Jr(e)?e:String(e)}function Yr(t,e,r){return e=zr(e),function(t,e){if(e&&("object"===Jr(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,qr()?Reflect.construct(e,r||[],zr(t).constructor):e.apply(t,r))}function qr(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(qr=function(){return!!t})()}function zr(t){return(zr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Hr(t,e){return(Hr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Wr=new(function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=Yr(this,e,arguments))._onlineParam=null,t}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Hr(t,e)}(e,t),r=e,(n=[{key:"get",value:function(){var t=this;return m.debug("获取在线参数配置"),new Promise((function(e,r){t._onlineParam?e(Object.fromEntries(t._onlineParam)):t.httpGet(w.online_params).then((function(n){var o;m.debug("获取在线参数配置结果",n);var i=null!==(o=n.data)&&void 0!==o?o:null;if(i instanceof Object)return t._onlineParam=new Map,Object.keys(i).forEach((function(e){var r;t._onlineParam.set(e,null!==(r=i[e])&&void 0!==r?r:"")})),void e(Object.fromEntries(t._onlineParam));m.error("在线参数配置读取失败：配置不存在"),r(tt.create(-1,"配置不存在"))})).catch((function(t){m.error("在线参数配置读取失败",JSON.stringify(t)),r(t)}))}))}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Gr(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(kr));function Xr(t){return(Xr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $r(t){var e=function(t,e){if("object"!=Xr(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Xr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Xr(e)?e:String(e)}function Qr(t,e,r){return e=tn(e),function(t,e){if(e&&("object"===Xr(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Zr()?Reflect.construct(e,r||[],tn(t).constructor):e.apply(t,r))}function Zr(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Zr=function(){return!!t})()}function tn(t){return(tn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function en(t,e){return(en=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var rn=new(function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=Qr(this,e,arguments))._abMap={},t}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&en(t,e)}(e,t),r=e,(n=[{key:"_abTest",value:function(t){var e=this;return new Promise((function(r,n){if(!t||!e._userInfo.token)return m.error("A/B测试必要参数缺失, 用户为登陆或者必要参数为空"),n(tt.create(l.ERROR_CODE_OF_ERROR_PARAMS,"A/B测试必要参数缺失, 用户为登陆或者必要参数为空"));if("number"!=typeof t)return m.error("plan_id数据类型错误"),n(tt.create(l.ERROR_CODE_OF_ERROR_PARAMS,"计划ID数据类型错误"));if(e._abMap[t])return r(e._abMap[t]);var o={plan_id:t};e.httpGet(w.abtest,o).then((function(n){m.debug("获取A/B测试数据成功",n),e._abMap[t]=n.data,r(n.data)})).catch((function(t){m.error("获取A/B测试数据失败"),n(t)}))}))}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,$r(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(kr));function nn(t){return(nn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function on(t){var e=function(t,e){if("object"!=nn(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=nn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==nn(e)?e:String(e)}function an(t,e,r){return e=cn(e),function(t,e){if(e&&("object"===nn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,un()?Reflect.construct(e,r||[],cn(t).constructor):e.apply(t,r))}function un(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(un=function(){return!!t})()}function cn(t){return(cn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function sn(t,e){return(sn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var fn=new(function(e){function r(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),(t=an(this,r,arguments))._shareConfig={},t._hasLoadShareConfig=!1,t}var n,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&sn(t,e)}(r,e),n=r,(i=[{key:"_initShareConfig",value:function(){var e=this;return m.debug("初始化分享素材配置"),new Promise((function(r,n){E.PLATFORM==t.wx||E.PLATFORM==t.qq||E.PLATFORM==t.tt?e.httpGet(w.share).then((function(t){e._hasLoadShareConfig=!0,e._shareConfig=t.data||{},m.debug("分享素材配置",t),r()})).catch((function(t){m.warn("ShareConfig配置读取失败, 该错误可忽略"),n(t)})):n("当前平台不支持获取分享配置")}))}},{key:"_shareAppMessage",value:function(){var e=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};m.debug("触发主动分享，分享参数",r);var n=r.shareId||"default",i=r.imageUrlId,a=r.delay||3,u=r.imageUrl||"",c=r.title||"",s=r.query||"";this._getShareInfoByScene(n).then((function(f){f&&(m.debug("服务器分享配置",f),n=f.share_id,i||(i=f.share_image_id),u||(u=f.share_image),c||(c=f.share_title),s||(s=f.share_query)),i=i||e._platformConfig.share_image_id,u=u||e._platformConfig.share_image_url,c=c||e._platformConfig.share_title,s=(s?s+"&":"")+v.obj2Str({m_share_id:n,m_share_image_id:0,m_share_from_user:e._userInfo.open_id,m_share_from_aid:e._baseData.aid,m_share_from_ad_group:e._baseData.ad_group});var l,p,d=r.success||null,y=r.fail||null;if(l=function(){m.debug("分享成功"),Dr._sendShareLog(n,o.Success),d&&"function"==typeof d&&d()},p=function(t){m.debug("分享失败",t),Dr._sendShareLog(n,o.Fail),y&&"function"==typeof y&&y(t)},E.PLATFORM===t.wx){var h=r.imageUrlId||"",g={title:c,imageUrl:u,query:s,imageUrlId:h};Dr._sendShareLog(n,o.PullUp),e.sdk().shareAppMessage(g,a,l,p)}else if(E.PLATFORM===t.qq){var b=r.shareAppType||null,_=r.entryDataHash||null,S={title:c,imageUrl:u,query:s,shareAppType:b,entryDataHash:_,success:l,fail:p};Dr._sendShareLog(n,o.PullUp),e.sdk().shareAppMessage(S,a,l,p)}else if(E.PLATFORM===t.tt){var O=r.channel||"",w=r.templateId||"",P=r.desc||"",A=r.extra||{},j={title:c,imageUrl:u,query:s,channel:O,templateId:w,desc:P,extra:A,success:l,fail:p};Dr._sendShareLog(n,o.PullUp),e.sdk().shareAppMessage(j,a,l,p)}else e.sdk().shareAppMessage(r,a,l,p)})).catch((function(t){m.error("获取分享配置异常",t)}))}},{key:"_onShareAppMessage",value:function(){var e=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};m.debug("监听用户点击右上角菜单的「转发」按钮时触发的事件",r);var n=r.shareId||"default",i=r.imageUrlId,a=r.delay||3,u=r.imageUrl||"",c=r.title||"",s=r.query||"";this._getShareInfoByScene(n).then((function(f){f&&(m.debug("服务器分享配置",f),n=f.share_id,i||(i=f.share_image_id),u||(u=f.share_image),c||(c=f.share_title),s||(s=f.share_query)),i=i||e._platformConfig.share_image_id,u=u||e._platformConfig.share_image_url,c=c||e._platformConfig.share_title,s=(s?s+"&":"")+v.obj2Str({m_share_id:n,m_share_image_id:0,m_share_from_user:e._userInfo.open_id,m_share_from_aid:e._baseData.aid,m_share_from_ad_group:e._baseData.ad_group});var l,p,d=r.success||null,y=r.fail||null;if(l=function(t){m.debug("分享成功",t),Dr._sendShareLog(n,o.Success),d&&"function"==typeof d&&d(t)},p=function(t){m.debug("分享失败",t),Dr._sendShareLog(n,o.Fail),y&&"function"==typeof y&&y(t)},E.PLATFORM==t.wx||E.PLATFORM==t.qq){var h=r.imageUrlId||"",g={title:c,imageUrl:u,query:s,imageUrlId:h},b=["shareAppMessage","shareTimeline"];E.PLATFORM==t.qq&&(b=["qq","qzone","wechatFriends","wechatMoment"]),e.app().showShareMenu({withShareTicket:!0,menus:b}),m.debug("监听用户点击右上角菜单的「转发」按钮时触发的事件, 参数",g),e.app().onShareAppMessage((function(){return m.debug("右上角转发按钮触发",g),Dr._sendShareLog(n,o.PullUp),e.sdk().onShareAppMessage(g,a,l,p),g})),"function"==typeof e.app().onShareTimeline&&(m.debug("监听用户点击右上角菜单的「分享到朋友圈」按钮时触发的事件, 参数",g),e.app().onShareTimeline((function(){return m.debug("右上角转发按钮触发分享到朋友圈",g),Dr._sendShareLog(n,o.PullUp),g})))}else{if(t.tt!=E.PLATFORM)return e.sdk().onShareAppMessage(r,a,l,p);var _=r.channel||"",S=r.templateId||"",O=r.desc||"",w=r.extra||"",P={title:c,imageUrl:u,query:s,channel:_,templateId:S,desc:O,extra:w,success:l,fail:p};e.app().showShareMenu({withShareTicket:!0}),m.debug("监听用户点击右上角菜单的「转发」按钮时触发的事件, 参数:",P),e.app().onShareAppMessage((function(){return m.debug("右上角转发按钮触发"),Dr._sendShareLog(n,o.PullUp),P}))}})).catch((function(t){m.error("onShareAppMessage异常",t)}))}},{key:"_getShareConfigByScene",value:function(t){var e=this._shareConfig[t]||[];if(e.length>0){var r=v.random(0,e.length-1);return m.debug("获取分享配置",e[r]),e[r]||null}return null}},{key:"_getShareInfoByScene",value:function(t){var e=this;return m.debug("当前分享配置",this._shareConfig),new Promise((function(r,n){e._hasLoadShareConfig?r(e._getShareConfigByScene(t)):e._initShareConfig().then((function(){r(e._getShareConfigByScene(t))})).catch((function(t){n(t)}))}))}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,on(n.key),n)}}(n.prototype,i),Object.defineProperty(n,"prototype",{writable:!1}),r}(kr));function ln(t){return(ln="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function pn(t){var e=function(t,e){if("object"!=ln(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=ln(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ln(e)?e:String(e)}function dn(t,e,r){return e=hn(e),function(t,e){if(e&&("object"===ln(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,yn()?Reflect.construct(e,r||[],hn(t).constructor):e.apply(t,r))}function yn(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(yn=function(){return!!t})()}function hn(t){return(hn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function vn(t,e){return(vn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}n(113);var gn=new(function(e){function r(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),(t=dn(this,r,arguments))._gameVideoConfig=[],t._hasLoadGameVideoConfig=!1,t}var n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&vn(t,e)}(r,e),n=r,(o=[{key:"loadAllConfig",value:function(){var e=this;return m.debug("获取游戏视频配置"),new Promise((function(r,n){E.PLATFORM!=t.tt&&(m.warn("当前平台不支持游戏视频"),n("当前平台不支持游戏视频")),e._hasLoadGameVideoConfig?r(e._gameVideoConfig):e.httpGet(w.game_video).then((function(t){e._hasLoadGameVideoConfig=!0,e._gameVideoConfig=t.data||[],Array.isArray(e._gameVideoConfig)||(e._gameVideoConfig=[]),m.info("游戏视频配置获取成功",e._gameVideoConfig),r(e._gameVideoConfig)})).catch((function(t){m.warn("游戏视频配置读取失败"),n(t)}))}))}},{key:"showVideo",value:function(t){var e=this;return m.debug("显示游戏视频",t),new Promise((function(r,n){e._getVideoConfig(t).then((function(t){e._playVideo(t).then((function(){r()})).catch((function(t){n(t)}))})).catch((function(t){m.warn("游戏视频数据获取失败, err:",t),n(t)}))}))}},{key:"_getVideoConfig",value:function(t){var e=this;return new Promise((function(r,n){if(e._hasLoadGameVideoConfig){var o=e._getConfigByPos(t);o?r(o):(m.error("游戏视频配置为空，Pos:",t),n("配置数据为空"))}else e.loadAllConfig().then((function(){r(e._getConfigByPos(t))})).catch((function(t){m.error("游戏视频数据获取失败",t),n("游戏视频数据获取失败")}))}))}},{key:"_getConfigByPos",value:function(t){var e;return(null===(e=(this._gameVideoConfig.find((function(e){return e.pos_key===t}))||{}).videos)||void 0===e?void 0:e[0])||{}}},{key:"_playVideo",value:function(t){var e=this;return m.debug("播放游戏视频",t),new Promise((function(r,n){var o,i,a,u=t.video_url||"",c=parseInt((null===(o=t.config)||void 0===o?void 0:o.auto_pause_time)||0);if(!u)return m.error("视频配置错误, 缺少视频地址，Config",t),void n("视频配置错误");var s=null;if(window.cc?s=null===(i=window.cc.game)||void 0===i?void 0:i.canvas:window.Laya&&(s=null===(a=window.Laya.Render)||void 0===a?void 0:a.canvas),!s)return m.error("获取Canvas对象为空，无法拉起视频, 仅支持Cocos/Laya引擎"),void n("获取Canvas对象失败");e.app().showLoading({title:"加载中..."});var f=e.app().getSystemInfoSync(),l=f.screenWidth,p=f.screenHeight,d=f.pixelRatio,y=Math.ceil(l*d),h=Math.ceil(p*d);try{var v=e.app().createOffscreenVideo();v.src=u;var g=0;v.onCanplay((function(){if(e.app().hideLoading(),v.width=y,v.height=h,v.play(),c>0)var t=setTimeout((function(){v.pause(),clearTimeout(t)}),1e3*c);function n(){m.debug("屏幕触摸结束, 移除监听"),v.play()}!function t(){g=requestAnimationFrame(t),v.paintTo(s,0,0,0,0,v.width,v.height)}(),v.onPause((function(){m.debug("视频播放暂停, 监听屏幕触摸"),e.app().onTouchEnd(n)})),v.onPlay((function(){m.debug("视频播放, 取消屏幕触摸监听"),e.app().offTouchEnd(n)})),v.onEnded((function(){m.info("游戏视频播放完成"),e.app().hideLoading(),e.app().offTouchEnd(n),g>0&&cancelAnimationFrame(g),v.destroy(),r()}))})),v.onError((function(t){m.error("游戏视频播放出现错误",t),e.app().hideLoading(),v.pause(),g>0&&cancelAnimationFrame(g),v.destroy(),n(t)}))}catch(t){e.app().hideLoading(),m.error("播放视频失败",t),n(t)}}))}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,pn(n.key),n)}}(n.prototype,o),Object.defineProperty(n,"prototype",{writable:!1}),r}(kr));function bn(t){return(bn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _n(t){var e=function(t,e){if("object"!=bn(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=bn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==bn(e)?e:String(e)}function mn(t,e,r){return e=On(e),function(t,e){if(e&&("object"===bn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Sn()?Reflect.construct(e,r||[],On(t).constructor):e.apply(t,r))}function Sn(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Sn=function(){return!!t})()}function On(t){return(On=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function wn(t,e){return(wn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var En=new(function(e){function r(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),(t=mn(this,r,arguments))._adxConfig=[],t._hasLoadAdxConfig=!1,t._isJumped=!1,t._hideTime=0,t}var n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&wn(t,e)}(r,e),n=r,(o=[{key:"_init",value:function(){var t=this;this.app().onShow((function(){if(t._isJumped&&t._jumpOption&&t._hideTime>0){var e=t._adxConfig[t._jumpOption.pos].list.find((function(e){return e.adx_id==t._jumpOption.adx_id}))||{},r=(new Date).getTime()-t._hideTime;m.info("导流点配置",e),m.info("隐藏间隔时长(毫秒)",r),e&&r>=1e3*parseInt(e.skip_time)&&t.report(t._jumpOption.adx_id,"get_reward").then((function(r){m.info("上报交叉导流领取奖励成功",r),2==r.state&&t._jumpOption.adx_id==r.adx_id&&(Dr._sendAdxLog(t._jumpOption.pos,t._jumpOption.adx_id,i.Reward),t._jumpOption.reward&&t._jumpOption.reward({adx_id:t._jumpOption.adx_id,pos:t._jumpOption.pos,reward_num:e.reward_num,reward_state:2})),t._isJumped=!1,t._hideTime=0,t._jumpOption=null})).catch((function(t){m.error("请求失败",t)}))}t._hasLoadAdxConfig=!1})),this.app().onHide((function(){t._hideTime=(new Date).getTime()}))}},{key:"_loadConfig",value:function(){var e=this;return m.debug("获取交叉导流配置"),new Promise((function(r,n){E.PLATFORM!=t.wx&&(m.warn("当前平台不支持交叉导流"),n("当前平台不支持交叉导流")),e._hasLoadAdxConfig?r():e.httpGet(w.adx_config).then((function(t){e._hasLoadAdxConfig=!0,e._adxConfig=t.data||{},m.info("交叉导流获取成功",e._adxConfig),r()})).catch((function(t){m.warn("交叉导流获取失败"),n(t)}))}))}},{key:"report",value:function(t,e){var r=this;return m.debug("上报交叉导流动作"),new Promise((function(n,o){r.httpPost(w.adx_report,{adx_id:t,adx_action:e}).then((function(t){m.info("上报交叉导流动作成功",t),n(t.data)})).catch((function(t){m.warn("上报交叉导流动作失败"),o(t)}))}))}},{key:"getAdxConfig",value:function(t){var e=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return new Promise((function(n,o){e._loadConfig().then((function(){var i=e._adxConfig[t];if(i){var a=parseInt(i.open_limit);if(a>0&&r>0&&a>r)m.error("交叉导流未达到开放条件"),o("未达到开放条件");else{var u=i.list;if(u){var c=[];u.forEach((function(t){var e=parseInt(t.open_limit);e>0&&r>0&&e>r||c.push({adx_id:t.adx_id,game_name:t.game_name,game_icon:t.game_icon,reward_num:t.reward_num,reward_state:t.reward_state,sort:t.sort})})),c.sort((function(t,e){return e.sort-t.sort})).forEach((function(t){delete t.sort})),c?n(c):o("配置数据为空")}else o("配置数据为空")}}else m.warn("配置数据不存在"),o("配置数据不存在")})).catch((function(t){m.warn("配置数据读取失败"),o(t)}))}))}},{key:"adxJump",value:function(t){var e=this;this._jumpOption=null,this._isJumped=!1,this._hideTime=0;var r=this._adxConfig[t.pos].list.find((function(e){return e.adx_id==t.adx_id}))||{};if(r)try{Dr._sendAdxLog(t.pos,t.adx_id,i.PullUp),this.app().navigateToMiniProgram({appId:r.game_appid,path:r.game_path,success:function(){Dr._sendAdxLog(t.pos,t.adx_id,i.Success),e._jumpOption=t,e._isJumped=!0,m.info("跳转小程序成功",r),e.report(t.adx_id,"jump_success"),t.success&&t.success()},fail:function(e){m.warn("跳转小程序失败",e),Dr._sendAdxLog(t.pos,t.adx_id,i.Fail),t.fail&&t.fail(e)},complete:function(e){m.debug("跳转小程序完成",e),t.complete&&t.complete(e)}})}catch(e){m.error("跳转小程序异常",e),t.fail&&t.fail(e)}else m.error("跳转配置不存在"),t.fail&&t.fail("跳转配置不存在")}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,_n(n.key),n)}}(n.prototype,o),Object.defineProperty(n,"prototype",{writable:!1}),r}(kr));function Pn(t){return(Pn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function An(t){var e=function(t,e){if("object"!=Pn(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Pn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Pn(e)?e:String(e)}function jn(t,e,r){return e=Rn(e),function(t,e){if(e&&("object"===Pn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,kn()?Reflect.construct(e,r||[],Rn(t).constructor):e.apply(t,r))}function kn(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(kn=function(){return!!t})()}function Ln(){return(Ln="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Rn(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Rn(t){return(Rn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function In(t,e){return(In=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Tn=new(function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),jn(this,e,arguments)}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&In(t,e)}(e,t),r=e,(n=[{key:"_init",value:function(t){this._isInited||(Ln(Rn(e.prototype),"_init",this).call(this,t),Dr._init(),En._init(),m.debug("BI初始化工作结束"))}},{key:"isInited",value:function(){return this._isInited}},{key:"_onShow",value:function(){Dr._onShow()}},{key:"_onHide",value:function(){Dr._onHide()}},{key:"_createRole",value:function(t){Dr._createRole(t)}},{key:"_enterGame",value:function(t){Dr._enterGame(t)}},{key:"_levelUp",value:function(t){Dr._levelUp(t)}},{key:"_shareAppMessage",value:function(t){fn._shareAppMessage(t)}},{key:"_onShareAppMessage",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return fn._onShareAppMessage(t)}},{key:"_getFuncSwitch",value:function(){return Kr.get()}},{key:"_getOnlineParam",value:function(){return Wr.get()}},{key:"_sendLoadingLog",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"init";Dr._sendLoadingLog(t)}},{key:"_stageStart",value:function(t){Dr._stageStart(t)}},{key:"_stageEnd",value:function(t,e){Dr._stageEnd(t,e)}},{key:"_sendEvent",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;Dr._sendEvent(t,e)}},{key:"_sendAdLog",value:function(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";Dr._sendAdLog(t,e,r,n)}},{key:"_abTest",value:function(t){return rn._abTest(t)}},{key:"_getGameVideoConfig",value:function(){return gn.loadAllConfig()}},{key:"_showGameVideo",value:function(t){return gn.showVideo(t)}},{key:"_getAdxConfig",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return En.getAdxConfig(t,e)}},{key:"_adxJump",value:function(t){En.adxJump(t)}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,An(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(kr));function xn(t){return(xn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Cn(t){var e=function(t,e){if("object"!=xn(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=xn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==xn(e)?e:String(e)}function Dn(t,e,r){return e=Bn(e),function(t,e){if(e&&("object"===xn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Nn()?Reflect.construct(e,r||[],Bn(t).constructor):e.apply(t,r))}function Nn(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Nn=function(){return!!t})()}function Bn(t){return(Bn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Mn(t,e){return(Mn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Fn=new(function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=Dn(this,e,arguments))._videoStatus=c.Null,t}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Mn(t,e)}(e,t),r=e,(n=[{key:"_preLoadBanner",value:function(t){m.debug("触发Banner预加载",t),t=t||{},Dr._sendAdLog("",a.Banner,u.PreLoadPull),this.sdk()&&this.app()&&this.sdk().preLoadBanner(t,(function(t,e){Dr._sendAdLog("",a.Banner,t,e||"")}))}},{key:"_showBanner",value:function(t,e){if(m.debug("触发Banner显示",t,e),""===t||"string"!=typeof t&&"number"!=typeof t)return m.error("广告触发场景值为空/类型错误");e=e||{},Dr._sendAdLog(t,a.Banner,u.Pull);try{this.sdk()&&this.app()&&this.sdk().showBanner(t,e,(function(e,r){Dr._sendAdLog(t,a.Banner,e,r||"")}))}catch(e){m.error("showBanner Something Error",e),"object"===xn(e)?Dr._sendAdLog(t,a.Banner,u.Error,JSON.stringify(e)):Dr._sendAdLog(t,a.Banner,u.Error,e)}}},{key:"_hideBanner",value:function(){m.debug("隐藏Banner"),this.sdk()&&this.app()&&this.sdk().hideBanner((function(t,e){Dr._sendAdLog("",a.Banner,t,e||"")}))}},{key:"_preLoadRewardVideo",value:function(t){m.debug("触发预加载激励视频广告",t),t=t||{},this.sdk()&&this.app()&&this.sdk().preLoadVideo(t,(function(t,e){Dr._sendAdLog("",a.RewardVideo,t,e||"")}))}},{key:"_showRewardVideo",value:function(t,e,r){var n=this;if(m.debug("触发显示激励视频广告",t,e),""===t||"string"!=typeof t&&"number"!=typeof t)return m.error("广告触发场景值为空/类型错误");if(this._videoStatus==c.Loading)return m.debug("视频正在拉起状态"),void(r&&r(u.Error,"视频正在拉起状态"));this._videoStatus=c.Loading,Dr._sendAdLog(t,a.RewardVideo,u.Pull),e=e||{};try{this.sdk()&&this.app()&&this.sdk().showRewardVideo(e,(function(e,o){n._videoStatus=c.Null,m.debug("激励视频广告回调, scene:",t,"adaction:",e,"adderr:",o||""),Dr._sendAdLog(t,a.RewardVideo,e,o||""),e!=u.Close&&r&&r(e,o)}))}catch(e){m.error("showRewardVideo Something Error",e),"object"===xn(e)?Dr._sendAdLog(t,a.RewardVideo,u.LoadFail,JSON.stringify(e)):Dr._sendAdLog(t,a.RewardVideo,u.LoadFail,e),this._videoStatus=c.Null,r&&r(u.Error,e)}}},{key:"_showInterstitialAd",value:function(t,e,r){if(m.debug("触发拉起插屏广告",t,e),""===t||"string"!=typeof t&&"number"!=typeof t)return m.error("广告触发场景值为空/类型错误");if(!e)return m.error("插屏广告位广告配置数据为空");Dr._sendAdLog(t,a.Interstitial,u.Pull),e=e||{};try{this.sdk()&&this.app()&&this.sdk().showInterstitialAd(e,(function(e,n){m.debug("插屏广告回调, scene:",t,"adaction:",e,"adderr:",n),Dr._sendAdLog(t,a.Interstitial,e,n||""),r&&r(e,n||"")}))}catch(e){m.error("showInterstitalAd Something Error",e),"object"===xn(e)?Dr._sendAdLog(t,a.Interstitial,u.LoadFail,JSON.stringify(e)):Dr._sendAdLog(t,a.Interstitial,u.LoadFail,e),r&&r(u.LoadFail,e)}}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Cn(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(pe));function Vn(t){return(Vn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Un(t){var e=function(t,e){if("object"!=Vn(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Vn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Vn(e)?e:String(e)}function Kn(t,e,r){return e=Gn(e),function(t,e){if(e&&("object"===Vn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Yn(t)}(t,Jn()?Reflect.construct(e,r||[],Gn(t).constructor):e.apply(t,r))}function Jn(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Jn=function(){return!!t})()}function Gn(t){return(Gn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Yn(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function qn(t,e){return(qn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var zn=new(function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=Kn(this,e)).sdkInited=!1,t.initFlag=!1,t.loginFlag=!1,t.sdk()&&t.sdk().setGlobalListener(Yn(t)),t}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&qn(t,e)}(e,t),r=e,(n=[{key:"setGlobalListener",value:function(t){console.log("[JYSDK] 注册全局监听"),this.globalListener=t}},{key:"isInited",value:function(){return this.sdkInited}},{key:"canInit",value:function(){return 0==this.initFlag}},{key:"isLogined",value:function(){return v.isNotEmptyObj(this._userInfo)&&""!=this._userInfo.access_token}},{key:"init",value:function(){var t=this;if(m.debug("调用初始化接口"),this.isInited())return this.onInitSuccess(),void m.warn("SDK已初始化成功, 无需重复操作!");this.initFlag=!0,this.httpPost(w.init).then((function(e){m.debug("初始化请求成功",e);var r=t._appInfo.app_id+"_"+nr.SDK_CACHE_DEVICE_ID;Ft.setItem(r,e.data.device_id||""),t._baseData.device_id=e.data.device_id||"",Object.assign(t._platformConfig,e.data.channel_config||{}),t._appInfo.app_state=1===parseInt(e.data.states.app_state||""),t._appInfo.login_state=1===parseInt(e.data.states.login_state||""),t._appInfo.pay_state=1===parseInt(e.data.states.pay_state||""),1===parseInt(e.data.open_debug||"")&&m.setDebug(!0),t.sdk()&&t.sdk().init(t)})).catch((function(e){m.error("初始化网络请求发生异常",e),t.onInitFailure(e)}))}},{key:"login",value:function(){return m.debug("调用登录接口"),this._appInfo.login_state?this.isLogined()?(this.onLoginSuccess(this._userInfo),m.warn("账号已登录, 请勿重复请求登录!")):this.loginFlag?m.error("请勿重复调用JYSDK登录方法"):(this.loginFlag=!0,void(this.sdk()&&this.sdk().login(this))):m.warn("登录功能关闭, 暂时无法登录")}},{key:"getUserInfo",value:function(){var t=this;return m.debug("调用获取用户信息接口"),new Promise((function(e,r){if(t._userInfo&&t._userInfo.avatar&&t._userInfo.nickname&&t._userInfo.avatar.length>0&&t._userInfo.nickname.length>0)return e({avatar:t._userInfo.avatar,nickname:t._userInfo.nickname});t.sdk()&&t.sdk().getUserInfo().then((function(r){var n,o,i=null!==(n=r.avatar)&&void 0!==n?n:"",a=null!==(o=r.nickname)&&void 0!==o?o:"";if(t._userInfo&&(t._userInfo.avatar=i,t._userInfo.nickname=a),i&&a&&i.length>0&&a.length>0){var u={avatar:i,nickname:a};t.httpPost(w.update_info,u).then((function(t){m.debug("更新用户头像、昵称成功",t)})).catch((function(t){m.debug("更新用户头像、昵称失败",t)}))}e({avatar:i,nickname:a})})).catch((function(t){r(t)}))}))}},{key:"logout",value:function(){return m.debug("调用注销接口"),this.isInited()?this.isLogined()?void(this.sdk()&&this.sdk().logout(this)):(this.onLogoutFailure(tt.create(-1,"账号未登录, 暂不能注销账号!")),m.warn("账号未登录, 暂不能注销账号!")):(this.onLogoutFailure(tt.create(-1,"初始化未完成, 请先完成SDK初始化!")),m.warn("初始化未完成, 请先完成SDK初始化!"))}},{key:"pay",value:function(t){return m.debug("调用支付接口"),this.isLogined()?t&&t.order_money&&t.order_no&&t.product_id&&t.product_name?(m.debug("***当前支付参数***",t),void(this.sdk()&&this.sdk().pay(t,this))):m.error("支付参数是必须的, 请检查是否传入支付参数!"):(this.onPayFailure({order_no:t.order_no||""},tt.create(-1,"暂不能支付, 请先登录!")),m.warn("暂不能支付, 请先登录!"))}},{key:"onResult",value:function(t,e,r){switch(t){case f.CODE_OF_INIT_SUCCESS:this.sdkInited=!0,this._platformConfig.open_share_listen&&fn._onShareAppMessage();break;case f.CODE_OF_INIT_FAILURE:this.sdkInited=!1,this.initFlag=!1;break;case f.CODE_OF_LOGIN_SUCCESS:Dr._startPing();break;case f.CODE_OF_LOGIN_FAILURE:this.loginFlag=!1,this._userInfo.reset(),Dr._stopPing();break;case f.CODE_OF_LOGIN_CANCEL:this.loginFlag=!1;break;case f.CODE_OF_LOGOUT_SUCCESS:this.loginFlag=!1,this._userInfo.reset(),Dr._stopPing();case f.CODE_OF_LOGOUT_FAILURE:case f.CODE_OF_PAY_SUCCESS:case f.CODE_OF_PAY_FAILURE:case f.CODE_OF_PAY_CANCEL:}this.globalListener&&this.globalListener(t,e,r)}},{key:"onInitSuccess",value:function(){m.debug("***初始化成功***"),this.onResult(f.CODE_OF_INIT_SUCCESS,{},tt.create())}},{key:"onInitFailure",value:function(t){m.error("***初始化失败***",t?t.toString():"unknown"),this.onResult(f.CODE_OF_INIT_FAILURE,{},t||tt.create())}},{key:"onLoginSuccess",value:function(t){m.debug("***登录成功***",t?t.toString():"unknown");var e={open_id:t.open_id,pf_openid:t.pf_openid,access_token:t.access_token};this.onResult(f.CODE_OF_LOGIN_SUCCESS,e,tt.create())}},{key:"onLoginFailure",value:function(t){m.error("***登录失败***",t?t.toString():"unknown"),this.onResult(f.CODE_OF_LOGIN_FAILURE,{},t||tt.create())}},{key:"onLoginCancel",value:function(){m.warn("***登录取消***"),this.onResult(f.CODE_OF_LOGIN_CANCEL,{},tt.create())}},{key:"onLogoutSuccess",value:function(){m.debug("***注销成功***"),this.onResult(f.CODE_OF_LOGOUT_SUCCESS,{},tt.create())}},{key:"onLogoutFailure",value:function(t){m.error("***注销失败***",t?t.toString():"unknown"),this.onResult(f.CODE_OF_LOGOUT_FAILURE,{},t||tt.create())}},{key:"onCreateOrderSuccess",value:function(t){m.debug("***创建订单成功***",t),this.onResult(f.CODE_OF_CREATE_ORDER_SUCCESS,t,tt.create())}},{key:"onCreateOrderFailure",value:function(t,e){m.debug("***创建订单失败***",e?e.toString():"unknown"),this.onResult(f.CODE_OF_CREATE_ORDER_FAILURE,t,e||tt.create())}},{key:"onPaySuccess",value:function(t){m.debug("***支付成功***"),this.onResult(f.CODE_OF_PAY_SUCCESS,t,tt.create())}},{key:"onPayFailure",value:function(t,e){m.error("***支付失败***",e?e.toString():"unknown"),this.onResult(f.CODE_OF_PAY_FAILURE,t,e||tt.create())}},{key:"onPayCancel",value:function(t){m.warn("***支付取消***"),this.onResult(f.CODE_OF_PAY_CANCEL,t,tt.create())}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Un(n.key),n)}}(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}(Sr));function Hn(t){return(Hn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Wn(t){var e=function(t,e){if("object"!=Hn(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Hn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Hn(e)?e:String(e)}var Xn=new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,r;return e=t,(r=[{key:"setGlobalListener",value:function(t){zn.setGlobalListener(t)}},{key:"isInited",value:function(){return zn.isInited()}},{key:"init",value:function(t){return parseInt(t.app_id)>0&&parseInt(t.channel_id)>0&&t.app_key?zn.canInit()?(Tn._init(t),void zn.init()):console.error("请勿重复执行JYSDK初始化"):console.error("请传入正确AppId/ChannelId/AppKey")}},{key:"isLogined",value:function(){return zn.isLogined()}},{key:"login",value:function(){if(!this.isInited())return console.error("请先完成JYSDK初始化");zn.login()}},{key:"getUserInfo",value:function(){return this.isInited()?this.isLogined()?zn.getUserInfo():new Promise((function(t,e){console.error("请先完成登录操作"),e("请先完成登录操作")})):new Promise((function(t,e){console.error("请先完成JYSDK初始化"),e("请先完成JYSDK初始化")}))}},{key:"logout",value:function(){if(!this.isInited())return console.error("请先完成JYSDK初始化");zn.logout()}},{key:"pay",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.isInited())return console.error("请先完成JYSDK初始化");zn.pay(t)}},{key:"shareAppMessage",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.isInited())return console.error("请先完成JYSDK初始化");Tn._shareAppMessage(t)}},{key:"onShareAppMessage",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.isInited()?Tn._onShareAppMessage(t):console.error("请先完成JYSDK初始化")}},{key:"sendCreateRoleLog",value:function(t){return this.isInited()?this.isLogined()?void Tn._createRole(t):console.error("请先完成登录操作"):console.error("请先完成JYSDK初始化")}},{key:"sendEnterGameLog",value:function(t){return this.isInited()?this.isLogined()?void Tn._enterGame(t):console.error("请先完成登录操作"):console.error("请先完成JYSDK初始化")}},{key:"sendRoleLevelLog",value:function(t){return this.isInited()?this.isLogined()?void Tn._levelUp(t):console.error("请先完成登录操作"):console.error("请先完成JYSDK初始化")}},{key:"sendLoadingStartLog",value:function(){if(!Tn.isInited())return console.error("请先完成JYSDK-BI初始化");Tn._sendLoadingLog("start")}},{key:"sendLoadingEndLog",value:function(){if(!Tn.isInited())return console.error("请先完成JYSDK-BI初始化");Tn._sendLoadingLog("end")}},{key:"sendEventLog",value:function(t,e){if(!Tn.isInited())return console.error("请先调用JYSDK初始化");Tn._sendEvent(t,e)}},{key:"getFuncSwitch",value:function(){return Tn.isInited()?Tn._getFuncSwitch():new Promise((function(t,e){return console.error("请先调用JYSDK初始化"),e("请先调用JYSDK初始化")}))}},{key:"getOnlineParam",value:function(){return Tn.isInited()?Tn._getOnlineParam():new Promise((function(t,e){return console.error("请先调用JYSDK初始化"),e("请先调用JYSDK初始化")}))}},{key:"abTest",value:function(t){return this.isInited()?this.isLogined()?Tn._abTest(t):new Promise((function(t,e){return console.error("请先完成登录操作"),e("请先完成登录操作")})):new Promise((function(t,e){return console.error("请先完成JYSDK初始化"),e("请先完成JYSDK初始化")}))}},{key:"sendStageStartLog",value:function(t){return this.isInited()?this.isLogined()?void Tn._stageStart(t):console.error("请先完成登录操作"):console.error("请先完成JYSDK初始化")}},{key:"sendStageEndLog",value:function(t,e){return this.isInited()?this.isLogined()?void Tn._stageEnd(t,e):console.error("请先完成登录操作"):console.error("请先完成JYSDK初始化")}},{key:"sendADLog",value:function(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";if(!this.isInited())return console.error("请先完成JYSDK初始化");Tn._sendAdLog(t,e,r,n)}},{key:"payable",value:function(){return this.isInited()?Tn._payable():new Promise((function(t,e){return console.error("请先完成JYSDK初始化"),e("请先完成JYSDK初始化")}))}},{key:"miniGameSwitch",value:function(){return Tn.isInited()?Tn._miniGameSwitch():new Promise((function(t,e){return console.error("请先调用JYSDK初始化"),e("请先调用JYSDK初始化")}))}},{key:"msgSecCheck",value:function(t){return this.isInited()?this.isLogined()?Tn._msgSecCheck(t):new Promise((function(t,e){return console.error("请先完成登录操作"),e("请先完成登录操作")})):new Promise((function(t,e){return console.error("请先完成JYSDK初始化"),e("请先完成JYSDK初始化")}))}},{key:"getGameVideoConfig",value:function(){return this.isInited()?Tn._getGameVideoConfig():new Promise((function(t,e){return console.error("请先完成JYSDK初始化"),e("请先完成JYSDK初始化")}))}},{key:"showGameVideo",value:function(t){return this.isInited()?Tn._showGameVideo(t):new Promise((function(t,e){return console.error("请先完成JYSDK初始化"),e("请先完成JYSDK初始化")}))}},{key:"getAdxConfig",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.isInited()?this.isLogined()?Tn._getAdxConfig(t,e):new Promise((function(t,e){return console.error("请先完成登录操作"),e("请先完成登录操作")})):new Promise((function(t,e){return console.error("请先完成JYSDK初始化"),e("请先完成JYSDK初始化")}))}},{key:"adxJump",value:function(t){return this.isInited()?this.isLogined()?void Tn._adxJump(t):console.error("请先完成登录操作"):console.error("请先完成JYSDK初始化")}},{key:"preLoadBanner",value:function(t){if(!this.isInited())return console.error("请先完成JYSDK初始化");Fn._preLoadBanner(t)}},{key:"showBanner",value:function(t,e){if(!this.isInited())return console.error("请先完成JYSDK初始化");Fn._showBanner(t,e)}},{key:"hideBanner",value:function(){if(!this.isInited())return console.error("请先完成JYSDK初始化");Fn._hideBanner()}},{key:"preLoadRewardVideo",value:function(t){if(!this.isInited())return console.error("请先完成JYSDK初始化");Fn._preLoadRewardVideo(t)}},{key:"showRewardVideo",value:function(t,e,r){if(!this.isInited())return console.error("请先完成JYSDK初始化");Fn._showRewardVideo(t,e,r)}},{key:"showInterstitialAd",value:function(t,e,r){if(!this.isInited())return console.error("请先完成JYSDK初始化");Fn._showInterstitialAd(t,e,r)}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Wn(n.key),n)}}(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}());try{e.JYSDK=Xn}catch(t){}try{window.JYSDK=Xn}catch(t){}}()}(),t("default",n.exports),n.exports.JYSDK}),{})}}}));

System.register("chunks:///_virtual/JYSdkManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Singleton.ts","./SdkManager.ts"],(function(i){var n,t,e,s,o;return{setters:[function(i){n=i.inheritsLoose},function(i){t=i.cclegacy,e=i.sys},function(i){s=i.Singleton},function(i){o=i.SdkManager}],execute:function(){t._RF.push({},"ee65aN8hh9Cq7QdPpfpdLcL","JYSdkManager",void 0);i("JYSdkManager",function(i){function t(){for(var n,t=arguments.length,e=new Array(t),s=0;s<t;s++)e[s]=arguments[s];return(n=i.call.apply(i,[this].concat(e))||this).sdk=void 0,n.version=void 0,n.enableDebug=void 0,n.initCallback=void 0,n.isLoginedSdk=!1,n.retryInitTimes=0,n}n(t,i);var s=t.prototype;return s.Init=function(){return this.isAvailable()&&(this.sdk=window.JYSDK,this.sdk.setGlobalListener(this.JYSdkListener.bind(this))),this},s.getSdk=function(){return this.sdk},s.UnInit=function(){this.initCallback=null},s.isAvailable=function(){return e.platform==e.Platform.WECHAT_GAME&&window.JYSDK},s.isInited=function(){return!!this.isAvailable()&&this.sdk.isInited()},s.initSdk=function(i,n){this.isAvailable()?(this.version=i,this.enableDebug=n,this.sdk.init(this.getSdkConfig())):this.initCallback&&this.initCallback(!0,this.retryInitTimes)},s.setInitCallback=function(i){return this.initCallback=i,this.retryInitTimes=0,this},s.getSdkConfig=function(){return{app_id:1716790859,app_key:"ofHCFJVjdl7Wr169G5uSOmXjKaMEIniT",channel_id:1003,version:this.version,debug:this.enableDebug}},s.JYSdkListener=function(i,n,t){switch(i){case 1e3:console.log("***初始化成功***"),this.initCallback&&this.initCallback(!0,this.retryInitTimes);break;case 1001:console.error("***初始化失败***",JSON.stringify(t)),this.retryInitTimes+=1,this.initCallback&&this.initCallback(!1,this.retryInitTimes);var e=2e3*this.retryInitTimes;e>2e4&&(e=2e4);var s=this;setTimeout((function(){s.sdk.init(s.getSdkConfig())}),e);break;case 2e3:var a=JSON.stringify(n);console.log("***登录成功***",a),this.isLoginedSdk=!0,o.getInstance().track("jingyou_sdk_login",{state:1,data:a});break;case 2001:var r=JSON.stringify(t);console.error("***登录失败***",r),this.isLoginedSdk=!1,o.getInstance().track("jingyou_sdk_login",{state:2,data:t});break;case 3e3:console.log("***注销成功***"),this.isLoginedSdk=!1;break;case 3001:console.error("***注销失败***",JSON.stringify(t));break;case 4e3:console.log("***下单成功***",n,t),n.pay_code_url&&console.log("显示支付二维码");break;case 4001:console.error("***下单失败***",JSON.stringify(t));break;case 4003:console.log("***支付成功***");break;case 4004:console.error("***支付失败***",JSON.stringify(t));break;case 4005:console.warn("***支付取消***")}},s.login=function(){this.isAvailable()&&this.isInited()&&(this.sdk.login(),o.getInstance().track("jingyou_sdk_login",{state:0,data:""}))},s.isLogined=function(){return!(!this.isAvailable()||!this.isInited())&&(this.sdk.isLogined()&&this.isLoginedSdk)},s.getUserInfo=function(){var i=this;return new Promise((function(n,t){i.isAvailable()&&i.isInited()&&i.isLogined()&&i.sdk.getUserInfo().then((function(i){var t=i.avatar,e=i.nickname,s=i.open_id,o=i.pf_openid;console.log("用户信息：",t,e,s,o),n(i)})).catch((function(i){console.error(i),t(null)})),t(null)}))},s.logout=function(){this.isAvailable()&&this.isInited()&&this.isLogined()&&this.sdk.logout()},s.sendLoadingStartLog=function(){this.isAvailable()&&this.isInited()&&this.sdk.sendLoadingStartLog()},s.sendLoadingEndLog=function(){this.isAvailable()&&this.isInited()&&this.sdk.sendLoadingEndLog()},t}(s));t._RF.pop()}}}));

System.register("chunks:///_virtual/LanguageData.ts",["cc"],(function(e){var a,r,n;return{setters:[function(e){a=e.cclegacy,r=e.sys,n=e.director}],execute:function(){e({init:o,t:function(e){var a=window;if(!a.languages)return e;var r=a.languages[e];if(!r)return e;return r[t]||e},ti:function(e){var a=i[e];if(!a)return e;var n=r.localStorage.getItem("local_language");null!==n&&""!=n||(n="zh");return a[n]||e},updateSceneRenderers:c}),a._RF.push({},"b3f01X4Ik5LEbIPKXZr3JWD","LanguageData",void 0);var t=e("_language","zh");e("ready",!1);function o(a){e("ready",!0),t=e("_language",a)}var i=e("languageInnerText",{privacy_policy_tip:{zh:"继续即表示您同意",en:"By continuing you agree to",es:"Al continuar, aceptas",pt:"Ao continuar, você concorda com"},privacy_policy:{zh:"隐私政策",en:"Privacy Policy",es:"Política de privacidad",pt:"Política de Privacidade"},terms_of_service_tip:{zh:"并确认您已阅读",en:"and confirm that you have read the",es:"y confirmar que has leído el",pt:"e confirma que você leu o"},terms_of_service:{zh:"服务条款",en:"Terms of Service",es:"Términos de servicio",pt:"Termos de Serviço"}});function c(){for(var e=n.getScene().children,a=[],r=0;r<e.length;++r){var t=e[r].getComponentsInChildren("LocalizedLabel");Array.prototype.push.apply(a,t)}for(var o=0;o<a.length;++o){var i=a[o];i.node.active&&i.updateLabel()}for(var c=[],u=0;u<e.length;++u){var l=e[u].getComponentsInChildren("LocalizedSprite");Array.prototype.push.apply(c,l)}for(var g=0;g<c.length;++g){var p=c[g];p.node.active&&p.updateSprite()}}window._languageData={get language(){return t},init:function(e){o(e)},updateSceneRenderers:function(){c()}},a._RF.pop()}}}));

System.register("chunks:///_virtual/LanguageManager.ts",["cc","./LanguageData.ts"],(function(a){var e,n,t,u,c;return{setters:[function(a){e=a.cclegacy,n=a.sys},function(a){t=a.init,u=a.updateSceneRenderers,c=a.t}],execute:function(){e._RF.push({},"d41d61Z9tVJEq3xkcL6YaHF","LanguageManager",void 0);var g=a("LANGUAGE_TYPE",{CHINESE:"zh",ENGLISH:"en",SPANISH:"es",PORTUGUESE:"pt"});a("LanguageManager",function(){function a(){}return a.initLocalLanguage=function(){var a=n.localStorage.getItem("local_language");null===a||""==a?(a=g.CHINESE,t(a),n.localStorage.setItem("local_language",a)):t(a),u()},a.setLocalLanguage=function(a){t(a),u(),n.localStorage.setItem("local_language",a)},a.translateText=function(a){return c(a)},a.updateRenders=function(){u()},a}());e._RF.pop()}}}));

System.register("chunks:///_virtual/LanguageToggle.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LanguageManager.ts","./MK.ts","./Boot.ts"],(function(e){var t,o,a,n,l,g,i,r,c,s,u,h,f;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,a=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){l=e.cclegacy,g=e._decorator,i=e.Toggle,r=e.sys,c=e.ToggleContainer,s=e.Label,u=e.Component},function(e){h=e.LanguageManager},null,function(e){f=e.audio}],execute:function(){var p,L,d,C,y;l._RF.push({},"9b8e8t7AR5LLK5gha2JNUwr","LanguageToggle",void 0);var b=g.ccclass,m=g.property;e("LanguageToggle",(p=b("LanguageToggle"),L=m(i),p((y=t((C=function(e){function t(){for(var t,o=arguments.length,l=new Array(o),g=0;g<o;g++)l[g]=arguments[g];return t=e.call.apply(e,[this].concat(l))||this,a(t,"toggle",y,n(t)),t.lab=null,t}o(t,e);var l=t.prototype;return l.onLoad=function(){r.localStorage.getItem("local_language")==this.node.name?(this.toggle.isChecked=!0,this.node.parent.getComponent(c).allowSwitchOff=!1):this.toggle.setIsCheckedWithoutNotify(!1);var e=this.node.getChildByName("Tag");e&&(this.lab=e.getComponent(s)),this.onChangeLabelColor()},l.onToggleChange=function(e){if(f.playBtnEffect(),e&&e.isChecked){var t=this.node.name;if(t==r.localStorage.getItem("local_language"))return;r.localStorage.setItem("local_language",t),h.setLocalLanguage(t)}this.onChangeLabelColor()},l.onChangeLabelColor=function(){this.lab},t}(u)).prototype,"toggle",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=C))||d));l._RF.pop()}}}));

System.register("chunks:///_virtual/LayoutManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Manager.ts","./enum.ts","./helper.ts"],(function(t){var e,i,r,n,o,l,a,s,h,c,p;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,r=t.initializerDefineProperty,n=t.assertThisInitialized,o=t.createClass},function(t){l=t.cclegacy,a=t._decorator},function(t){s=t.Manager},function(t){h=t.ChildAlignment,c=t.Orientation},function(t){p=t.Helper}],execute:function(){var g,u,_,f,d,z,S,y,A,m,x,H,E,b,O,T,v,C,L,W,M,D,P,N,w;l._RF.push({},"d91f5nGeD5IbK7eVk2CJPJh","LayoutManager",void 0);var k=a.ccclass,I=a.property,U=function(t){return t[t.ON_LAYOUT_COMPLATED=0]="ON_LAYOUT_COMPLATED",t[t.ON_CHANGED_LAYOUT_STATE=1]="ON_CHANGED_LAYOUT_STATE",t}(U||{});t("LayoutManager",(g=k("LayoutManager"),u=I({type:h}),_=I({type:h,tooltip:"布局元素的对齐方式"}),f=I({tooltip:"元素交叉轴布局的间距"}),d=I({tooltip:"反转布局"}),z=I({tooltip:"延迟布局，开启后会统一在下一帧布局，建议开启"}),S=I({group:{id:"0",name:"forceExpand"},tooltip:"是否强制布局元素宽度扩展以填充额外的可用空间"}),y=I({group:{id:"0",name:"forceExpand"},tooltip:"是否强制布局元素高度扩展以填充额外的可用空间"}),A=I({group:{id:"0",name:"controlSize"},tooltip:"如果设置为 false，布局只会影响元素的位置，而不会影响宽度，在这种情况下你可以设置元素的宽度\n如果设置为 true，元素的宽度将由布局根据它们各自的 IElement.minSize、IElement.preferredSize、IElement.flexibleSize自动设置。如果元素的宽度应根据可用空间的大小而变化，应开启此功能。在这种情况下不能直接设置每个元素的宽度，但可以通过控制每个元素的IElement.minSize、IElement.preferredSize、IElement.flexibleSize来进行控制"}),m=I({group:{id:"0",name:"controlSize"},tooltip:"如果设置为 false，布局只会影响元素的位置，而不会影响高度，在这种情况下你可以设置元素的高度\n如果设置为 true，元素的高度将由布局根据它们各自的 IElement.minSize、IElement.preferredSize、IElement.flexibleSize自动设置。如果元素的高度应根据可用空间的大小而变化，应开启此功能。在这种情况下不能直接设置每个元素的高度，但可以通过控制每个元素的IElement.minSize、IElement.preferredSize、IElement.flexibleSize来进行控制"}),x=I({group:{id:"0",name:"controlScale"},tooltip:"是否使用 x 缩放计算宽度"}),H=I({group:{id:"0",name:"controlScale"},tooltip:"是否使用 y 缩放计算高度"}),g(((w=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];return e=t.call.apply(t,[this].concat(o))||this,r(e,"_childAlignment",O,n(e)),r(e,"_spacing",T,n(e)),r(e,"_reverseArrangement",v,n(e)),r(e,"delayLayout",C,n(e)),r(e,"_forceExpandWidth",L,n(e)),r(e,"_forceExpandHeight",W,n(e)),r(e,"_controlSizeWidth",M,n(e)),r(e,"_controlSizeHeight",D,n(e)),r(e,"_controlScaleWidth",P,n(e)),r(e,"_controlScaleHeight",N,n(e)),e._isDirty=!1,e._layoutQueue=[],e}i(e,t);var l=e.prototype;return l.onInit=function(){},l.layout=function(t){t&&(this.delayLayout?(this.unLayout(t.index),this._layoutQueue.push(t),this._isDirty=!0):(this._layoutHandler(t),this.emit(U.ON_LAYOUT_COMPLATED,[t.index])))},l.unLayout=function(t){-1!=(t=this._layoutQueue.findIndex((function(e){return e.index==t})))&&this._layoutQueue.splice(t,1)},l._layoutHandler=function(t){this._calcAlongAxis(t,c.Horizontal,this.adapter.isHorizontal),this._setChildrenAlongAxis(t,c.Horizontal,this.adapter.isHorizontal),this._calcAlongAxis(t,c.Vertical,this.adapter.isHorizontal),this._setChildrenAlongAxis(t,c.Vertical,this.adapter.isHorizontal)},l._calcAlongAxis=function(t,e,i){for(var r=e==c.Horizontal?this.horizontal:this.vertical,n=this._getControlSize(e),o=this._getControlScale(e),l=this._getForceExpandSize(e),a=r,s=r,h=0,p=i!=(e==c.Vertical),g=this._getLayoutList(t.models),u=0;u<g.length;u++){var _=g[u],f=this._getChildSizes(_,e,n,l),d=f.min,z=f.preferred,S=f.flexible;if(o){var y=_.scale[this._getAxis(e)];d*=y,z*=y,S*=y}p?(a=Math.max(d+r,a),s=Math.max(z+r,s),h=Math.max(S,h)):(a+=d+this.spacing,s+=z+this.spacing,h+=S)}!p&&g.length>0&&(a-=this.spacing,s-=this.spacing),s=Math.max(a,s),this._setLayoutInputForAxis(t,a,s,h,e)},l._getControlSize=function(t){return t==c.Horizontal?this.controlSizeWidth:this.controlSizeHeight},l._getControlScale=function(t){return t==c.Horizontal?this.controlScaleWidth:this.controlScaleHeight},l._getForceExpandSize=function(t){return t==c.Horizontal?this.forceExpandWidth:this.forceExpandHeight},l._setChildrenAlongAxis=function(t,e,i){var r=t.size[this._getAxis(e)],n=this._getControlSize(e),o=this._getControlScale(e),l=this._getForceExpandSize(e),a=this._getAlignmentOnAxis(e),s=this._getLayoutList(t.models),h=i!=(e==c.Vertical),g=this.reverseArrangement?s.length-1:0,u=this.reverseArrangement?0:s.length,_=this.reverseArrangement?-1:1,f=this._getAxis(e);if(h)for(var d=r-(e==c.Horizontal?this.horizontal:this.vertical),z=g;this.reverseArrangement?z>=u:z<u;z+=_){var S=s[z],y=this._getChildSizes(S,e,n,l),A=y.min,m=y.preferred,x=y.flexible,H=o?S.scale[f]:1,E=p.clamp(d,A,x>0?r:m),b=this._getStartOffset(t,e,E*H);if(n)this._setChildAlongAxisWithScale(t,S,e,b,H,E);else{var O=(E-S.size[f])*a;O*=H,this._setChildAlongAxisWithScale(t,S,e,b+O,H)}}else{var T=e==c.Horizontal?this.left:this.top,v=0,C=r-this._getTotalPreferredSize(t,e);C>0&&(0==this._getTotalFlexibleSize(t,e)?T=this._getStartOffset(t,e,this._getTotalPreferredSize(t,e)-(e==c.Horizontal?this.horizontal:this.vertical)):this._getTotalFlexibleSize(t,e)>0&&(v=C/this._getTotalFlexibleSize(t,e)));var L=0;this._getTotalMinSize(t,e)!=this._getTotalPreferredSize(t,e)&&(L=p.clamp01((r-this._getTotalMinSize(t,e))/(this._getTotalPreferredSize(t,e)-this._getTotalMinSize(t,e))));for(z=g;this.reverseArrangement?z>=u:z<u;z+=_){var W=s[z],M=this._getChildSizes(W,e,n,l),D=(A=M.min,m=M.preferred,x=M.flexible,o?W.scale[f]:1),P=p.lerp(A,m,L);if(P+=x*v,n)this._setChildAlongAxisWithScale(t,W,e,T,D,P);else{O=(P-W.size[f])*a;this._setChildAlongAxisWithScale(t,W,e,T+O,D)}T+=P*D+this.spacing}}},l._setChildAlongAxisWithScale=function(t,e,i,r,n,o){if(null!=e){var l=this._getAxis(i),a=0;isNaN(o)?a=e.size[l]:(e.layoutSize[l]=o,a=o);var s={x:e.position.x,y:e.position.y},h=0;i==c.Horizontal?(h=r+a*e.anchorPoint[l]*n,h-=t.size[l]*t.anchorPoint[l],h+=t.position[l]):(h=-r-a*(1-e.anchorPoint[l])*n,h+=t.size[l]*(1-t.anchorPoint[l]),h+=t.position[l]),s[l]=h,e.position=s}},l._getStartOffset=function(t,e,i){var r=i+(e==c.Horizontal?this.horizontal:this.vertical),n=t.size[this._getAxis(e)]-r,o=this._getAlignmentOnAxis(e);return(e==c.Horizontal?this.left:this.top)+n*o},l._setLayoutInputForAxis=function(t,e,i,r,n){var o=this._getAxis(n);t.totalMinSize[o]=e,t.totalPreferredSize[o]=i,t.totalFlexibleSize[o]=r},l._getAxis=function(t){return t==c.Horizontal?"x":"y"},l._getMinSize=function(t,e){return t.minSize[this._getAxis(e)]},l._getPreferredSize=function(t,e){var i=this._getAxis(e);return Math.max(t.minSize[i],t.preferredSize[i])},l._getFlexibleSize=function(t,e){return t.flexibleSize[this._getAxis(e)]},l._getTotalMinSize=function(t,e){return t.totalMinSize[this._getAxis(e)]},l._getTotalPreferredSize=function(t,e){return t.totalPreferredSize[this._getAxis(e)]},l._getTotalFlexibleSize=function(t,e){return t.totalFlexibleSize[this._getAxis(e)]},l._getChildSizes=function(t,e,i,r){var n,o,l;return i?(n=this._getMinSize(t.element,e),o=this._getPreferredSize(t.element,e),l=this._getFlexibleSize(t.element,e)):(o=n=t.size[this._getAxis(e)],l=0),r&&(l=Math.max(l,1)),{min:n,preferred:o,flexible:l}},l._getAlignmentOnAxis=function(t){return t==c.Horizontal?this.adapter.layoutManager.childAlignment%3*.5:.5*Math.floor(this.adapter.layoutManager.childAlignment/3)},l._getLayoutList=function(t){for(var e=[],i=0;i<t.length;i++){var r=t[i];r.element.ignoreLayout||e.push(r)}return e},l.internal_lateUpdate=function(t){if(this._isDirty){this._isDirty=!1;for(var e=[];this._layoutQueue.length>0;){var i=this._layoutQueue.shift();this._layoutHandler(i),e.push(i.index)}e.length>0&&this.emit(U.ON_LAYOUT_COMPLATED,e)}},o(e,[{key:"childAlignment",get:function(){return this._childAlignment},set:function(t){t!=this._childAlignment&&(this._childAlignment=t,this.emit(U.ON_CHANGED_LAYOUT_STATE))}},{key:"spacing",get:function(){return this._spacing},set:function(t){t!=this._spacing&&(this._spacing=t,this.emit(U.ON_CHANGED_LAYOUT_STATE))}},{key:"reverseArrangement",get:function(){return this._reverseArrangement},set:function(t){t!=this._reverseArrangement&&(this._reverseArrangement=t,this.emit(U.ON_CHANGED_LAYOUT_STATE))}},{key:"forceExpandWidth",get:function(){return this._forceExpandWidth},set:function(t){t!=this._forceExpandWidth&&(this._forceExpandWidth=t,this.emit(U.ON_CHANGED_LAYOUT_STATE))}},{key:"forceExpandHeight",get:function(){return this._forceExpandHeight},set:function(t){t!=this._forceExpandHeight&&(this._forceExpandHeight=t,this.emit(U.ON_CHANGED_LAYOUT_STATE))}},{key:"controlSizeWidth",get:function(){return this._controlSizeWidth},set:function(t){t!=this._controlSizeWidth&&(this._controlSizeWidth=t,this.emit(U.ON_CHANGED_LAYOUT_STATE))}},{key:"controlSizeHeight",get:function(){return this._controlSizeHeight},set:function(t){t!=this._controlSizeHeight&&(this._controlSizeHeight=t,this.emit(U.ON_CHANGED_LAYOUT_STATE))}},{key:"controlScaleWidth",get:function(){return this._controlScaleWidth},set:function(t){t!=this._controlScaleWidth&&(this._controlScaleWidth=t,this.emit(U.ON_CHANGED_LAYOUT_STATE))}},{key:"controlScaleHeight",get:function(){return this._controlScaleHeight},set:function(t){t!=this._controlScaleHeight&&(this._controlScaleHeight=t,this.emit(U.ON_CHANGED_LAYOUT_STATE))}},{key:"top",get:function(){return this.adapter.isVertical?0:this.adapter.viewManager.top}},{key:"bottom",get:function(){return this.adapter.isVertical?0:this.adapter.viewManager.bottom}},{key:"left",get:function(){return this.adapter.isHorizontal?0:this.adapter.viewManager.left}},{key:"right",get:function(){return this.adapter.isHorizontal?0:this.adapter.viewManager.right}},{key:"horizontal",get:function(){return this.left+this.right}},{key:"vertical",get:function(){return this.top+this.bottom}},{key:"isControlMainAxisSize",get:function(){return this.adapter.isHorizontal&&this.controlSizeWidth||this.adapter.isVertical&&this.controlSizeHeight}},{key:"isControlCrossAxisSize",get:function(){return this.adapter.isHorizontal&&this.controlSizeHeight||this.adapter.isVertical&&this.controlSizeWidth}},{key:"isControlCrossAxisScale",get:function(){return this.adapter.isHorizontal&&this.controlScaleHeight||this.adapter.isVertical&&this.controlScaleWidth}}]),e}(s)).Event=U,O=e((b=w).prototype,"_childAlignment",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return h.UpperLeft}}),e(b.prototype,"childAlignment",[_],Object.getOwnPropertyDescriptor(b.prototype,"childAlignment"),b.prototype),T=e(b.prototype,"_spacing",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),e(b.prototype,"spacing",[f],Object.getOwnPropertyDescriptor(b.prototype,"spacing"),b.prototype),v=e(b.prototype,"_reverseArrangement",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),e(b.prototype,"reverseArrangement",[d],Object.getOwnPropertyDescriptor(b.prototype,"reverseArrangement"),b.prototype),C=e(b.prototype,"delayLayout",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),L=e(b.prototype,"_forceExpandWidth",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),e(b.prototype,"forceExpandWidth",[S],Object.getOwnPropertyDescriptor(b.prototype,"forceExpandWidth"),b.prototype),W=e(b.prototype,"_forceExpandHeight",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),e(b.prototype,"forceExpandHeight",[y],Object.getOwnPropertyDescriptor(b.prototype,"forceExpandHeight"),b.prototype),M=e(b.prototype,"_controlSizeWidth",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),e(b.prototype,"controlSizeWidth",[A],Object.getOwnPropertyDescriptor(b.prototype,"controlSizeWidth"),b.prototype),D=e(b.prototype,"_controlSizeHeight",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),e(b.prototype,"controlSizeHeight",[m],Object.getOwnPropertyDescriptor(b.prototype,"controlSizeHeight"),b.prototype),P=e(b.prototype,"_controlScaleWidth",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),e(b.prototype,"controlScaleWidth",[x],Object.getOwnPropertyDescriptor(b.prototype,"controlScaleWidth"),b.prototype),N=e(b.prototype,"_controlScaleHeight",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),e(b.prototype,"controlScaleHeight",[H],Object.getOwnPropertyDescriptor(b.prototype,"controlScaleHeight"),b.prototype),E=b))||E));l._RF.pop()}}}));

System.register("chunks:///_virtual/LevelActiveImage.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UserCollectLevelData.ts"],(function(e){var t,o,n,r,i,c;return{setters:[function(e){t=e.inheritsLoose},function(e){o=e.cclegacy,n=e._decorator,r=e.Sprite,i=e.Component},function(e){c=e.UserCollectLevelData}],execute:function(){var s;o._RF.push({},"6b24d5ZsE9Psop8t7lbhDMI","LevelActiveImage",void 0);var l=n.ccclass;n.property,e("LevelActiveImage",l("LevelActiveImage")(s=function(e){function o(){return e.apply(this,arguments)||this}return t(o,e),o.prototype.onLoad=function(){var e=c.inst.getMaxHistoryLevel(),t=Math.floor(e/6+1),o=this.node.getSiblingIndex()+1;this.node.getComponent(r).grayscale=o>t},o}(i))||s);o._RF.pop()}}}));

System.register("chunks:///_virtual/LevelBoardView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MK.ts","./BlockEventManager.ts","./BoardView.ts","./AssetInfoDefine.ts","./Event.ts","./LevelGame.ts","./LevelConditionView.ts","./PanelManager.ts","./Boot.ts","./UserCollectLevelData.ts","./Enumrations.ts","./AdSdk.ts","./LevelGuideData.ts","./UserData.ts","./RedPointDef.ts","./RedPointManager.ts","./BIDefine.ts","./sdk.ts","./MKEvent.ts"],(function(e){var t,n,i,o,a,r,s,l,c,h,v,u,f,d,m,p,g,E,L,w,V,C,y,_;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){a=e.cclegacy,r=e._decorator,s=e.Node},null,function(e){l=e.BlockEventManager},function(e){c=e.BoardView},function(e){h=e.AssetInfoDefine},function(e){v=e.BlockEventType},function(e){u=e.LevelGame},function(e){f=e.LevelConditionView},function(e){d=e.PanelManager},null,function(e){m=e.UserCollectLevelData},function(e){p=e.kGameMode},function(e){g=e.AdSdk},function(e){E=e.LevelGuideData},function(e){L=e.UserData},function(e){w=e.emRedPointKeys},function(e){V=e.RedPointManager},function(e){C=e.BIEventID},function(e){y=e.SDK},function(e){_=e.sendEvent}],execute:function(){var M,P,B,D,T,N,I;a._RF.push({},"563385zN1JPeYecUBntIV7B","LevelBoardView",void 0);var k=r.ccclass,b=r.property;e("LevelBoardView",(M=k("LevelBoardView"),P=b(s),B=b(s),M((N=t((T=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return t=e.call.apply(e,[this].concat(a))||this,i(t,"rootConditionView",N,o(t)),t.conditionView=void 0,i(t,"rootConditionViewEnter",I,o(t)),t.conditionViewEnter=void 0,t.clearnDiamonMap=void 0,t}n(t,e);var a=t.prototype;return a.startGame=function(){e.prototype.startGame.call(this),this.refreshCondition(),y.instance.reportBI(C.level_start,{level:m.inst.getHistoryLevel(),theme:m.inst.getLevelThemeName()})},a.onLoad=function(){e.prototype.onLoad.call(this),l.instance.listen(v.EVENT_SCENE_PLAY_LEVEL_NEXT,this.onLevelChange,this).listen(v.EVENT_SCENE_PLAY_LEVEL_COMPLETE,this.showPassView,this),y.instance.reportBI(C.level_enter,{level:m.inst.getHistoryLevel(),theme:m.inst.getLevelThemeName()}),V.getInstance().removePoint(w.UnclockLevel)},a.refreshCondition=function(){this.conditionView=this.rootConditionView.getComponent(f),this.conditionView&&this.conditionView.initView(this.gameManager),this.conditionViewEnter=this.rootConditionViewEnter.getComponent(f),this.conditionViewEnter&&this.conditionViewEnter.initView(this.gameManager),this.rootConditionViewEnter.active||(this.rootConditionViewEnter.active=!0)},a.onLevelChange=function(){this.refreshBoardView(this.gameManager.tableData),this.refreshCondition()},a.onRestartGame=function(t){L.inst.setThisGameWatchReviveNum(0),e.prototype.onRestartGame.call(this,t),d.inst.removeAllPopUpView(),this.onLevelChange();var n=m.inst.getHistoryLevel(),i=m.inst.getLevelThemeName();t&&y.instance.reportBI(C.level_restart,{level:n,theme:i}),y.instance.reportBI(C.level_start,{level:n,theme:i})},a.onDestroy=function(){l.instance.unlisten(v.EVENT_SCENE_PLAY_LEVEL_NEXT,this.onLevelChange,this).unlisten(v.EVENT_SCENE_PLAY_LEVEL_COMPLETE,this.showPassView,this),this.gameManager&&y.instance.reportBI(C.level_exit,{level:m.inst.getHistoryLevel(),theme:m.inst.getLevelThemeName(),round:this.gameManager.getRound()}),e.prototype.onDestroy.call(this)},a.getDelayStartTime=function(){return.33},a.beforeStart=function(){this.gameManager=u.levlInstance},a.onBeforeClearBlock=function(){this.clearnDiamonMap=new Map},a.onClearBlockEntity=function(t,n,i){e.prototype.onClearBlockEntity.call(this,t,n,i);var o=100*t+n;if(!this.clearnDiamonMap.has(o)&&i>this.gameManager.diamonTypeStart){var a=this.gameManager;if(this.conditionView){var r=a.currentCollects.get(i),s=a.targetCollects.get(i);if(r<s){a.collectItem(i,1),r=a.currentCollects.get(i);var l=this.blockMap.get(o);l?this.conditionView.setCollectFly(l.node,i,r,s,(function(){a.checkIsLevelComplete()}),this):(this.conditionView.setCollect(i,r,s),a.checkIsLevelComplete())}}this.clearnDiamonMap.set(o,i)}},a.refreshCombo=function(e){},a.showComboAni=function(e){},a.onAfterClearBlockAnim=function(t,n){e.prototype.onAfterClearBlockAnim.call(this,t,n),this.clearnDiamonMap=null},a.onGameOver=function(){e.prototype.onGameOver.call(this),this.gameManager.checkIsLevelComplete()||l.instance.emit(v.EVENT_SCENE_PLAY_LEVEL_COMPLETE,2)},a.showPassView=function(e){var t=this;if(1==e)this.showOverView(e);else if(2==e){if(u.levlInstance.isCanRevive())return void g.inst.isRewardedVideoAvailable().then((function(){d.inst.addPopUpView(h.prefab.revive.path,{manager:u.levlInstance,onTimeFinish:function(){t.showOverView(e)},holder:t,mode:p.level})})).catch((function(){t.showOverView(e)}));this.showOverView(e)}},a.showOverView=function(e){var t=m.inst,n=this.gameManager,i=n.getLevelId();if(1==e){var o=h.prefab.levelPassPre;d.inst.addPopUpView(o.path,{manager:n,result:e,level:i}),t.resetLevelFail(t.getLevelThemeName(),t.getHistoryLevel())}else if(2==e){var a=h.prefab.levelOverPre;d.inst.addPopUpView(a.path,{manager:n,result:e,level:i}),t.recordLevelFail(t.getLevelThemeName(),t.getHistoryLevel())}var r=L.inst;r.isFirstPlay&&(r.isFirstPlay=!1,r.onlinePlayTimes+=1)},a.showComboScore=function(e,t,n,i){_(v.EVENT_COMBO_BLOCK_END,e,t,n)},a.getGuideDataInst=function(){return E.inst},t}(c)).prototype,"rootConditionView",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=t(T.prototype,"rootConditionViewEnter",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=T))||D));a._RF.pop()}}}));

System.register("chunks:///_virtual/LevelChapterItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UserCollectLevelData.ts","./MK.ts","./AssetInfoDefine.ts","./Enumrations.ts","./SceneMode.ts","./ProcedureToLevelSeclect.ts","./ProcedureToGame.ts","./Boot.ts"],(function(e){var t,o,n,r,i,l,a,c,u,s,p,h,d,f,v,m,y;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){i=e.cclegacy,l=e._decorator,a=e.Node,c=e.Sprite,u=e.Component},function(e){s=e.UserCollectLevelData},null,function(e){p=e.AssetInfoDefine},function(e){h=e.kGameMode},function(e){d=e.SceneMode},function(e){f=e.ProcedureToLevelSeclect},function(e){v=e.ProcedureToGame},function(e){m=e.audio,y=e.fsm}],execute:function(){var S,L,b,g,C,T;i._RF.push({},"8bce1LE0XxGYqHCjcKlbzld","LevelChapterItem",void 0);var I=l.ccclass,D=l.property;e("LevelChapterItem",(S=I("LevelChapter"),L=D(a),S((C=t((g=function(e){function t(){for(var t,o=arguments.length,i=new Array(o),l=0;l<o;l++)i[l]=arguments[l];return t=e.call.apply(e,[this].concat(i))||this,n(t,"levelTheme",C,r(t)),n(t,"trophyNode",T,r(t)),t.trophySpr=void 0,t}o(t,e);var i=t.prototype;return i.start=function(){this.trophySpr=this.trophyNode.getComponent(c);var e=s.inst.getIsAllLevelFinishedByTheme(this.levelTheme);this.trophySpr.grayscale=0==e},i.onClickLevelTheme=function(e){m.playSubSound(p.audio.touch),s.inst.setLevelThemeName(this.levelTheme),m.playSubSound(p.audio.touch),d.gameMode=h.none,y.changeState(f,"LevelChapterItem")},i.onClickClassical=function(){m.playSubSound(p.audio.touch),d.gameMode=h.endless,y.changeState(v,"block")},t}(u)).prototype,"levelTheme",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"cat"}}),T=t(g.prototype,"trophyNode",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=g))||b));i._RF.pop()}}}));

System.register("chunks:///_virtual/LevelConditionDiamondItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BlockConstData.ts"],(function(e){var t,n,i,o,a,l,s,r,u,m,p,c,h,d,f,C,y;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){a=e.cclegacy,l=e._decorator,s=e.Label,r=e.Node,u=e.SpriteAtlas,m=e.Sprite,p=e.Animation,c=e.Vec3,h=e.Color,d=e.UITransform,f=e.tween,C=e.Component},function(e){y=e.BlockConstData}],execute:function(){var v,g,b,I,N,w,_,A,L,D,P,S,O;a._RF.push({},"c5eb6D+IQpDHYuiCXCaFX6W","LevelConditionDiamondItem",void 0);var k=l.ccclass,F=l.property;e("LevelConditionDiamondItem",(v=k("LevelConditionDiamondItem"),g=F(s),b=F(r),I=F(r),N=F(u),w=F(r),v((L=t((A=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),l=0;l<n;l++)a[l]=arguments[l];return t=e.call.apply(e,[this].concat(a))||this,i(t,"labNum",L,o(t)),i(t,"sprImage",D,o(t)),i(t,"ndComplete",P,o(t)),i(t,"atlasBlocks",S,o(t)),i(t,"flyAnimNode",O,o(t)),t.oldLayoutParent=null,t.tarCount=void 0,t.curCount=void 0,t.needShowAppear=!1,t}n(t,e);var a=t.prototype;return a.start=function(){this.sprImage.getComponent(m).enabled=!0,this.flyAnimNode&&(this.flyAnimNode.active=!1);var e=this.getComponent(p);e&&this.needShowAppear&&e.play("LevelConditionDiamondItem_appear_anim")},a.setOldLayoutParent=function(e){this.oldLayoutParent=e},a.useOldLayoutParent=function(){if(this.oldLayoutParent){var e=this.node.getWorldPosition();this.node.parent=this.oldLayoutParent,this.node.setWorldPosition(e)}},a.showNumInfo=function(e){this.labNum.node.active=e},a.setImageType=function(e){var t=this.atlasBlocks.getSpriteFrame("b"+e);t&&(this.sprImage.getComponent(m).spriteFrame=t),this.ndComplete.active=!1},a.playFkAnim=function(){var e=this.getComponent(p);e&&e.play("LevelConditionDiamondItem_fk_anim")},a.playAppearAnim=function(){var e=this.getComponent(p);e&&e.play("LevelConditionDiamondItem_appear_anim")},a.restoreScale=function(){this.node.scale=new c(1,1,1)},a.onFlyAnimFinish=function(){this.playFkAnim(),this.updateRestOnly(this.curCount,this.tarCount,!0)},a.updateProgress=function(e,t){var n=this;if(this.curCount=e,this.tarCount=t,e>=t)if(this.ndComplete){this.showNumInfo(!1),this.restoreScale();var i=this.ndComplete.getComponent(p);this.scheduleOnce((function(){n.ndComplete.active=!0,i.play()}),.3)}else this.showNumInfo(!0),this.labNum.string=e+"/"+t;else this.showNumInfo(!0),this.ndComplete&&(this.ndComplete.active=!1),this.labNum.string=e+"/"+t},a.updateRestOnly=function(e,t,n){var i=this;(this.curCount=e,this.tarCount=t,e>=t)?this.ndComplete?(this.showNumInfo(!1),this.ndComplete.active=!0,this.ndComplete.getComponent(p).play("LevelGameOver_diamond_yesapper_anim"),this.scheduleOnce((function(){i.ndComplete.getComponent(m).color=new h(255,255,255,255)}),.3)):(this.showNumInfo(!0),this.labNum.string=""+(t-e)):(this.showNumInfo(!0),this.ndComplete&&(this.ndComplete.active=!1),this.labNum.string=""+(t-e));this.labNum.string=""+(t-e)},a.playFlyAnim=function(){if(this.flyAnimNode){this.flyAnimNode.active=!0,this.sprImage.getComponent(m).enabled=!1;var e=this.flyAnimNode.getComponent(p);e.play("eui_gem_appear_anim"),setTimeout((function(){e.play("eui_gem_fly_anim")}),330)}},a.moveToTarget=function(e,n,i){var o=this;this.showNumInfo(!1),this.needShowAppear=!0;var a=e.worldPosition;a=this.node.parent.getComponent(d).convertToNodeSpaceAR(a);var l=f(this.node).to(.133,{scale:y.CollectScale1}).to(.117,{scale:y.CollectScale2}).delay(.3).parallel(f(this.node).to(.25,{position:new c(a.x,a.y)},{easing:"sineInOut"}),f(this.node).call((function(){}))).to(.1,{scale:c.ZERO});f(this.node).sequence(l).then(f(this.node).call((function(){e&&(e.getComponent(t).updateRestOnly(n,i),o.scheduleOnce((function(){var e=o.getComponent(p);e&&e.play("LevelConditionDiamondItem_fk_anim")}),.1))}))).start()},t}(C)).prototype,"labNum",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=t(A.prototype,"sprImage",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P=t(A.prototype,"ndComplete",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=t(A.prototype,"atlasBlocks",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=t(A.prototype,"flyAnimNode",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=A))||_));a._RF.pop()}}}));

System.register("chunks:///_virtual/LevelConditionView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LevelGame.ts","./LevelConditionDiamondItem.ts"],(function(e){var t,n,o,i,r,a,c,l,s,u,d,h,g,p,f,m,v;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,o=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){r=e.cclegacy,a=e._decorator,c=e.Label,l=e.Node,s=e.instantiate,u=e.Layout,d=e.Tween,h=e.tween,g=e.UITransform,p=e.Vec3,f=e.Component},function(e){m=e.emLevCondition},function(e){v=e.LevelConditionDiamondItem}],execute:function(){var C,b,S,y,w,L,I,T,D,M,z,V,P,A,R,F;r._RF.push({},"f6d12S2CjhMHYGR3oFR/Ync","LevelConditionView",void 0);var H=a.ccclass,N=a.property;e("LevelConditionView",(C=H("LevelConditionView"),b=N(c),S=N(l),y=N(c),w=N(c),L=N(l),I=N(l),C((M=t((D=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t=e.call.apply(e,[this].concat(r))||this,o(t,"labLevel",M,i(t)),o(t,"rootScoreCondition",z,i(t)),o(t,"labScore",V,i(t)),o(t,"labTargetScore",P,i(t)),o(t,"rootDiamondCondition",A,i(t)),o(t,"conditionItem",R,i(t)),o(t,"isInScene",F,i(t)),t.conditionMap=void 0,t.score=void 0,t.manager=void 0,t}n(t,e);var r=t.prototype;return r.getTargetScoreNode=function(){return this.labTargetScore.node?this.labTargetScore.node:this.node},r.getTargetCollectNode=function(e){var t=this.conditionMap.get(e);return t?t.node:this.node},r.initView=function(e){this.manager=e,this.labLevel&&(this.labLevel.string="Level "+this.manager.levelConfig.id),this.initConditions()},r.start=function(){},r.onDestroy=function(){},r.initConditions=function(){if(this.conditionItem){if(this.rootDiamondCondition.active=!1,this.rootScoreCondition.active=!1,this.unscheduleAllCallbacks(),this.manager.conditionType==m.Score)this.rootScoreCondition.active=!0,this.score=0,this.labScore.string="0",this.labTargetScore.string=this.manager.targetScore+"",this.isInScene||this.setScore(this.manager.scoreHelper.score),this.onInitScore();else if(this.manager.conditionType==m.Collect){this.rootDiamondCondition.destroyAllChildren();var e=[];this.manager.targetCollects.forEach((function(t,n){e.push(n)})),e.sort((function(e,t){return e-t})),this.conditionMap=new Map;for(var t=0;t<e.length;t++){var n=e[t],o=this.manager.targetCollects.get(n),i=this.manager.currentCollects.get(n),r=s(this.conditionItem).getComponent(v);r.setImageType(n),r.updateProgress(i,o),r.node.active=!0,r.node.setParent(this.rootDiamondCondition),this.conditionMap.set(n,r)}var a=this.rootDiamondCondition.getComponent(u);a&&a.updateLayout(!0),this.rootDiamondCondition.active=!0,this.onInitCollect()}}else console.error("异常的过关条件view:LevelConditionView ")},r.onInitScore=function(){},r.onInitCollect=function(){},r.setCollectFly=function(e,t,n,o,i,r){this.setCollect(t,n,o)},r.setCollect=function(e,t,n){if(this.manager.conditionType==m.Collect&&this.conditionMap.has(e)){var o=this.conditionMap.get(e);o&&o.updateProgress(t,n)}},r.setScore=function(e){var t=this;e=Math.min(this.manager.scoreHelper.score,this.manager.targetScore);var n=this;if(this.manager.conditionType==m.Score){var o=this.score,i=e-this.score;if(i>0){d.stopAllByTarget(this.labScore.node),this.score=e;var r=h(this.node).call((function(){var e=(o=(o+=1)>n.manager.targetScore?n.manager.targetScore:o).toString();n.labScore.string=e,n.onScoreChange(o,n.manager.targetScore)})),a=.5/i,c=h().delay(a);h(this.node).repeat(i,h(this.node).sequence(c,r)).then(h(this.node).call((function(){t.isInScene&&t.manager&&t.manager.checkIsLevelComplete()}))).start()}this.score=e}},r.onScoreChange=function(e,t){},r.moveToTarget=function(e,t,n){var o=this,i=e.worldPosition;i=t.parent.getComponent(g).convertToNodeSpaceAR(i),t.active||(t.active=!0),h(t).to(.1,{scale:new p(2,2,1)}).to(.1,{scale:new p(1.2,1.2,1)}).to(.1,{scale:new p(1.6,1.6,1)}).to(.1,{scale:new p(1.4,1.4,1)}).delay(.5).parallel(h().to(.4,{position:new p(i.x,i.y)},{easing:"cubicIn"}),h().to(.4,{scale:new p(.5,.5,1)})).to(.1,{scale:new p(0,0,0)}).call((function(){n&&n.call(o)})).start()},t}(f)).prototype,"labLevel",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=t(D.prototype,"rootScoreCondition",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=t(D.prototype,"labScore",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=t(D.prototype,"labTargetScore",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=t(D.prototype,"rootDiamondCondition",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=t(D.prototype,"conditionItem",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=t(D.prototype,"isInScene",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),T=D))||T));r._RF.pop()}}}));

System.register("chunks:///_virtual/LevelConditionViewEnter.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LevelConditionView.ts","./LevelConditionViewScene.ts","./BlockEventManager.ts","./Event.ts","./LevelConditionDiamondItem.ts","./MK.ts","./AssetInfoDefine.ts","./Boot.ts"],(function(e){var o,i,n,t,r,a,c,l,d,s,u,f,v,p,y,g,S;return{setters:[function(e){o=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,t=e.assertThisInitialized},function(e){r=e.cclegacy,a=e._decorator,c=e.Node,l=e.Vec3,d=e.UITransform,s=e.instantiate},function(e){u=e.LevelConditionView},function(e){f=e.LevelConditionViewScene},function(e){v=e.BlockEventManager},function(e){p=e.BlockEventType},function(e){y=e.LevelConditionDiamondItem},null,function(e){g=e.AssetInfoDefine},function(e){S=e.audio}],execute:function(){var V,C,h,m,w,E,N;r._RF.push({},"5d761fEEydDJIV8QzqT6FBw","LevelConditionViewEnter",void 0);var T=a.ccclass,L=a.property;e("LevelConditionViewEnter",(V=T("LevelConditionViewEnter"),C=L(c),h=L(c),V((E=o((w=function(e){function o(){for(var o,i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return o=e.call.apply(e,[this].concat(r))||this,n(o,"targetConditionView",E,t(o)),n(o,"flyScoreNode",N,t(o)),o.flyDelay=1,o.originScorePosition=l.ZERO,o}i(o,e);var r=o.prototype;return r.start=function(){e.prototype.start.call(this),this.originScorePosition=this.flyScoreNode.position.clone()},r.onInitScore=function(){var e=this;S.playSubSound(g.audio.diamon_out),this.scheduleOnce((function(){if(e.targetConditionView&&e.targetConditionView.isValid){var o=e.targetConditionView.getComponent(f).getTargetScoreNode();o&&e.moveToTarget(o,e.flyScoreNode,(function(){e.flyScoreNode&&e.flyScoreNode.isValid&&(S.playSubSound(g.audio.diamond_collect),v.instance.emit(p.EVENT_TATGET_SCORE_SHOW,0,e.manager.targetScore),e.flyScoreNode.setScale(1,1,1),e.flyScoreNode.setPosition(e.originScorePosition),e.flyScoreNode.active=!1,e.node&&e.node.isValid&&e.node.active&&(e.node.active=!1))}))}}),this.flyDelay)},r.onInitCollect=function(){var e=this;S.playSubSound(g.audio.diamon_out),this.scheduleOnce((function(){if(e.targetConditionView&&e.targetConditionView.isValid){var o=e.targetConditionView.getComponent(f),i=e.conditionMap,n=0;i.forEach((function(i,t){if(i&&i.isValid){i.showNumInfo(!1);var r=o.getTargetCollectNode(t),a=i.node.parent.parent,c=a.getComponent(d).convertToNodeSpaceAR(i.node.worldPosition),l=s(i.node);l.setParent(a),l.setPosition(c),r&&r.isValid&&(i.node.active=!1,e.scheduleOnce((function(){r&&r.isValid&&e.moveToTarget(r,l,(function(){if(S.playSubSound(g.audio.diamond_collect),l&&l.isValid&&l.destroy(),r&&r.isValid){var o=r.getComponent(y);o&&o.isValid&&(o.onFlyAnimFinish(),e.node.active&&(e.node.active=!1))}}))}),.1*n))}n+=1}))}}),this.flyDelay)},o}(u)).prototype,"targetConditionView",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=o(w.prototype,"flyScoreNode",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=w))||m));r._RF.pop()}}}));

System.register("chunks:///_virtual/LevelConditionViewScene.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LevelConditionView.ts","./BlockEventManager.ts","./Event.ts","./LevelConditionDiamondItem.ts","./MK.ts","./AssetInfoDefine.ts","./Boot.ts"],(function(e){var o,t,n,i,r,s,a,c,l,u,h,S,p,d,g,f,T;return{setters:[function(e){o=e.applyDecoratedDescriptor,t=e.inheritsLoose,n=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){r=e.cclegacy,s=e._decorator,a=e.Node,c=e.ProgressBar,l=e.Slider,u=e.UITransform,h=e.instantiate},function(e){S=e.LevelConditionView},function(e){p=e.BlockEventManager},function(e){d=e.BlockEventType},function(e){g=e.LevelConditionDiamondItem},null,function(e){f=e.AssetInfoDefine},function(e){T=e.audio}],execute:function(){var v,m,C,w,y,b,E,_;r._RF.push({},"1f681PrQwtI2JbXTO/qLKOu","LevelConditionViewScene",void 0);var I=s.ccclass,L=s.property;e("LevelConditionViewScene",(v=I("LevelConditionViewScene"),m=L(a),C=L(a),v((b=o((y=function(e){function o(){for(var o,t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];return o=e.call.apply(e,[this].concat(r))||this,n(o,"barScore",b,i(o)),n(o,"sliderScore",E,i(o)),n(o,"isShowNumWhenInit",_,i(o)),o.scoreProgressBar=void 0,o.scoreSlider=void 0,o}t(o,e);var r=o.prototype;return r.onLoad=function(){p.instance.listen(d.EVENT_TATGET_SCORE_SHOW,this.onTargetScoreShow,this).listen(d.EVENT_TATGET_COLLECT_SHOW,this.onTargetCollectShow,this),this.scoreProgressBar=this.barScore.getComponent(c),this.scoreSlider=this.sliderScore.getComponent(l)},r.onDestroy=function(){e.prototype.onDestroy.call(this),p.instance.unlisten(d.EVENT_TATGET_SCORE_SHOW,this.onTargetScoreShow,this).unlisten(d.EVENT_TATGET_COLLECT_SHOW,this.onTargetCollectShow,this)},r.onTargetScoreShow=function(){this.labTargetScore&&(this.labTargetScore.node.active=!0)},r.onTargetCollectShow=function(){var e=this.conditionMap;for(var o in e){e[o].showNumInfo(!0)}},r.onInitScore=function(){if(e.prototype.onInitScore.call(this),this.labTargetScore&&(this.labTargetScore.node.active=!1),this.scoreProgressBar.progress=0,this.scoreSlider.progress=0,this.manager){var o=this.manager.scoreHelper.score,t=this.manager.targetScore;o>t&&(o=t),this.onScoreChange(o,t),this.labScore.string=o.toString()}},r.onScoreChange=function(e,o){e>o&&(e=o);var t=(e=Math.min(this.manager.scoreHelper.score,this.manager.targetScore))/o;t>this.scoreProgressBar.progress&&(this.scoreProgressBar.progress=t,this.scoreSlider.progress=t)},r.onInitCollect=function(){(e.prototype.onInitCollect.call(this),this.isShowNumWhenInit)||this.conditionMap.forEach((function(e,o){e.showNumInfo(!1)}))},r.setCollectFly=function(e,o,t,n,i,r){var s=this;this.scheduleOnce((function(){T.playSubSound(f.audio.diamon_out);var a=s.conditionMap.get(o),c=a.node.parent.parent.getComponent(u).convertToNodeSpaceAR(e.worldPosition),l=h(a.node);l.getComponent(g).showNumInfo(!1),l.setParent(a.node.parent.parent),l.setPosition(c.x,c.y),s.moveToTarget(a.node,l,(function(){T.playSubSound(f.audio.diamond_collect),s.setCollect(o,t,n),l.destroy(),i&&i.call(r)}))}))},o}(S)).prototype,"barScore",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=o(y.prototype,"sliderScore",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=o(y.prototype,"isShowNumWhenInit",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),w=y))||w));r._RF.pop()}}}));

System.register("chunks:///_virtual/LevelGame.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MK.ts","./Random.ts","./Game.ts","./LevelScoreHelper.ts","./BlockEventManager.ts","./Event.ts","./BlockType.ts","./BlockPlaceholder3.ts","./UserCollectLevelData.ts","./BlockGenerateMasterLevel.ts","./LevelGuideData.ts","./SceneMode.ts","./Enumrations.ts","./BlockGenerateNative.ts","./BlockGenetateWasm.ts","./UserData.ts","./MKResCtr.ts","./MKEvent.ts"],(function(e){var t,l,i,s,r,o,n,a,c,h,u,v,f,d,p,C,y,g;return{setters:[function(e){t=e.inheritsLoose,l=e.createClass},function(e){i=e.cclegacy},null,function(e){s=e.Random},function(e){r=e.Game},function(e){o=e.LevelScoreHelper},function(e){n=e.BlockEventManager},function(e){a=e.BlockEventType},function(e){c=e.BlockItemConst},function(e){h=e.BlockPlaceholder3},function(e){u=e.UserCollectLevelData},function(e){v=e.BlockGenerateMasterLevel},function(e){f=e.LevelGuideData},function(e){d=e.SceneMode},function(e){p=e.kGameMode},null,null,function(e){C=e.UserData},function(e){y=e.MKSubResCtr},function(e){g=e.sendEvent}],execute:function(){i._RF.push({},"19430gO0T9GH7Qgfi3JrsKG","LevelGame",void 0);var L=e("emLevCondition",function(e){return e[e.None=0]="None",e[e.Score=1]="Score",e[e.Collect=2]="Collect",e}({}));e("LevelGame",function(e){function i(){for(var t,l=arguments.length,i=new Array(l),s=0;s<l;s++)i[s]=arguments[s];return(t=e.call.apply(e,[this].concat(i))||this).levelConfig=void 0,t.currentLevel=0,t.maxLevel=0,t.conditionType=0,t.targetScore=0,t.targetCollects=void 0,t.currentCollects=void 0,t.tableCollects=void 0,t.typeCollects=void 0,t.levelTables=void 0,t}t(i,e),i.destroy=function(){i._instance=null};var r=i.prototype;return r.destroy=function(){this.clear(),i._instance=null},r.startGame=function(){this.scoreHelper&&this.scoreHelper.clear(),C.inst.setThisGameWatchReviveNum(0),this.canMoveBlock=!0,this.scoreHelper=new o,this.scoreHelper.loadConfig(),this.resetGameState(),this.initLevelData(),this.blockGenerate&&this.blockGenerate.clear(),this.blockGenerate=new v(this.levelConfig,s.inst,this.scoreHelper,"level_action_info"),this.initTableData()},r.getMaxRefreshBlockTimes=function(){return 2},r.getMaxReviviTimes=function(){return 2},r.endGame=function(){this.tableData=null,this.blockGenerate=null,this.scoreHelper=null},r.initNodePool=function(){e.prototype.initNodePool.call(this),this.createPool("LevelBlockGroupPool","res/prefab/blocks/block-normal-level",3)},r.getBlockGroupPoolName=function(){return"LevelBlockGroupPool"},r.initLevelData=function(){var e=u.inst.getLevelConfigPath();this.levelTables=y.loadJsonConfig(e),this.maxLevel=this.levelTables.length,this.currentLevel=this.getHistoryLevel(),this.currentLevel>this.maxLevel&&(this.currentLevel=this.maxLevel),this.historyLevelData=null;var t=Math.min(this.currentLevel-1,this.levelTables.length-1),l=this.levelTables[t];this.levelConfig=l},r.getLevelId=function(){return this.currentLevel},r.initTableData=function(){var e=this.blockNumber;if(this.zeroTableData(e),d.gameMode==p.level&&!f.inst.isGuideFinished())return this.initWithGuideData(!1,f.inst.getGuideBoard()),this.loadLevelById(!1),null;var t=this.getHistoryLevelData();return t&&this.currentLevel==t.id?(this.historyLevelData=t,this.scoreHelper.setHistoryData(t),this.reviviTimes=t.reviviTimes||0,this.adRefreshBlockTimes=t.refreshTimes||0,this.refreshAllTimes=t.refreshAllTimes||0,this.changeAllTimes=t.changeAllTimes||0,this.loadLevelByHistory(this.currentLevel,t),t):(this.loadLevelById(!0),null)},r.checkIsLevelComplete=function(){var e,t=this;if(this.conditionType==L.Score&&(e=this.scoreHelper.score>=this.targetScore),this.conditionType==L.Collect&&(e=!0,this.targetCollects.forEach((function(l,i){t.currentCollects.has(i)&&t.currentCollects.get(i)<l&&(e=!1)}))),e){if(this.currentLevel<this.maxLevel){var l=this.currentLevel+1;l>this.maxLevel&&(l=this.maxLevel),this.updateHistoryLevel(l),this.updateMaxHistoryLevel(l)}else u.inst.isAllLevelFinished=1,this.updateHistoryLevel(this.maxLevel),this.updateMaxHistoryLevel(this.maxLevel);n.instance.emit(a.EVENT_SCENE_PLAY_LEVEL_COMPLETE,1)}return e},r.retryCurrentLevel=function(){this.clearLevelHistoryData(),this.startGame(),g(a.kEvent_Game_Show_New_Blocks),g(a.EVENT_SCENE_PLAY_RESTART,!0)},r.getNextLevelNum=function(){return this.currentLevel<this.maxLevel?this.currentLevel+1:this.currentLevel},r.gotoNextLevel=function(){return this.clearLevelHistoryData(),this.currentLevel>=this.maxLevel?(console.log("恭喜全部通关！"),void this.retryCurrentLevel()):(this.currentLevel=this.getNextLevelNum(),this.startGame(),g(a.kEvent_Game_Show_New_Blocks),g(a.EVENT_SCENE_PLAY_RESTART,!1),!0)},r.collectItem=function(e,t){if(this.targetCollects.has(e)){var l=this.targetCollects.get(e),i=this.currentCollects.get(e);this.currentCollects.set(e,Math.min(l,i+t))}},r.loadLevelById=function(e){var t=this.levelConfig,l=t.board,i=this.blockNumber;if(this.targetScore=t.score||0,this.targetScore>0&&(this.conditionType=L.Score),t.collect.length>0){this.conditionType=L.Collect,this.currentCollects=new Map,this.targetCollects=new Map,this.tableCollects=new Map,this.typeCollects=[];for(var s=t.collect,r=0;r<s.length;r++){var o=s[r];this.targetCollects.set(o.key,o.value),this.currentCollects.set(o.key,0),this.tableCollects.set(o.key,0),this.typeCollects.includes(o.key)||this.typeCollects.push(o.key)}}if(e){this.tableData=new Array;for(var n=0;n<i;n++){null==this.tableData[n]&&(this.tableData[n]=new Array);for(var a=0;a<i;a++){var c=l[n][a];if(this.tableData[n][a]=c,this.conditionType==L.Collect&&c>this.diamonTypeStart){var h=this.tableCollects.get(c);this.tableCollects.set(c,h+1)}}}}},r.loadLevelByHistory=function(e,t){var l=Math.min(e-1,this.levelTables.length-1),i=this.levelTables[l];this.levelConfig=i;var s=t.board?t.board:i.board,r=this.blockNumber;if(this.targetScore=i.score,this.targetScore>0&&(this.conditionType=L.Score),i.collect.length>0){this.conditionType=L.Collect,this.currentCollects=new Map,this.targetCollects=new Map,this.tableCollects=new Map,this.typeCollects=[];for(var o=i.collect,n=0;n<o.length;n++){var a=o[n];this.targetCollects.set(a.key,a.value),this.currentCollects.set(a.key,0),this.tableCollects.set(a.key,0),this.typeCollects.includes(a.key)||this.typeCollects.push(a.key)}var c=this.historyLevelData.collect;if(c)for(var h=0;h<c.length;h++){var u=c[h];this.currentCollects.has(u.key)&&this.currentCollects.set(u.key,u.value)}}this.tableData=new Array;for(var v=0;v<r;v++){null==this.tableData[v]&&(this.tableData[v]=new Array);for(var f=0;f<r;f++){var d=s[v][f];if(this.tableData[v][f]=d,this.conditionType==L.Collect&&d>this.diamonTypeStart){var p=this.tableCollects.get(d);this.tableCollects.set(d,p+1)}}}},r.getBlockSimpleConfig=function(t,l){if(t>1e3)return c[t].simple;var i=window.BlockConst[t],s=e.prototype.getBlockSimpleConfig.call(this,t,l);if(i.count<2)return s;if(this.conditionType==L.Collect){for(var r=[],o=0;o<this.typeCollects.length;o++){var n=this.typeCollects[o],a=this.targetCollects.get(n);this.currentCollects.get(n);(this.tableCollects.get(n)||0)<a+3&&r.push(n)}var h=!1;if(r.length>0)for(var u=1==r.length?r[0]:r.randomObject(),v=s.length,f=0;f<v;f++)for(var d=s[f].length,p=0;p<d;p++){if(s[f][p]>0){if(Math.random()<.5)return s[f][p]=u,h=!0,this.updateTableCollectNum(u,1),s;if(f==v-1&&p==d-1)return s[f][p]=u,h=!0,this.updateTableCollectNum(u,1),s}}if(!h){for(var C=0;C<this.typeCollects.length;C++){var y=this.typeCollects[C],g=this.targetCollects.get(y);this.currentCollects.get(y)<g&&r.push(y)}if(r.length>0)for(var m=1==r.length?r[0]:r.randomObject(),b=s.length,T=0;T<b;T++)for(var k=s[T].length,D=0;D<k;D++){var H=s[T][D];if(H>0&&H<100)return s[T][D]=m,h=!0,this.updateTableCollectNum(m,1),s}}}return s},r.updateTableCollectNum=function(e,t){var l=this.tableCollects.get(e)+t;l=l<0?0:l,this.tableCollects.set(e,l)},r.onRelifeCurrentLevelBefore=function(){var t=this;if(e.prototype.onRelifeCurrentLevelBefore.call(this),this.conditionType==L.Collect)for(var l=0;l<3;l++){var i=this.blockPlacesMap.get(l);if(i&&i.isValid){var s=i.getComponent(h).blocksData;s&&s.forEach((function(e){e.forEach((function(e){e>t.diamonTypeStart&&t.updateTableCollectNum(e,-1)}))}))}}},r.clearLevelHistoryData=function(){u.inst.clearLevelHistoryData()},r.updateLevelHistoryData=function(){if(d.gameMode!=p.level||f.inst.isGuideFinished()){var e=[];this.conditionType==L.Collect&&this.currentCollects&&this.currentCollects.forEach((function(t,l){e.push({key:l,value:t})}));var t=this.getPreviewsStoreData();this.levelData={hardNum:0,hardType:0,initDifficulty:0,id:this.currentLevel,board:this.tableData,score:this.scoreHelper.score,skillScore:this.scoreHelper.skillScore,continuousCount:this.scoreHelper.continuousCount,collect:e,preview:t,reviviTimes:this.reviviTimes,refreshTimes:this.adRefreshBlockTimes,refreshAllTimes:this.refreshAllTimes,changeAllTimes:this.changeAllTimes,isGameOver:this.isGameOver?1:0,round:this.blockGenerate.round||0},u.inst.updateLevelHistoryData(this.levelData)}},r.updateHistoryLevel=function(e){u.inst.updateHistoryLevel(e)},r.getHistoryLevelData=function(){var e=u.inst.getHistoryLevelData();return e&&1==e.isGameOver?(u.inst.clearLevelHistoryData(),null):e},r.updateMaxHistoryLevel=function(e){return u.inst.updateMaxHistoryLevel(e)},r.getHistoryLevel=function(){return u.inst.getHistoryLevel()},r.isCanRefreshBlock=function(){return!1},l(i,null,[{key:"levlInstance",get:function(){return i._instance||(i._instance=new i),i._instance}}]),i}(r))._instance=void 0,i._RF.pop()}}}));

System.register("chunks:///_virtual/LevelGamePass.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MK.ts","./SceneMode.ts","./Enumrations.ts","./LevelConditionView.ts","./SceneDefine.ts","./SceneManager.ts","./AssetInfoDefine.ts","./AdSdk.ts","./ProcedureToLevelSeclect.ts","./PanelBase.ts","./WechatMiniApi.ts","./SocialDef.ts","./Boot.ts","./BIDefine.ts","./SdkError.ts","./SdkManager.ts","./LanguageManager.ts","./FlagData.ts","./UserCollectLevelData.ts","./MKLocalStorage.ts","./sdk.ts","./MKUICtr.ts","./MKUICfg.ts"],(function(e){var t,n,a,i,o,l,s,r,c,u,f,d,h,_,g,v,m,p,S,C,L,k,y,b,M,w,I,D,B,T,A,P,x,V,H;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,a=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){o=e.cclegacy,l=e._decorator,s=e.Node},null,function(e){r=e.SceneMode},function(e){c=e.kGameMode},function(e){u=e.LevelConditionView},function(e){f=e.emSceneName},function(e){d=e.SceneManager},function(e){h=e.AssetInfoDefine},function(e){_=e.AdSdk},function(e){g=e.ProcedureToLevelSeclect},function(e){v=e.default},function(e){m=e.WechatMiniApi},function(e){p=e.emShareType,S=e.emSharePath},function(e){C=e.audio,L=e.fsm},function(e){k=e.BIEventID,y=e.emButtonType,b=e.emButtonScene,M=e.emAdStatus},function(e){w=e.emSdkErrorCode},function(e){I=e.SdkManager},function(e){D=e.LanguageManager},function(e){B=e.FlagData},function(e){T=e.UserCollectLevelData},function(e){A=e.getItem,P=e.setItem},function(e){x=e.SDK},function(e){V=e.showView},function(e){H=e.MKUIConfig}],execute:function(){var F,K,N,R,G;o._RF.push({},"1b4bekStnlIpou58lxMzLBL","LevelGamePass",void 0);var U=l.ccclass,z=l.property;e("default",(F=U("LevelGamePass"),K=z(s),F((G=t((R=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return t=e.call.apply(e,[this].concat(o))||this,a(t,"rootConditionView",G,i(t)),t.manager=void 0,t.result=0,t}n(t,e);var o=t.prototype;return o.start=function(){e.prototype.start.call(this),_.inst.hideMainPageBannerAd(),_.inst.showPopBannerAd(),B.inst.hasFlag("jump_ad_instertital_level")?_.inst.showInsterstital("LevelGamePass"):B.inst.recordFlag("jump_ad_instertital_level")},o.onSetData=function(e){this.manager=e.manager,this.result=e.result,this.initView(this.manager,this.result)},o.initView=function(e,t){this.manager=e;var n=this.rootConditionView.getComponent(u);n&&n.initView(e),this.result=t;var a=A("level_action_info",{score:0,playCount:0});2==t?(a.playCount++,P("level_action_info",a)):1==t&&(a.playCount=0,a.score=0,P("level_action_info",a),P("Level_Passed_Last",{af_adventure_name:T.inst.getLevelThemeName(),af_adventure_level:e.levelConfig.id}));var i=B.inst.getTimes(k.af_adventuregame);x.instance.reportAf(k.af_adventuregame,{af_adventure_name:T.inst.getLevelThemeName(),af_adventure_result:1==t?0:1,af_adventure_level:e.levelConfig.id,af_adventure_times:i},!0),B.inst.recordTimes(k.af_adventuregame)},o.onClickNextLevel=function(){C.playSubSound(h.audio.touch),x.instance.reportBI(k.btn_click,{btn_type:y.click_adventure_next_level,scene:b.from_adventure_pass}),this.manager.gotoNextLevel(),this.closeSelf()},o.onClickRetry=function(){C.playSubSound(h.audio.touch),x.instance.reportBI(k.btn_click,{btn_type:y.click_adventrue_rechallenge,scene:b.from_adventrue_fail}),this.manager.retryCurrentLevel(),this.closeSelf()},o.onClickHome=function(){var e=this;if(C.playSubSound(h.audio.touch),this.manager.checkIsLevelComplete())r.gameMode=c.none,this.manager.clearLevelHistoryData(),d.inst.gotoScene(f.Home,"block").then((function(){})).catch((function(){}));else{var t={content:D.translateText("tip_give_up"),title:D.translateText("tip_tittle"),cancelBtnLabel:D.translateText("btn_super"),confirmBtnLabel:D.translateText("btn_cancel"),confirmCallback:function(){r.gameMode=c.none,e.manager.clearLevelHistoryData(),d.inst.gotoScene(f.Home,"block").then((function(){})).catch((function(){})),e.closeSelf()},cancelCallback:function(){}};V(H.prefab.dialog,null,t)}},o.onClickRelife=function(){var e=this;_.inst.showRewardVideoAd("level_relife").then((function(t){C.playSubSound(h.audio.touch),e.manager.relifeCurrentLevel(),e.closeSelf()})).catch((function(e){e.errMsg!=w.Sdk_Ad_Close_Reward?I.getInstance().native.showToast(D.translateText("tip_ad_fail")):x.instance.reportBI(k.ad_revivie,{ad_status:M.Closed,ad_mode:c.level})}))},o.onClickLevelSelect=function(){C.playSubSound(h.audio.touch),r.gameMode=c.none,L.changeState(g,"block"),this.closeSelf()},o.onClickShare=function(){var e=Math.random();e<.25?m.getInstance().showShare(p.s_10001,S.start_game,this,null):e<.5?m.getInstance().showShare(p.s_10002,S.start_game,this,null):e<.75?m.getInstance().showShare(p.s_10003,S.start_game,this,null):m.getInstance().showShare(p.s_10004,S.start_game,this,null)},o.onClickHelp=function(){m.getInstance().showShare(p.s_10003,S.start_game,this,null)},o.onWillClose=function(){e.prototype.onWillClose.call(this),_.inst.hidePopBannerAd()},t}(v)).prototype,"rootConditionView",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=R))||N));o._RF.pop()}}}));

System.register("chunks:///_virtual/LevelGamePreGameOver.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PanelBase.ts","./PanelManager.ts","./AssetInfoDefine.ts","./MK.ts","./Boot.ts","./UserCollectLevelData.ts","./BIDefine.ts","./sdk.ts"],(function(e){var t,n,a,r,s,l,o,i,c;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,a=e._decorator},function(e){r=e.default},function(e){s=e.PanelManager},function(e){l=e.AssetInfoDefine},null,null,function(e){o=e.UserCollectLevelData},function(e){i=e.BIEventID},function(e){c=e.SDK}],execute:function(){var u;n._RF.push({},"a143cIcKJdOa4qklBFjdFDN","LevelGamePreGameOver",void 0);var v=a.ccclass;a.property,e("LevelGamePreGameOver",v("LevelGamePreGameOver")(u=function(e){function n(){return e.apply(this,arguments)||this}t(n,e);var a=n.prototype;return a.start=function(){var e=this;this.scheduleOnce((function(){e.closeSelf();var t=l.prefab.levelOver;s.inst.addPopUpView(t.path,e.data)}),1.5)},a.onSetData=function(e){var t=o.inst;c.instance.reportBI(i.level_finish,{level:e.level,result:1,theme:t.getLevelThemeName(),round:this.data.manager.getRound()})},n}(r))||u);n._RF.pop()}}}));

System.register("chunks:///_virtual/LevelGamePreGamePass.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PanelBase.ts","./PanelManager.ts","./AssetInfoDefine.ts","./UserCollectLevelData.ts","./Boot.ts","./MK.ts","./BIDefine.ts","./sdk.ts"],(function(e){var t,n,a,s,l,r,o,i,c;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,a=e._decorator},function(e){s=e.default},function(e){l=e.PanelManager},function(e){r=e.AssetInfoDefine},function(e){o=e.UserCollectLevelData},null,null,function(e){i=e.BIEventID},function(e){c=e.SDK}],execute:function(){var u;n._RF.push({},"f55592ndEBLgqPDjHpP/LtY","LevelGamePreGamePass",void 0);var f=a.ccclass;a.property,e("LevelGamePreGamePass",f("LevelGamePreGamePass")(u=function(e){function n(){return e.apply(this,arguments)||this}t(n,e);var a=n.prototype;return a.start=function(){var e=this;this.scheduleOnce((function(){e.closeSelf();var t=r.prefab.levelPass;l.inst.addPopUpView(t.path,e.data)}),1.5)},a.onSetData=function(e){var t=o.inst;c.instance.reportBI(i.level_finish,{level:e.level,result:0,theme:t.getLevelThemeName(),round:this.data.manager.getRound()})},n}(s))||u);n._RF.pop()}}}));

System.register("chunks:///_virtual/LevelGuideData.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MKLocalStorage.ts"],(function(e){var t,i,s,n;return{setters:[function(e){t=e.createClass},function(e){i=e.cclegacy},function(e){s=e.getItem,n=e.setItem}],execute:function(){i._RF.push({},"a33887S6sNPUIW4zeu3qzpG","LevelGuideData",void 0);var r="kGuide_Finish_Step_Level",u=e("LevelGuideData",function(){function e(){this.openGuideStep=1,this._step=void 0,this._step=s(r,1)}var i=e.prototype;return i.isGuideFinished=function(){return!0},i.isLastGuide=function(){return this._step==e.Boards[this.openGuideStep].id},i.getGuidePreviews=function(){var t=this.step;return e.Boards.hasOwnProperty(t)?e.Boards[t].preview:[-1,1,-1]},i.getGuideBoard=function(){var t=this.step;return e.Boards.hasOwnProperty(t)?e.Boards[t].board:e.Boards[1].board},i.getGuideFill=function(){var t=this.step;return e.Boards.hasOwnProperty(t)?e.Boards[t].fill:e.Boards[1].fill},t(e,[{key:"step",get:function(){return this._step},set:function(e){this._step=e,n(r,e)}}],[{key:"inst",get:function(){return null==e._inst&&(e._inst=new e),e._inst}}]),e}());u._inst=null,u.Boards={},i._RF.pop()}}}));

System.register("chunks:///_virtual/LevelScoreHelper.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BlockEventManager.ts","./ScoreHelper.ts","./Event.ts","./MK.ts","./BIDefine.ts","./UserCollectLevelData.ts","./ResManager.ts","./sdk.ts"],(function(e){var t,n,o,c,r,l,s,i,a,u;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy},function(e){o=e.BlockEventManager},function(e){c=e.emComboState,r=e.ScoreHelper},function(e){l=e.BlockEventType},null,function(e){s=e.BIEventID},function(e){i=e.UserCollectLevelData},function(e){a=e.ResManager},function(e){u=e.SDK}],execute:function(){n._RF.push({},"b704durcdRIIqzp4oA8Tk2/","LevelScoreHelper",void 0);e("LevelScoreHelper",function(e){function n(){return e.apply(this,arguments)||this}t(n,e);var r=n.prototype;return r.loadConfig=function(){var e=this;return new Promise((function(t,n){a.getInstance().loadAsset("res/configs/global","block").then((function(n){e.configs=n.json.level,t(!0)})).catch(n)}))},r.addScore=function(t){t<=0||(e.prototype.addScore.call(this,t),o.instance.emit(l.EVENT_SCENE_PLAY_SET_SCORE,this.score))},r.checkCombo=function(e){return c.Combo_WAIT},r.onClearAllBlock=function(e,t){var n=i.inst.getLevelThemeName(),o=i.inst.getHistoryLevel();u.instance.reportBI(s.level_clear_all,{theme:n,round:t,level:o})},n}(r));n._RF.pop()}}}));

System.register("chunks:///_virtual/LevelSelectItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MK.ts","./AssetInfoDefine.ts","./Enumrations.ts","./ProcedureToLevel.ts","./SceneMode.ts","./UserCollectLevelData.ts","./Boot.ts","./LanguageManager.ts","./BIDefine.ts","./sdk.ts","./MKUICtr.ts","./MKUICfg.ts"],(function(e){var t,n,l,i,o,a,r,c,s,u,f,v,h,d,p,g,L,m,b,I,S;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,l=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,r=e.Node,c=e.Color,s=e.Component},null,function(e){u=e.AssetInfoDefine},function(e){f=e.kGameMode},function(e){v=e.ProcedureToLevel},function(e){h=e.SceneMode},function(e){d=e.UserCollectLevelData},function(e){p=e.audio,g=e.fsm},function(e){L=e.LanguageManager},function(e){m=e.BIEventID},function(e){b=e.SDK},function(e){I=e.showView},function(e){S=e.MKUIConfig}],execute:function(){var y,_,C,M,D;o._RF.push({},"49493fo/lJA4YhKMfY7d43E","LevelSelectItem",void 0);var T=a.ccclass,x=a.property;e("LevelSelectItem",(y=T("LevelSelectItem"),_=x(r),y((D=t((M=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,l(t,"ndHighlight",D,i(t)),t.labLevel=null,t.lev=0,t.isCurrent=void 0,t.maxLevel=void 0,t}n(t,e);var o=t.prototype;return o.initData=function(e,t,n,l){this.lev=e,this.isCurrent=n,this.maxLevel=l,this.ndHighlight.active=t,this.labLevel.color=t?c.WHITE:c.GRAY,this.labLevel.string=e.toString(),this.node.setScale(1,1,1)},o.onClickLevelItem=function(){var e=this;p.playSubSound(u.audio.touch);var t={content:L.translateText("tip_start_level").formatSafe(this.lev),title:L.translateText("tip_tittle"),cancelBtnLabel:L.translateText("btn_cancel"),confirmBtnLabel:L.translateText("btn_super"),confirmCallback:function(){p.playSubSound(u.audio.touch),h.gameMode=f.adventure_level,d.inst.updateHistoryLevel(e.lev),g.changeState(v,"level_select_item"),b.instance.reportBI(m.level_replay,{level:e.lev,theme:d.inst.getLevelThemeName()})},cancelCallback:function(){}};I(S.prefab.dialog,null,t)},t}(s)).prototype,"ndHighlight",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=M))||C));o._RF.pop()}}}));

System.register("chunks:///_virtual/LevelTextDesc.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,r,n,o,i,c,l,a;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){i=e.cclegacy,c=e._decorator,l=e.Node,a=e.Component}],execute:function(){var s,u,p,d,f;i._RF.push({},"490d6RFP6dCoIPYH/ik3jy+","LevelTextDesc",void 0);var v=c.ccclass,y=c.property;e("LevelTextDesc",(s=v("LevelTextDesc"),u=y(l),s((f=t((d=function(e){function t(){for(var t,r=arguments.length,i=new Array(r),c=0;c<r;c++)i[c]=arguments[c];return t=e.call.apply(e,[this].concat(i))||this,n(t,"labTittleNode",f,o(t)),t}return r(t,e),t.prototype.onLoad=function(){},t}(a)).prototype,"labTittleNode",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=d))||p));i._RF.pop()}}}));

System.register("chunks:///_virtual/LevelTheme.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,n,s,r;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,s=e._decorator,r=e.Component}],execute:function(){var i;n._RF.push({},"19c422Ru6ZFV6nt4h0Ipwtp","LevelTheme",void 0);var c=s.ccclass;s.property,e("LevelTheme",c("LevelTheme")(i=function(e){function n(){for(var t,n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(t=e.call.apply(e,[this].concat(s))||this).items=[],t.itemLables=[],t}t(n,e);var s=n.prototype;return s.addItems=function(e,t){this.itemLables.push(t),this.items.push(e)},s.clearItems=function(){this.items.length=0,this.itemLables.length=0},n}(r))||i);n._RF.pop()}}}));

System.register("chunks:///_virtual/LevelThemeContent.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UserCollectLevelData.ts","./MK.ts","./LevelSelectItem.ts","./MKResCtr.ts"],(function(e){var t,n,l,o,i,r,a,s,c,v;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,l=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){i=e.cclegacy,r=e._decorator,a=e.Component},function(e){s=e.UserCollectLevelData},null,function(e){c=e.LevelSelectItem},function(e){v=e.MKSubResCtr}],execute:function(){var h,u,m;i._RF.push({},"03f47Cn1LpJN6QxlYiBBy5H","LevelThemeContent",void 0);var f=r.ccclass,L=r.property;e("LevelThemeContent",f("LevelThemeContent")((m=t((u=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return t=e.call.apply(e,[this].concat(i))||this,l(t,"levelTheme",m,o(t)),t.rootLevelItem=null,t.rootLevelMap=null,t}n(t,e);var i=t.prototype;return i.onLoad=function(){s.inst.getLevelThemeName()==this.levelTheme&&this.refreshContent()},i.start=function(){s.inst.getLevelThemeName()!=this.levelTheme&&this.refreshContent()},i.refreshContent=function(){var e=s.inst.getMaxHistoryLevelByTheme(this.levelTheme),t=s.inst.getLevelConfigPath(),n=v.loadJsonConfig(t),l=n.length,o=this.node;if(o&&(this.rootLevelItem=o.getChildByPath("ScrollView/view/content/level_content"),this.rootLevelMap=o.getChildByPath("ScrollView/view/content/level_map")),this.rootLevelItem)for(var i=0;i<l;i++){var r=n[i];this.createLevelItem(r,e,l).active=!0}},i.createLevelItem=function(e,t,n){var l=this.rootLevelItem.getChildByName(e.id.toString());return l.getComponent(c).initData(e.id,e.id<=t,e.id==t,n),l},t}(a)).prototype,"levelTheme",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),h=u))||h);i._RF.pop()}}}));

System.register("chunks:///_virtual/LevelThemeImage.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UserCollectLevelData.ts","./ResManager.ts"],(function(e){var t,r,n,i,l,o,a,c,s,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,n=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){l=e.cclegacy,o=e._decorator,a=e.Sprite,c=e.Component},function(e){s=e.UserCollectLevelData},function(e){u=e.ResManager}],execute:function(){var p,h,m,v;l._RF.push({},"89e0bEm3XRDdqlcFqaR3klM","LevelThemeImage",void 0);var f=o.ccclass,g=o.property;e("LevelThemeImage",f("LevelThemeImage")((m=t((h=function(e){function t(){for(var t,r=arguments.length,l=new Array(r),o=0;o<r;o++)l[o]=arguments[o];return t=e.call.apply(e,[this].concat(l))||this,n(t,"levelTheme",m,i(t)),n(t,"spriteAtlas",v,i(t)),t}return r(t,e),t.prototype.onLoad=function(){var e=this.node.getComponent(a),t=""==this.levelTheme?s.inst.getLevelThemeName():this.levelTheme,r=s.inst.getHistoryLevelWithTheme(t),n=t+"/"+Math.floor(r/6+1);u.getInstance().loadSpriteFrame(n,"level").then((function(t){e&&t&&(e.spriteFrame=t)})).catch((function(e){e&&console.error(e)}))},t}(c)).prototype,"levelTheme",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),v=t(h.prototype,"spriteAtlas",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=h))||p);l._RF.pop()}}}));

System.register("chunks:///_virtual/LevelThemeToggle.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UserCollectLevelData.ts","./MK.ts","./AssetInfoDefine.ts","./Boot.ts"],(function(e){var t,n,i,o,l,r,s,a,c,u,h;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){l=e.cclegacy,r=e._decorator,s=e.Sprite,a=e.Component},function(e){c=e.UserCollectLevelData},null,function(e){u=e.AssetInfoDefine},function(e){h=e.audio}],execute:function(){var p,f,g,v,m,T;l._RF.push({},"4e6aa3Q5ExMKLAtPEr/82ui","LevelThemeToggle",void 0);var y=r.ccclass,b=r.property;e("LevelThemeToggle",(p=y("LevelThemeToggle"),f=b(s),p((m=t((v=function(e){function t(){for(var t,n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return t=e.call.apply(e,[this].concat(l))||this,i(t,"levelTheme",m,o(t)),i(t,"sprIcon",T,o(t)),t}n(t,e);var l=t.prototype;return l.onLoad=function(){this.changeState()},l.changeState=function(){c.inst.getLevelThemeName()==this.levelTheme?this.setEnable():this.setDisable()},l.setEnable=function(){this.sprIcon&&(this.sprIcon.grayscale=!1)},l.setDisable=function(){this.sprIcon&&(this.sprIcon.grayscale=!0)},l.onClick=function(){h.playSubSound(u.audio.touch),this.levelTheme&&""!=this.levelTheme&&c.inst.setLevelThemeName(this.levelTheme),this.node.parent.getComponentsInChildren(t).forEach((function(e){e.changeState()}))},t}(a)).prototype,"levelTheme",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),T=t(v.prototype,"sprIcon",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=v))||g));l._RF.pop()}}}));

System.register("chunks:///_virtual/LevelThemeTrophy.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UserCollectLevelData.ts"],(function(e){var t,r,l,n,i,o,a,s,c;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,l=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){i=e.cclegacy,o=e._decorator,a=e.Sprite,s=e.Component},function(e){c=e.UserCollectLevelData}],execute:function(){var h,p,u;i._RF.push({},"9bfeaMYrNdAbYTdBLDAlfQb","LevelThemeTrophy",void 0);var v=o.ccclass,m=o.property;e("LevelThemeTrophy",v("LevelThemeImage")((u=t((p=function(e){function t(){for(var t,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t=e.call.apply(e,[this].concat(i))||this,l(t,"levelTheme",u,n(t)),t}return r(t,e),t.prototype.onLoad=function(){var e=this.node.getComponent(a),t=""==this.levelTheme?c.inst.getLevelThemeName():this.levelTheme,r=c.inst.getIsAllLevelFinishedByTheme(t);e.grayscale=0==r},t}(s)).prototype,"levelTheme",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),h=p))||h);i._RF.pop()}}}));

System.register("chunks:///_virtual/LevelTouchMove.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MK.ts","./Event.ts","./BlockConstData.ts","./AssetInfoDefine.ts","./BlockEventManager.ts","./BlockPlaceholder3.ts","./Game.ts","./Boot.ts","./MKEvent.ts"],(function(t){var o,e,i,s,n,h,c,a,u,l,r,v,d,m,f,T;return{setters:[function(t){o=t.inheritsLoose},function(t){e=t.cclegacy,i=t._decorator,s=t.Node,n=t.Vec3,h=t.sys,c=t.tween,a=t.Component},null,function(t){u=t.BlockEventType},function(t){l=t.BlockConstData},function(t){r=t.AssetInfoDefine},function(t){v=t.BlockEventManager},function(t){d=t.BlockPlaceholder3},function(t){m=t.Game},function(t){f=t.audio},function(t){T=t.sendEvent}],execute:function(){var g;e._RF.push({},"c909aSSC9RGG7/1qPysiA93","LevelTouchMove",void 0);var M=i.ccclass;i.property,t("LevelTouchMove",M("LevelTouchMove")(g=function(t){function e(){for(var o,e=arguments.length,i=new Array(e),s=0;s<e;s++)i[s]=arguments[s];return(o=t.call.apply(t,[this].concat(i))||this).touchHeight=void 0,o.targetNode=void 0,o.SCALE_TOUCH=1,o.targetPosition=void 0,o.touchScacle=void 0,o.touchOffsetPos=void 0,o.isMoving=!1,o.lastTouchTime=0,o.clickDelta=300,o.touchId=0,o.canEnd=!1,o.canMove=!1,o.moveDeltaFrame=2,o.currMoveFrame=0,o.sumDis=0,o}o(e,t);var i=e.prototype;return i.onLoad=function(){var t;this.targetNode=null!=(t=this.targetNode)?t:this.node},i.start=function(){var t;this.touchHeight=2.25*l.BlockSpriteSize.y,this.targetNode=null!=(t=this.targetNode)?t:this.node,this.node.on(s.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(s.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.on(s.EventType.TOUCH_END,this.onTouchEnd,this),this.node.on(s.EventType.TOUCH_CANCEL,this.onTouchCancel,this),this.clickDelta=Math.max(this.clickDelta,1e3*l.BlockParam.clickTime),this.touchScacle=new n(this.SCALE_TOUCH,this.SCALE_TOUCH,1),this.touchOffsetPos=new n,h.os==h.OS.IOS||h.os==h.OS.OSX?this.moveDeltaFrame=2:this.moveDeltaFrame=0,this.currMoveFrame=0},i.onTouchStart=function(t){0!=m.inst.canMoveBlock&&(Date.now()-this.lastTouchTime<this.clickDelta||(this.getComponent(d).removeAllBgLight(),this.touchId=t.getID(),this.lastTouchTime=Date.now(),v.instance.emit(u.BLOCK_TOUCH_START,t),f.playSubSound(r.audio.block_pick),this.canMove=!0,this.canEnd=!0,this.touchOffsetPos.x=this.node.position.x,this.touchOffsetPos.y=this.node.position.y+this.touchHeight,this.touchOffsetPos.z=0,c(this.node).to(l.BlockParam.clickTime,{scale:this.touchScacle,position:this.touchOffsetPos},{easing:"sineOut"}).start(),this.node.setSiblingIndex(7),this.targetNode=this.node,this.targetPosition=this.touchOffsetPos))},i.onTouchEnd=function(t){this.handleTouchEnd(t)},i.onTouchCancel=function(t){this.handleTouchEnd(t)},i.handleTouchEnd=function(t){0!=m.inst.canMoveBlock&&this.canEnd&&this.touchId==t.getID()&&(this.currMoveFrame=0,this.isMoving=!1,this.canMove=!1,this.canEnd=!1,this.touchId=0,this.moveDeltaFrame>0&&T(u.kEvent_Game_Move_Block,this.node,this.sumDis),T(u.kEvent_Game_Move_Block_End,this.node,this.sumDis),this.sumDis=0)},i.onTouchMove=function(t){if(0!=m.inst.canMoveBlock&&(this.sumDis+=t.getDelta().length(),this.canMove&&this.touchId==t.getID())){this.isMoving=!0;var o=t.getUIDelta();this.targetPosition.x+=1.4*o.x,this.targetPosition.y+=1.4*o.y,this.targetPosition.z=0,this.targetNode.setPosition(this.targetPosition),this.moveDeltaFrame>0?(this.currMoveFrame%this.moveDeltaFrame==0&&T(u.kEvent_Game_Move_Block,this.node,this.sumDis),this.currMoveFrame+=1):T(u.kEvent_Game_Move_Block,this.node,this.sumDis)}},e}(a))||g);e._RF.pop()}}}));

System.register("chunks:///_virtual/loading.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MK.ts","./ProcedureToGame.ts","./Boot.ts","./MKEvent.ts","./EventType.ts","./GameDefine.ts"],(function(e){var r,o,n,i,t,s,l,a,u,g,c,p,b,d,f;return{setters:[function(e){r=e.applyDecoratedDescriptor,o=e.inheritsLoose,n=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){t=e.cclegacy,s=e._decorator,l=e.ProgressBar,a=e.Label,u=e.Component},null,function(e){g=e.ProcedureToGame},function(e){c=e.fsm},function(e){p=e.regEvent,b=e.unRegEvent},function(e){d=e.Events},function(e){f=e.buildInfo}],execute:function(){var h,v,P,m,y,E,L,D,N;t._RF.push({},"bbfb96iMdZL/JkBX5AHpiMa","loading",void 0);var _=s.ccclass,z=s.property;e("loading",(h=_("loading"),v=z(l),P=z(a),m=z(a),h((L=r((E=function(e){function r(){for(var r,o=arguments.length,t=new Array(o),s=0;s<o;s++)t[s]=arguments[s];return r=e.call.apply(e,[this].concat(t))||this,n(r,"loadingProgress",L,i(r)),n(r,"loadingLabel",D,i(r)),n(r,"labelVersion",N,i(r)),r.progressNumber=void 0,r}o(r,e);var t=r.prototype;return t.onLoad=function(){null!=c.currentState?(this.loadingLabel.string="",this.loadingProgress.node.active=!1,this.progressNumber=0,this.loadingProgress.progress=0,p(d.EVENT_PRELOAD_RES,this.onEvtProgress,this),this.labelVersion.string="version : "+f.bundle.block.version):c.changeState(g,"block")},t.onDestroy=function(){b(this)},t.onEvtProgress=function(e){this.loadingProgress.node.active=!0,this.progressNumber=e.finished/e.total,this.loadingProgress.progress<this.progressNumber&&(this.loadingProgress.progress=this.progressNumber)},r}(u)).prototype,"loadingProgress",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=r(E.prototype,"loadingLabel",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),N=r(E.prototype,"labelVersion",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=E))||y));t._RF.pop()}}}));

System.register("chunks:///_virtual/LocalizedLabel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LanguageData.ts"],(function(e){var t,i,r,n,o,a,l,c,s,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,r=e.initializerDefineProperty,n=e.assertThisInitialized,o=e.createClass},function(e){a=e.cclegacy,l=e._decorator,c=e.Label,s=e.Component},function(e){u=e.t}],execute:function(){var p,y,d,b,f,h;a._RF.push({},"edf98QH2D1AUoCrtQlbxFrU","LocalizedLabel",void 0);var L=l.ccclass,g=l.property,v=l.executeInEditMode;e("LocalizedLabel",(p=L("LocalizedLabel"),y=g({visible:!1}),d=g({displayName:"Key",visible:!0}),p(b=v((h=t((f=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return(t=e.call.apply(e,[this].concat(o))||this).label=null,r(t,"key",h,n(t)),t}i(t,e);var a=t.prototype;return a.onLoad=function(){this.fetchRender()},a.fetchRender=function(){var e=this.node.getComponent(c);if(e)return this.label=e,void this.updateLabel()},a.updateLabel=function(){this.label&&(this.label.string=u(this.key))},o(t,[{key:"_key",get:function(){return this.key},set:function(e){this.updateLabel(),this.key=e}}]),t}(s)).prototype,"key",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),t(f.prototype,"_key",[d],Object.getOwnPropertyDescriptor(f.prototype,"_key"),f.prototype),b=f))||b)||b));a._RF.pop()}}}));

System.register("chunks:///_virtual/LocalizedLoadingLabel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LanguageData.ts"],(function(e){var t,i,n,o,a,r,l,c,s,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized,a=e.createClass},function(e){r=e.cclegacy,l=e._decorator,c=e.Label,s=e.Component},function(e){u=e.ti}],execute:function(){var p,d,y,b,f,L;r._RF.push({},"89203o2KblAD6fklSvZUSDS","LocalizedLoadingLabel",void 0);var h=l.ccclass,g=l.property,v=l.executeInEditMode;e("LocalizedLoadingLabel",(p=h("LocalizedLoadingLabel"),d=g({visible:!1}),y=g({displayName:"Key",visible:!0}),p(b=v((L=t((f=function(e){function t(){for(var t,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(t=e.call.apply(e,[this].concat(a))||this).label=null,n(t,"key",L,o(t)),t}i(t,e);var r=t.prototype;return r.onLoad=function(){this.fetchRender()},r.fetchRender=function(){var e=this.node.getComponent(c);if(e)return this.label=e,void this.updateLabel()},r.updateLabel=function(){this.label&&(this.label.string=u(this.key))},a(t,[{key:"_key",get:function(){return this.key},set:function(e){this.updateLabel(),this.key=e}}]),t}(s)).prototype,"key",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),t(f.prototype,"_key",[y],Object.getOwnPropertyDescriptor(f.prototype,"_key"),f.prototype),b=f))||b)||b));r._RF.pop()}}}));

System.register("chunks:///_virtual/LocalizedSprite.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LanguageData.ts"],(function(e){var t,i,r,n,a,o,p,s,c;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.initializerDefineProperty,r=e.inheritsLoose,n=e.assertThisInitialized},function(e){a=e.cclegacy,o=e._decorator,p=e.SpriteFrame,s=e.Component},function(e){c=e._language}],execute:function(){var u,l,f,h,d,g,y,L,m,z,b;a._RF.push({},"c05c25C4xNAupWYMB93tIzp","LocalizedSprite",void 0);var v=o.ccclass,S=o.property,F=o.executeInEditMode,_=(u=v("LocalizedSpriteItem"),l=S({type:p}),u((d=t((h=function(){i(this,"language",d,this),i(this,"spriteFrame",g,this)}).prototype,"language",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"zh"}}),g=t(h.prototype,"spriteFrame",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=h))||f);e("LocalizedSprite",(y=v("LocalizedSprite"),L=S({type:_}),y(m=F((b=t((z=function(e){function t(){for(var t,r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(t=e.call.apply(e,[this].concat(a))||this).sprite=null,i(t,"spriteList",b,n(t)),t}r(t,e);var a=t.prototype;return a.onLoad=function(){this.fetchRender()},a.fetchRender=function(){var e=this.node.getComponent("cc.Sprite");if(e)return this.sprite=e,void this.updateSprite()},a.updateSprite=function(){for(var e=0;e<this.spriteList.length;e++){var t=this.spriteList[e];if(t.language===c){this.sprite.spriteFrame=t.spriteFrame;break}}},t}(s)).prototype,"spriteList",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),m=z))||m)||m));a._RF.pop()}}}));

System.register("chunks:///_virtual/LocationData.ts",["cc"],(function(e){var n,w;return{setters:[function(e){n=e.cclegacy,w=e.Vec3}],execute:function(){n._RF.push({},"005e5j2G/9Mtb3d+ukGbiv0","LocationData",void 0);e("DiamondDisplayLoc",[new Array(new w(0,32,0)),new Array(new w(-67,32,0),new w(67,32,0)),new Array(new w(-120,32,0),new w(0,115,0),new w(120,32,0)),new Array(new w(-120,32,0),new w(120,32,0),new w(-67,-84,0),new w(67,-84,0)),new Array(new w(0,115,0),new w(-120,32,0),new w(120,32,0),new w(-67,-84,0),new w(67,-84,0))]);n._RF.pop()}}}));

System.register("chunks:///_virtual/LoginRewardView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PanelBaseNoMask.ts"],(function(e){var t,n,r,i;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,r=e._decorator},function(e){i=e.default}],execute:function(){var o;n._RF.push({},"14e2b4zanRBrpxDciLcEhH9","LoginRewardView",void 0);var c=r.ccclass;r.property,e("LoginRewardView",c("LoginRewardView")(o=function(e){function n(){return e.apply(this,arguments)||this}return t(n,e),n.prototype.start=function(){},n}(i))||o);n._RF.pop()}}}));

System.register("chunks:///_virtual/MacroDefine.ts",["cc"],(function(c){var e;return{setters:[function(c){e=c.cclegacy}],execute:function(){e._RF.push({},"cc44dd46UpGUr0Mkqy89NL8","MacroDefine",void 0);c("Null",null),c("EmptyObject",{}),c("EmptyArr",[]),c("MAX_ZINDEX",9999),c("MIN_ZINDEX",0);e._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./debug-view-runtime-control.ts","./FlowLight.ts","./Distort.ts","./MergeManager.ts","./SilderScript.ts","./SplitSprite.ts","./SpriteScript.ts","./TextureManager.ts","./Utils.ts","./ShakeTest.ts","./jy_wxsdk_1.3.8.min.mjs_cjs=&original=.js","./ABTestDefine.ts","./ABTestManager.ts","./Boot.ts","./GameRoot.ts","./MK.ts","./PolicyView.ts","./RemoteConfig.ts","./Singleton.ts","./Touch.ts","./X.ts","./Net.ts","./CommonCtr.ts","./InterfaceCtr.ts","./MKHeartbeat.ts","./AlbumData.ts","./BoardPreviewData.ts","./FlagData.ts","./Global.ts","./GuideData.ts","./LanguageManager.ts","./LevelGuideData.ts","./MsgData.ts","./SettingData.ts","./UserAdventureLevelData.ts","./UserChangeData.ts","./UserCollectLevelData.ts","./UserData.ts","./UserHRocketData.ts","./UserHammerData.ts","./UserScoreLevelData.ts","./UserVRocketData.ts","./AssetInfoDefine.ts","./AudioDefine.ts","./BIDefine.ts","./GameDefine.ts","./MacroDefine.ts","./BlockEventManager.ts","./EventType.ts","./MKEvent.ts","./MsgType.ts","./FsmState.ts","./ProcedureLaunch.ts","./ProcedurePreload.ts","./ProcedureToAdventureLevelSelectV2.ts","./ProcedureToGame.ts","./ProcedureToHome.ts","./ProcedureToLevel.ts","./ProcedureToLevelSeclect.ts","./ProcedureToLevelTheme.ts","./AdventureLevelActiveImage.ts","./AdventureLevelBoardView.ts","./AdventureLevelConditionView.ts","./AdventureLevelConditionViewEnter.ts","./AdventureLevelConditionViewScene.ts","./AdventureLevelFinishAll.ts","./AdventureLevelGameOver.ts","./AdventureLevelGamePass.ts","./AdventureLevelGamePreGameOver.ts","./AdventureLevelItem.ts","./AdventureLevelPreGamePass.ts","./BlockEntity.ts","./BlockGenerate2.ts","./BlockGenerateAdventureLevel.ts","./BlockGenerateHRocket.ts","./BlockGenerateHammer.ts","./BlockGenerateLevel.ts","./BlockGenerateVRocket.ts","./BlockPlaceholder3.ts","./BlockPlaceholderHRocket.ts","./BlockPlaceholderHammer.ts","./BlockPlaceholderLevel.ts","./BlockPlaceholderVRocket.ts","./BoardView.ts","./EffectComboComponent.ts","./TopBar.ts","./BlockConstData.ts","./BlockType.ts","./Enumrations.ts","./Event.ts","./LocationData.ts","./SceneMode.ts","./adventureLevelData.ts","./AITipsAnim.ts","./AddScoreLabel.ts","./BlockScale.ts","./ComboScore.ts","./MutilLineScore.ts","./ShaderFrame.ts","./ShaderFrameEx.ts","./fangge_kaichang_ani.ts","./EndlessBestScoreView.ts","./EndlessBoardView.ts","./EndlessGameOverView.ts","./EndlessScoreView.ts","./ReviveView.ts","./HammerManager.ts","./EndlessGamePreGameOver.ts","./HammerTouchMove.ts","./LevelActiveImage.ts","./LevelBoardView.ts","./LevelChapterItem.ts","./LevelConditionDiamondItem.ts","./LevelConditionView.ts","./LevelConditionViewEnter.ts","./LevelConditionViewScene.ts","./LevelGamePass.ts","./LevelGamePreGameOver.ts","./LevelGamePreGamePass.ts","./LevelSelectItem.ts","./LevelTextDesc.ts","./LevelTheme.ts","./LevelThemeContent.ts","./LevelThemeImage.ts","./LevelThemeToggle.ts","./LevelThemeTrophy.ts","./LevelTouchMove.ts","./TweenAlphaShow.ts","./TweenScaleShow.ts","./AdventureLevelGame.ts","./BlockFillMaster.ts","./BlockGenerate.ts","./BlockGenerateMaster.ts","./BlockGenerateMasterLevel.ts","./BlockGenerateNative.ts","./BlockGenetateWasm.ts","./BlockGenetateWasmAdventure.ts","./BlockGenetateWasmEndless.ts","./EndlessProgressHelper.ts","./EndlessScoreHelper.ts","./Game.ts","./LevelGame.ts","./LevelScoreHelper.ts","./ScoreHelper.ts","./Util.ts","./SceneAdventureLevelSelectV2.ts","./SceneDefine.ts","./SceneGame.ts","./SceneHome.ts","./SceneLevel.ts","./SceneLevelSeclect.ts","./SceneManager.ts","./SceneTheme.ts","./loading.ts","./SpeedTest.ts","./AlbumView.ts","./FriendRankListView.ts","./LoginRewardView.ts","./Props.ts","./SettingView.ts","./UsePropsView.ts","./LanguageData.ts","./LanguageToggle.ts","./LocalizedLabel.ts","./LocalizedLoadingLabel.ts","./LocalizedSprite.ts","./JYSdkManager.ts","./SdkAdManager.ts","./SdkBase.ts","./SdkConfig.ts","./SdkCrossAdManager.ts","./SdkError.ts","./SdkEventManager.ts","./SdkEventType.ts","./SdkManager.ts","./SdkManagerTest.ts","./SdkSystemInfo.ts","./SdkUtils.ts","./AccountBase.ts","./VisitorAccount.ts","./WebbrowserAccount.ts","./WechatAccount.ts","./AdBase.ts","./AdDef.ts","./IronSourceAd.ts","./WechatMiniAd.ts","./GaBase.ts","./GaClickStatEventDef.ts","./NativeGa.ts","./WebbrowserGa.ts","./WechatGa.ts","./ChannelBase.ts","./GooglePlayChannel.ts","./WechatChannel.ts","./SdkSingleton.ts","./encode_decode.ts","./CrossAdConfig.ts","./CrossAdRewardData.ts","./ad_node.ts","./ads_blink.ts","./ads_exchange.ts","./ads_list.ts","./ads_manager.ts","./ads_node.ts","./cross_ads_adapter.ts","./SdkLog.ts","./AndroidNative.ts","./NativeBase.ts","./WebbrowserNative.ts","./WechatNative.ts","./HttpBase.ts","./SdkHttp.ts","./WechatHttp.ts","./friend.ts","./ShareEnableComponent.ts","./TimerRecord.ts","./MKHttp.ts","./MKSocket.ts","./NetDefine.ts","./NetManager.ts","./IPanelManager.ts","./ModallessBase.ts","./PageViewIndicatorEx.ts","./PageViewIndicatorItem.ts","./PanelBase.ts","./PanelBaseMask.ts","./PanelBaseNoMask.ts","./PanelDef.ts","./PanelManager.ts","./RedPointComponent.ts","./RedPointDef.ts","./RedPointManager.ts","./ResManager.ts","./SceneLoading.ts","./AdSdk.ts","./JsbNativeCall.ts","./SdkBiManager.ts","./SdkDef.ts","./SdkUtil.ts","./TimerRecord2.ts","./emAdPath.ts","./sdk.ts","./SocialDef.ts","./WechatMiniApi.ts","./ShareHappyComponent.ts","./ShakeAbleCamera.ts","./ShakeDefine.ts","./ShakeManager.ts","./ShakeNodeEffect.ts","./Group.ts","./Holder.ts","./Manager.ts","./ScrollAdapter.ts","./View.ts","./Indicator.ts","./Scrollbar.ts","./debug.ts","./enum.ts","./interface.ts","./helper.ts","./index.ts","./CenterManager.ts","./LayoutManager.ts","./ModelManager.ts","./PageViewManager.ts","./ReleaseManager.ts","./ScrollManager.ts","./ViewManager.ts","./ViewManagerEvent.ts","./card.ts","./card_item.ts","./chat.ts","./chat_Item.ts","./edit.ts","./edit_item.ts","./fixed.ts","./fixed_item.ts","./home2.ts","./horiznal_scale_card.ts","./horiznal_scale_card_item.ts","./item_page.ts","./pageView.ts","./pageView_item.ts","./page_item.ts","./summary.ts","./test.ts","./test_item.ts","./time.ts","./time_item.ts","./time_main.ts","./ToastManager.ts","./UIPlayAnimations.ts","./UIPlayClearParticle.ts","./UIPlayEffectParticle.ts","./UITweenBarComponent.ts","./UITweenNumber.ts","./EncodeDecode.ts","./MKAdapter.ts","./MKAudio.ts","./MKCopy.ts","./MKCrypto.ts","./MKLocalStorage.ts","./MKLog.ts","./MKNodeBind.ts","./MKPrototype.ts","./MKResCtr.ts","./MKUtil.ts","./NodePool.ts","./PaperPlane.ts","./Random.ts","./Timer.ts","./MKDialog.ts","./MKProgress.ts","./MKTips.ts","./MKUIBase.ts","./MKUICtr.ts","./MKUICfg.ts","./Home.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/Manager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,n,a;return{setters:[function(t){e=t.createClass},function(t){n=t.cclegacy,a=t._decorator}],execute:function(){var i;n._RF.push({},"9e556t6rHxO6ZbZa4CSsrXu","Manager",void 0);var r=a.ccclass;a.property,t("Manager",r("Manager")(i=function(){function t(){this._inited=!1,this._eventMap=new Map,this._adapter=null}var n=t.prototype;return n.internal_create=function(t){this._adapter=t},n.internal_init=function(){this._inited||(this._inited=!0,this.onInit())},n.on=function(t,e,n,a){void 0===a&&(a=!1),this._eventMap.has(t)||this._eventMap.set(t,[]);var i=this._eventMap.get(t);null!=i&&i.find((function(t){return t.target==n&&t.callback==e}))||i.push({callback:e,target:n,once:a})},n.off=function(t,e,n){if(this._eventMap.has(t)){var a=this._eventMap.get(t),i=null==a?void 0:a.findIndex((function(t){return t.callback==e&&t.target==n}));-1!=i&&a.splice(i,1)}},n.emit=function(t){if(this._eventMap.has(t)){for(var e=this._eventMap.get(t),n=arguments.length,a=new Array(n>1?n-1:0),i=1;i<n;i++)a[i-1]=arguments[i];for(var r=0;r<e.length;r++){var c,s=e[r];(c=s.callback).call.apply(c,[s.target].concat(a)),s.once&&(e.splice(r,1),r--)}}},e(t,[{key:"adapter",get:function(){return this._adapter}}]),t}())||i);n._RF.pop()}}}));

System.register("chunks:///_virtual/MergeManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./TextureManager.ts"],(function(e){var t,a,i,o,r,s,n,h;return{setters:[function(e){t=e.createForOfIteratorHelperLoose},function(e){a=e.cclegacy,i=e._decorator,o=e.resources,r=e.ImageAsset,s=e.SpriteFrame,n=e.v2},function(e){h=e.TextureManager}],execute:function(){var _;a._RF.push({},"a7a06vcmz1ElqbREWb4WXw2","MergeManager",void 0);var g=i.ccclass;i.property,e("MergeManager",g("MergeManager")(_=function(){function e(e,t,a,i,o){this._rowMax=0,this._colMax=0,this._rowCount=0,this._colCount=0,this._imageCount=0,this._imageWidth=0,this._imageHeight=0,this._paths=void 0,this._mergeTexture=void 0,this._imageMap=new Map,this._loaded=!1,this.onLoaded=void 0,this._paths=e,this._colMax=t,this._rowMax=a,this._imageWidth=i,this._imageHeight=o}var a=e.prototype;return a.init=function(){for(var e=this._imageWidth*this._colMax*this._imageHeight*this._rowMax*4,a=new Uint8Array(e),i=0;i<a.length;i++)a[i]=255;this._mergeTexture=h.createTexture(a,this._imageWidth*this._colMax,this._imageHeight*this._rowMax);for(var o,r=t(this._paths);!(o=r()).done;){var s=o.value;this.loadImage(s)}},a.loadImage=function(e,t){var a=this;o.load(e,r,(function(t,i){if(t)console.error(t);else{var o=s.createWithImage(i).texture,r=n(a._colCount*a._imageWidth,a._rowCount*a._imageHeight);a._imageMap.set(e,r),a._colCount++,a._colCount==a._colMax&&(a._colCount=0,a._rowCount++),a._mergeTexture=h.addImage(a._mergeTexture,o,r)}a._imageCount++,a._imageCount==a._paths.length&&(a._loaded=!0,a.onLoaded&&a.onLoaded(a._mergeTexture))}))},e}())||_);a._RF.pop()}}}));

System.register("chunks:///_virtual/MK.ts",["cc","./Boot.ts"],(function(t){var c;return{setters:[function(t){c=t.cclegacy},function(c){t("mk",c)}],execute:function(){c._RF.push({},"818d4Di1y9AcYl2hbOSzQNX","MK",void 0),c._RF.pop()}}}));

System.register("chunks:///_virtual/MKAdapter.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,i,o,n,r,s,c;return{setters:[function(e){t=e.inheritsLoose},function(e){i=e.cclegacy,o=e._decorator,n=e.view,r=e.screen,s=e.ResolutionPolicy,c=e.Component}],execute:function(){var u;i._RF.push({},"2c2f619NcVIeKELciXCGrF7","MKAdapter",void 0);var p=o.ccclass;o.property,e("MKAdapter",p("MKAdapter")(u=function(e){function i(){return e.apply(this,arguments)||this}return t(i,e),i.prototype.onLoad=function(){var e=n.getDesignResolutionSize(),t=r.windowSize;t.height/t.width>e.height/e.width?n.setDesignResolutionSize(720,1280,s.FIXED_WIDTH):n.setDesignResolutionSize(720,1280,s.FIXED_HEIGHT)},i}(c))||u);i._RF.pop()}}}));

System.register("chunks:///_virtual/MKAudio.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MKLocalStorage.ts","./AudioDefine.ts","./SettingData.ts","./ResManager.ts"],(function(t){var i,o,n,e,u,s,c,a;return{setters:[function(t){i=t.createClass},function(t){o=t.cclegacy,n=t.clamp01},function(t){e=t.setItem,u=t.getItem},function(t){s=t.AudioKey},function(t){c=t.SettingData},function(t){a=t.ResManager}],execute:function(){o._RF.push({},"34c63Ai97hOv4Y82GussLU7","MKAudio",void 0);var r="key_volume",l=t("audioManager",function(){function t(){this.res=void 0,this.musicName=""}var o=t.prototype;return o.init=function(i){this.res=a.getInstance(),t._audioSource=i,this.setMusicVolume(this.getMusicVolume())},o.playMusic=function(i){var o=t._audioSource;this.res&&(1!=c.inst.isMuteMusic?(o.loop=i,o.playing||o.play()):t._audioSource.stop())},o.stopMusic=function(){t._audioSource.stop()},o.playSound=function(i,o){if(void 0===o&&(o=1),!c.inst.isMuteEffect){var n=t._audioSource;this.res&&this.res.loadAudio(i).then((function(t){n.playOneShot(t,o)})).catch((function(t){console.error(t)}))}},o.playSoundWithCallback=function(i,o,n){if(void 0===n&&(n=1),1!=c.inst.isMuteEffect){var e=t._audioSource;this.res&&this.res.loadAudio(i).then((function(t){e.playOneShot(t,n),setTimeout(o,1e3*t.getDuration())})).catch((function(t){console.error(t)}))}},o.playSubSound=function(i,o){if(void 0===o&&(o=1),!c.inst.isMuteEffect){var n=t._audioSource;this.res.loadAudio(i).then((function(t){n.playOneShot(t,o)})).catch((function(t){console.error(t)}))}},o.setMusicVolume=function(i){var o=t._audioSource;i=n(i),o.volume=i,e(r,i)},o.getMusicVolume=function(){return Number(u(r,1))},o.playBtnEffect=function(){c.inst.isMuteEffect||this.playSound(s.BTN_CLICK_EFFECT)},o.changeMusic=function(i,o){var n=this;void 0===o&&(o=!0);var e=t._audioSource;1!=c.inst.isMuteMusic?(e.playing&&this.musicName!=i&&e.stop(),this.res.loadAudio(i).then((function(t){e.clip=t,n.musicName!=i&&(e.loop=o,e.play()),n.musicName=i})).catch((function(t){console.error("加载音乐失败:",t)}))):e.stop()},i(t,null,[{key:"instance",get:function(){return this._instance||(this._instance=new t),this._instance}}]),t}());l._instance=void 0,l._audioSource=void 0,o._RF.pop()}}}));

System.register("chunks:///_virtual/MKCopy.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var r,n;return{setters:[function(e){r=e.createForOfIteratorHelperLoose},function(e){n=e.cclegacy}],execute:function(){e("deepClone",(function e(n,o){void 0===o&&(o=10);if(o<0)throw new Error("deepClone Error: deep is exceed maxDeep");if(!n)return n;switch(typeof n){case"object":if(n instanceof Map){for(var t,a=new Map,c=r(n);!(t=c()).done;){var i=t.value,l=i[0],s=i[1];a.set(l,e(s,o-1))}return a}if(n instanceof Set){for(var u,f=new Set,d=r(n);!(u=d()).done;){var p=u.value;f.add(e(p,o-1))}return f}if(n instanceof Array){for(var v=Array(n.length),w=0;w<n.length;w++)v[w]=e(n[w],o-1);return v}for(var y={},b=0,g=Object.keys(n);b<g.length;b++){var h=g[b];y[h]=e(n[h],o-1)}return y;case"function":return void console.warn("deepClone warn: 不支持 function 类型对象的 deep clone");case"bigint":return void console.warn("deepClone warn: 不支持 bigint 类型的 deep clone");case"symbol":return void console.warn("deepClone warn: 不支持 symbol 类型的 deep clone");default:return n}})),n._RF.push({},"28b7brteHBNqoa/hujng6sJ","MKCopy",void 0),n._RF.pop()}}}));

System.register("chunks:///_virtual/MKCrypto.ts",["cc"],(function(t){var n;return{setters:[function(t){n=t.cclegacy}],execute:function(){n._RF.push({},"f595csmXmVE0rvoqreiOLSh","MKCrypto",void 0);var c=t("MKCrypto",function(){function t(){}var n=t.prototype;return n.aesEncrypt=function(t,n){},n.aesDecrypt=function(t,n){},n.aesEncryptV2=function(t,n){},n.aesDecryptV2=function(t,n){},t}());c.inst=new c,n._RF.pop()}}}));

System.register("chunks:///_virtual/MKDialog.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MK.ts","./Boot.ts","./MKUIBase.ts"],(function(t){var l,n,e,i,c,a,o,r,s;return{setters:[function(t){l=t.applyDecoratedDescriptor,n=t.inheritsLoose,e=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){c=t.cclegacy,a=t._decorator,o=t.Label},null,function(t){r=t.audio},function(t){s=t.MKUIBase}],execute:function(){var u,f,b,h,p,C,y,k,g,m,B;c._RF.push({},"40e77yOGa1DSYBNkMRzMnL9","MKDialog",void 0);var v=a.ccclass,M=a.property;t("MKDialog",(u=v("MKDialog"),f=M(o),b=M(o),h=M(o),p=M(o),u((k=l((y=function(t){function l(){for(var l,n=arguments.length,c=new Array(n),a=0;a<n;a++)c[a]=arguments[a];return l=t.call.apply(t,[this].concat(c))||this,e(l,"labContent",k,i(l)),e(l,"tittle",g,i(l)),e(l,"confirm",m,i(l)),e(l,"cancel",B,i(l)),l.confirmCallback=null,l.cancelCallback=null,l.closeCallback=null,l}n(l,t);var c=l.prototype;return c.init=function(t){t&&(t.content&&this.labContent&&(this.labContent.string=t.content),t.confirmBtnLabel&&this.confirm&&(this.confirm.string=t.confirmBtnLabel),t.cancelBtnLabel&&this.cancel&&(this.cancel.string=t.cancelBtnLabel),t.tittle&&this.tittle&&(this.tittle.string=t.tittle),t.title&&this.tittle&&(this.tittle.string=t.title),"function"==typeof t.confirmCallback&&(this.confirmCallback=t.confirmCallback),"function"==typeof t.cancelCallback&&(this.cancelCallback=t.cancelCallback),"function"==typeof t.closeCallback&&(this.closeCallback=t.closeCallback))},c.onBtnConfirm=function(){var t;r.playBtnEffect(),null==(t=this.confirmCallback)||t.call(this),this.closeSelf()},c.onBtnCancel=function(){var t;r.playBtnEffect(),null==(t=this.cancelCallback)||t.call(this),this.closeSelf()},c.onClickClose=function(){var t;r.playBtnEffect(),null==(t=this.closeCallback)||t.call(this),this.closeSelf()},c.closeSelf=function(){this.node.destroy()},l}(s)).prototype,"labContent",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=l(y.prototype,"tittle",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=l(y.prototype,"confirm",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=l(y.prototype,"cancel",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=y))||C));c._RF.pop()}}}));

System.register("chunks:///_virtual/MKEvent.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var n,t;return{setters:[function(e){n=e.createForOfIteratorHelperLoose},function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"5dc94hKCY9ESIB212vjws5X","MKEvent",void 0);var o=function(e,n){this.func=void 0,this.obj=void 0,this.func=e,this.obj=n},r=function(){function e(){this.eventGroup=new Map,this.eventCache=new Array,this.delayTime=0}return e.sendEvent=function(t){var o=e.ins.eventGroup;if(o.has(t)){for(var r=o.get(t),i=arguments.length,a=new Array(i>1?i-1:0),u=1;u<i;u++)a[u-1]=arguments[u];for(var v,c=n(r);!(v=c()).done;){var s,f=v.value;(s=f.func).call.apply(s,[f.obj].concat(a))}}},e.regEvent=function(t,r,i){var a=e.ins.eventGroup;if(a.has(t)){for(var u,v=a.get(t),c=!1,s=n(v);!(u=s()).done;){var f=u.value;if(f.func===r&&f.obj===i){c=!0;break}}c||v.push(new o(r,i))}else a.set(t,[new o(r,i)])},e.unRegEvent=function(n,t){"number"==typeof n?e.ins.eventGroup.forEach((function(o,r){if(r===n)for(var i=o.length-1;i>=0;i--){o[i].obj===t&&o.splice(i,1)}0==o.length&&e.ins.eventGroup.delete(n)})):e.ins.eventGroup.forEach((function(t,o){for(var r=t.length-1;r>=0;r--){t[r].obj===n&&t.splice(r,1)}0==t.length&&e.ins.eventGroup.delete(o)}))},e.update=function(n){var t=e.ins;t.eventCache.length>0&&(t.eventCache.forEach((function(n,t){e.sendEvent(n.type,n.data)})),t.eventCache.length=0)},e.setDelayTime=function(n){e.ins.delayTime<n&&(e.ins.delayTime=n)},e}();r.ins=new r;e("sendEvent",r.sendEvent),e("regEvent",r.regEvent),e("unRegEvent",r.unRegEvent);t._RF.pop()}}}));

System.register("chunks:///_virtual/MKHeartbeat.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"dea88CQ5+1IM5HIUNnA88+g","MKHeartbeat",void 0);t("MKHeartbeat",(function(){}));e._RF.pop()}}}));

System.register("chunks:///_virtual/MKHttp.ts",["cc","./MKLog.ts"],(function(t){var e,n,a;return{setters:[function(t){e=t.cclegacy},function(t){n=t.log,a=t.error}],execute:function(){e._RF.push({},"6bedaZ97OxAaaVtXj1U6euh","MKHttp",void 0);var o=0,r=1,c=2;t("MKHttp",function(){function t(){}return t.post=function(t,e){void 0===e&&(e=3);var u=new XMLHttpRequest;u.onreadystatechange=function(){if(4===u.readyState&&u.status>=200&&u.status<300){var e=u.responseText;n(e);var a=JSON.parse(e);t.callback(o,a)}},u.onerror=function(e){t.callback(r,{}),a(e)},u.ontimeout=function(e){t.callback(c,{}),a(e)},u.open("POST",t.url,!0),u.setRequestHeader("Content-type","application/json"),u.timeout=1e3*e;var s=JSON.stringify(t.param);n(t.url),n(s),u.send(s)},t.get=function(t,e){void 0===e&&(e=3);var u=new XMLHttpRequest;u.onreadystatechange=function(){if(4===u.readyState&&u.status>=200&&u.status<300){var e=u.responseText;n(e);var a=JSON.parse(e);t.callback(o,a)}},u.onerror=function(e){t.callback(r),a(e)},u.ontimeout=function(e){t.callback(c),a(e)},n(t.url),u.open("GET",t.url,!0),u.setRequestHeader("Content-type","application/json"),u.timeout=1e3*e,u.send()},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/MKLocalStorage.ts",["cc"],(function(e){var t,r;return{setters:[function(e){t=e.cclegacy,r=e.sys}],execute:function(){t._RF.push({},"49e5cxc/r9JJruz6sjZR3/s","MKLocalStorage",void 0);var n=function(){function e(){}return e.getItem=function(e,t){void 0===t&&(t=void 0);var n=r.localStorage.getItem(e);if(n)try{return JSON.parse(n)}catch(e){}return t},e.setItem=function(e,t){if(null!=e&&null!=t&&null!=e&&null!=t){var n=JSON.stringify(t);r.localStorage.setItem(e,n)}},e.removeItem=function(e){r.localStorage.removeItem(e)},e}();e("setItem",n.setItem),e("getItem",n.getItem),e("removeItem",n.removeItem);t._RF.pop()}}}));

System.register("chunks:///_virtual/MKLog.ts",["cc"],(function(n){var t;return{setters:[function(n){t=n.cclegacy}],execute:function(){t._RF.push({},"3b86bre18tD97GONWDv5+tU","MKLog",void 0);var o=function(){function n(){}return n.logD=function(){},n.logW=function(){},n.logE=function(){},n.trace=function(){},n.now=function(){},n.padZero=function(n){},n.getCallStack=function(n){return""},n}();n("log",o.logD),n("warn",o.logW),n("error",o.logE),n("trace",o.trace);t._RF.pop()}}}));

System.register("chunks:///_virtual/MKNodeBind.ts",["cc","./MKLog.ts"],(function(n){var e,t,o,r,i,c,a,s;return{setters:[function(n){e=n.cclegacy,t=n.js,o=n.Component,r=n.find,i=n.Node,c=n.Button,a=n.EventHandler},function(n){s=n.error}],execute:function(){n({eventBind:function(n){return function(e,t){f(e,u).push([t,n])}},nodeBind:function(n){return function(e,t){f(e,d).push([t,n])}},parseNode:function(n){var e=t.getClassName(n),o=t.getClassByName(e);v(n,o)}}),e._RF.push({},"0d9d0c7eaNL+ppo+nKJOztB","MKNodeBind",void 0);var d=n("kNodeBind","__NODE_BIND__"),u=n("kEventBind","__EVENT_BIND__");function f(n,e){return n.constructor.hasOwnProperty(e)||(n.constructor[e]=[]),n.constructor[e]}function v(n,e){if(e!=o){var f=t.getClassName(n),p=t.getSuper(e);p!=o&&v(n,p);var l=e[d];if("[object Array]"===Object.prototype.toString.call(l))for(var g=0;g<l.length;g++){var B=l[g],N=B[0],m=B[1],_=n[N],h=t.getClassName(_),y=r(m,n.node);if(y)if(h==t.getClassName(i))n[N]=y;else{var C=y.getComponent(h);if(!C){s("nodeBind comp not exist",h);continue}n[N]=C}else s("nodeBind node not find",m)}var E=e[u];if("[object Array]"===Object.prototype.toString.call(E))for(var b=0;b<E.length;b++){var j=E[b],O=j[0],k=j[1],D=r(k,n.node);if(D){var K=D.getComponent(c);if(K){var S=new a;S.target=n.node,S.component=f,S.handler=O,S.customEventData="",K.clickEvents.push(S)}else s("eventBind button comp not exist",k)}else s("eventBind node not find",k)}}}e._RF.pop()}}}));

System.register("chunks:///_virtual/MKProgress.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MK.ts","./MKNodeBind.ts","./MKUIBase.ts"],(function(e){var t,n,r,o,i,s,a,c,l,u,d;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,r=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){i=e.cclegacy,s=e._decorator,a=e.tween,c=e.Label},null,function(e){l=e.parseNode,u=e.nodeBind},function(e){d=e.MKUIBase}],execute:function(){var p,f,h,g,y;i._RF.push({},"d91acpCB29DIbMZv8X4NLhm","MKProgress",void 0);var M=s.ccclass;s.property,e("MKProgress",(p=M("MKProgress"),f=u("txtProgress"),p((y=t((g=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return t=e.call.apply(e,[this].concat(i))||this,r(t,"desLabel",y,o(t)),t.param=null,t}n(t,e);var i=t.prototype;return i.onLoad=function(){l(this)},i.onClose=function(){this.node.destroy()},i.init=function(e){this.param=e,this.desLabel.string=e.content||"首次加载较慢，请稍候片刻~",this.timerClose(e)},i.timerClose=function(e){var t=this;e.duration&&a(this.node).delay(e.duration).call((function(){t.onClose()})).start()},t}(d)).prototype,"desLabel",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new c}}),h=g))||h));i._RF.pop()}}}));

System.register("chunks:///_virtual/MKPrototype.ts",["cc"],(function(){var t;return{setters:[function(r){t=r.cclegacy}],execute:function(){t._RF.push({},"cdf26UIvAxO2bFvQNR48oAo","MKPrototype",void 0),String.prototype.format=function(){for(var t=this,r=0;r<arguments.length;r++){var e=new RegExp("\\{"+r+"\\}","gm");t=t.replace(e,r<0||arguments.length<=r?void 0:arguments[r])}return t.toString()},Array.prototype.removeIndex=function(t){return!(isNaN(t)||t>=this.length||t<0)&&(this.splice(t,1),this)},Array.prototype.removeObject=function(t){var r=this.indexOf(t);return!(isNaN(r)||r>=this.length||r<0)&&(this.splice(r,1),this)},Array.prototype.randomObject=function(){if(0!==this.length)return this[Math.floor(Math.random()*this.length)]},Array.prototype.lastObject=function(){return this[this.length-1]},String.prototype.formatSafe=function(){if(arguments.length<=0)return this;var t=this,r=arguments,e=t.replace(/(?:[^{]|^|\b|)(?:{{)*(?:{(\d+)}){1}(?:}})*(?=[^}]|$|\b)/g,(function(t,e){return e=parseInt(e),void 0!==r[e]?t.replace(/{\d+}/g,r[e]):t}));return e.replace(/{{/g,"{").replace(/}}/g,"}")},t._RF.pop()}}}));

System.register("chunks:///_virtual/MKResCtr.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(n){var e,t,l,u,o,r,i,s,a,d;return{setters:[function(n){e=n.inheritsLoose},function(n){t=n.cclegacy,l=n.resources,u=n.Prefab,o=n.assetManager,r=n.js,i=n.Asset,s=n.find,a=n.instantiate,d=n.director}],execute:function(){t._RF.push({},"6a898obyLJP0bF3KMbpaT9T","MKResCtr",void 0);var c=n("MKResCtr",function(){function n(){}return n._getBundle=function(){return l},n.loadPrefab=function(e,t,l){if(null==l&&null==t)return new Promise((function(t,l){n.load(e.bundle,e.path,u,(function(n,e){t(n?null:e)}))}));null==l?n.load(e.bundle,e.path,t):n.load(e.bundle,e.path,t,l)},n.load=function(n,e,t,l,u){var o=null;"string"==typeof e||e instanceof Array?(o=this.parseResArgs(e,t,l,u)).bundle=n:o=this.parseResArgs(n,e,t,l),this.loadAssetByArgs(o)},n.loadDir=function(n,e,t,l,u){var o=null;"string"==typeof e?(o=this.parseResArgs(e,t,l,u)).bundle=n:o=this.parseResArgs(n,e,t,l),o.dir=o.paths,this.loadAssetByArgs(o)},n.loadRemote=function(n,e,t){o.loadRemote(n,e,t)},n.parseResArgs=function(n,e,t,l){var u=n,o=e,s=t,a=l;if(void 0===l){var d=r.isChildClassOf(e,i);t?(a=t,d&&(s=null)):void 0!==t||d||(a=e,s=null,o=null),void 0===t||d||(s=e,o=null)}return{paths:u,type:o,onProgress:s,onComplete:function(n,e,t){a&&a(n,e,t)}}},n.loadAssetByArgs=function(n){if(n.bundle){var e=o.getBundle(n.bundle);e?this.loadByBundleAndArgs(e,n):console.error("无bundle 请先加载",n.bundle)}else this.loadByBundleAndArgs(l,n)},n.loadByBundleAndArgs=function(n,e){e.dir?n.loadDir(e.paths,e.type,e.onProgress,e.onComplete):(e.paths,n.load(e.paths,e.type,e.onProgress,e.onComplete))},n.loadSubGamePrefab=function(n,e,t){f.loadPrefabNew(n,e).then((function(n){null==t||t(null,n)})).catch((function(){null==t||t(null,null)}))},n.loadSubSpriteFrame=function(n,e){return f.loadSpriteFrame(n,e)},n.loadBundle=function(n){var e=this;return new Promise((function(t,l){var u,r;"string"==typeof n?(r=n,u={}):r=(u=n).bundleName,o.loadBundle(r,u,(function(n,o){if(n)l(n);else{if(!u.keepSub&&u.bundleName){var r=u.bundleName.split("/");e.bundleName=r[r.length-1]}t(o)}}))}))},n.releaseBundle=function(n){var e;n=null!=(e=n)?e:this.bundleName;var t=o.getBundle(n);t&&(t.releaseAll(),o.removeBundle(t),this.bundleName=null)},n.loadBundleRes=function(n,e){var t=this;return void 0===n&&(n=["res/"]),new Promise((function(l,u){var o,r=t._getBundle();if(null!=r){var i=[];null==(o=n)||o.forEach((function(n){i=i.concat(r.getDirWithPath(n).map((function(n){return n.path})))}));for(var s=i.length,a=[],d=function(t){a.push(new Promise((function(l,u){r.loadDir(n[t],(function(n,t,l){var u=-1;l.info&&(u=i.indexOf(l.info.path,0)),u>-1&&i.splice(u,1),null==e||e(s-i.length,s)}),(function(n,e){null==n?l():u()}))})))},c=0;c<n.length;c++)d(c);Promise.all(a).then((function(){l()})).catch((function(){u()}))}else u()}))},n.preloadBundleRes=function(n){if(null!=n){var e=this._getBundle();if(null!=e)for(var t=0;t<n.length;t++)e.preloadDir(n[t])}},n.loadPrefabNew=function(n,e){var t=this;return new Promise((function(l,u){t.loadAsset(n).then((function(n){var t;null==e&&(e=s("Canvas"));var u=a(n);null==(t=e)||t.addChild(u),l(u)})).catch(u)}))},n.loadAsset=function(n,e){var t=this;return new Promise((function(l,u){var o;null==e?o=t._getBundle():t.loadBundle(e).then((function(e){t._loadAsset(n,e).then((function(n){l(n)})).catch(u)})).catch((function(){u()})),null!=o?t._loadAsset(n,o).then((function(n){l(n)})).catch(u):u()}))},n._loadAsset=function(n,e){return new Promise((function(t,l){e.load(n,(function(n,e){n?l():t(e)}))}))},n.loadTextAsset=function(n,e){return this.loadAsset(n,e)},n.loadSpriteFrame=function(n,e){return this.loadAsset(n+"/spriteFrame",e)},n.loadAudio=function(n,e){return this.loadAsset(n,e)},n.loadScene=function(n){var e=this;return new Promise((function(t,l){var u=e._getBundle();null!=u?u.loadScene(n,(function(n,e){n?l():(d.runScene(e),t())})):l()}))},n.gotoScene=function(n){var e=this;return new Promise((function(t,l){var u=e._getBundle();null!=u?u.loadScene(n,(function(n,e){n?l():d.runScene(e,(function(){}),(function(){t()}))})):l()}))},n.loadConfigAsset=function(n,e){this.loadTextAsset(n).then((function(n){var e=n.text.split("\n").map((function(n){return n.split("\t")}));return e.shift(),e}))},n.loadJsonConfig=function(n,e){return void 0===e&&(e="block"),this.loadAssetSync(n,e).json},n.loadTextConfig=function(n,e){return this.loadAssetSync(n,e).text},n.loadAssetSync=function(n,e){var t,l=null==(t=null==e?this._getBundle():o.getBundle(e))?void 0:t.getInfoWithPath(n);return null==l||null==l.uuid?null:o.assets.get(l.uuid)},n}());c.bundleName="block",c.AesKey="tIUHSA1cDlMQpPT5dQM0BQ3srNBbriekKUlBrFCLpKCp6y0h8TEXjQpGsyn+hVo9";var f=n("MKSubResCtr",function(n){function t(){return n.apply(this,arguments)||this}return e(t,n),t._getBundle=function(){return o.getBundle(this.bundleName)},t}(c));t._RF.pop()}}}));

System.register("chunks:///_virtual/MKSocket.ts",["cc"],(function(e){var n;return{setters:[function(e){n=e.cclegacy}],execute:function(){n._RF.push({},"633a6/n2BJGrZxLJZbw2iq+","MKSocket",void 0);e("NetStat",function(e){return e[e.None=1]="None",e[e.Connecting=2]="Connecting",e[e.Connected=3]="Connected",e[e.Colosed=4]="Colosed",e}({})),e("SocketEvent",{ON_CONNECTED:"on_connected",ON_CLOSE:"on_close",ON_MESSAGE:"on_message",ON_ERROR:"on_error"}),e("MKSocket",(function(){}));n._RF.pop()}}}));

System.register("chunks:///_virtual/MKTips.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MK.ts","./MKNodeBind.ts","./MKUIBase.ts"],(function(t){var n,e,i,o,r,a,s,c,l,u,p,d,b,f;return{setters:[function(t){n=t.applyDecoratedDescriptor,e=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,a=t._decorator,s=t.js,c=t.UITransform,l=t.tween,u=t.Node,p=t.Label},null,function(t){d=t.parseNode,b=t.nodeBind},function(t){f=t.MKUIBase}],execute:function(){var y,h,g,m,v,M,w;r._RF.push({},"b5ce4pCB8pND6ygjZtry2YL","MKTips",void 0);var C=a.ccclass;a.property,t("MKTips",(y=C("MKTips"),h=b("main/bg"),g=b("main/labContent"),y((M=n((v=function(t){function n(){for(var n,e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];return n=t.call.apply(t,[this].concat(r))||this,i(n,"bg",M,o(n)),i(n,"labContent",w,o(n)),n}e(n,t);var r=n.prototype;return r.init=function(t){var n=this;this.labContent.string=t.content,s.isNumber(t.y)&&(this.node.getPosition().y=t.y),this.scheduleOnce((function(){var t=n.labContent.node.getComponent(c).width;n.bg.getComponent(c).width=60+t+60}),1/60);var e=s.isNumber(t.duration)?t.duration:2;l(this.node).delay(e).call((function(){n.node.destroy()})).start()},r.onLoad=function(){d(this)},n}(f)).prototype,"bg",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new u}}),w=n(v.prototype,"labContent",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new p}}),m=v))||m));r._RF.pop()}}}));

System.register("chunks:///_virtual/MKUIBase.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MKNodeBind.ts"],(function(n){var i,t,o,e,a,c,r,l,s,u,p,f,d,h,v;return{setters:[function(n){i=n.applyDecoratedDescriptor,t=n.inheritsLoose,o=n.initializerDefineProperty,e=n.assertThisInitialized},function(n){a=n.cclegacy,c=n._decorator,r=n.v3,l=n.UIOpacity,s=n.tween,u=n.Vec3,p=n.Node,f=n.BlockInputEvents,d=n.UITransform,h=n.Component},function(n){v=n.nodeBind}],execute:function(){var b,m,y,k,w;a._RF.push({},"bab50h6B0ND56UA/2MM0qeb","MKUIBase",void 0);var C=c.ccclass;c.property,n("MKUIBase",(b=C("MKUIBase"),m=v("main"),b((w=i((k=function(n){function i(){for(var i,t=arguments.length,a=new Array(t),c=0;c<t;c++)a[c]=arguments[c];return i=n.call.apply(n,[this].concat(a))||this,o(i,"main",w,e(i)),i.animDuration=.3,i.blocker=null,i.options=null,i.finishCallback=null,i}t(i,n);var a=i.prototype;return a.showView=function(n){this.init(n)},a.showPopup=function(n,i){var t=this;return void 0===i&&(i=this.animDuration),new Promise((function(o){t.options=n;var e=t.main;t.node.active=!0,e.active=!0,e.scale=r(.5,.5,.5);var a=e.getComponent(l);a.opacity=0,t.init(t.options),t.updateDisplay(t.options),s(e).to(i,{scale:u.ONE},{easing:"backOut",onUpdate:function(n,i){a.opacity=255}}).call((function(){null==t.onShow||t.onShow(),o()})).start()}))},a.hide=function(n,i){var t=this;return void 0===n&&(n=!1),void 0===i&&(i=this.animDuration),new Promise((function(o){var e=t.node;if(0!==i){var a=t.blocker;if(!a)(a=t.blocker=new p("blocker")).addComponent(f),a.setParent(e),a.addComponent(d).contentSize=e.getComponent(d).contentSize;a.active=!0}var c=t.main.getComponent(l),u=c.opacity;s(t.main).to(i,{scale:r(.5,.5,.5)},{easing:"backIn",onUpdate:function(n,i){c.opacity=(1-i)*u}}).call((function(){t.blocker&&(t.blocker.active=!1),e.active=!1,null==t.onHide||t.onHide(n),o(),null==t.finishCallback||t.finishCallback(n)})).start()}))},a.init=function(n){},a.updateDisplay=function(n){},a.onShow=function(){},a.onHide=function(n){},a.setFinishCallback=function(n){this.finishCallback=n},i}(h)).prototype,"main",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new p}}),y=k))||y));a._RF.pop()}}}));

System.register("chunks:///_virtual/MKUICfg.ts",["cc"],(function(a){var l;return{setters:[function(a){l=a.cclegacy}],execute:function(){l._RF.push({},"f3a6d3/sM5DO73OOlG2kfvv","MKUICfg",void 0);a("MKUIConfig",{prefab:{tips:{path:"view/prefab/common/tips",component:"MKTips"},progress:{path:"view/prefab/common/progress",component:"MKProgress"},dialog:{path:"view/prefab/common/windowTip",component:"MKDialog"},hallPage1:{path:"hall/prefab/hall_page1",component:"HallPage1"},hallPage2:{path:"hall/prefab/hall_page2",component:"HallPage2"},hallPage3:{path:"hall/prefab/hall_page3",component:"HallPage3"},hallPage4:{path:"hall/prefab/hall_page4",component:"HallPage4"},page1Cell:{path:"hall/prefab/page1_cell",component:"Page1Cell"},page2Cell:{path:"hall/prefab/page2_cell",component:"Page2Cell"},page3Cell:{path:"hall/prefab/page3_cell",component:"Page3Cell"},hallJbs:{path:"hall/prefab/hall_jbs",component:"HallJbs"},hallGameOver:{path:"hall/prefab/hall_gameover",component:"HallGameOver"},hallMatchList:{path:"hall/prefab/hall_matchlist",component:"HallMatchList"},hallMatchCell:{path:"hall/prefab/hall_match_cell",component:"HallMatchCell"},hallPipei:{path:"hall/prefab/hall_papei",component:"HallPipei"},hallDuanwei:{path:"hall/prefab/hall_duanwei",component:"HallDuanwei"},menuLayer:{path:"2048/prefab/menuLayer"}}});l._RF.pop()}}}));

System.register("chunks:///_virtual/MKUICtr.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MacroDefine.ts","./MKResCtr.ts","./MKUICfg.ts","./MKUIBase.ts"],(function(e){var n,r,t,a,u,o,s,c,i,l,p,f,d;return{setters:[function(e){n=e.createClass,r=e.asyncToGenerator,t=e.regeneratorRuntime},function(e){a=e.cclegacy,u=e.find,o=e.isValid,s=e.instantiate,c=e.warn,i=e.UITransform},function(e){l=e.MAX_ZINDEX},function(e){p=e.MKResCtr},function(e){f=e.MKUIConfig},function(e){d=e.MKUIBase}],execute:function(){a._RF.push({},"f57a6tgipJBep7z4h48cB/n","MKUICtr",void 0);var h=e("CacheMode",function(e){return e[e.Once=1]="Once",e[e.Normal=2]="Normal",e[e.Frequent=3]="Frequent",e}({})),m=function(){function e(){}return e.showPgs=function(n,r){var t,a=u("Presist/MKProgress");return r=null!=(t=r)?t:f.prefab.progress,e._show(r,a,n)},e.showTips=function(n,r){var t,a=u("Presist/MKTips");return r=null!=(t=r)?t:f.prefab.tips,e._show(r,a,n)},e.showView=function(n,r,t){return e._show(n,r,t)},e.showPopup=function(n,a,p){return new Promise(r(t().mark((function f(h){var m,_,C,b,w,k;return t().wrap((function(f){for(;;)switch(f.prev=f.next){case 0:if(p=e.parseParams(p),!e._current&&!e.locked){f.next=11;break}if(!p||!p.immediately){f.next=8;break}return e.locked=!1,f.next=6,e.suspend();case 6:f.next=11;break;case 8:return e.push(n,a,p),h(null),f.abrupt("return");case 11:if(e._current={cfg:n,options:a,params:p},m=e.getNodeFromCache(n.path),o(m)){f.next=25;break}return null==e.loadStartCallback||e.loadStartCallback(),f.next=17,e.load(n);case 17:if(_=f.sent,null==e.loadFinishCallback||e.loadFinishCallback(),o(_)){f.next=24;break}return c("MKUICtr","加载失败 "+n.path),e._current=null,h(null),f.abrupt("return");case 24:m=s(_);case 25:if(n.component&&null==m.components.find((function(e){return e.name===n.component}))&&m.addComponent(n.component),C=m.getComponent(d)){f.next=32;break}return c("MKUICtr","未找到组件 "+n.path),e._current=null,h(null),f.abrupt("return");case 32:b=u("Canvas"),w=b.getComponent(i),e._current.UI=C,e._current.node=m,m.setParent(e.container||b),m.setSiblingIndex(l),k=function(){var a=r(t().mark((function r(a){return t().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!a){r.next=2;break}return r.abrupt("return");case 2:return e.locked=e._suspended.length>0||e._queue.length>0,e.recycle(n.path,m,p.mode),e._current=null,h(m),r.next=8,new Promise((function(n){return w.scheduleOnce(n,e.interval)}));case 8:e.next();case 9:case"end":return r.stop()}}),r)})));return function(e){return a.apply(this,arguments)}}(),C.setFinishCallback(k),C.showPopup(a);case 41:case"end":return f.stop()}}),f)}))))},e.hide=function(){e._current.UI&&e._current.UI.hide()},e.getNodeFromCache=function(n){var r=e._nodeCache;if(r.has(n)){var t=r.get(n);if(o(t))return t;r.delete(n)}var a=e._prefabCache;if(a.has(n)){var u=a.get(n);if(o(u))return s(u);a.delete(n)}return null},e.next=function(){if(!(e._current||0===e._suspended.length&&0===e._queue.length)){var n=null;if(n=e._suspended.length>0?e._suspended.shift():e._queue.shift(),e.locked=!1,o(n.UI))return e._current=n,void n.UI.showPopup(n.options);e.showPopup(n.cfg,n.options,n.params)}},e.push=function(n,r,t){e._current||e.locked?(e._queue.push({cfg:n,options:r,params:t}),e._queue.sort((function(e,n){return n.params.priority-e.params.priority}))):e.showPopup(n,r,t)},e.suspend=function(){var n=r(t().mark((function n(){var r;return t().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e._current){n.next=2;break}return n.abrupt("return");case 2:return r=e._current,e._suspended.push(r),n.next=6,r.UI.hide(!0);case 6:e._current=null;case 7:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),e.recycle=function(n,r,t){switch(t){case h.Once:r.destroy(),e._nodeCache.delete(n),e.release(n);break;case h.Normal:r.destroy(),e._nodeCache.delete(n);break;case h.Frequent:r.removeFromParent(),e._nodeCache.set(n,r)}},e._show=function(n,a,i){return new Promise(r(t().mark((function r(l){var p,f,h;return t().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(p=e.getNodeFromCache(n.path),o(p)){r.next=11;break}return r.next=4,e.load(n,!1);case 4:if(f=r.sent,o(f)){r.next=10;break}return c("MKUICtr","加载失败 "+n.path),e._current=null,l(null),r.abrupt("return");case 10:p=s(f);case 11:if(a&&o(a)){r.next=16;break}if((a=u("Canvas"))&&o(a)){r.next=16;break}return l(null),r.abrupt("return");case 16:a.addChild(p),n.component&&null==p.components.find((function(e){return e.name===n.component}))&&p.addComponent(n.component),null==(h=p.getComponent(d))||h.showView(i),l(p);case 21:case"end":return r.stop()}}),r)}))))},e.load=function(n,a){return void 0===a&&(a=!0),new Promise(r(t().mark((function r(u){var s,c,i;return t().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(s=e._prefabCache).has(n.path)){r.next=6;break}if(c=s.get(n.path),!o(c)){r.next=6;break}return u(c),r.abrupt("return");case 6:return r.next=8,p.loadPrefab(n);case 8:i=r.sent,a&&(s.set(n.path,i),i.addRef()),u(i);case 11:case"end":return r.stop()}}),r)}))))},e.release=function(n){var r=e._nodeCache,t=r.get(n);t&&(r.delete(n),o(t)&&t.destroy(),t=null);var a=e._prefabCache,u=a.get(n);u&&(a.delete(n),u.decRef(),u=null)},e.parseParams=function(e){return null==e?new _:"[object Object]"!==Object.prototype.toString.call(e)?(c("MKUICtr","参数无效，使用默认参数"),new _):(null==e.mode&&(e.mode=h.Normal),null==e.priority&&(e.priority=0),null==e.immediately&&(e.immediately=!1),e)},n(e,null,[{key:"prefabCache",get:function(){return e._prefabCache}},{key:"nodeCache",get:function(){return e._nodeCache}},{key:"current",get:function(){return e._current}},{key:"queue",get:function(){return e._queue}},{key:"suspended",get:function(){return e._suspended}},{key:"CacheMode",get:function(){return h}}]),e}();m._prefabCache=new Map,m._nodeCache=new Map,m._current=null,m._queue=[],m._suspended=[],m.locked=!1,m.container=null,m.interval=.05,m.loadStartCallback=null,m.loadFinishCallback=null;var _=e("MKUIParams",(function(){this.mode=h.Normal,this.priority=0,this.immediately=!1}));e("showView",m.showView),e("showPopup",m.showPopup),e("showTips",m.showTips),e("showPgs",m.showPgs),e("DialogType",function(e){return e[e.COMMON=0]="COMMON",e[e.EXIT=1]="EXIT",e}({}));a._RF.pop()}}}));

System.register("chunks:///_virtual/MKUtil.ts",["cc","./MKLocalStorage.ts"],(function(t){var e,n,r,a;return{setters:[function(t){e=t.cclegacy,n=t.Button},function(t){r=t.getItem,a=t.setItem}],execute:function(){e._RF.push({},"dc902OitNhPcoYtjtQVAVM7","MKUtil",void 0);t("MKUtil",function(){function t(){}return t.distance=function(t,e){return Math.sqrt((t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y))},t.degree=function(t,e){var n=Math.asin(this.getSine(t,e));return n=180*n/3.1415,e.x>t.x&&e.y>t.y&&(n=180-n),e.x>t.x&&e.y<t.y&&(n=180+Math.abs(n)),Math.abs(e.y-t.y)<=1&&e.x>t.x&&(n=180),n},t.getSine=function(t,e){var n=this.distance(t,e);return(e.y-t.y)/n},t.gameHttpUrl=function(t){var e;switch(t){case 0:e="116-hwcxft6fz-app-test01.qijihdhk.com";break;case 1:e="app-yuanzuxiang-dev.tugameworld.com";break;case 2:e="121-block-app-online01.blockmasterbraingames.com"}return e},t.getGameURL=function(t){var e;switch(t){case 0:e="116-hwcxft6fz-wss-test01.qijihdhk.com";break;case 1:e="app-yuanzuxiang-dev.tugameworld.com";break;case 2:e="121-block-wss-online01.blockmasterbraingames.com"}return e},t.getSDKURL=function(){return"https://"+this.gameHttpUrl(0)+"/api/arc8/hello"},t.getWSURL=function(){return"wss://"+this.getGameURL(0)},t.findCharPos=function(t,e,n){for(var r=t.indexOf(e),a=r,i=0;i<n;i++){if(-1==(r=t.indexOf(e,r+1)))return a;a=r}return a},t.generateUUID=function(){var t=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var n=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"==e?n:3&n|8).toString(16)}))},t.deviceId=function(){var t=r("k_deviceId","");return""==t&&(t=this.generateUUID(),a("k_deviceId",t)),t},t.localUserId=function(){var t=r("k_localUserId","");return(""==t||t.length>10)&&(t=parseInt((.001*Date.now()).toString()).toString(),a("k_localUserId",t)),t},t.invalidateButtonTemporarily=function(t,e){t instanceof n&&t.interactable&&(e=e||.5,t.interactable=!1,t.scheduleOnce((function(){t.interactable=!0}),e))},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/ModallessBase.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PanelBaseNoMask.ts"],(function(e){var s,t,o,n;return{setters:[function(e){s=e.inheritsLoose},function(e){t=e.cclegacy,o=e._decorator},function(e){n=e.default}],execute:function(){var r;t._RF.push({},"434bfeEqoxKz4ONwcKefz4D","ModallessBase",void 0);var a=o.ccclass;o.property,e("ModallessBase",a(r=function(e){function t(){return e.apply(this,arguments)||this}return s(t,e),t}(n))||r);t._RF.pop()}}}));

System.register("chunks:///_virtual/ModelManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Manager.ts","./enum.ts","./helper.ts"],(function(e){var t,n,i,o,r,a,s,l,c,h,d,u;return{setters:[function(e){t=e.inheritsLoose,n=e.createClass,i=e.asyncToGenerator,o=e.regeneratorRuntime},function(e){r=e.cclegacy,a=e._decorator,s=e.Node,l=e.UITransform},function(e){c=e.Manager},function(e){h=e.WrapMode,d=e.Layer},function(e){u=e.Helper}],execute:function(){var f,_;r._RF.push({},"18c36plR9VHHbXIt40bKQ+w","ModelManager",void 0);var p=a.ccclass,y=(a.property,function(e){return e[e.ON_CLEAR=0]="ON_CLEAR",e[e.ON_INSERT=1]="ON_INSERT",e[e.ON_REMOVE=2]="ON_REMOVE",e[e.ON_MOVE=3]="ON_MOVE",e[e.ON_UPDATE=4]="ON_UPDATE",e[e.ON_CHANGE_BEFORE=5]="ON_CHANGE_BEFORE",e}(y||{}));e("ModelManager",p("ModelManager")(((_=function(e){function r(){for(var t,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(t=e.call.apply(e,[this].concat(i))||this)._modelList=[],t._length=0,t}t(r,e);var a=r.prototype;return a.onInit=function(){},a.insert=function(){var e=i(o().mark((function e(t,n){var i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:void 0===n&&(n=this.length),i=this._toArray(t),n=u.clamp(n,0,this.length),this.emit(y.ON_CHANGE_BEFORE),this._insertHandler(i,n),this._length=this._modelList.length,i.length>0&&this.emit(y.ON_INSERT,n);case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),a._insertHandler=function(e,t){var n=this,i=t;this._length=this._modelList.length;for(var o=[],r=function(e,t){return(u=n._getNewModel(e)).index=t,n._modelList.push(u),u},a=function(e){var t=n.get(i);if(t)o.push(n._copyModel(t,{})),t.data=e,t.index=i,n._initModel(t);else{var a=r(e,i);n._initModel(a)}i++},s=0,l=e.length;s<l;s++)a(e[s]);for(var c=0;c<o.length;c++){var h=o[c],d=i+c;if(this.get(d)){var u=this.get(d);o.push(this._copyModel(u,{})),this._copyModel(h,u)}else{var f=r(h.data,d);this._copyModel(h,f)}}},a.remove=function(e,t){if(void 0===t&&(t=1),0!=t&&!(e<0||e>=this.length)){var n=this.length;this.emit(y.ON_CHANGE_BEFORE);for(var i=e;i<this.length;i++){var o=this.get(i),r=this.get(i+t);if(!r){n=i;break}this._copyModel(r,o),o.index=i}this._modelList.splice(n,this.length),this._length=this._modelList.length,this.emit(y.ON_REMOVE,e)}},a.move=function(e,t,n){var i=this;if(!(e<0||t<=0)){this.emit(y.ON_CHANGE_BEFORE);var o=this._modelList.map((function(e){return i._copyModel(e,{})})),r=o.splice(e,t);o.splice.apply(o,[n,0].concat(r));for(var a=0;a<o.length;a++)this._copyModel(o[a],this._modelList[a]);var s=Math.min(e,n);this.emit(y.ON_MOVE,s)}},a.update=function(){this.emit(y.ON_UPDATE)},a.clear=function(){this._modelList.length=0,this._length=0,this.emit(y.ON_CLEAR)},a.has=function(e){return!!this._modelList[e]},a.get=function(e){return isNaN(e)?null:this._modelList[e]},a.slice=function(e,t){return 0==this.length?[]:this._modelList.slice(e,t)},a._toArray=function(e){return e?e instanceof Array?e:[e]:[]},a._getNewModel=function(e){return{data:e,index:-1,code:null,size:{x:0,y:0},layoutSize:{x:0,y:0},scale:{x:0,y:0},position:{x:0,y:0},anchorPoint:{x:0,y:0},element:{wrapBeforeMode:h.Wrap,wrapAfterMode:h.Nowrap,ignoreLayout:!1,placeholder:!1,minSize:{x:0,y:0},preferredSize:{x:0,y:0},flexibleSize:{x:0,y:0},layer:d.Lowest,fixed:!1,fixedOffset:0,fixedSpacing:null,update:function(){}},isValid:!0,update:function(){}}},a._initModel=function(e){var t=this.adapter.getPrefab(e.data);if(!t)throw Error("预制体不能为空");if(t instanceof s){var n=t.getComponent(l);e.code=t.uuid,e.size={x:n.width,y:n.height},e.scale={x:n.node.scale.x,y:n.node.scale.y},e.anchorPoint={x:n.anchorPoint.x,y:n.anchorPoint.y}}else{var i=t.data.getComponent(l);e.code=t.data._prefab.fileId,e.size={x:i.width,y:i.height},e.scale={x:i.node.scale.x,y:i.node.scale.y},e.anchorPoint={x:i.anchorPoint.x,y:i.anchorPoint.y}}e.layoutSize={x:0,y:0},e.position={x:0,y:0},e.element={wrapBeforeMode:h.Wrap,wrapAfterMode:h.Nowrap,ignoreLayout:!1,placeholder:!1,minSize:{x:0,y:0},preferredSize:{x:0,y:0},flexibleSize:{x:0,y:0},layer:d.Lowest,fixed:!1,fixedOffset:0,fixedSpacing:null,update:function(){}},this.adapter.initElement(e.element,e.data)},a._copyModel=function(e,t){e.element.update=function(){};return function e(t,n){for(var i in t){var o=t[i];"data"!=i?"index"!=i&&(null!=o&&"object"==typeof o?(n[i]={},e(o,n[i])):n[i]=o):n[i]=o}}(e,t),t},n(r,[{key:"length",get:function(){return this._length}},{key:"modelList",get:function(){return this._modelList}}]),r}(c)).Event=y,f=_))||f);r._RF.pop()}}}));

System.register("chunks:///_virtual/MsgData.ts",["cc"],(function(e){var n;return{setters:[function(e){n=e.cclegacy}],execute:function(){n._RF.push({},"73058YMWh1ODZv7f4PkMcYO","MsgData",void 0);e("MsgData",{Login:undefined,Lobby:undefined,LobbyTask:undefined,MatchList:undefined,PastActivity:undefined,PastActivityState:undefined,GetSeason:undefined,GetRanking:undefined,UserInfo:undefined,SignUp:undefined,SignOut:undefined,GameStart:undefined,GameResult:undefined});n._RF.pop()}}}));

System.register("chunks:///_virtual/MsgType.ts",["cc"],(function(e){var a;return{setters:[function(e){a=e.cclegacy}],execute:function(){a._RF.push({},"276dftSi/xNboXBy/TAitys","MsgType",void 0);e("MsgType",{HEARTBEAT:"game/heartbeat",LOGIN:"login",BIND_USER:"bindUser6",LOBBY:"lobby",MATCH_LIST:"matchList",GAME_SIGN_UP:"game/signUp",GAME_SIGN_OUT:"game/signOut",GAME_JOIN:"game/join",GAME_AWAY:"game/away",GAME_Leave:"game/leave",GAME_START:"game/start",GAME_RESULT:"game/result",GAME_OUT:"game/out",GAME_BROADCAST:"game/broadcast",GAME_QUIT:"game/quit",GAME_BOMB_INFO:"game/bombInfo",GAME_ATTACK:"game/attack",GAME_ATTENTION:"game/attention"});a._RF.pop()}}}));

System.register("chunks:///_virtual/MutilLineScore.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BlockConstData.ts"],(function(e){var o,t,r,n,c,i,l,s,a,u,b;return{setters:[function(e){o=e.applyDecoratedDescriptor,t=e.inheritsLoose,r=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){c=e.cclegacy,i=e._decorator,l=e.Label,s=e.Node,a=e.Sprite,u=e.Component},function(e){b=e.BlockConstData}],execute:function(){var p,f,h,m,_,g,d,v,y;c._RF.push({},"42dbapTZqpAcoVn2veaxvyU","MutilLineScore",void 0);var S=i.ccclass,C=i.property;e("MutilLineScore",(p=S("MutilLineScore"),f=C(l),h=C(s),m=C(a),p((d=o((g=function(e){function o(){for(var o,t=arguments.length,c=new Array(t),i=0;i<t;i++)c[i]=arguments[i];return o=e.call.apply(e,[this].concat(c))||this,r(o,"combo_score",d,n(o)),r(o,"combo_desc",v,n(o)),r(o,"font_bg",y,n(o)),o.clearCnt=0,o}t(o,e);var c=o.prototype;return c.start=function(){},c.getComboPosFixNode=function(){return this.clearCnt>1?this.combo_desc:this.combo_score.node},c.showScore=function(e){var o=e.score,t=e.clearCnt,r=e.blockColor||1;if(this.combo_score.string="+"+o,t>1){this.combo_desc.active=!0;var n=r-1,c=b.BlockColor;(n<-1||n>c.length-1)&&(n=0);var i=t-2,l=b.BlockScoreDesc;i>-1&&i>=l.length&&(i=l.length-1),this.font_bg.changeSpriteFrameFromAtlas(b.BlockScoreDescPic[i]+"_"+(n+1))}else this.combo_desc.active=!1,this.combo_score.node.setPosition(0,0,0)},o}(u)).prototype,"combo_score",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=o(g.prototype,"combo_desc",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=o(g.prototype,"font_bg",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=g))||_));c._RF.pop()}}}));

System.register("chunks:///_virtual/NativeBase.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SdkBase.ts"],(function(n){var t,o,e;return{setters:[function(n){t=n.inheritsLoose},function(n){o=n.cclegacy},function(n){e=n.SdkBase}],execute:function(){o._RF.push({},"e52d5p86FRKC4R8hhosIOaI","NativeBase",void 0);n("NativeBase",function(n){function o(){return n.apply(this,arguments)||this}t(o,n);var e=o.prototype;return e.showToast=function(n,t){console.log(n)},e.hideToast=function(){},e.showLoading=function(n){},e.hideLoading=function(){},e.isIpx=function(){return!1},e.is2To1=function(){return!1},e.isPad=function(){return!1},e.vibrateShort=function(n){return new Promise((function(n,t){n(!0)}))},o}(e));o._RF.pop()}}}));

System.register("chunks:///_virtual/NativeGa.ts",["./rollupPluginModLoBabelHelpers.js","cc","./JsbNativeCall.ts","./GaBase.ts"],(function(t){var e,r,a,n;return{setters:[function(t){e=t.inheritsLoose},function(t){r=t.cclegacy},function(t){a=t.JsbNativeCall},function(t){n=t.GaBase}],execute:function(){r._RF.push({},"2ed7dd82QVMwZq1TFRX0Hr4","NativeGa",void 0);t("NativeGa",function(t){function r(){return t.apply(this,arguments)||this}e(r,t);var n=r.prototype;return n.getGaSysConfig=function(){return null},n.uploadLogTimely=function(t,e){},n.uploadClickStatLogTimely=function(t,e){},n.clickStat=function(t,e){},n.track=function(t,e){a.exec("TaPlugin","track",{params:e,eventId:t},(function(t){}),(function(t){}))},n.trackCrossAd=function(t,e,r){e.state=r,this.track(t,e)},n.trackAdEvent=function(t,e,r,a,n,i){var c=a;null!=n&&null!=n||(n=0),i=i||"";try{"number"==typeof a?c=a.toString():a&&a.errMsg&&(c="number"==typeof a.errData?a.errData.toString():a.errMsg),this.track("ad_reward",{adscene:t,adunitid:e,adstate:r,aderrcode:c,adcode:n,errpfinfo:i})}catch(a){if(a){try{a.toString()}catch(t){}console.error(a),this.track("ad_reward",{adscene:t,adunitid:e,adstate:r,aderrcode:"track_error",adcode:n,errpfinfo:i})}}},r}(n));r._RF.pop()}}}));

System.register("chunks:///_virtual/Net.ts",["cc"],(function(t){var c;return{setters:[function(t){c=t.cclegacy}],execute:function(){c._RF.push({},"9a7cah/8cpH/6Bf4DDfDVAt","Net",void 0);t("SDK_URL_OUT","https://116-hwcxft6fz-app-test01.qijihdhk.com/api/arc8/hello"),t("WS_URL_OUT","wss://116-hwcxft6fz-wss-test01.qijihdhk.com"),t("SDK_URL","https://app-yuanzuxiang-dev.tugameworld.com/api/arc8/hello"),t("WS_URL","wss://app-yuanzuxiang-dev.tugameworld.com");c._RF.pop()}}}));

System.register("chunks:///_virtual/NetDefine.ts",["cc"],(function(e){var n;return{setters:[function(e){n=e.cclegacy}],execute:function(){n._RF.push({},"928e1TapJBCjKG80NmPOo9g","NetDefine",void 0);e("evtNetwork",{networkChange:"networkChange",networkWeak:"networkWeak",offline:"offline",online:"online"});n._RF.pop()}}}));

System.register("chunks:///_virtual/NetManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Singleton.ts","./NetDefine.ts"],(function(e){var t,n,o,r,a,i;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,o=e.EventTarget,r=e.sys},function(e){a=e.Singleton},function(e){i=e.evtNetwork}],execute:function(){n._RF.push({},"160b3m/CQRPe6IethqJjtN+","NetManager",void 0);var s=window.wx;e("NetManager",function(e){function n(){for(var t,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(t=e.call.apply(e,[this].concat(o))||this).event=void 0,t}t(n,e);var a=n.prototype;return a.Init=function(){var e=this;return this.event=new o,r.platform==r.Platform.WECHAT_GAME&&(s.onNetworkStatusChange&&s.onNetworkStatusChange((function(t){var n=t.isConnected,o=t.networkType;e.event.emit(i.networkChange,n,o),n?e.event.emit(i.online):e.event.emit(i.offline)})),s.onNetworkWeakChange&&s.onNetworkWeakChange((function(t){var n=t.networkType,o=t.weakNet;e.event.emit(i.networkWeak,n,o)}))),this},a.UnInit=function(){r.platform==r.Platform.WECHAT_GAME&&(s.offNetworkStatusChange(),s.offNetworkWeakChange())},a.checkNetwork=function(){return new Promise((function(e,t){r.platform==r.Platform.WECHAT_GAME?s.getNetworkType({success:function(n){var o=n.networkType;this.networkType=o,"none"==o?(console.error("没有网络或者信号较弱:",n.signalStrength,n.hasSystemProxy),t(n)):e(n)}}):e(!0)}))},n}(a));n._RF.pop()}}}));

System.register("chunks:///_virtual/NodePool.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ResManager.ts"],(function(o){var t,e,n,i,s,l,r;return{setters:[function(o){t=o.createClass},function(o){e=o.cclegacy,n=o.isValid,i=o.instantiate,s=o.game,l=o.assetManager},function(o){r=o.ResManager}],execute:function(){e._RF.push({},"34cc4P0HoJMc4/HcefsXWWp","NodePool",void 0);var u=o("NodePool",function(){function o(o,t){this.name="",this.pool=[],this.node=null,this.rootNode=void 0,this.waitCount=0,this.name=o,this.rootNode=t}var e=o.prototype;return e.clear=function(){for(var o=this.pool.length,t=0;t<o;++t)this.pool[t].destroy();this.pool=[],this.node&&n(this.node)&&this.node.destroy(),this.node=null},e.put=function(o){o&&-1===this.pool.indexOf(o)&&(o.removeFromParent(),o.setParent(this.rootNode),this.pool.push(o))},e.get=function(){if(this.pool.length<=0)return this.node?i(this.node):null;var o=this.pool.length-1,t=this.pool[o];return this.pool.length=o,t},e.getAsync=function(){var o=this;return new Promise((function(t,e){if(o.pool.length<=0)o.node?(o.waitCount+=1,setTimeout((function(){var e=i(o.node);t(e),o.waitCount-=1}),o.waitCount*s.deltaTime*1e3)):e(null);else{var n=o.pool.length-1,l=o.pool[n];o.pool.length=n,t(l)}}))},t(o,[{key:"cloneNode",get:function(){return this.node},set:function(o){o&&n(o)&&(this.node=o,this.rootNode?this.node.setParent(this.rootNode):this.node.removeFromParent())}},{key:"size",get:function(){return this.pool.length},set:function(t){var e=this;if(t>this.size){o.waitInstanceCount+=t-this.size;for(var n=this.size;n<t;n++)setTimeout((function(){o.waitInstanceCount-=1,e.pool.push(i(e.cloneNode))}),o.waitInstanceCount*s.deltaTime*1e3)}}}]),o}());u.waitInstanceCount=0;var a=o("NodePoolManager",function(){function o(){this._rootNode=void 0,this.module=null,this.pools=new Map}var e=o.prototype;return e.createPool=function(o){return this.pools.has(o)||this.pools.set(o,new u(o,this.rootNode)),this.pools.get(o)},e.deletePool=function(o){if("string"==typeof o){if(this.pools.has(o)){var t=this.pools.get(o);t&&t.clear(),this.pools.delete(o)}}else o&&o instanceof u&&this.deletePool(o.name)},e.getPool=function(o,t){return void 0===t&&(t=!0),this.pools.has(o)?this.pools.get(o):t?this.createPool(o):null},e.getPoolFromBlock=function(o){var t="block/"+o;return this.getPool(t,!0)},e.getPoolWithBundleName=function(o,t){var e=t+"/"+o;return this.getPool(e,!0)},o.initPoolForBlock=function(t,e){o.initPool(t,"block",e)},o.initPool=function(t,e,n){var s=l.getBundle(e);if(s){var u=s.getInfoWithPath(t);if(null!=u&&null!=u.uuid){var a=o.inst.createPool(e+"/"+t),h=l.assets.get(u.uuid);h?h&&(a.cloneNode=i(h),a.size=n):r.getInstance().loadAsset(t,e).then((function(o){o&&(a.cloneNode=i(o),a.size=n)})).catch((function(o){console.error(o)}))}else console.error("bundle未包含资源：",e)}else console.error("未加载bundle：",e)},t(o,[{key:"rootNode",get:function(){return this._rootNode},set:function(o){this._rootNode=o}}],[{key:"inst",get:function(){return null==o._inst&&(o._inst=new o),o._inst}}]),o}());a._inst=null,a.module="【对象池】",e._RF.pop()}}}));

System.register("chunks:///_virtual/page_item.ts",["./rollupPluginModLoBabelHelpers.js","cc","./index.ts","./helper.ts"],(function(e){var t,i,r,a,o,n,l,s,c;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,r=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){o=e.cclegacy,n=e._decorator,l=e.Label,s=e.Component},null,function(e){c=e.Helper}],execute:function(){var h,d,p,u,_,f;o._RF.push({},"144b8nb7VtKSKwcAg6xFiXY","page_item",void 0);var g=n.ccclass,b=n.property;e("page_item",(h=g("page_item"),d=b(l),h((_=t((u=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),n=0;n<i;n++)o[n]=arguments[n];return t=e.call.apply(e,[this].concat(o))||this,r(t,"label",_,a(t)),r(t,"isScale",f,a(t)),t._holder=void 0,t}i(t,e);var o=t.prototype;return o.show=function(e){this._holder=e,this.label.string=this._holder.data.name},o.hide=function(){},o.click=function(){this.isScale&&this._holder.adapter.scrollManager.scrollToGroupIndex(1,this._holder.view.index)},o.update=function(){if(this.isScale&&this._holder&&this._holder.model){var e=this._holder.adapter.scrollManager.content.convertToWorldSpaceAR(this.node.position),t=this._holder.adapter.scrollManager.view.convertToNodeSpaceAR(e),i=this._holder.adapter.centerManager.getContainerOffset(),r=Math.abs(t[this._holder.adapter.mainAxis])-i,a=Math.abs(r)/this._holder.adapter.mainAxisSize;a=1-a,a=c.clamp(a,.3,1);var o=this.node.getScale();o[this._holder.adapter.mainAxis]=a,o[this._holder.adapter.crossAxis]=a,this.node.setScale(o)}},t}(s)).prototype,"label",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=t(u.prototype,"isScale",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),p=u))||p));o._RF.pop()}}}));

System.register("chunks:///_virtual/pageView_item.ts",["./rollupPluginModLoBabelHelpers.js","cc","./index.ts","./item_page.ts","./page_item.ts","./enum.ts","./ScrollAdapter.ts","./View.ts","./Holder.ts"],(function(e){var t,i,n,r,o,a,l,u,p,s,c,f,h,d,b;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,l=e.Label,u=e.Prefab,p=e.Node},null,function(e){s=e.item_page},function(e){c=e.page_item},function(e){f=e.WrapMode},function(e){h=e.ScrollAdapter},function(e){d=e.View},function(e){b=e.Holder}],execute:function(){var m,g,w,y,_,v,A,V,M;o._RF.push({},"58d34yHUJBMr6bNe9N2eji9","pageView_item",void 0);var z=a.ccclass,B=a.property,D=(e("pageView_item",(m=z("pageView_item"),g=B(l),w=B(u),y=B(p),m((A=t((v=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,n(t,"label",A,r(t)),n(t,"prefab1",V,r(t)),n(t,"prefab2",M,r(t)),t._holder=void 0,t}i(t,e);var o=t.prototype;return o.getPrefab=function(e){return 0==e.type?this.prefab1:this.prefab2},o.getView=function(){return new D(this)},o.getHolder=function(e,t){return new H(e,t,this)},o.initElement=function(e,t){t.wrapAfter&&(e.wrapAfterMode=t.wrapAfter,e.wrapBeforeMode=t.wrapBefore)},o.show=function(e){this._holder=e,this.label.string=this._holder.data.name;for(var t=[],i=0;i<10;i++){var n={name:i+"",type:i%2};0==this._holder.data.type&&(n.wrapAfter=f.Nowrap,n.wrapBefore=i%2==1?f.Auto:f.Wrap),t.push(n)}this.modelManager.insert(t)},o.hide=function(){this.modelManager.clear()},t}(h)).prototype,"label",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=t(v.prototype,"prefab1",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=t(v.prototype,"prefab2",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=v))||_)),function(e){function t(){return e.apply(this,arguments)||this}i(t,e);var n=t.prototype;return n.onVisible=function(){},n.onDisable=function(){},t}(d)),H=function(e){function t(){for(var t,i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return(t=e.call.apply(e,[this].concat(n))||this)._item=null,t}i(t,e);var n=t.prototype;return n.onCreated=function(){},n.onVisible=function(){0!=this.data.type?this._item=this.node.getComponent(s):this._item=this.node.getComponent(c),this._item.show(this)},n.onDisable=function(){this._item.hide()},t}(b);o._RF.pop()}}}));

System.register("chunks:///_virtual/pageView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./index.ts","./pageView_item.ts","./ScrollAdapter.ts","./View.ts","./Holder.ts"],(function(e){var t,n,i,r,o,a,c,l,u,s,p,f;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,c=e.Prefab,l=e.director},null,function(e){u=e.pageView_item},function(e){s=e.ScrollAdapter},function(e){p=e.View},function(e){f=e.Holder}],execute:function(){var h,g,b,w,d,y,m;o._RF.push({},"e19ce/HBJlJTqHa8oS0cj0o","pageView",void 0);var v=a.ccclass,V=a.property,P=(e("pageView",(h=v("pageView"),g=V(c),b=V(c),h((y=t((d=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,i(t,"prefab1",y,r(t)),i(t,"prefab2",m,r(t)),t}n(t,e);var o=t.prototype;return o.getPrefab=function(e){return 0==e.type?this.prefab1:this.prefab2},o.getHolder=function(e,t){return new _(e,t,this)},o.getView=function(){return new P(this)},o.initElement=function(e,t){},o.home=function(){l.loadScene("home")},o.start=function(){for(var e=[],t=0;t<10;t++)e.push({name:"# "+t,type:t%2});this.modelManager.insert(e)},o.scrollToPrevPage=function(){this.pageViewManager.scrollToPrevPage()},o.scrollToNextPage=function(){this.pageViewManager.scrollToNextPage()},t}(s)).prototype,"prefab1",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=t(d.prototype,"prefab2",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=d))||w)),function(e){function t(){return e.apply(this,arguments)||this}n(t,e);var i=t.prototype;return i.onVisible=function(){},i.onDisable=function(){},t}(p)),_=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))||this)._item=null,t}n(t,e);var i=t.prototype;return i.onCreated=function(){this._item=this.node.getComponent(u)},i.onVisible=function(){this._item.show(this)},i.onDisable=function(){this._item.hide()},t}(f);o._RF.pop()}}}));

System.register("chunks:///_virtual/PageViewIndicatorEx.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PageViewIndicatorItem.ts"],(function(e){var t,i,n,a,r,o,c,s,g;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){r=e.cclegacy,o=e._decorator,c=e.Node,s=e.PageViewIndicator},function(e){g=e.PageViewIndicatorItem}],execute:function(){var l,h,p,u,d;r._RF.push({},"92d1cnv72pCIZshCo9+wT7o","PageViewIndicatorEx",void 0);var f=o.ccclass,I=o.property;e("PageViewIndicatorEx",(l=f("PageViewIndicator"),h=I({type:[c]}),l((d=t((u=function(e){function t(){for(var t,i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,n(t,"pageIndicatorItems",d,a(t)),t}i(t,e);var r=t.prototype;return r._updateLayout=function(){},r.createIndicator=function(e){var t=this.pageIndicatorItems[e],i=t.getComponent(g);return i&&(i.index=e,i.pageView=this._pageView),t},r._refresh=function(){if(this._pageView){var e=this._indicators,t=this._pageView.getPages();if(t.length!==e.length){var i=0;if(t.length>e.length)for(i=0;i<t.length;++i)e[i]||(e[i]=this.createIndicator(i));else for(i=e.length-t.length;i>0;--i){var n=e[i-1];this.node.removeChild(n),e.splice(i-1,1)}this._layout&&this._layout.enabledInHierarchy&&this._layout.updateLayout(),this.changedState()}}},r.changedState=function(){var e=this._indicators;if(0!==e.length){var t=this._pageView._curPageIdx;if(!(t>=e.length)){for(var i=0;i<e.length;++i){e[i].getComponent(g).setDisable()}e[t].getComponent(g).setEnable()}}},t}(s)).prototype,"pageIndicatorItems",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Array}}),p=u))||p));r._RF.pop()}}}));

System.register("chunks:///_virtual/PageViewIndicatorItem.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,i,a,r,n,o,c,l,s,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,a=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){n=e.cclegacy,o=e._decorator,c=e.Label,l=e.Sprite,s=e.Color,p=e.Component}],execute:function(){var u,b,h,g,I,d,f;n._RF.push({},"1477dHa/nZAZ5mfGvqxBN48","PageViewIndicatorItem",void 0);var m=o.ccclass,y=o.property;e("PageViewIndicatorItem",(u=m("PageViewIndicatorItem"),b=y(c),h=y(l),u((d=t((I=function(e){function t(){for(var t,i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return(t=e.call.apply(e,[this].concat(n))||this).index=0,t.pageView=void 0,a(t,"labTabName",d,r(t)),a(t,"sprIcon",f,r(t)),t}i(t,e);var n=t.prototype;return n.setEnable=function(){this.labTabName&&(this.labTabName.color=s.BLACK),this.sprIcon&&(this.sprIcon.grayscale=!1)},n.setDisable=function(){this.labTabName&&(this.labTabName.color=s.WHITE),this.sprIcon&&(this.sprIcon.grayscale=!0)},n.onClick=function(){this.pageView.setCurrentPageIndex(this.index),this.pageView.indicator.changedState()},t}(p)).prototype,"labTabName",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=t(I.prototype,"sprIcon",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=I))||g));n._RF.pop()}}}));

System.register("chunks:///_virtual/PageViewManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Manager.ts","./enum.ts","./ScrollManager.ts","./ViewManagerEvent.ts"],(function(e){var t,n,i,r,a,o,s,l,h,c,g;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,r=e.assertThisInitialized,a=e.createClass},function(e){o=e.cclegacy,s=e._decorator},function(e){l=e.Manager},function(e){h=e.AlwaysScroll},function(e){c=e.ScrollManager},function(e){g=e.VMEvent}],execute:function(){var u,d,_,p,f,b,E,T,O,v,L,S,P,N;o._RF.push({},"9a9b8/q4JFHHb650TtGE+gS","PageViewManager",void 0);var M=s.ccclass,x=s.property,I=function(e){return e[e.ON_PAGE_LENGTH_CHANGED=0]="ON_PAGE_LENGTH_CHANGED",e[e.ON_SCROLL_PAGE_BEFOR=1]="ON_SCROLL_PAGE_BEFOR",e[e.ON_SCROLL_PAGE_END=2]="ON_SCROLL_PAGE_END",e}(I||{});e("PageViewManager",(u=M("PageViewManager"),d=x("boolean"),_=x({range:[0,1],slide:!0,step:.01,visible:function(){return this.enabled},tooltip:"滚动临界值，默认单位百分比，当拖拽超出该数值时，松开会自动滚动下一页，小于时则还原"}),p=x({range:[0,1],slide:!0,step:.01,visible:function(){return this.enabled},tooltip:"设置 PageView PageTurning 事件的发送时机"}),f=x({visible:function(){return this.enabled},tooltip:"快速滑动翻页临界值\n        当用户快速滑动时，会根据滑动开始和结束的距离与时间计算出一个速度值\n        该值与此临界值相比较，如果大于临界值，则进行自动翻页"}),b=x({visible:function(){return this.enabled},tooltip:"每个页面翻页时所需时间。单位：秒"}),u(((N=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return t=e.call.apply(e,[this].concat(a))||this,i(t,"_enabled",O,r(t)),i(t,"scrollThreshold",v,r(t)),i(t,"pageTurningEventTiming",L,r(t)),i(t,"autoPageTurningThreshold",S,r(t)),i(t,"pageTurningSpeed",P,r(t)),t._currentIndex=0,t}n(t,e);var o=t.prototype;return o.onInit=function(){this._register()},o._register=function(){this.adapter&&this.enabled&&(this.adapter.scrollManager.on(c.Event.ON_SCROLL_END,this._handleReleaseLogic,this),this.adapter.scrollManager.on(c.Event.ON_SCROLL_CANCEL,this._handleReleaseLogic,this),this.adapter.scrollManager.on(c.Event.ON_SCROLL_TO_GROUPINDEX_BEFOR,this._onScrollToIndex,this),this.adapter.viewManager.on(g.ON_UPDATE_VIEWS,this._onUpdateViews,this,!0))},o._unregister=function(){this.adapter&&!this.enabled&&(this.adapter.scrollManager.off(c.Event.ON_SCROLL_END,this._handleReleaseLogic,this),this.adapter.scrollManager.off(c.Event.ON_SCROLL_CANCEL,this._handleReleaseLogic,this),this.adapter.scrollManager.off(c.Event.ON_SCROLL_TO_GROUPINDEX_BEFOR,this._onScrollToIndex,this),this.adapter.viewManager.off(g.ON_UPDATE_VIEWS,this._onUpdateViews,this))},o.scrollToPage=function(e,t,n){t<0||t>=this.length||t==this.currentIndex&&0!=this.adapter.scrollManager.calcOffset()||(this.adapter.scrollManager.scrollToGroupIndex(e,t,n),this.emit(I.ON_SCROLL_PAGE_BEFOR,t))},o.scrollToPrevPage=function(e,t){void 0===e&&(e=this.pageTurningSpeed),void 0===t&&(t=h.Header),0!=this._currentIndex?this.scrollToPage(e,this._currentIndex-1,t):this.adapter.viewManager.loopHeader&&this.scrollToPage(e,this.length-1,t)},o.scrollToNextPage=function(e,t){void 0===e&&(e=this.pageTurningSpeed),void 0===t&&(t=h.Footer),this._currentIndex>=this.length-1?this.adapter.viewManager.loopFooter&&this.scrollToPage(e,0,t):this.scrollToPage(e,this._currentIndex+1,t)},o._onUpdateViews=function(){this.emit(I.ON_PAGE_LENGTH_CHANGED),this._currentIndex=0,this.scrollToPage(this.pageTurningSpeed,this._currentIndex)},o._onScrollToIndex=function(e){this._currentIndex=e,this.emit(I.ON_SCROLL_PAGE_END,e)},o._handleReleaseLogic=function(e){if(this._enabled&&this.adapter.scrollManager.isMyEventAndMoved){var t=e.getUIStartLocation()[this.adapter.mainAxis]-e.getUILocation()[this.adapter.mainAxis],n=this._getNextIndex(t);this._isScrollable(t)||this._isQuicklyScrollable(this.adapter.scrollManager.velocity)?this.scrollToPage(this.pageTurningSpeed,n):this.scrollToPage(this.pageTurningSpeed,this._currentIndex)}},o._getNextIndex=function(e){var t=this._currentIndex;return this.adapter.isHorizontal?this.adapter.isArrangeAxisStart?e>0?t++:e<0&&t--:(e<0&&t++,e>0&&t--):this.adapter.isArrangeAxisStart?e<0?t++:e>0&&t--:e>0?t++:e<0&&t--,t>=this.length&&this.adapter.viewManager.loopFooter?t=0:t<0&&this.adapter.viewManager.loopHeader&&(t=this.length-1),(t<0||t>=this.length)&&(t=this._currentIndex),t},o._isScrollable=function(e){return Math.abs(e)>=this.adapter.mainAxisSize*this.scrollThreshold},o._isQuicklyScrollable=function(e){return Math.abs(e)>this.autoPageTurningThreshold},a(t,[{key:"enabled",get:function(){return this._enabled},set:function(e){e!=this._enabled&&(this._enabled=e,this._enabled?this._register():this._unregister())}},{key:"currentIndex",get:function(){return this._currentIndex}},{key:"length",get:function(){return this.adapter.viewManager.groupLength}}]),t}(l)).Event=I,O=t((T=N).prototype,"_enabled",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),t(T.prototype,"enabled",[d],Object.getOwnPropertyDescriptor(T.prototype,"enabled"),T.prototype),v=t(T.prototype,"scrollThreshold",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),L=t(T.prototype,"pageTurningEventTiming",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.1}}),S=t(T.prototype,"autoPageTurningThreshold",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 100}}),P=t(T.prototype,"pageTurningSpeed",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.3}}),E=T))||E));o._RF.pop()}}}));

System.register("chunks:///_virtual/PanelBase.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PanelDef.ts","./PanelBaseMask.ts"],(function(e){var n,t,a,i,o,s,l,r,c,u,h,f;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,a=e.initializerDefineProperty,i=e.assertThisInitialized,o=e.createClass},function(e){s=e.cclegacy,l=e._decorator,r=e.Enum,c=e.BlockInputEvents,u=e.Component},function(e){h=e.emPanelType},function(e){f=e.PanelBaseMask}],execute:function(){var p,d,y,_;s._RF.push({},"fadf8lOgZ9HDrbjkDG4wQWH","PanelBase",void 0);var k=l.ccclass,m=l.property;e("default",(p=m({type:r(h)}),k((_=n((y=function(e){function n(){for(var n,t=arguments.length,o=new Array(t),s=0;s<t;s++)o[s]=arguments[s];return n=e.call.apply(e,[this].concat(o))||this,a(n,"panelType",_,i(n)),n._data=null,n._enabledPopupEffect=!1,n._maskLayer=null,n._enabledMaskLayer=!0,n.panelName="",n.parentManager=null,n}t(n,e);var s=n.prototype;return s.onLoad=function(){},s.start=function(){},s.onDestroy=function(){},s.onEnable=function(){},s.onDisable=function(){},s.setMaskLayerEnable=function(e){this._enabledMaskLayer=e},s.initMaskLayer=function(e){if(this._enabledMaskLayer&&(!this._maskLayer||!this._maskLayer.isValid)&&e){e.getComponent(c)||e.addComponent(c);var n=e.getComponent(f);n&&(n.container=this),this.node.addChild(e),this._maskLayer=e,this._maskLayer.setSiblingIndex(0),this._maskLayer.setPosition(0,0,0),this._maskLayer.active=!0,e.name=this.name+"_mask"}},s.setMaskLayerOpactity=function(e){},s.beforeWillShow=function(){},s.onWillShow=function(){},s.onShow=function(){},s.onWillClose=function(){},s.onClose=function(){this.parentManager&&this.parentManager.onClosePanel(this.panelName)},s.setData=function(e){this._data=e,this.onSetData(e)},s.onSetData=function(e){},s.closeSelf=function(){this.willClose()},s.exeCloseUI=function(){this.onClose(),this.node&&this.node.isValid&&this.doClosePanel();var e=this.parentManager;null!=e&&e.checkQueue()},s.doClosePanel=function(){this.node.destroy()},s.exeShowUI=function(){this.onShow()},s.willClose=function(){this.onWillClose(),this._enabledPopupEffect?this.isValid&&this.node&&this.node.isValid&&this.exeCloseUI():this.exeCloseUI()},s.willShow=function(e,n){null!=this.node&&(this._enabledPopupEffect=e,this.beforeWillShow(),this.onWillShow(),this.initMaskLayer(n),this._enabledPopupEffect,this.exeShowUI())},o(n,[{key:"data",get:function(){return this._data},set:function(e){this._data=e}}]),n}(u)).prototype,"panelType",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return h.Popup}}),d=y))||d));s._RF.pop()}}}));

System.register("chunks:///_virtual/PanelBaseMask.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,n,o,s,i;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,o=t._decorator,s=t.Node,i=t.Component}],execute:function(){var h;n._RF.push({},"366f8g+gn5NfaE6y4MnXHrJ","PanelBaseMask",void 0);var d=o.ccclass;o.property,t("PanelBaseMask",d("PanelBaseMask")(h=function(t){function n(){for(var e,n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(e=t.call.apply(t,[this].concat(o))||this).container=void 0,e}e(n,t);var o=n.prototype;return o.onLoad=function(){this.node.on(s.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(s.EventType.MOUSE_DOWN,this.dontBeSwallowed,this),this.node.on(s.EventType.MOUSE_MOVE,this.dontBeSwallowed,this),this.node.on(s.EventType.MOUSE_UP,this.dontBeSwallowed,this),this.node.on(s.EventType.TOUCH_START,this.dontBeSwallowed,this),this.node.on(s.EventType.TOUCH_MOVE,this.dontBeSwallowed,this),this.node.on(s.EventType.TOUCH_END,this.dontBeSwallowed,this),this.node.on(s.EventType.TOUCH_CANCEL,this.dontBeSwallowed,this)},o.onTouchStart=function(t){this.container&&this.container.closeSelf()},o.dontBeSwallowed=function(t){t.preventSwallow=!0},o.onDestroy=function(){this.node.off(s.EventType.MOUSE_DOWN,this.dontBeSwallowed,this),this.node.off(s.EventType.MOUSE_MOVE,this.dontBeSwallowed,this),this.node.off(s.EventType.MOUSE_UP,this.dontBeSwallowed,this),this.node.off(s.EventType.TOUCH_START,this.dontBeSwallowed,this),this.node.off(s.EventType.TOUCH_MOVE,this.dontBeSwallowed,this),this.node.off(s.EventType.TOUCH_END,this.dontBeSwallowed,this),this.node.off(s.EventType.TOUCH_CANCEL,this.dontBeSwallowed,this)},n}(i))||h);n._RF.pop()}}}));

System.register("chunks:///_virtual/PanelBaseNoMask.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PanelBase.ts"],(function(e){var t,n,o,s;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,o=e._decorator},function(e){s=e.default}],execute:function(){var a;n._RF.push({},"e433aRPMvBKfZ4PhKcAvwBz","PanelBaseNoMask",void 0);var r=o.ccclass;o.property,e("default",r(a=function(e){function n(){return e.apply(this,arguments)||this}return t(n,e),n.prototype.beforeWillShow=function(){this.setMaskLayerEnable(!1)},n}(s))||a);n._RF.pop()}}}));

System.register("chunks:///_virtual/PanelDef.ts",["cc"],(function(e){var n;return{setters:[function(e){n=e.cclegacy}],execute:function(){n._RF.push({},"2afd3ZMzBlBdKOerPBx3vvj","PanelDef",void 0);e("emPanelType",function(e){return e[e.None=0]="None",e[e.Modalless=1]="Modalless",e[e.Popup=2]="Popup",e}({}));n._RF.pop()}}}));

System.register("chunks:///_virtual/PanelManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PanelBase.ts","./PanelDef.ts","./ResManager.ts"],(function(e){var n,t,i,a,o,s,l;return{setters:[function(e){n=e.createClass},function(e){t=e.cclegacy,i=e.instantiate,a=e.Vec3},function(e){o=e.default},function(e){s=e.emPanelType},function(e){l=e.ResManager}],execute:function(){t._RF.push({},"bb403MJuVxDr6hpuULWAcTF","PanelManager",void 0),e("PanelManager",function(){function e(){this.mQueuePanels=[],this.mIsShowing=0,this.panelRoot=void 0,this.maskNode=void 0,this.dicPanels=null,this.waitPopupQueue=[],this.dicPanels={},this.initUIRootNode()}var t=e.prototype;return t.setRootNode=function(e,n){this.panelRoot=e,this.maskNode=n},t.release=function(){this.removeAllPopUpView()},t.initUIRootNode=function(){},t.addPopUpView=function(e,n,t,i,a){void 0===n&&(n=null),void 0===t&&(t=!1),void 0===i&&(i=!0),void 0===a&&(a=!1);var o={name:e,data:n,isUseAni:t,resetOpacity:a};i?this.loadUI(o):(this.mQueuePanels.push(o),this.checkQueue())},t.loadUI=function(e){var n=this,t=e.name,s=this.dicPanels[t];if(s&&s.isValid)if(s.active)console.log("重复打开存在的面板:"+t);else{s.active=!0;var u=s.getComponent(o);if(null==u)return void console.error("加载面板失败："+t);u.panelName=e.name,u.parentManager=this,u.setData(e.data),u.willShow(e.isUseAni,this.getMaskLayerNode()),this.dicPanels[e.name]=s}else this.waitPopupQueue.indexOf(t)>-1||(this.waitPopupQueue.push(t),l.getInstance().loadAsset(t,"block").then((function(s){if(s){var l=i(s);if(l&&l.isValid&&n.panelRoot.isValid){l.setParent(n.panelRoot),l.position=a.ZERO;var u=l.getComponent(o);if(null==u)return void console.error("加载面板失败："+t);u.panelName=e.name,u.parentManager=n,u.setData(e.data),u.willShow(e.isUseAni,n.getMaskLayerNode()),n.dicPanels[e.name]=l;var r=n.waitPopupQueue.indexOf(e.name);r>-1&&n.waitPopupQueue.splice(r,1)}}})).catch((function(e){console.error("load error: "+e)})))},t.getMaskLayerNode=function(){return this.maskNode||console.error("instantiate maskNode error"," null maskNode"),i(this.maskNode)},t.removeView=function(e){var n=this.dicPanels[e];if(null==n||null==n||!n.isValid)return!1;var t=n.getComponent(o);return t?t.closeSelf():n.destroy(),!0},t.onClosePanel=function(e){},t.removeAllPopUpView=function(){for(var e=0;e<this.panelRoot.children.length;e++){var n=this.panelRoot.children[e];if(n.active){var t=n.getComponent(o);null!=t&&t.panelType==s.Popup&&(this.onClosePanel(t.panelName),t.closeSelf())}}},t.checkQueue=function(){if(0!=this.mQueuePanels.length){var e=this.mQueuePanels.shift();this.loadUI(e)}},n(e,null,[{key:"inst",get:function(){return null==e._inst&&(e._inst=new e),e._inst}}]),e}())._inst=null,t._RF.pop()}}}));

System.register("chunks:///_virtual/PaperPlane.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var n,e,i,a,r,o,s,l,u,c,h;return{setters:[function(t){n=t.applyDecoratedDescriptor,e=t.inheritsLoose,i=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){r=t.cclegacy,o=t._decorator,s=t.Node,l=t.v2,u=t.tween,c=t.v3,h=t.Component}],execute:function(){var p,f,y,d,P;r._RF.push({},"16a4bQk5+hPg46rGD6UQrDn","PaperPlane",void 0);var g=o.ccclass,v=o.property;t("PaperPlane",(p=g("PaperPlane"),f=v(s),p((P=n((d=function(t){function n(){for(var n,e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];return n=t.call.apply(t,[this].concat(r))||this,i(n,"planeNode",P,a(n)),n.lastPos=null,n.targetPos=null,n.onFinishCallBack=null,n.afterQifeiAnimCallback=null,n}e(n,t);var r=n.prototype;return r.getAngleByVector=function(t,n,e){if(0===n)return t<0?270-e:t>0?90-e:0;if(0===t){if(n>=0)return 0;if(n<0)return 180-e}var i,a=Math.abs(n)/Math.abs(t);return n>0&&t<0?i=270-e+180*Math.atan(a)/Math.PI:n>0&&t>0?i=90-e-180*Math.atan(a)/Math.PI:n<0&&t<0?i=270-e-180*Math.atan(a)/Math.PI:n<0&&t>0&&(i=-e+180*Math.atan(a)/Math.PI+90),i},r.updateRotation=function(t,n){var e=this.getAngleByVector(t.x-n.x,t.y-n.y,-45);0!=e&&this.node.setRotation(e)},r.lateUpdate=function(){this.updateRotation(this.node.position,this.lastPos)},r.update=function(){this.lastPos=this.node.position},r.getBezierLength=function(t,n,e,i){var a=l((e.x+i.x)/2,(e.y+i.y)/2);return l(a.x-t.x,a.y-t.y).length()+l(a.x-n.x,a.y-n.y).length()},r.randomControlPoint=function(t,n){n=l(n.x,n.y),t=l(t.x,t.y);var e=n.sub(t),i=l(1,1*-e.x/e.y).normalize();0==e.y&&(i=l(e.y/e.x,-1).normalize());var a=t.sub(n).mag(),r=Math.random()*a+250;r>600&&(r=600);var o=i.multiplyScalar(r),s=i.multiplyScalar(r);return[t.sub(o),n.sub(s)]},r.runMyBezier=function(t){var n=l(this.node.position.x,this.node.position.y),e=this.randomControlPoint(n,t),i=e[0],a=e[1],r=this.getBezierLength(n,t,i,a)/200;return r=(r=r<=.5?.5:r)>=1?1:r,this.bezierTo(this.node,r,i,a,t,{easing:"sineIn"})},r.runDisappearAnim=function(){this.node.destroy()},r.flyToTargetPosBoom=function(t,n,e){this.targetPos=t;var i=this;this.onFinishCallBack=function(){i.runDisappearAnim(),"function"==typeof n&&n()};var a=this.runMyBezier(t);this.afterQifeiAnimCallback=function(){"function"==typeof e&&e();var t=a,n=this.onFinishCallBack;u(i.node).sequence(t,n).start},this.afterQifeiAnimCallback()},r.bezierTo=function(t,n,e,i,a,r){r=r||Object.create(null);return r.onUpdate=function(n,r){var o,s,l,u,h,p;t.position=(l=i,u=a,h=(1-(o=r))*(1-o)*(s=e).x+2*o*(1-o)*l.x+o*o*u.x,p=(1-o)*(1-o)*s.y+2*o*(1-o)*l.y+o*o*u.y,c(h,p,0))},u(t).to(n,{},r)},n}(h)).prototype,"planeNode",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=d))||y));r._RF.pop()}}}));

System.register("chunks:///_virtual/PolicyView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Boot.ts","./MK.ts","./SettingData.ts","./BIDefine.ts","./MKEvent.ts","./EventType.ts","./sdk.ts"],(function(t){var n,e,o,c,i,s,r,u,l,p,a;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy,o=t._decorator,c=t.sys,i=t.game,s=t.Component},null,null,function(t){r=t.SettingData},function(t){u=t.BIEventID},function(t){l=t.sendEvent},function(t){p=t.Events},function(t){a=t.SDK}],execute:function(){var f;e._RF.push({},"7deb6qTvn9EJb+iQSp8WuDr","PolicyView",void 0);var v=o.ccclass;o.property,t("PolicyView",v("PolicyView")(f=function(t){function e(){return t.apply(this,arguments)||this}n(e,t);var o=e.prototype;return o.onClickTerms=function(){c.openURL("https://arksgame.com/terms.html")},o.onClickPrivacy=function(){c.openURL("https://arksgame.com/ps.html")},o.onClickAccept=function(){r.inst.isAcceptTSP=1,l(p.EVENT_POLICY_AGREE),l(p.EVENT_POLICY_SHOW,!1),a.instance.reportBI(u.agree_policy,{})},o.onClickReject=function(){i.end()},e}(s))||f);e._RF.pop()}}}));

System.register("chunks:///_virtual/ProcedureLaunch.ts",["./rollupPluginModLoBabelHelpers.js","cc","./FsmState.ts","./Boot.ts","./MK.ts","./UserData.ts","./ResManager.ts","./AssetInfoDefine.ts","./UserHammerData.ts","./UserChangeData.ts","./UserHRocketData.ts","./UserVRocketData.ts","./LanguageManager.ts","./BIDefine.ts","./FlagData.ts","./GuideData.ts","./NetManager.ts","./NetDefine.ts","./ToastManager.ts","./RemoteConfig.ts","./GameDefine.ts","./MKEvent.ts","./EventType.ts","./MKUtil.ts","./sdk.ts"],(function(e){var n,t,o,s,r,i,a,c,u,l,f,g,d,h,p,k,w,v,b,_,m,D,P,R,N,I;return{setters:[function(e){n=e.inheritsLoose},function(e){t=e.cclegacy,o=e.director,s=e.game},function(e){r=e.Fsm},null,null,function(e){i=e.UserData},function(e){a=e.ResManager},function(e){c=e.AssetInfoDefine},function(e){u=e.UserHammerData},function(e){l=e.UserChangeData},function(e){f=e.UserHRocketData},function(e){g=e.UserVRocketData},function(e){d=e.LanguageManager},function(e){h=e.BIEventID},function(e){p=e.FlagData},function(e){k=e.GuideData},function(e){w=e.NetManager},function(e){v=e.evtNetwork},function(e){b=e.ToastManager},function(e){_=e.RemoteConfig},function(e){m=e.buildInfo},function(e){D=e.sendEvent,P=e.unRegEvent},function(e){R=e.Events},function(e){N=e.MKUtil},function(e){I=e.SDK}],execute:function(){t._RF.push({},"11835bTXctIn7VX+ed17k+6","ProcedureLaunch",void 0);var L=e("ProcedureLaunch",function(e){function t(){var n;return(n=e.call(this,"ProcedureLaunch")||this).subGameConfig=void 0,n.checkNetworkInterval=void 0,n.isNetworkAvailable=void 0,n.downloadProgress=[0,0,0,0,0,0],n.totalDownTask=6,n.retryTimes=3,n}n(t,e);var r=t.prototype;return r.onEnter=function(){e.prototype.onEnter.call(this);var n=w.getInstance().Init();n.event.on(v.networkChange,this.onNetworkChange,this),this.initData(),n.checkNetwork().then(this.onNetworkReconnect.bind(this)).catch(this.onNetworkDisconnect.bind(this))},r.onNetworkChange=function(e,n){e&&"none"!=n||this.onNetworkDisconnect()},r.setupResourceLoader=function(){if(this.subGameConfig=m.bundle.block,this.subGameConfig){var e={bundleName:this.subGameConfig.bundleName,keepSub:!1},n=["res/prefab/blocks/blockEntity","res/prefab/blocks/block-normal","res/prefab/blocks/ef_cleaarup_heng_pb","res/prefab/blocks/ef_cleaarup_shu_pb","res/prefab/blocks/block-normal-level",c.prefab.comboScore.path,c.prefab.cool.path,c.prefab.addScore.path,c.prefab.reachPercent.path];k.inst.isGuideFinished()||n.push.apply(n,["res/effectres/guide/eui_guidefk1_particle","res/effectres/guide/eui_guidefk1_bgle_pb","res/effectres/guide/eui_guidefk1_le_pb","res/effectres/guide/eui_guidefk2_le_pb","res/effectres/guide/eui_guidefk2_bgle_pb","res/effectres/guide/eui_guidefk2_particle","res/effectres/guide/eui_guidefk3_le_pb"]);this.initResourceLoader(e,n,["res/configs/language","res/configs/block","res/configs/global","res/configs/level_block","res/configs/score_block","res/configs/level_stage1","res/configs/level_stage2","res/configs/level_stage3","res/configs/level_stage4","res/configs/level_stage5","res/configs/level_select_stage1","res/configs/level_select_stage2","res/configs/level_select_stage3","res/configs/level_select_stage4","res/configs/level_select_stage5"])}},r.initResourceLoader=function(e,n,t){var o=this;a.getInstance().loadBundleWithProgress(e.bundleName,(function(e){o.updateDownloadProgress(1,e)}),this).then((function(e){return o.updateDownloadProgress(1,100),Promise.all([o.loadBundleResources(e,o.subGameConfig.loadDir,"block"),o.loadPrefabs(e,n),o.loadJsonAssets(e,t),o.loadRemoteConfig(),o.preloadScene(e)])})).catch((function(e){console.error(e),o.retryResourceLoader()}))},r.loadBundleResources=function(e,n,t){var o=this;return a.getInstance().loadBundleRes(n,t,(function(e,n){o.updateDownloadProgress(2,e/n*100)})).then((function(){o.updateDownloadProgress(2,100)}))},r.loadPrefabs=function(e,n){var t=this,o=n.length,s=0;return n.reduce((function(n,r){return n.then((function(){return new Promise((function(n,i){e.load(r,(function(e,r){if(e)return console.error(e),void i(e);s++,t.updateDownloadProgress(3,s/o*100),n()}))}))}))}),Promise.resolve()).then((function(){t.updateDownloadProgress(3,100)}))},r.loadJsonAssets=function(e,n){var t=this,o=n.length,s=0;return n.reduce((function(n,r){return n.then((function(){return new Promise((function(n,i){e.load(r,(function(e,a){if(e)return console.error(e),void i(e);"res/configs/language"===r?(window.languages=a.json,d.updateRenders()):"res/configs/block"===r&&(window.BlockConst=a.json),s++,t.updateDownloadProgress(4,s/o*100),n()}))}))}))}),Promise.resolve()).then((function(){t.updateDownloadProgress(4,100)}))},r.preloadScene=function(e){var n=this;return new Promise((function(t){i.inst.isNewRegister?o.preloadScene("game",(function(){n.updateDownloadProgress(5,100),t()})):e.preloadScene("home",(function(){n.updateDownloadProgress(5,100),t()}))}))},r.loadRemoteConfig=function(){var e=this;return new Promise((function(n,t){_.LoadRemote().then((function(t){e.updateDownloadProgress(6,100),n()})).catch((function(t){console.error(t),e.updateDownloadProgress(6,100),n()}))}))},r.updateDownloadProgress=function(e,n){this.downloadProgress[e-1]=n;var t=this.downloadProgress.reduce((function(e,n){return e+n}),0),o=100*this.totalDownTask;D(R.EVENT_PRELOAD_RES,t,o)},r.onNetworkDisconnect=function(){var e=this;console.log("Network disconnected. Waiting for reconnection..."),this.isNetworkAvailable=!1,b.getInstance().showToast("请检查网络环境！");this.checkNetworkInterval=setInterval((function(){w.getInstance().checkNetwork().then((function(){console.log("Network reconnected. Retrying resource loading..."),clearInterval(e.checkNetworkInterval),e.onNetworkReconnect()})).catch((function(){b.getInstance().showToast("请检查网络环境！"),console.log("Still no network. Waiting...")}))}),2e3)},r.onNetworkReconnect=function(){this.isNetworkAvailable=!0,this.retryTimes=3,console.log("Network is ok. trying resource loading..."),this.setupResourceLoader()},r.retryResourceLoader=function(){var e=this;setTimeout((function(){if(console.log("load is err. trying resource loading...",e.retryTimes),e.retryTimes<=0)return b.getInstance().showToast("尝试重启"),void s.restart();e.retryTimes-=1,e.setupResourceLoader()}),1e3)},r.onAgreePolicy=function(){},r.initData=function(){d.initLocalLanguage();var e=N.deviceId();I.instance.loginWithGuest(e),i.inst.isNewUser?(i.inst.isNewRegister=!0,u.inst.initItem(),f.inst.initItem(),g.inst.initItem(),l.inst.initItem(),i.inst.hasGotLoginReward=!0,p.inst.hasFlag(h.af_complete_registration)||(I.instance.reportAf(h.af_complete_registration,{userId:e},!0),p.inst.recordFlag(h.af_complete_registration))):i.inst.isNewRegister=!1,I.instance.reportAf(h.af_login,{userId:e},!0)},r.onExit=function(){e.prototype.onExit.call(this),P(this),w.getInstance().event.off(v.networkChange,this.onNetworkChange,this)},t}(r.FsmState)),y=window;y.Procedure||(y.Procedure={}),y.Procedure.launch=L,t._RF.pop()}}}));

System.register("chunks:///_virtual/ProcedurePreload.ts",["./rollupPluginModLoBabelHelpers.js","cc","./FsmState.ts"],(function(){var e,t,o;return{setters:[function(t){e=t.inheritsLoose},function(e){t=e.cclegacy},function(e){o=e.Fsm}],execute:function(){t._RF.push({},"3a373Cf27VMwanA4QemxORN","ProcedurePreload",void 0);var r=function(t){function o(){return t.call(this,"ProcedurePreload")||this}e(o,t);var r=o.prototype;return r.onEnter=function(){t.prototype.onEnter.call(this)},r.onExit=function(){t.prototype.onExit.call(this)},o}(o.FsmState),n=window;n.Procedure||(n.Procedure={}),n.Procedure.launch=r,t._RF.pop()}}}));

System.register("chunks:///_virtual/ProcedureToAdventureLevelSelectV2.ts",["./rollupPluginModLoBabelHelpers.js","cc","./FsmState.ts"],(function(e){var t,r,o,n;return{setters:[function(e){t=e.inheritsLoose},function(e){r=e.cclegacy,o=e.director},function(e){n=e.Fsm}],execute:function(){r._RF.push({},"2b0fc8+03xLjI8YnboiCWGt","ProcedureToAdventureLevelSelectV2",void 0);var c=e("ProcedureToAdventureLevelSelectV2",function(e){function r(){return e.call(this,"ProcedureToAdventureLevelSelectV2")||this}t(r,e);var n=r.prototype;return n.onEnter=function(){var t=this;e.prototype.onEnter.call(this),o.loadScene("adventure_level_selectv2",(function(){t.onClearAsset()}))},n.onClearAsset=function(){},n.onExit=function(){e.prototype.onExit.call(this)},r}(n.FsmState)),u=window;u.Procedure||(u.Procedure={}),u.Procedure.ProcedureToAdventureLevelSelectV2=c,r._RF.pop()}}}));

System.register("chunks:///_virtual/ProcedureToGame.ts",["./rollupPluginModLoBabelHelpers.js","cc","./FsmState.ts","./UserData.ts"],(function(e){var t,n,o,r,c;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,o=e.director},function(e){r=e.Fsm},function(e){c=e.UserData}],execute:function(){n._RF.push({},"ea52cWKkT9I+J+kE1h7/ZTh","ProcedureToGame",void 0);var i=e("ProcedureToGame",function(e){function n(t){var n,o;return t=null!=(n=t)?n:"ProcedureToGame",(o=e.call(this,t)||this).subGameName=void 0,o}t(n,e);var r=n.prototype;return r.onEnter=function(){var t=this;e.prototype.onEnter.call(this),o.loadScene("game",(function(){t.onEnterGameScene()}))},r.onEnterGameScene=function(){c.inst.isNewUser&&(c.inst.isNewUser=!1)},r.onExit=function(){e.prototype.onExit.call(this)},n}(r.FsmState)),s=window;s.Procedure||(s.Procedure={}),s.Procedure.toTetris=i,n._RF.pop()}}}));

System.register("chunks:///_virtual/ProcedureToHome.ts",["./rollupPluginModLoBabelHelpers.js","cc","./FsmState.ts"],(function(e){var o,t,r,n;return{setters:[function(e){o=e.inheritsLoose},function(e){t=e.cclegacy,r=e.director},function(e){n=e.Fsm}],execute:function(){t._RF.push({},"ce7d5+MgPlMuZOZi85OC1DM","ProcedureToHome",void 0);var c=e("ProcedureToHome",function(e){function t(){return e.call(this,"ProcedureToHome")||this}o(t,e);var n=t.prototype;return n.onEnter=function(){var o=this;e.prototype.onEnter.call(this),r.loadScene("home",(function(){o.onClearAsset()}))},n.onClearAsset=function(){},n.onExit=function(){e.prototype.onExit.call(this)},t}(n.FsmState)),u=window;u.Procedure||(u.Procedure={}),u.Procedure.toHome=c,t._RF.pop()}}}));

System.register("chunks:///_virtual/ProcedureToLevel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./FsmState.ts","./UserData.ts"],(function(e){var t,n,o,r,c;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,o=e.director},function(e){r=e.Fsm},function(e){c=e.UserData}],execute:function(){n._RF.push({},"f0b2dHFDhJMOYu2bf93Td2m","ProcedureToLevel",void 0);var i=e("ProcedureToLevel",function(e){function n(){return e.call(this,"ProcedureToLevel")||this}t(n,e);var r=n.prototype;return r.onEnter=function(){var t=this;e.prototype.onEnter.call(this),o.loadScene("level",(function(){t.onEnterGameScene()}))},r.onEnterGameScene=function(){c.inst.isNewUser&&(c.inst.isNewUser=!1)},r.onExit=function(){e.prototype.onExit.call(this)},n}(r.FsmState)),s=window;s.Procedure||(s.Procedure={}),s.Procedure.toLevel=i,n._RF.pop()}}}));

System.register("chunks:///_virtual/ProcedureToLevelSeclect.ts",["./rollupPluginModLoBabelHelpers.js","cc","./FsmState.ts"],(function(e){var t,o,c,r;return{setters:[function(e){t=e.inheritsLoose},function(e){o=e.cclegacy,c=e.director},function(e){r=e.Fsm}],execute:function(){o._RF.push({},"5d306Db6ldPN6EGX8DJI3Or","ProcedureToLevelSeclect",void 0);var n=e("ProcedureToLevelSeclect",function(e){function o(){return e.call(this,"ProcedureToLevelSeclect")||this}t(o,e);var r=o.prototype;return r.onEnter=function(){var t=this;e.prototype.onEnter.call(this),c.loadScene("level_select",(function(){t.onClearAsset()}))},r.onClearAsset=function(){},r.onExit=function(){e.prototype.onExit.call(this)},o}(r.FsmState)),l=window;l.Procedure||(l.Procedure={}),l.Procedure.toLevelSeclect=n,o._RF.pop()}}}));

System.register("chunks:///_virtual/ProcedureToLevelTheme.ts",["./rollupPluginModLoBabelHelpers.js","cc","./FsmState.ts"],(function(e){var t,o,r,n;return{setters:[function(e){t=e.inheritsLoose},function(e){o=e.cclegacy,r=e.director},function(e){n=e.Fsm}],execute:function(){o._RF.push({},"4f657Qn6bNF2a2xILxzCWxD","ProcedureToLevelTheme",void 0);var c=e("ProcedureToLevelTheme",function(e){function o(){return e.call(this,"ProcedureToLevelTheme")||this}t(o,e);var n=o.prototype;return n.onEnter=function(){var t=this;e.prototype.onEnter.call(this),r.loadScene("home",(function(){t.onClearAsset()}))},n.onClearAsset=function(){},n.onExit=function(){e.prototype.onExit.call(this)},o}(n.FsmState)),u=window;u.Procedure||(u.Procedure={}),u.Procedure.toLevelSeclect=c,o._RF.pop()}}}));

System.register("chunks:///_virtual/Props.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UserHammerData.ts","./UserVRocketData.ts","./UserHRocketData.ts","./UserChangeData.ts","./MK.ts","./Event.ts","./MKEvent.ts"],(function(e){var t,o,r,i,n,a,s,c,l,u,h,f,p,m,d,b;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,r=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){n=e.cclegacy,a=e._decorator,s=e.Node,c=e.Label,l=e.Component},function(e){u=e.UserHammerData},function(e){h=e.UserVRocketData},function(e){f=e.UserHRocketData},function(e){p=e.UserChangeData},null,function(e){m=e.BlockEventType},function(e){d=e.regEvent,b=e.unRegEvent}],execute:function(){var N,g,y,v,C,R,k,P,D,H,L,E,B;n._RF.push({},"78f40VhcfhCY7Jc3mCz2b2a","Props",void 0);var U=a.ccclass,w=a.property;e("Props",(N=U("Props"),g=w(s),y=w(s),v=w(s),C=w(s),R=w(s),N((D=t((P=function(e){function t(){for(var t,o=arguments.length,n=new Array(o),a=0;a<o;a++)n[a]=arguments[a];return t=e.call.apply(e,[this].concat(n))||this,r(t,"HammerNode",D,i(t)),r(t,"VRocketNode",H,i(t)),r(t,"HRocketNode",L,i(t)),r(t,"RefreshNode",E,i(t)),r(t,"LabelsNode",B,i(t)),t}o(t,e);var n=t.prototype;return n.start=function(){d(m.EVENT_REFRESH_ITEM_NUM,this.refreshProps,this),this.refreshProps()},n.onClose=function(){b(this)},n.onDestroy=function(){b(this)},n.refreshProps=function(){this.setPropState(this.HammerNode,u.inst.itemCount,"hammerLabel"),this.setPropState(this.VRocketNode,h.inst.itemCount,"vrocketLabel"),this.setPropState(this.HRocketNode,f.inst.itemCount,"hrocketLabel"),this.setPropState(this.RefreshNode,p.inst.itemCount,"refreshLabel")},n.setPropState=function(e,t,o){if(0==t)e.getChildByName("haveItemIcon").active=!1,e.getChildByName("watchAd").active=!0,this.LabelsNode.getChildByName(o).active=!1;else if(t>0){e.getChildByName("haveItemIcon").active=!0,e.getChildByName("watchAd").active=!1,this.LabelsNode.getChildByName(o).active=!0,this.LabelsNode.getChildByName(o).getComponent(c).string=t.toString()}},t}(l)).prototype,"HammerNode",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=t(P.prototype,"VRocketNode",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=t(P.prototype,"HRocketNode",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=t(P.prototype,"RefreshNode",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=t(P.prototype,"LabelsNode",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=P))||k));n._RF.pop()}}}));

System.register("chunks:///_virtual/Random.ts",["cc"],(function(n){var t;return{setters:[function(n){t=n.cclegacy}],execute:function(){t._RF.push({},"bda33nRNj9Nua5TGfJPEPQP","Random",void 0);var r=n("Random",function(){function n(n){this._seed=void 0,this._seed=n}var t=n.prototype;return t.random=function(){if(null==this._seed)return Math.random();var n=this._seed+=1831565813,t=n^n>>>15,r=1|n;return n=Math.imul(t,r),(((n^=n+Math.imul(n^n>>>7,61|n))^n>>>14)>>>0)/4294967296},t.randomFloat=function(n,t){return n+this.random()*(t-n)},t.randomInt=function(n,t){var r=n+Math.floor((t-n+1)*this.random());return r>t?t:r},t.shuffleArray=function(n){for(var t=n.length,r=0;r<t-1;r++){var a=this.randomInt(0,t-1),o=n[a];n[a]=n[t-r-1],n[t-r-1]=o}return n},n}());r.inst=new r(1e4*Math.random());var a=window;null==a.Random&&(a.Random=r),t._RF.pop()}}}));

System.register("chunks:///_virtual/RedPointComponent.ts",["./rollupPluginModLoBabelHelpers.js","cc","./RedPointDef.ts","./RedPointManager.ts"],(function(e){var t,n,i,o,r,c,a,s,p,l,u,d;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){r=e.cclegacy,c=e._decorator,a=e.Node,s=e.Enum,p=e.Component},function(e){l=e.emRedPointKeys,u=e.evtRedPoint},function(e){d=e.RedPointManager}],execute:function(){var f,P,h,v,y,m,g,R;r._RF.push({},"f4d8depiOdKXLQEDaDZcPsm","RedPointComponent",void 0);var b=c.ccclass,C=c.property;e("RedPointComponent",(f=b("RedPointComponent"),P=C(a),h=C({type:s(l)}),f((m=t((y=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return t=e.call.apply(e,[this].concat(r))||this,i(t,"ndPoint",m,o(t)),i(t,"pointType",g,o(t)),i(t,"removeAfterClick",R,o(t)),t.redPointMgr=void 0,t}n(t,e);var r=t.prototype;return r.onLoad=function(){this.redPointMgr=d.getInstance(),this.redPointMgr.listen(u.Refresh,this.onRefreshPoint,this);var e=this.redPointMgr.checkPoint(this.pointType);this.ndPoint.active=e>0},r.onRefreshPoint=function(e,t){e==this.pointType&&(this.ndPoint.active=t)},r.onClick=function(){this.ndPoint.active=!1,this.removeAfterClick&&this.redPointMgr.removePoint(this.pointType)},t}(p)).prototype,"ndPoint",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=t(y.prototype,"pointType",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return l.UnclockLevel}}),R=t(y.prototype,"removeAfterClick",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),v=y))||v));r._RF.pop()}}}));

System.register("chunks:///_virtual/RedPointDef.ts",["cc"],(function(e){var n;return{setters:[function(e){n=e.cclegacy}],execute:function(){n._RF.push({},"ae68cgDllpD2Z2Nq2ZWo5BJ","RedPointDef",void 0);e("emRedPointKeys",function(e){return e[e.None=0]="None",e[e.UnclockLevel=1]="UnclockLevel",e}({})),e("evtRedPoint",{Refresh:"Refresh"});n._RF.pop()}}}));

System.register("chunks:///_virtual/RedPointManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./FlagData.ts","./UserData.ts","./BlockEventManager.ts","./Singleton.ts","./RedPointDef.ts","./EventType.ts"],(function(t){var n,e,i,o,s,r,a,c,h,l;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy,i=t.EventTarget},function(t){o=t.FlagData},function(t){s=t.UserData},function(t){r=t.BlockEventManager},function(t){a=t.Singleton},function(t){c=t.emRedPointKeys,h=t.evtRedPoint},function(t){l=t.Events}],execute:function(){e._RF.push({},"05be1hVOIlNpLiemXdYXqBo","RedPointManager",void 0);t("RedPointManager",function(t){function e(){for(var n,e=arguments.length,i=new Array(e),o=0;o<e;o++)i[o]=arguments[o];return(n=t.call.apply(t,[this].concat(i))||this)._points=void 0,n._event=void 0,n}n(e,t);var a=e.prototype;return a.Init=function(){var t=this;this._points=new Map,this._event=new i,s.inst.isOpenLevel&&!this.hasPointFlag(c.UnclockLevel)&&this._points.set(c.UnclockLevel,1),r.instance.listenOnce(l.UNLOCK_LEVEL,(function(){t.addPoint(c.UnclockLevel)}),this)},a.UnInit=function(){},a.addPoint=function(t,n){void 0===n&&(n=!0),n&&this.hasPointFlag(t)||(this._points.set(t,1),o.inst.recordFlag("rp_"+t,!1),this._event.emit(h.Refresh,t,!0))},a.removePoint=function(t){this.hasPointFlag(t)||(this._points.has(t)&&this._points.delete(t),o.inst.recordFlag("rp_"+t,!0),this._event.emit(h.Refresh,t,!1))},a.hasPointFlag=function(t){return o.inst.hasFlag("rp_"+t)},a.removePointFlag=function(t){o.inst.recordFlag("rp_"+t)},a.checkPoint=function(t){return this._points&&this._points.has(t)?this._points.get(t):0},a.listen=function(t,n,e){return this._event.on(t,n,e,!1),this},a.unlisten=function(t,n,e){return this._event.off(t,n,e),this},a.listenOnce=function(t,n,e){return this._event.once(t,n,e),this},e}(a));e._RF.pop()}}}));

System.register("chunks:///_virtual/ReleaseManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Manager.ts","./enum.ts","./ScrollManager.ts"],(function(t){var e,i,a,s,n,r,o,l,h,p;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.createClass,a=t.inheritsLoose,s=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){r=t.cclegacy,o=t._decorator},function(t){l=t.Manager},function(t){h=t.ReleaseState},function(t){p=t.ScrollManager}],execute:function(){var _,u,c,d,f,g,L,b,v,S,E,m,R,w;r._RF.push({},"584779mBRhND6eHOQ3xrp/1","ReleaseManager",void 0);var y=o.ccclass,M=o.property,O=function(t){return t[t.ON_PULL_UP=0]="ON_PULL_UP",t[t.ON_PULL_DOWN=1]="ON_PULL_DOWN",t[t.ON_PULL_LEFT=2]="ON_PULL_LEFT",t[t.ON_PULL_RIGHT=3]="ON_PULL_RIGHT",t}(O||{}),U=(t("ReleaseManager",(_=y("ReleaseManager"),u=M("boolean"),c=M({range:[0,1],slide:!0,step:.01,visible:function(){return this.enabled},tooltip:"根据此阈值来切换state状态"}),d=M({range:[0,1],slide:!0,step:.01,visible:function(){return this.enabled},tooltip:"根据此阈值来切换state状态"}),f=M({range:[0,1],slide:!0,step:.01,visible:function(){return this.enabled},tooltip:"根据此阈值来切换state状态"}),g=M({range:[0,1],slide:!0,step:.01,visible:function(){return this.enabled},tooltip:"根据此阈值来切换state状态"}),_(((w=function(t){function e(){for(var e,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return e=t.call.apply(t,[this].concat(a))||this,s(e,"_enabled",v,n(e)),s(e,"left",S,n(e)),s(e,"right",E,n(e)),s(e,"top",m,n(e)),s(e,"bottom",R,n(e)),e._pullUp=void 0,e._pullDown=void 0,e._pullLeft=void 0,e._pullRight=void 0,e}a(e,t);var r=e.prototype;return r.onInit=function(){this.enabled&&(this._pullUp=new U(this,O.ON_PULL_UP,this.bottom),this._pullDown=new U(this,O.ON_PULL_DOWN,this.top),this._pullLeft=new U(this,O.ON_PULL_LEFT,this.right),this._pullRight=new U(this,O.ON_PULL_RIGHT,this.left),this.adapter.scrollManager.on(p.Event.ON_SCROLL_START,this.onScrollStart,this),this.adapter.scrollManager.on(p.Event.ON_SCROLL_END,this.onScrollEnd,this),this.adapter.scrollManager.on(p.Event.ON_SCROLL_CANCEL,this.onScrollEnd,this),this.checkLoop())},r.checkLoop=function(){this.adapter.isHorizontal?this.adapter.isArrangeAxisStart?(this.left>0&&(this.adapter.viewManager.loopHeader=!1),this.right>0&&(this.adapter.viewManager.loopFooter=!1)):(this.left>0&&(this.adapter.viewManager.loopFooter=!1),this.right>0&&(this.adapter.viewManager.loopHeader=!1)):this.adapter.isArrangeAxisStart?(this.top>0&&(this.adapter.viewManager.loopHeader=!1),this.bottom>0&&(this.adapter.viewManager.loopFooter=!1)):(this.top>0&&(this.adapter.viewManager.loopFooter=!1),this.bottom>0&&(this.adapter.viewManager.loopHeader=!1))},r.onScrollStart=function(){this.adapter.isHorizontal?(this.left>0&&this._pullRight._setState(h.IDLE),this.right>0&&this._pullLeft._setState(h.IDLE)):(this.top>0&&this._pullDown._setState(h.IDLE),this.bottom>0&&this._pullUp._setState(h.IDLE))},r.onScrollEnd=function(){this.adapter.isHorizontal?(this.left>0&&this._pullRight._setState(h.RELEASE),this.right>0&&this._pullLeft._setState(h.RELEASE)):(this.top>0&&this._pullDown._setState(h.RELEASE),this.bottom>0&&this._pullUp._setState(h.RELEASE))},r.internal_lateUpdate=function(t){if(this.enabled){var e=this.adapter.scrollManager.boundaryOffset;this.adapter.scrollManager.dragging||(e=0),this.adapter.isHorizontal?(this.left>0&&this._pullRight._set(Math.max(-e,0),e<0),this.right>0&&this._pullLeft._set(Math.max(e,0),e>0)):(this.top>0&&this._pullDown._set(Math.max(e,0),e>0),this.bottom>0&&this._pullUp._set(Math.max(-e,0),e<0))}},i(e,[{key:"enabled",get:function(){return this._enabled},set:function(t){t!=this._enabled&&(this._enabled=t)}},{key:"max",get:function(){return this.enabled?this.adapter.isHorizontal?this._pullLeft?this._pullLeft.expand:0:this._pullDown?this._pullDown.expand:0:0}},{key:"min",get:function(){return this.enabled?this.adapter.isHorizontal?this._pullRight?this._pullRight.expand:0:this._pullUp?this._pullUp.expand:0:0}}]),e}(l)).Event=O,v=e((b=w).prototype,"_enabled",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),e(b.prototype,"enabled",[u],Object.getOwnPropertyDescriptor(b.prototype,"enabled"),b.prototype),S=e(b.prototype,"left",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),E=e(b.prototype,"right",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),m=e(b.prototype,"top",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),R=e(b.prototype,"bottom",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),L=b))||L)),t("ReleaseEvent",function(){function t(t,e,i){this._expand=0,this._progress=0,this._offset=0,this._state=void 0,this._defaultPercentage=void 0,this._manager=void 0,this._event=void 0,this._stop=void 0,this._defaultPercentage=i,this._manager=t,this._event=e}var e=t.prototype;return e._set=function(t,e){e&&(this._stop=!1),this._stop||(this._offset=t,this._progress=t/(this._defaultPercentage*this._manager.adapter.mainAxisSize),this._stop=this._offset<=.1,this._setState(h.PULL),this._manager.emit(this._event,this))},e._setState=function(t){this._state!=h.WAIT&&(t==h.PULL&&this._state==h.RELEASE||(this._state=t))},e.wait=function(t){void 0===t&&(t=this._defaultPercentage*this._manager.adapter.mainAxisSize),this._expand=t,this._state=h.WAIT},e.release=function(){this._expand=0,this._state=h.IDLE,this.offset<=.1&&(this._offset=0,this._progress=0,this._manager.emit(this._event,this))},i(t,[{key:"expand",get:function(){return this._expand}},{key:"progress",get:function(){return this._progress}},{key:"offset",get:function(){return this._offset}},{key:"state",get:function(){return this._state}}]),t}()));r._RF.pop()}}}));

System.register("chunks:///_virtual/RemoteConfig.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Singleton.ts"],(function(t){var n,e,o,i;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy,o=t.assetManager},function(t){i=t.Singleton}],execute:function(){e._RF.push({},"d06eaWaMAxMAoBBI4gnnmDj","RemoteConfig",void 0);t("RemoteConfig",function(t){function e(){for(var n,e=arguments.length,o=new Array(e),i=0;i<e;i++)o[i]=arguments[i];return(n=t.call.apply(t,[this].concat(o))||this).ReviviTimesEndless=3,n.ReviviTimesAdventure=3,n.PropHammerInitCount=1,n.PropVRocketInitCount=1,n.PropHRocketInitCount=1,n.PropRefreshInitCount=1,n.originData=void 0,n}n(e,t);var i=e.prototype;return i.Init=function(){throw new Error("Method not implemented.")},i.UnInit=function(){throw new Error("Method not implemented.")},i.initConfig=function(t){var n=t.json;return this.originData=n,n&&(this.ReviviTimesEndless=n.ReviviTimesEndless||3,this.ReviviTimesAdventure=n.ReviviTimesAdventure||3,this.PropHammerInitCount=n.PropHammerInitCount||1,this.PropVRocketInitCount=n.PropVRocketInitCount||1,this.PropHRocketInitCount=n.PropHRocketInitCount||1,this.PropRefreshInitCount=n.PropRefreshInitCount||1),this},e.LoadRemote=function(){return new Promise((function(t,n){var i=new Date,r="https://waxiaoqn.nalrer.cn/waxiao/block_remote_config.json?time="+new Date(i.getFullYear(),i.getMonth(),i.getDate(),i.getHours(),0,0,0).getTime();o.loadRemote(r,(function(o,i){if(o)return console.error(o),void n(null);var r=e.getInstance().initConfig(i);t(r)}))}))},e}(i));e._RF.pop()}}}));

System.register("chunks:///_virtual/ResManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Singleton.ts"],(function(n){var e,t,o,r,u,i,c;return{setters:[function(n){e=n.inheritsLoose},function(n){t=n.cclegacy,o=n.assetManager,r=n.instantiate,u=n.director,i=n.resources},function(n){c=n.Singleton}],execute:function(){t._RF.push({},"8bfbb6woB1DNZWWIdkDU12I","ResManager",void 0);n("ResManager",function(n){function t(){return n.apply(this,arguments)||this}e(t,n);var c=t.prototype;return c.Init=function(){},c.UnInit=function(){},c.loadBundle=function(n){return new Promise((function(e,t){var r=o.getBundle(n);r?e(r):o.loadBundle(n,(function(n,o){n?t(n):e(o)}))}))},c.releaseBundle=function(n){o.removeBundle(o.getBundle(n))},c.loadBundleWithProgress=function(n,e,t){return new Promise((function(r,u){o.loadBundle(n,{onFileProgress:function(n){e.call(t,n.progress)}},(function(n,e){n?u(n):r(e)}))}))},c.loadAsset=function(n,e){var t=this;return new Promise((function(o,r){t.loadBundle(e).then((function(e){e.load(n,(function(n,e){n?r(n):o(e)}))})).catch((function(n){r(n)}))}))},c.loadNode=function(n,e,t){var o=this;return new Promise((function(u,i){o.loadAsset(n,e).then((function(n){var e=r(n);t&&e.setParent(t),u(e)})).catch(console.error)}))},c.loadSpriteFrame=function(n,e){return this.loadAsset(n+"/spriteFrame",e)},c.loadSpriteFrameSync=function(n,e){return this.loadAssetSync(n+"/spriteFrame",e)},c.loadAssetSync=function(n,e){var t=i;if(e&&(t=o.getBundle(e)),t){var r,u=null==(r=t)?void 0:r.getInfoWithPath(n);return null==u||null==u.uuid?null:o.assets.get(u.uuid)}return null},c.loadAudio=function(n){return this.loadAsset(n,"sounds")},c.loadScene=function(n,e){var t=this;return new Promise((function(o,r){t.loadBundle(e).then((function(e){e.loadScene(n,(function(n,e){n?r(n):o(e)}))})).catch((function(n){console.error(n),r(n)}))}))},c.gotoScene=function(n,e){var t=this;return new Promise((function(o,r){t.loadBundle(e).then((function(e){e.loadScene(n,(function(n,e){n?r(n):u.runScene(e,(function(){}),(function(){o()}))}))})).catch((function(n){console.error(n),r(n)}))}))},c.loadBundleRes=function(n,e,t){var o=this;return void 0===n&&(n=["res/"]),new Promise((function(r,u){0!=n.length?o.loadBundle(e).then((function(e){var o,i=[];null==(o=n)||o.forEach((function(n){i=i.concat(e.getDirWithPath(n).map((function(n){return n.path})))}));for(var c=i.length,l=[],a=function(o){l.push(new Promise((function(r,u){e.loadDir(n[o],(function(n,e,o){var r=-1;o.info&&(r=i.indexOf(o.info.path,0)),r>-1&&i.splice(r,1),null==t||t(c-i.length,c)}),(function(n,e){null==n?r():u()}))})))},s=0;s<n.length;s++)a(s);Promise.all(l).then((function(){r()})).catch((function(){u()}))})).catch((function(n){u(n)})):r()}))},c.releaseAsset=function(n,e){var t;null==(t=o.getBundle(e))||t.release(n)},c.preloadAsset=function(n,e){this.loadBundle(e).then((function(e){e.preload(n)})).catch((function(n){console.error(n)}))},c.preloadScene=function(n,e){var t=this;return new Promise((function(o,r){t.loadBundle(e).then((function(e){e.preloadScene(n,(function(){o(n)}))})).catch((function(e){console.error(e),r(n)}))}))},t}(c));t._RF.pop()}}}));

System.register("chunks:///_virtual/ReviveView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AdSdk.ts","./MK.ts","./AssetInfoDefine.ts","./PanelBase.ts","./UITweenBarComponent.ts","./BIDefine.ts","./Boot.ts","./Enumrations.ts","./emAdPath.ts","./SdkError.ts","./SdkManager.ts","./LanguageManager.ts","./SocialDef.ts","./WechatMiniApi.ts","./ResManager.ts","./Util.ts","./UserData.ts","./sdk.ts"],(function(e){var t,i,n,a,r,o,s,c,l,u,h,v,d,m,f,g,p,S,_,R,B,I,T,w,A,k,y,W;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){r=e.cclegacy,o=e._decorator,s=e.ProgressBar,c=e.Node,l=e.Sprite,u=e.Animation},function(e){h=e.AdSdk},null,function(e){v=e.AssetInfoDefine},function(e){d=e.default},function(e){m=e.UITweenBarComponent},function(e){f=e.BIEventID,g=e.emAdStatus},function(e){p=e.audio},function(e){S=e.kGameMode},function(e){_=e.emAdPath},function(e){R=e.emSdkErrorCode},function(e){B=e.SdkManager},function(e){I=e.LanguageManager},function(e){T=e.emSharePath},function(e){w=e.WechatMiniApi},function(e){A=e.ResManager},function(e){k=e.Util},function(e){y=e.UserData},function(e){W=e.SDK}],execute:function(){var b,C,D,F,M,P,L,U,G;r._RF.push({},"b6c3dnohjFPq7IODonu4oOx","ReviveView",void 0);var N=o.ccclass,x=o.property;e("ReviveView",(b=N("ReviveView"),C=x(s),D=x(c),F=x(l),b((L=t((P=function(e){function t(){for(var t,i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,n(t,"timeBar",L,a(t)),n(t,"timeAnim",U,a(t)),n(t,"reviveSign",G,a(t)),t.manager=void 0,t.onTimeFinish=void 0,t.holder=void 0,t.mode=void 0,t.reviveTimes=0,t.isWatching=!1,t}i(t,e);var r=t.prototype;return r.start=function(){var t=this;e.prototype.start.call(this),this.timeAnim&&this.timeAnim.getComponent(u).play(),m.Begin(this.timeBar,0,1,5.1,0,(function(){t&&!t.isWatching&&t.node&&t.node.isValid&&(t.onTimeFinish.call(t.holder),t.closeSelf())})).addProgressListener((function(e){t.timeBar.progress=e}),this),h.inst.showPopBannerAd(),this.scheduleOnce((function(){t.refreshBtnState()}),.1),this.mode==S.adventure_level&&this.manager&&this.manager.checkIsLevelComplete()&&this.closeSelf()},r.refreshBtnState=function(){var e=this;y.inst.getCanShareRevive()?A.getInstance().loadSpriteFrame("res/texture/revive/UI_Stickerfinish_btn_icon_share","block").then((function(t){e.reviveSign.spriteFrame=t})):A.getInstance().loadSpriteFrame("res/texture/revive/UI_Restart_icon_ad","block").then((function(t){e.reviveSign&&(e.reviveSign.spriteFrame=t)}))},r.onWillClose=function(){e.prototype.onWillClose.call(this),h.inst.hidePopBannerAd()},r.onSetData=function(e){this.manager=e.manager,this.onTimeFinish=e.onTimeFinish,this.holder=e.holder,this.mode=e.mode,this.reviveTimes=e.reviveTimes},r.onClickRelife=function(){var e=this;if(!this.isWatching)if(this.mode==S.adventure_level&&this.manager&&this.manager.checkIsLevelComplete())this.closeSelf();else{if(y.inst.tryShareRevive()){var t=k.generateRandomShowOffShare();return w.getInstance().showShare(t,T.revive,this,(function(){p.playSubSound(v.audio.touch),e.manager.relifeCurrentLevel(),e.closeSelf()}),{},(function(){console.log("failed to share")})),void this.refreshBtnState()}W.instance.reportBI(f.ad_revivie,{ad_status:g.WakeUp,ad_mode:this.mode,revive_num:y.inst.getThisGameWatchReviveNum()}),this.isWatching=!0,h.inst.showRewardVideoAd(this.mode==S.adventure_level?_.Level_Relife:_.Score_Relife).then((function(t){e.isWatching=!1,p.playSubSound(v.audio.touch),e.manager.relifeCurrentLevel();var i=y.inst.getThisGameWatchReviveNum();y.inst.setThisGameWatchReviveNum(i+1),e.closeSelf(),W.instance.reportBI(f.ad_revivie,{ad_status:g.Finished,ad_mode:e.mode,revive_num:y.inst.getThisGameWatchReviveNum()})})).catch((function(t){if(e.isWatching=!1,e.onTimeFinish.call(e.holder),e.closeSelf(),t.errMsg==R.Sdk_Ad_Close_Reward)return W.instance.reportBI(f.ad_revivie,{ad_status:g.Closed,ad_mode:e.mode,revive_num:y.inst.getThisGameWatchReviveNum()}),void B.getInstance().native.showToast(I.translateText("tip_not_finish_watch"));W.instance.reportBI(f.ad_revivie,{ad_status:g.Error,ad_mode:e.mode,revive_num:y.inst.getThisGameWatchReviveNum()}),B.getInstance().native.showToast(I.translateText("tip_ad_fail"))}))}},t}(d)).prototype,"timeBar",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=t(P.prototype,"timeAnim",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=t(P.prototype,"reviveSign",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=P))||M));r._RF.pop()}}}));

System.register("chunks:///_virtual/SceneAdventureLevelSelectV2.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ResManager.ts","./NodePool.ts","./Util.ts","./BlockEntity.ts","./UserAdventureLevelData.ts","./AssetInfoDefine.ts","./SdkEventManager.ts","./SdkEventType.ts","./AdSdk.ts","./MKAudio.ts","./BIDefine.ts","./ProcedureToHome.ts","./ProcedureToLevel.ts","./Enumrations.ts","./SceneMode.ts","./MK.ts","./Global.ts","./PanelManager.ts","./AlbumData.ts","./ProcedureToAdventureLevelSelectV2.ts","./Boot.ts","./MKLocalStorage.ts","./sdk.ts"],(function(e){var t,n,i,o,r,a,s,l,u,c,d,f,p,h,v,b,g,S,m,L,y,B,w,C,k,_,D,M,A,E,P,z,N,x,I,T,F,H,V,O,U,G,j;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){r=e.cclegacy,a=e._decorator,s=e.Node,l=e.Label,u=e.Sprite,c=e.Button,d=e.EditBox,f=e.Vec3,p=e.tween,h=e.Component,v=e.ParticleSystem2D,b=e.Animation},function(e){g=e.ResManager},function(e){S=e.NodePoolManager},function(e){m=e.Util},function(e){L=e.BlockEntity},function(e){y=e.UserAdventureLevelData},function(e){B=e.AssetInfoDefine},function(e){w=e.SdkEventManager},function(e){C=e.SdkEventType},function(e){k=e.AdSdk},function(e){_=e.audioManager},function(e){D=e.BIEventID,M=e.emButtonType,A=e.emButtonScene},function(e){E=e.ProcedureToHome},function(e){P=e.ProcedureToLevel},function(e){z=e.kGameMode},function(e){N=e.SceneMode},null,function(e){x=e.Global},function(e){I=e.PanelManager},function(e){T=e.AlbumData,F=e.emStageStickerStatus},function(e){H=e.ProcedureToAdventureLevelSelectV2},function(e){V=e.fsm,O=e.audio},function(e){U=e.getItem,G=e.removeItem},function(e){j=e.SDK}],execute:function(){var R,K,q,W,J,Q,Y,Z,X,$,ee,te,ne,ie,oe,re,ae,se,le,ue,ce,de,fe,pe,he,ve,be,ge,Se,me,Le,ye,Be,we,Ce,ke,_e,De,Me,Ae,Ee,Pe,ze;r._RF.push({},"d6699xYMQ5JdqPnV+qBkrh6","SceneAdventureLevelSelectV2",void 0);var Ne=a.ccclass,xe=a.property;e("SceneAdventureLevelSelectV2",(R=Ne("SceneAdventureLevelSelectV2"),K=xe(s),q=xe(s),W=xe(s),J=xe(s),Q=xe(l),Y=xe(l),Z=xe(l),X=xe(u),$=xe(u),ee=xe(u),te=xe(l),ne=xe(s),ie=xe(u),oe=xe(u),re=xe(c),ae=xe(u),se=xe(u),le=xe(d),ue=xe(d),ce=xe(s),R((pe=t((fe=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t=e.call.apply(e,[this].concat(r))||this,i(t,"boardNode",pe,o(t)),i(t,"guideHand",he,o(t)),i(t,"btnContent",ve,o(t)),i(t,"finishStageContent",be,o(t)),i(t,"daysLeft",ge,o(t)),i(t,"hoursLeft",Se,o(t)),i(t,"minutesLeft",me,o(t)),i(t,"daysLeftSprite",Le,o(t)),i(t,"hoursLeftSprite",ye,o(t)),i(t,"minLeftSprite",Be,o(t)),i(t,"labCurrentLevel",we,o(t)),i(t,"nextLabelObj",Ce,o(t)),i(t,"normalBtnSprite",ke,o(t)),i(t,"hardGameBtnSprite",_e,o(t)),i(t,"stickerEnterBtn",De,o(t)),i(t,"boardBgSprite",Me,o(t)),i(t,"descriptionSprite",Ae,o(t)),i(t,"levelChooseEditBox",Ee,o(t)),i(t,"stageEndCountDownEditBox",Pe,o(t)),i(t,"bookNode",ze,o(t)),t.currentLeftTime=-1,t}n(t,e);var r=t.prototype;return r.onLoad=function(){this.initNodePool(),this.processCountDownTime(),this.setNextLevelButton(),this.CreateView=this.CreateView.bind(this),this.levelChooseEditBox.inputMode=d.InputMode.NUMERIC},r.start=function(){"finished"==V.getData(H,"defaultKey")&&(V.setData(H,"defaultKey",null),I.inst.addPopUpView(B.prefab.adventureFinishAll.path,{bookNode:this.bookNode}));var e=y.inst.getLevelBatchNumber(),t=y.inst.getHistoryLevelWithBatchNumber(e);this.checkisAllLevelFinished(),this.createSelectBoardBlocks(e,t),this.nextLabelObj.getComponent(l).string=y.inst.getHistoryLevel().toString(),k.inst.hideMainPageBannerAd(),w.getInstance().register(C.GAME_SHOW,(function(){_.instance.playMusic(!0)}),this),_.instance.changeMusic(B.audio.tmp_bgm,!0);var n=new f(200,-80,0);p(this.guideHand).repeatForever(p().to(.5,{position:new f(175,-55,0)},{easing:"circOut"}).to(.5,{position:n},{easing:"circOut"})).start()},r.checkisAllLevelFinished=function(){var e=this,t=y.inst.isAllLevelFinished,n=y.inst.getLevelBatchNumber();1!=t?(this.btnContent.active=!0,this.finishStageContent.active=!1,g.getInstance().loadSpriteFrame("res/texture/adventure/UI_AdventureSticker_content2","block").then((function(t){e.descriptionSprite.spriteFrame=t})),T.inst.setStageStickerStatus(n,F.not_obtained)):(this.btnContent.active=!1,this.finishStageContent.active=!0,g.getInstance().loadSpriteFrame("res/texture/adventure/UI_AdventureSticker_content1","block").then((function(t){e.descriptionSprite.spriteFrame=t})),T.inst.setStageStickerStatus(n,F.obtained))},r.initNodePool=function(){m.createPool("SelectBoardPool","res/prefab/blocks/blockEntity",357)},r.setNextLevelButton=function(){this.nextLabelObj.getComponent(l).string=y.inst.getHistoryLevel().toString()},r.createSelectBoardBlocks=function(e,t){var n=this,i="res/configs/level_select_stage"+e.toString(),o=new Map;x.LevelSelectBoard&&x.LevelSelectBoard.size>0&&x.LevelSelectBoard.has(e)&&(o=x.LevelSelectBoard.get(e));var r="res/texture/adventure/UI_AdventureSticker_fish"+e.toString()+"background";g.getInstance().loadSpriteFrame(r,"block").then((function(e){n.boardBgSprite.spriteFrame=e})).then((function(){o&&0!==o.size?n.CreateView(o,t):g.getInstance().loadAsset(i,"block").then((function(e){var t=e.json;if(t)if(n.boardNode){for(var i=t.board,r=0;r<i.length;r++){var a=100*i[r].x+i[r].y;o.set(a,i[r])}x.LevelSelectBoard.set(t.stage,o)}else console.error("board node not found")})).then((function(){n.CreateView(o,t)}))}))},r.CreateView=function(e,t){var n=this,i=S.inst.getPool("SelectBoardPool");if(i){e.forEach((function(i,o){i.level!==t||i.isHard&&(e.get(o).isHard?(n.normalBtnSprite.node.active=!1,n.hardGameBtnSprite.node.active=!0):(n.hardGameBtnSprite.node.active=!1,n.normalBtnSprite.node.active=!0))}));var o=-1,r=U("Level_Passed_Last");r&&(o=r.af_adventure_level);for(var a=0;a<21;a++)for(var s=function(){var r=100*l+a,s=0;e.has(r)&&i.getAsync().then((function(i){if(n.node){i.parent=n.boardNode;var a=i.getComponent(L),l=e.get(r),u=l.level;if((t-1>=u||t===u&&y.inst.isAllLevelFinished)&&(s=l.blockType),a.refreshColorSelectLevel(s),i.setPosition(n.calculateBlockposition(l.y,16-l.x)),u==o){var c=B.prefab.ef_AdventureSticker_fk_light;g.getInstance().loadNode(c.path,c.bundle,a.node).then((function(e){e.setPosition(f.ZERO);var t=e.getComponent(v);t&&t.resetSystem();var n=e.getComponent(b);n&&n.play(),G("Level_Passed_Last")})),a.node.setScale(0,0,1),p(a.node).to(.5,{scale:f.ONE},{easing:"quadOut"}).start()}}}))},l=0;l<17;l++)s()}else console.error("failed to get the pool")},r.calculateBlockposition=function(e,t){if(this.boardBgSprite.spriteFrame){var n=-this.boardBgSprite.spriteFrame.originalSize.x/2,i=this.boardBgSprite.spriteFrame.originalSize.y/2;return new f(32*e+n+16,32*(t-13)+i-125.5+16)}},r.processCountDownTime=function(){var e=Date.now(),t=y.inst.getBatchDeadlineData();if(t<0){var n=y.inst.getBatchDeadlineData();n<Date.now()&&(n=(new Date).getTime()+6048e5,y.inst.updateBatchDeadline(n)),t=n}var i=t-e;i>0?(this.setCountDownTimeFormat(i/1e3),this.startCountdown(i/1e3)):this.onCountdownEnd()},r.setCountDownTimeFormat=function(e){var t=Math.floor(e/86400),n=Math.floor(e%86400/3600),i=Math.floor(e%3600/60);t>0?(this.daysLeftSprite.node.active=!0,this.daysLeft.string=t.toString(),this.hoursLeftSprite.node.active=!0,this.hoursLeft.string=n.toString(),this.minLeftSprite.node.active=!1,this.minutesLeft.string=""):n>0?(this.daysLeftSprite.node.active=!1,this.daysLeftSprite.string="",this.hoursLeftSprite.node.active=!0,this.hoursLeft.string=n.toString(),this.minLeftSprite.node.active=!0,this.minutesLeft.string=i.toString()):i>=0&&(this.daysLeftSprite.node.active=!1,this.daysLeftSprite.string="",this.hoursLeftSprite.node.active=!1,this.hoursLeft.string="",this.minLeftSprite.node.active=!0,this.minutesLeft.string=i.toString())},r.startCountdown=function(e){this.currentLeftTime=e,this.schedule(this.updateCountdown,1)},r.onCountdownEnd=function(){console.log("Countdown ended!"),T.inst.setStageStickerStatus(y.inst.getLevelBatchNumber(),F.missed),y.inst.ResetBatch(),this.setNextLevelButton()},r.updateCountdown=function(){this.currentLeftTime>0?(this.currentLeftTime--,this.setCountDownTimeFormat(this.currentLeftTime)):(this.unschedule(this.updateCountdown),this.onCountdownEnd())},r.onClickHome=function(){O.playSubSound(B.audio.touch),N.gameMode=z.none,V.changeState(E,"adventure_level_select")},r.onClickNextLevel=function(){j.instance.reportBI(D.btn_click,{btn_type:M.click_adventure_start,scene:A.from_adventure_choose_level}),O.playSubSound(B.audio.touch);var e=y.inst.getMaxHistoryLevel();O.playSubSound(B.audio.touch),N.gameMode=z.adventure_level,y.inst.updateHistoryLevel(e),V.changeState(P,"adventure_level_select")},r.onClickSticker=function(){j.instance.reportBI(D.btn_click,{btn_type:M.enter_mysticker,scene:A.from_adventure_choose_level}),I.inst.addPopUpView(B.prefab.album.path)},r.onSetCurrLevel=function(e){y.inst.getHistoryLevel();var t=e.string,n=parseInt(t,10);Number.isInteger(n)&&n>=1&&n<=300&&(y.inst.updateHistoryLevel(n),y.inst.updateMaxHistoryLevelForce(n),this.nextLabelObj.getComponent(l).string=t,y.inst.clearLevelHistoryData(),y.inst.clearLevelFinishdData())},r.onSetCurrStageCountDown=function(e){var t=e.string,n=parseInt(t,10);Number.isInteger(n)&&n>=0&&(y.inst.updateBatchDeadline(Date.now()+1e3*n),this.unschedule(this.updateCountdown),this.processCountDownTime())},r.onDestroy=function(){this.unschedule(this.updateCountdown)},t}(h)).prototype,"boardNode",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),he=t(fe.prototype,"guideHand",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ve=t(fe.prototype,"btnContent",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),be=t(fe.prototype,"finishStageContent",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ge=t(fe.prototype,"daysLeft",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Se=t(fe.prototype,"hoursLeft",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),me=t(fe.prototype,"minutesLeft",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Le=t(fe.prototype,"daysLeftSprite",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ye=t(fe.prototype,"hoursLeftSprite",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Be=t(fe.prototype,"minLeftSprite",[ee],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),we=t(fe.prototype,"labCurrentLevel",[te],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ce=t(fe.prototype,"nextLabelObj",[ne],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ke=t(fe.prototype,"normalBtnSprite",[ie],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_e=t(fe.prototype,"hardGameBtnSprite",[oe],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),De=t(fe.prototype,"stickerEnterBtn",[re],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Me=t(fe.prototype,"boardBgSprite",[ae],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ae=t(fe.prototype,"descriptionSprite",[se],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ee=t(fe.prototype,"levelChooseEditBox",[le],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Pe=t(fe.prototype,"stageEndCountDownEditBox",[ue],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ze=t(fe.prototype,"bookNode",[ce],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),de=fe))||de));r._RF.pop()}}}));

System.register("chunks:///_virtual/SceneDefine.ts",["cc"],(function(e){var n;return{setters:[function(e){n=e.cclegacy}],execute:function(){n._RF.push({},"f09d62Yt6RDO5HGSsVT2aIc","SceneDefine",void 0);e("emSceneName",function(e){return e.Home="home",e.Level="level",e.Select="level_select",e.Game="game",e.Loading="loading",e.AdventureLevel="adventure_level_select",e}({}));n._RF.pop()}}}));

System.register("chunks:///_virtual/SceneGame.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PanelManager.ts","./AssetInfoDefine.ts","./Game.ts","./MK.ts","./GuideData.ts","./SceneMode.ts","./Enumrations.ts","./LevelGuideData.ts","./UserData.ts","./BIDefine.ts","./MKAudio.ts","./SdkEventManager.ts","./SdkEventType.ts","./Boot.ts","./sdk.ts"],(function(e){var n,t,i,s,a,o,c,u,r,f,d,p,l,g,m,v,M,S,G,y;return{setters:[function(e){n=e.inheritsLoose},function(e){t=e.cclegacy,i=e._decorator,s=e.Component},function(e){a=e.PanelManager},function(e){o=e.AssetInfoDefine},function(e){c=e.Game},null,function(e){u=e.GuideData},function(e){r=e.SceneMode},function(e){f=e.kGameMode},function(e){d=e.LevelGuideData},function(e){p=e.UserData},function(e){l=e.BIEventID,g=e.emButtonType,m=e.emButtonScene},function(e){v=e.audioManager},function(e){M=e.SdkEventManager},function(e){S=e.SdkEventType},function(e){G=e.audio},function(e){y=e.SDK}],execute:function(){var D;t._RF.push({},"45906WR51xK/oK7jOaYru5P","SceneGame",void 0);var _=i.ccclass;i.property,e("SceneGame",_("SceneGame")(D=function(e){function t(){return e.apply(this,arguments)||this}n(t,e);var i=t.prototype;return i.start=function(){r.gameMode==f.endless?u.inst.isGuideFinished():r.gameMode==f.adventure_level&&d.inst.isGuideFinished(),M.getInstance().register(S.GAME_SHOW,(function(){v.instance.playMusic(!0)}),this),v.instance.changeMusic(o.audio.block_game_bgm,!0)},i.onBtnClicKSetting=function(){if(G.playBtnEffect(),p.inst.isOpenLevel)return y.instance.reportBI(l.btn_click,{btn_type:g.enter_settings,scene:m.from_classic}),void a.inst.addPopUpView(o.prefab.setting.path,c.inst);a.inst.addPopUpView(o.prefab.setting.path,c.inst)},i.onDestroy=function(){c.inst.destroy()},t}(s))||D);t._RF.pop()}}}));

System.register("chunks:///_virtual/SceneHome.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MK.ts","./AdSdk.ts","./AssetInfoDefine.ts","./ProcedureToGame.ts","./Enumrations.ts","./SceneMode.ts","./ProcedureToAdventureLevelSelectV2.ts","./UserData.ts","./PanelManager.ts","./MKAudio.ts","./BIDefine.ts","./UserAdventureLevelData.ts","./ProcedureToHome.ts","./NodePool.ts","./SdkEventManager.ts","./SdkEventType.ts","./GuideData.ts","./GameDefine.ts","./AlbumData.ts","./SocialDef.ts","./WechatMiniApi.ts","./Boot.ts","./LanguageManager.ts","./SdkError.ts","./SdkManager.ts","./emAdPath.ts","./Util.ts","./ResManager.ts","./sdk.ts"],(function(e){var t,n,i,a,o,r,s,c,u,l,d,h,m,f,g,p,b,v,S,y,_,T,A,w,P,C,L,B,M,k,I,D,G,N,H,F,z,E,R,W,O,U,x,V,K,j,q,J,Q;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){o=e.cclegacy,r=e._decorator,s=e.Node,c=e.Animation,u=e.Label,l=e.Sprite,d=e.Tween,h=e.director,m=e.Vec3,f=e.tween,g=e.Component},null,function(e){p=e.AdSdk},function(e){b=e.AssetInfoDefine},function(e){v=e.ProcedureToGame},function(e){S=e.kGameMode},function(e){y=e.SceneMode},function(e){_=e.ProcedureToAdventureLevelSelectV2},function(e){T=e.UserData},function(e){A=e.PanelManager},function(e){w=e.audioManager},function(e){P=e.BIEventID,C=e.emButtonType,L=e.emButtonScene,B=e.emScene,M=e.emAdStatus},function(e){k=e.UserAdventureLevelData},function(e){I=e.ProcedureToHome},function(e){D=e.NodePoolManager},function(e){G=e.SdkEventManager},function(e){N=e.SdkEventType},function(e){H=e.GuideData},function(e){F=e.buildInfo},function(e){z=e.AlbumData,E=e.emStageStickerStatus},function(e){R=e.emSharePath},function(e){W=e.WechatMiniApi},function(e){O=e.fsm,U=e.audio},function(e){x=e.LanguageManager},function(e){V=e.emSdkErrorCode},function(e){K=e.SdkManager},function(e){j=e.emAdPath},function(e){q=e.Util},function(e){J=e.ResManager},function(e){Q=e.SDK}],execute:function(){var X,Y,Z,$,ee,te,ne,ie,ae,oe,re,se,ce,ue,le,de,he,me,fe,ge,pe,be,ve,Se,ye;o._RF.push({},"8248dFzm+BMwIeecSjmuo09","SceneHome",void 0);var _e=r.ccclass,Te=r.property;e("SceneHome",(X=_e("SceneHome"),Y=Te(s),Z=Te(c),$=Te(s),ee=Te(c),te=Te(c),ne=Te(s),ie=Te(s),ae=Te(u),oe=Te(l),re=Te(l),se=Te(l),X((le=t((ue=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return t=e.call.apply(e,[this].concat(o))||this,i(t,"countdownLabel",le,a(t)),i(t,"bubbleAnim",de,a(t)),i(t,"bubbleAnimNode",he,a(t)),i(t,"classicButtonAnim",me,a(t)),i(t,"adventureButtonAnim",fe,a(t)),i(t,"shineAnimNode",ge,a(t)),i(t,"guideHand",pe,a(t)),i(t,"classicPlayTimeDisplay",be,a(t)),i(t,"classicPlayTimeIcon",ve,a(t)),i(t,"classicButtonCharSprite",Se,a(t)),i(t,"classicButtonContinueSprite",ye,a(t)),t.currentLeftTime=-1,t}n(t,e);var o=t.prototype;return o.onLoad=function(){},o.onDestroy=function(){this.unschedule(this.updateCountdown)},o.start=function(){var e=this;this.guideHand.active=!1,d.stopAllByTarget(this.guideHand),G.getInstance().register(N.GAME_SHOW,(function(){w.instance.playMusic(!0)}),this),p.inst.hideMainPageBannerAd(),this.shineAnimNode.active=!0,this.bubbleAnimNode.active=!1,"loading"==O.getData(I,"defaultKey")?(O.setData(I,"defaultKey",null),this.shineAnimNode.active=!1,this.bubbleAnimNode.active=!0,w.instance.playSoundWithCallback(b.audio.login_effect,(function(){w.instance.changeMusic(b.audio.tmp_bgm,!0)}),3),this.scheduleOnce((function(){e.shineAnimNode.active=!0,e.bubbleAnimNode.active=!1,e.PlayAdventureHandGuide()}),1)):(w.instance.changeMusic(b.audio.tmp_bgm,!0),this.scheduleOnce((function(){e.PlayAdventureHandGuide()}),1));var t=k.inst.getBatchDeadlineData()-(new Date).getTime();t>0?(this.startCountdown(t/1e3),this.countdownLabel.active=!0):this.countdownLabel.active=!1,this.refreshBtnState();var n=T.inst.lastLoginVersion;if(n!=F.gameVersion&&(T.inst.lastLoginVersion=F.gameVersion,n<"6.4.9"))for(var i=k.inst.getLevelBatchNumber(),a=1;a<i;a++)z.inst.setStageStickerStatus(a,E.obtained);this.scheduleOnce((function(){h.preloadScene("adventure_level_selectv2",(function(){})),H.inst.isGuideFinished()&&h.preloadScene("game")}),3),this.scheduleOnce((function(){var e=b.prefab;D.initPool(e.adventure_btn.path,e.adventure_btn.bundle,60),D.initPool(e.adventure_num_dark.path,e.adventure_num_dark.bundle,60),D.initPool(e.adventure_num_normal.path,e.adventure_num_normal.bundle,60)}))},o.refreshBtnState=function(){var e=this,t=T.inst.getClassicPlayNumToday,n=T.inst.getMaxFreePlayNumToday();this.classicPlayTimeDisplay.string="今日免费"+Math.max(n-t,0).toString()+"/"+n.toString()+" 次",T.inst.isGameOngoing?(this.classicPlayTimeIcon.node.active=!1,this.classicPlayTimeDisplay.node.active=!1,this.classicButtonCharSprite.node.active=!1,this.classicButtonContinueSprite.node.active=!0):(this.classicPlayTimeDisplay.node.active=!0,this.classicButtonCharSprite.node.active=!0,this.classicButtonContinueSprite.node.active=!1,J.getInstance().loadSpriteFrame("res/texture/adventure/ui_login_jingdian","block").then((function(t){e.classicButtonCharSprite.spriteFrame=t})),t<n?this.classicPlayTimeIcon.node.active=!1:T.inst.getCanShareReplay()?J.getInstance().loadSpriteFrame("res/texture/revive/UI_Stickerfinish_btn_icon_share","block").then((function(t){e.classicPlayTimeIcon.node.active=!0,e.classicPlayTimeIcon.spriteFrame=t})):J.getInstance().loadSpriteFrame("res/texture/revive/UI_Restart_icon_ad","block").then((function(t){e.classicPlayTimeIcon.node.active=!0,e.classicPlayTimeIcon.spriteFrame=t})))},o.onClickClassical=function(){if(U.playSubSound(b.audio.touch),y.gameMode=S.endless,Q.instance.reportBI(P.btn_click,{btn_type:C.enter_classic,scene:L.from_home}),T.inst.getClassicPlayNumToday<T.inst.getMaxFreePlayNumToday()||T.inst.isGameOngoing)O.changeState(v,"block");else if(T.inst.tryShareReplay()){var e=q.generateRandomShowOffShare();W.getInstance().showShare(e,R.start_game,this,(function(){O.changeState(v,"block")}),{},(function(){console.log("failed to share")})),this.refreshBtnState()}else{var t=T.inst.getTodayWatchAdStartGameCount();T.inst.setTodayWatchAdStartGameCount(t+1),Q.instance.reportBI(P.ad_begin,{scene:B.main_scene,begin_num:T.inst.getTodayWatchAdStartGameCount(),ad_status:M.WakeUp}),p.inst.showRewardVideoAd(j.Score_Relife).then((function(e){T.inst.setPlayClassicTimesToday(),O.changeState(v,"block"),Q.instance.reportBI(P.ad_begin,{scene:B.main_scene,begin_num:T.inst.getTodayWatchAdStartGameCount(),ad_status:M.Finished})})).catch((function(e){if(e.errMsg==V.Sdk_Ad_Close_Reward)return Q.instance.reportBI(P.ad_revivie,{ad_status:M.Closed,ad_mode:"home"}),Q.instance.reportBI(P.ad_begin,{scene:B.main_scene,begin_num:T.inst.getTodayWatchAdStartGameCount(),ad_status:M.Closed}),void K.getInstance().native.showToast(x.translateText("tip_not_finish_watch"));Q.instance.reportBI(P.ad_begin,{scene:B.main_scene,begin_num:T.inst.getTodayWatchAdStartGameCount(),ad_status:M.Error}),K.getInstance().native.showToast(x.translateText("tip_ad_fail"))}))}},o.onClickLevel=function(){U.playSubSound(b.audio.touch),y.gameMode=S.none,Q.instance.reportBI(P.btn_click,{btn_type:C.enter_adventure,scene:L.from_home}),O.changeState(_,"block")},o.onClickLeaderBoard=function(){Q.instance.reportBI(P.btn_click,{btn_type:C.enter_leaderboard,scene:L.from_home}),A.inst.addPopUpView(b.prefab.friendListRank.path)},o.startCountdown=function(e){this.currentLeftTime=e,this.updateLabel(),this.schedule(this.updateCountdown,1)},o.updateCountdown=function(){this.currentLeftTime>0?(this.currentLeftTime--,this.updateLabel()):(this.unschedule(this.updateCountdown),this.onCountdownEnd())},o.updateLabel=function(){if(this.countdownLabel){var e=this.countdownLabel.getComponent(u);if(this.currentLeftTime>86400){var t=Math.floor(this.currentLeftTime/86400),n=Math.floor(this.currentLeftTime%86400/3600);e.string="剩余时间："+t+"天"+n+"时"}else if(this.currentLeftTime>3600){var i=Math.ceil(this.currentLeftTime/3600),a=Math.ceil(this.currentLeftTime%3600/60);e.string="剩余时间："+i+"时"+a+"分"}else{var o=Math.ceil(this.currentLeftTime/60);e.string="剩余时间："+o+"分"}}},o.onCountdownEnd=function(){console.log("Countdown ended!"),this.countdownLabel.active=!1,0==k.inst.isAllLevelFinished&&z.inst.setStageStickerStatus(k.inst.getLevelBatchNumber(),E.missed)},o.PlayAdventureHandGuide=function(){this.guideHand.active=!0;var e=new m(200,-80,0);f(this.guideHand).repeatForever(f().to(.5,{position:new m(175,-55,0)},{easing:"circOut"}).to(.5,{position:e},{easing:"circOut"})).start()},t}(g)).prototype,"countdownLabel",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),de=t(ue.prototype,"bubbleAnim",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),he=t(ue.prototype,"bubbleAnimNode",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),me=t(ue.prototype,"classicButtonAnim",[ee],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),fe=t(ue.prototype,"adventureButtonAnim",[te],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ge=t(ue.prototype,"shineAnimNode",[ne],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),pe=t(ue.prototype,"guideHand",[ie],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),be=t(ue.prototype,"classicPlayTimeDisplay",[ae],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ve=t(ue.prototype,"classicPlayTimeIcon",[oe],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Se=t(ue.prototype,"classicButtonCharSprite",[re],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ye=t(ue.prototype,"classicButtonContinueSprite",[se],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ce=ue))||ce));o._RF.pop()}}}));

System.register("chunks:///_virtual/SceneLevel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MK.ts","./Enumrations.ts","./SceneMode.ts","./PanelManager.ts","./AssetInfoDefine.ts","./AdventureLevelGame.ts","./AdSdk.ts","./LevelGuideData.ts","./ResManager.ts","./BIDefine.ts","./MKAudio.ts","./SdkEventManager.ts","./SdkEventType.ts","./emAdPath.ts","./SdkManager.ts","./LanguageManager.ts","./SdkError.ts","./Event.ts","./UserHammerData.ts","./UserVRocketData.ts","./UserHRocketData.ts","./UserChangeData.ts","./Boot.ts","./sdk.ts","./MKEvent.ts"],(function(e){var t,n,a,i,s,o,c,r,l,d,_,u,h,v,p,f,g,m,I,k,E,S,y,B,M,w,L,R,T,U,C,W;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,a=e._decorator,i=e.Component},null,function(e){s=e.kGameMode},function(e){o=e.SceneMode},function(e){c=e.PanelManager},function(e){r=e.AssetInfoDefine},function(e){l=e.AdventureLevelGame},function(e){d=e.AdSdk},function(e){_=e.LevelGuideData},function(e){u=e.ResManager},function(e){h=e.BIEventID,v=e.emButtonType,p=e.emButtonScene,f=e.emPropType,g=e.emAdStatus},function(e){m=e.audioManager},function(e){I=e.SdkEventManager},function(e){k=e.SdkEventType},function(e){E=e.emAdPath},function(e){S=e.SdkManager},function(e){y=e.LanguageManager},function(e){B=e.emSdkErrorCode},function(e){M=e.BlockEventType},function(e){w=e.UserHammerData},function(e){L=e.UserVRocketData},function(e){R=e.UserHRocketData},function(e){T=e.UserChangeData},function(e){U=e.audio},function(e){C=e.SDK},function(e){W=e.sendEvent}],execute:function(){var A;n._RF.push({},"69de36xbl5G14vBezlDj5kx","SceneLevel",void 0);var P=a.ccclass;a.property,e("SceneLevel",P("SceneLevel")(A=function(e){function n(){for(var t,n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return(t=e.call.apply(e,[this].concat(a))||this).isWatching=void 0,t}t(n,e);var a=n.prototype;return a.onLoad=function(){o.gameMode=s.adventure_level,this.isWatching=!1},a.start=function(){_.inst.isGuideFinished()&&this.scheduleOnce((function(){}),2),I.getInstance().register(k.GAME_SHOW,(function(){m.instance.playMusic(!0)}),this),m.instance.changeMusic(r.audio.block_game_bgm,!0)},a.onBtnLevelSeclect=function(){U.playBtnEffect(),o.gameMode=s.none,u.getInstance().gotoScene("adventure_level_selectv2","block").then()},a.onBtnClicKSetting=function(){U.playBtnEffect(),C.instance.reportBI(h.btn_click,{btn_type:v.enter_settings,scene:p.from_adventure}),c.inst.addPopUpView(r.prefab.setting.path,l.levlInstance)},a.onClickPropHammer=function(){var e=this,t=w.inst.itemCount,n=r.prefab.useProp;if(t>0)c.inst.addPopUpView(n.path,f.hammer);else{if(this.isWatching)return;C.instance.reportBI(h.ad_item,{item_type:f.hammer,level:l.levlInstance.getLevelId(),ad_status:g.WakeUp}),this.isWatching=!0,d.inst.showRewardVideoAd(E.Block_Unlock_Hammer).then((function(t){e.isWatching=!1,U.playSubSound(r.audio.touch),w.inst.addItem(1,!1),W(M.EVENT_REFRESH_ITEM_NUM),c.inst.addPopUpView(n.path,f.hammer),C.instance.reportBI(h.ad_item,{item_type:f.hammer,level:l.levlInstance.getLevelId(),ad_status:g.Finished})})).catch((function(t){if(e.isWatching=!1,t.errMsg==B.Sdk_Ad_Close_Reward)return S.getInstance().native.showToast(y.translateText("tip_not_finish_watch")),void C.instance.reportBI(h.ad_item,{item_type:f.hammer,level:l.levlInstance.getLevelId(),ad_status:g.Closed});C.instance.reportBI(h.ad_item,{item_type:f.hammer,level:l.levlInstance.getLevelId(),ad_status:g.Error}),S.getInstance().native.showToast(y.translateText("tip_ad_fail"))}))}},a.onClickPropVRocket=function(){var e=this,t=L.inst.itemCount,n=r.prefab.useProp;if(t>0)c.inst.addPopUpView(n.path,f.v_rocket);else{if(this.isWatching)return;C.instance.reportBI(h.ad_item,{item_type:f.v_rocket,level:l.levlInstance.getLevelId(),ad_status:g.WakeUp}),this.isWatching=!0,d.inst.showRewardVideoAd(E.Block_Unlock_Rocket_V).then((function(t){e.isWatching=!1,U.playSubSound(r.audio.touch),L.inst.addItem(1,!1),W(M.EVENT_REFRESH_ITEM_NUM),C.instance.reportBI(h.ad_item,{item_type:f.v_rocket,level:l.levlInstance.getLevelId(),ad_status:g.Finished}),c.inst.addPopUpView(n.path,f.v_rocket)})).catch((function(t){if(e.isWatching=!1,t.errMsg==B.Sdk_Ad_Close_Reward)return S.getInstance().native.showToast(y.translateText("tip_not_finish_watch")),void C.instance.reportBI(h.ad_item,{item_type:f.v_rocket,level:l.levlInstance.getLevelId(),ad_status:g.Closed});C.instance.reportBI(h.ad_item,{item_type:f.v_rocket,level:l.levlInstance.getLevelId(),ad_status:g.Error}),S.getInstance().native.showToast(y.translateText("tip_ad_fail"))}))}},a.onClickPropHRocket=function(){var e=this,t=R.inst.itemCount,n=r.prefab.useProp;if(t>0)c.inst.addPopUpView(n.path,f.h_rocket);else{if(this.isWatching)return;C.instance.reportBI(h.ad_item,{item_type:f.h_rocket,level:l.levlInstance.getLevelId(),ad_status:g.WakeUp}),this.isWatching=!0,d.inst.showRewardVideoAd(E.Block_Unlock_Rocket_H).then((function(t){e.isWatching=!1,U.playSubSound(r.audio.touch),R.inst.addItem(1,!1),W(M.EVENT_REFRESH_ITEM_NUM),C.instance.reportBI(h.ad_item,{item_type:f.h_rocket,level:l.levlInstance.getLevelId(),ad_status:g.Finished}),c.inst.addPopUpView(n.path,f.h_rocket)})).catch((function(t){if(e.isWatching=!1,t.errMsg==B.Sdk_Ad_Close_Reward)return S.getInstance().native.showToast(y.translateText("tip_not_finish_watch")),void C.instance.reportBI(h.ad_item,{item_type:f.h_rocket,level:l.levlInstance.getLevelId(),ad_status:g.Closed});C.instance.reportBI(h.ad_item,{item_type:f.h_rocket,level:l.levlInstance.getLevelId(),ad_status:g.Error}),S.getInstance().native.showToast(y.translateText("tip_ad_fail"))}))}},a.onClickPropRefresh=function(){var e=this;if(T.inst.itemCount>0)W(M.EVENT_USE_ITEM_REFRESHBLOCK);else{if(this.isWatching)return;C.instance.reportBI(h.ad_item,{item_type:f.refresh_block,level:l.levlInstance.getLevelId(),ad_status:g.WakeUp}),this.isWatching=!0,d.inst.showRewardVideoAd(E.Block_Unlock_Refresh).then((function(t){e.isWatching=!1,U.playSubSound(r.audio.touch),C.instance.reportBI(h.ad_item,{item_type:f.refresh_block,level:l.levlInstance.getLevelId(),ad_status:g.Finished}),W(M.EVENT_USE_ITEM_REFRESHBLOCK)})).catch((function(t){if(e.isWatching=!1,t.errMsg==B.Sdk_Ad_Close_Reward)return S.getInstance().native.showToast(y.translateText("tip_not_finish_watch")),void C.instance.reportBI(h.ad_item,{item_type:f.refresh_block,level:l.levlInstance.getLevelId(),ad_status:g.Closed});C.instance.reportBI(h.ad_item,{item_type:f.refresh_block,level:l.levlInstance.getLevelId(),ad_status:g.Error}),S.getInstance().native.showToast(y.translateText("tip_ad_fail"))}))}},a.onDestroy=function(){l.levlInstance.destroy()},n}(i))||A);n._RF.pop()}}}));

System.register("chunks:///_virtual/SceneLevelSeclect.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MK.ts","./Enumrations.ts","./SceneMode.ts","./ProcedureToLevel.ts","./UserCollectLevelData.ts","./LevelSelectItem.ts","./AssetInfoDefine.ts","./ProcedureToLevelTheme.ts","./ResManager.ts","./LanguageManager.ts","./LevelTheme.ts","./AdSdk.ts","./BIDefine.ts","./MKResCtr.ts","./Boot.ts","./sdk.ts"],(function(e){var t,o,n,l,i,r,a,c,s,u,v,h,d,m,f,L,S,g,p,b,w,I,P,y,C,T,_,M,N,B;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,n=e.initializerDefineProperty,l=e.assertThisInitialized},function(e){i=e.cclegacy,r=e._decorator,a=e.Label,c=e.Node,s=e.Vec3,u=e.tween,v=e.instantiate,h=e.Component},null,function(e){d=e.kGameMode},function(e){m=e.SceneMode},function(e){f=e.ProcedureToLevel},function(e){L=e.UserCollectLevelData},function(e){S=e.LevelSelectItem},function(e){g=e.AssetInfoDefine},function(e){p=e.ProcedureToLevelTheme},function(e){b=e.ResManager},function(e){w=e.LanguageManager},function(e){I=e.LevelTheme},function(e){P=e.AdSdk},function(e){y=e.BIEventID,C=e.emButtonType,T=e.emButtonScene},function(e){_=e.MKSubResCtr},function(e){M=e.audio,N=e.fsm},function(e){B=e.SDK}],execute:function(){var x,D,k,E,R,V,A;i._RF.push({},"fbe61uvm5BLgbJ10IBuxk/t","SceneLevelSeclect",void 0);var H=r.ccclass,z=r.property;e("SceneLevelSeclect",(x=H("SceneLevelSeclect"),D=z(a),k=z(c),x((V=t((R=function(e){function t(){for(var t,o=arguments.length,i=new Array(o),r=0;r<o;r++)i[r]=arguments[r];return t=e.call.apply(e,[this].concat(i))||this,n(t,"labCurrentLevel",V,l(t)),t.rootLevelItem=null,t.rootLevelItemLabel=null,t.rootLevelMap=null,n(t,"themeNode",A,l(t)),t.levelItemNodePool=void 0,t.levelLabelNodePool=void 0,t.currentShowThemeNode=null,t.currentShowTheme=null,t.leftExitPositon=void 0,t.rightShowPositon=void 0,t}o(t,e);var i=t.prototype;return i.onLoad=function(){this.leftExitPositon=new s(-800,0,0),this.rightShowPositon=new s(800,0,0),this.changeThemeState()},i.changeThemeState=function(){var e=this,t=L.inst.getMaxHistoryLevel();this.labCurrentLevel.string=w.translateText("txt_level")+" "+t;var o=L.inst.getLevelConfigPath(),n=_.loadJsonConfig(o),l=n.length,i=L.inst.getLevelThemeName();P.inst.hideMainPageBannerAd();var r=this.themeNode.children,a=null,c=this.currentShowThemeNode,h=this.currentShowTheme;if(c){var d=h.items,m=h.itemLables;u(c).to(.3,{position:this.leftExitPositon}).start(),d.forEach((function(t){e.levelItemNodePool.put(t)})),m.forEach((function(t){e.levelLabelNodePool.put(t)})),h.clearItems()}r.forEach((function(o){if(o&&o.isValid)if(i==o.name){if(o.setPosition(e.rightShowPositon),o.active=!0,a=o,u(o).to(.3,{position:s.ZERO}).start(),e.currentShowThemeNode=a,e.currentShowTheme=a.getComponent(I),e.rootLevelItem=a.getChildByPath("ScrollView/view/content/level_content"),e.rootLevelMap=a.getChildByPath("ScrollView/view/content/level_map"),e.rootLevelItemLabel=a.getChildByPath("ScrollView/view/content/label_content"),e.rootLevelItem)for(var r=0;r<l;r++){var c=n[r],v=e.createLevelItem(c,t,l);v.active||(v.active=!0)}}else o.active=!1})),a||b.getInstance().loadAsset("prefab/theme_"+i,"level").then((function(o){if(o&&e){var r=v(o);if(r&&(e.rootLevelItem=r.getChildByPath("ScrollView/view/content/level_content"),e.rootLevelMap=r.getChildByPath("ScrollView/view/content/level_map"),e.rootLevelItemLabel=r.getChildByPath("ScrollView/view/content/label_content"),r.setParent(e.themeNode),r.setPosition(e.rightShowPositon),r.setScale(1,1,1),r.name=i,u(r).to(.3,{position:s.ZERO}).start(),e.currentShowThemeNode=r,e.currentShowTheme=r.getComponent(I),e.rootLevelItem))for(var a=0;a<l;a++){var c=n[a],h=e.createLevelItem(c,t,l);h.active||(h.active=!0)}}}))},i.createLevelItem=function(e,t,o){var n=this.levelLabelNodePool.get(),l=this.levelItemNodePool.get(),i=l.getComponent(S);return i.labLevel=n.getComponent(a),i.initData(e.id,e.id<=t,e.id==t,o),this.rootLevelItem.addChild(l),l.setSiblingIndex(e.id),this.rootLevelItemLabel.addChild(n),n.setSiblingIndex(e.id),this.currentShowTheme.addItems(l,n),l},i.onClickHome=function(){M.playSubSound(g.audio.touch),m.gameMode=d.none,N.changeState(p,"level_select")},i.onClickNextLevel=function(){B.instance.reportBI(y.btn_click,{btn_type:C.click_adventure_start,scene:T.from_adventure_choose_level}),M.playSubSound(g.audio.touch);var e=L.inst.getMaxHistoryLevel();M.playSubSound(g.audio.touch),m.gameMode=d.level,L.inst.updateHistoryLevel(e),N.changeState(f,"level_select")},i.onDestroy=function(){},t}(h)).prototype,"labCurrentLevel",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=t(R.prototype,"themeNode",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=R))||E));i._RF.pop()}}}));

System.register("chunks:///_virtual/SceneLoading.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Global.ts","./UserData.ts","./MK.ts","./ProcedureToHome.ts","./ProcedureToGame.ts","./UITweenBarComponent.ts","./GuideData.ts","./Boot.ts","./SdkManager.ts","./GaBase.ts","./RedPointManager.ts","./JYSdkManager.ts","./AdSdk.ts","./ABTestManager.ts","./ABTestDefine.ts","./BIDefine.ts","./ToastManager.ts","./GameDefine.ts","./MKEvent.ts","./EventType.ts","./sdk.ts","./MKUtil.ts"],(function(i){var e,n,t,s,o,r,a,c,g,d,l,u,h,f,p,P,m,v,S,I,A,E,T,L,y,D,B,N,b,w,_,G,F,k,M;return{setters:[function(i){e=i.applyDecoratedDescriptor,n=i.inheritsLoose,t=i.initializerDefineProperty,s=i.assertThisInitialized},function(i){o=i.cclegacy,r=i._decorator,a=i.Node,c=i.Label,g=i.ProgressBar,d=i.v3,l=i.Component},function(i){u=i.Global},function(i){h=i.UserData},null,function(i){f=i.ProcedureToHome},function(i){p=i.ProcedureToGame},function(i){P=i.UITweenBarComponent},function(i){m=i.GuideData},function(i){v=i.fsm},function(i){S=i.SdkManager},function(i){I=i.emGaEnv},function(i){A=i.RedPointManager},function(i){E=i.JYSdkManager},function(i){T=i.AdSdk},function(i){L=i.ABTestManager},function(i){y=i.ABEventKey,D=i.ABTestParam},function(i){B=i.BIEventID},function(i){N=i.ToastManager},function(i){b=i.buildInfo},function(i){w=i.regEvent,_=i.sendEvent,G=i.unRegEvent},function(i){F=i.Events},function(i){k=i.SDK},function(i){M=i.MKUtil}],execute:function(){var O,Y,K,U,V,C,R,J,H;o._RF.push({},"9a863oiUGRLYIhZuwGB+ukX","SceneLoading",void 0);var z=r.ccclass,x=r.property;i("SceneLoading",(O=z("SceneLoading"),Y=x(a),K=x(a),U=x(a),O((R=e((C=function(i){function e(){for(var e,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=i.call.apply(i,[this].concat(o))||this).info=void 0,t(e,"loadingProgressNode",R,s(e)),t(e,"loadingProgressParticles",J,s(e)),t(e,"policyViewNode",H,s(e)),e.loadingProgress=void 0,e.progressNumber=void 0,e.startTime=void 0,e.offset=15,e.isJYSDKInited=!1,e.hasSendJYSDKLoadingStart=!1,e.isArgeePrivacy=!1,e.isFinishedLoad=!1,e.startLoadingTimer=Date.now(),e.currentTarProgress=.2,e.currentUseProgress=.15,e.isTweening=!1,e.isFinish=!1,e}n(e,i);var o=e.prototype;return o.onLoad=function(){this.info=this.node.getChildByName("info").getComponent(c),this.loadingProgress=this.loadingProgressNode.getComponent(g),this.progressNumber=0,this.loadingProgress.progress=0,this.startTime=Date.now(),u.isRestart=!1,h.inst.setLoginNumToday(),this.startLoadingTimer=Date.now(),w(F.EVENT_PRELOAD_RES,this.onEvtProgress,this),w("EVENT_HOT_UPDATE_INFO",this.onEvtHotUpdateInfo,this),w(F.EVENT_POLICY_SHOW,this.onEvtShowAgree,this),w(F.EVENT_POLICY_AGREE,this.onAgreePolicy,this),this.scheduleOnce((function(){N.getInstance().showToast("网络情况不佳，请耐心等待")}),20)},o.start=function(){k.instance.hideSplash(),this.loadingProgress.progress=.01,this.startLoadingTimer=Date.now(),this.currentUseProgress=.15,this.isArgeePrivacy=!0,this.isArgeePrivacy?(this.onStartGame(),_(F.EVENT_POLICY_SHOW,!0)):_(F.EVENT_POLICY_SHOW,!0)},o.onAgreePolicy=function(i){this.isArgeePrivacy=!0,this.onBarAnimFinish(),this.onStartGame()},o.onEvtShowAgree=function(i){this.policyViewNode&&(this.policyViewNode.active=i)},o.onEvtProgress=function(i,e){null!=i&&null!=e&&null!=i&&null!=e&&(this.progressNumber=i/e,this.isFinishedLoad=this.progressNumber>=1)},o.update=function(i){var e=this;this.isJYSDKInited&&!this.hasSendJYSDKLoadingStart&&(this.hasSendJYSDKLoadingStart=!0,E.getInstance().sendLoadingStartLog(),E.getInstance().login());var n=this.loadingProgress.progress+.2*i;if(n>.98&&(n=.98),this.loadingProgress.progress=n,this.loadingProgressParticles.setPosition(d(435*n-this.offset,0,0)),this.isFinishedLoad&&this.isJYSDKInited){if(this.isTweening)return;this.isTweening=!0,P.Begin(this.loadingProgress,this.loadingProgress.progress,1,.3,0,(function(){e.onBarAnimFinish()}))}},o.onBarAnimFinish=function(){if(this.isArgeePrivacy)if(this.isFinishedLoad){if(!this.isFinish){this.isFinish=!0;var i=M.deviceId();!h.inst.isNewUser&&h.inst.isOpenLevel&&m.inst.isGuideFinished()?v.changeState(f,"loading"):v.changeState(p,"block"),k.instance.reportAf(B.loading_done,{userId:i},!1),E.getInstance().sendLoadingEndLog()}}else console.error("isFinishedLoad false");else console.error("isArgeePrivacy false")},o.onEvtHotUpdateInfo=function(i){this.info.string=i},o.onStartGame=function(){var i=M.deviceId();this.initSdk(),this.initAds(i),this.initBi(),k.instance.putDeviceId(i),k.instance.putLocalUserId(i),A.getInstance().Init()},o.initSdk=function(){var i=this;S.getInstance().Init().Setup(I.Online,b.gameVersion).setEnableLog(!1),E.getInstance().Init().setInitCallback((function(e,n){i.isJYSDKInited=e,e||(i.isJYSDKInited=n>2),i.onBarAnimFinish()})).initSdk(b.gameVersion,!1),h.inst.isNewRegister&&S.getInstance().channel.reportABEvent(y.expt_registration,1),this.initABGroup()},o.initABGroup=function(){var i=S.getInstance().channel.getABExpGroup(D.Diffcult);L.getInstance().setGroup(D.Diffcult,i)},o.initAds=function(i){this.scheduleOnce((function(){T.inst.cacheRewardVideoAd()}),10),this.scheduleOnce((function(){T.inst.cacheBannerAd()}),15)},o.initBi=function(){},o.onDestroy=function(){this.unscheduleAllCallbacks();k.instance.reportBI(B.loading_done,{loginnum_today:h.inst.loginNumToday,gameNumber:h.inst.gameNumber,abtest:"A",version:b.gameVersion,device_memory:"0",is_first_login:h.inst.isFirstPlay,loading_duration:Date.now()-this.startTime}),G(this)},e}(l)).prototype,"loadingProgressNode",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),J=e(C.prototype,"loadingProgressParticles",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),H=e(C.prototype,"policyViewNode",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),V=C))||V));o._RF.pop()}}}));

System.register("chunks:///_virtual/SceneManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ResManager.ts"],(function(n){var e,t,i;return{setters:[function(n){e=n.createClass},function(n){t=n.cclegacy},function(n){i=n.ResManager}],execute:function(){t._RF.push({},"f16b8HJvfNLBbOFLITBCyWe","SceneManager",void 0),n("SceneManager",function(){function n(){this.isLoadingScene=void 0}return n.prototype.gotoScene=function(n,e){var t=this;return new Promise((function(c,o){t.isLoadingScene?o():(t.isLoadingScene=!0,i.getInstance().gotoScene(n,e).then((function(){t.isLoadingScene=!1,c()})).catch((function(){t.isLoadingScene=!1,o()})))}))},e(n,null,[{key:"inst",get:function(){return this._inst||(this._inst=new n),this._inst}}]),n}())._inst=void 0,t._RF.pop()}}}));

System.register("chunks:///_virtual/SceneMode.ts",["cc"],(function(e){var c;return{setters:[function(e){c=e.cclegacy}],execute:function(){c._RF.push({},"38a38MT0MhP84GYb7gjbxkz","SceneMode",void 0);var n=e("SceneMode",(function(){}));n.gameMode=void 0,n.selectPreview=void 0,c._RF.pop()}}}));

System.register("chunks:///_virtual/SceneTheme.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MK.ts","./ProcedureToHome.ts","./AssetInfoDefine.ts","./Enumrations.ts","./SceneMode.ts","./Boot.ts"],(function(e){var n,o,t,c,u,r,s,i,a,f;return{setters:[function(e){n=e.inheritsLoose},function(e){o=e.cclegacy,t=e._decorator,c=e.Component},null,function(e){u=e.ProcedureToHome},function(e){r=e.AssetInfoDefine},function(e){s=e.kGameMode},function(e){i=e.SceneMode},function(e){a=e.audio,f=e.fsm}],execute:function(){var l;o._RF.push({},"8cdb0ryCOxKc4Bup95JN0PB","SceneTheme",void 0);var p=t.ccclass;t.property,e("SceneTheme",p("SceneTheme")(l=function(e){function o(){return e.apply(this,arguments)||this}n(o,e);var t=o.prototype;return t.start=function(){},t.onClickHome=function(){a.playSubSound(r.audio.touch),i.gameMode=s.none,f.changeState(u,"level_select")},o}(c))||l);o._RF.pop()}}}));

System.register("chunks:///_virtual/ScoreHelper.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MK.ts","./Event.ts","./MKEvent.ts"],(function(o){var t,e,i,l,c,n;return{setters:[function(o){t=o.createClass},function(o){e=o.cclegacy},null,function(o){i=o.BlockEventType},function(o){l=o.sendEvent,c=o.unRegEvent,n=o.regEvent}],execute:function(){e._RF.push({},"43246YgfH5G+oz96pJlt9Jp","ScoreHelper",void 0);var s=o("emComboState",function(o){return o[o.None=0]="None",o[o.Combo=1]="Combo",o[o.Combo_WAIT=2]="Combo_WAIT",o[o.Combo_BREAK=3]="Combo_BREAK",o[o.Combo_End=4]="Combo_End",o}({}));o("ScoreHelper",function(){var o=e.prototype;function e(o){this.continuousCount=0,this.score=0,this.skillScore=0,this.collectNum=0,this.userId=0,this.combo=0,this.comboBreak=3,this.clearAllFillScore=0,this.usedSkillCount=0,this.configs=void 0,this.comboFixNumber=2,this.clearContinueTimes=0,this.userId=o,this.score=0,this.collectNum=0,this.skillScore=0,this.comboBreak=3,n(i.EVENT_PUT_BLOCK_END,this.onEvtPutBlock,this),n(i.EVENT_CLEAR_BLOCK_END,this.onEvtClearBlock,this),n(i.EVENT_COMBO_BLOCK_END,this.onEvtCombo,this),n(i.EVENT_CLEAR_ALL_BLOCK_END,this.onEvtClearAll,this),n(i.EVENT_OP_USE_SKILL_ANI_END,this.onEvtSkillClearBlock,this),n(i.EVENT_COLLECT_ITEM_END,this.onEvtCollectItem,this),n(i.EVENT_USE_ITEM_END,this.onEvtUsedItem,this)}return o.putBlock=function(o,t,e){},o.loadConfig=function(){return new Promise((function(o,t){o(!0)}))},o.useSKill=function(){this.usedSkillCount+=1,this.skillScore-=this.singleSkillScore;var o=this.skillScore%this.singleSkillScore/this.singleSkillScore;l(i.EVENT_OP_SKILL_DATA,o,this.skillCount)},o.onEvtPutBlock=function(o,t){var e=t*this.putBlockScore;this.addScore(e)},o.onEvtClearBlock=function(o,t,e){var i=this.getClearBlockScore(t,e-1);this.addScore(i)},o.getComboTimes=function(){return this.combo>0?this.combo:0},o.getClearBlockScore=function(o,t){(t=t||0)<0&&(t=0);var e=0;switch(o){case 3:e=30;break;case 4:e=80;break;case 5:case 6:e=150}return o*this.clearBlockScore*(t+1)+e},o.onEvtCombo=function(o,t,e){},o.onEvtClearAll=function(o){this.addScore(this.clearAllScore)},o.recordClearAllFillScore=function(o,t,e){if(0==this.clearAllFillScore){var i=this.score,l=this.getComboTimes();o==s.Combo&&l>1?i+=this.getClearBlockScore(t,l-1):i+=this.getClearBlockScore(t,0),i+=this.clearAllScore,this.clearAllFillScore=i,this.onClearAllBlock(i,e)}},o.onClearAllBlock=function(o,t){},o.checkResetClearAllFillScore=function(){0!=this.clearAllFillScore&&this.clearAllFillScore+200<this.score&&(this.clearAllFillScore=0)},o.onEvtSkillClearBlock=function(o,t){this.addScore(this.skillClearBlock*t)},o.onEvtCollectItem=function(o,t,e){this.collectNum+=e},o.onEvtUsedItem=function(o){this.addScore(o)},o.checkCombo=function(o){return o>0?(this.clearContinueTimes+=1,this.clearContinueTimes>=1?(this.comboBreak=this.comboFixNumber,this.combo+=1,s.Combo):(this.comboBreak=this.comboFixNumber,s.Combo_WAIT)):this.clearContinueTimes>=1?this.comboBreak>0?(this.comboBreak-=1,s.Combo_WAIT):(this.clearContinueTimes=0,this.combo=0,this.comboBreak=this.comboFixNumber,s.Combo_End):(this.clearContinueTimes=0,this.combo=0,this.comboBreak=this.comboFixNumber,s.Combo_BREAK)},o.addScore=function(o){o<=0||(this.score+=o,this.checkResetClearAllFillScore())},o.getClearMultipleBlockScore=function(o){var t=this.configs.ClearBlockMultiple,e=o>t.length?t.length:o;return 0==e?0:t[e-1]},o.getContinueClearBlockScore=function(o,t){return o*this.getClearMultipleBlockScore(t)*this.clearBlockScore},o.setHistoryData=function(o){this.score=o.score||0,this.skillScore=o.skillScore||0,this.continuousCount=o.continuousCount||0},o.loadHistoryMaxScore=function(){},o.reset=function(){this.continuousCount=0,this.score=0,this.skillScore=0,this.userId=0},o.clear=function(){this.reset(),c(this)},o.resetGameRecordState=function(){},o.checkIsCanOpenAITips=function(){return!1},t(e,[{key:"skillCount",get:function(){return Math.ceil(this.skillScore/this.singleSkillScore)}},{key:"clearBlockScore",get:function(){var o;return(null==(o=this.configs)?void 0:o.ClearBlockLine)||10}},{key:"putBlockScore",get:function(){return this.configs.PutBlockScore}},{key:"clearAllScore",get:function(){var o;return(null==(o=this.configs)?void 0:o.ClearAll)||300}},{key:"singleSkillScore",get:function(){var o;return(null==(o=this.configs)?void 0:o.SkillNeed)||300}},{key:"maxSkillCount",get:function(){var o;return(null==(o=this.configs)?void 0:o.SkillMax)||5}},{key:"skillClearBlock",get:function(){var o;return(null==(o=this.configs)?void 0:o.SkillClearBlock)||1}}]),e}());e._RF.pop()}}}));

System.register("chunks:///_virtual/ScrollAdapter.ts",["./rollupPluginModLoBabelHelpers.js","cc","./enum.ts","./CenterManager.ts","./LayoutManager.ts","./ModelManager.ts","./PageViewManager.ts","./ReleaseManager.ts","./ScrollManager.ts","./ViewManager.ts","./Holder.ts","./View.ts"],(function(e){var t,n,i,r,a,o,s,l,c,g,u,h,M,p,f,w,d,y,A,v,m;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,r=e.assertThisInitialized,a=e.createClass},function(e){o=e.cclegacy,s=e._decorator,l=e.Component},function(e){c=e.Orientation,g=e.ArrangeAxis,u=e.ViewEvent,h=e.HolderEvent},function(e){M=e.CenterManager},function(e){p=e.LayoutManager},function(e){f=e.ModelManager},function(e){w=e.PageViewManager},function(e){d=e.ReleaseManager},function(e){y=e.ScrollManager},function(e){A=e.ViewManager},function(e){v=e.Holder},function(e){m=e.View}],execute:function(){var b,S,_,V,x,z,k,H,D,E,I,L,P,C,B;o._RF.push({},"d5d1crBDMFIA4umJNt7GKmz","ScrollAdapter",void 0);var R=s.ccclass,U=s.property,F=(e("ScrollAdapter",(b=R("ScrollAdapter"),S=U(y),_=U(A),V=U(p),x=U(w),z=U(d),k=U(M),b((E=t((D=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return t=e.call.apply(e,[this].concat(a))||this,i(t,"scrollManager",E,r(t)),i(t,"viewManager",I,r(t)),i(t,"layoutManager",L,r(t)),i(t,"pageViewManager",P,r(t)),i(t,"releaseManager",C,r(t)),i(t,"centerManager",B,r(t)),t.modelManager=new f,t}n(t,e);var o=t.prototype;return o.initElement=function(e,t){},o.getView=function(){return new F(this)},o.getHolder=function(e,t){return new T(e,t,this)},o.getParentAdapter=function(e){if(null!=e){var t=e.getComponent("ScrollAdapter");return t||this.getParentAdapter(e.parent)}},o.__preload=function(){this.scrollManager.internal_create(this),this.viewManager.internal_create(this),this.modelManager.internal_create(this),this.releaseManager.internal_create(this),this.layoutManager.internal_create(this),this.pageViewManager.internal_create(this),this.centerManager.internal_create(this),this.viewManager.internal_init(),this.releaseManager.internal_init(),this.layoutManager.internal_init(),this.pageViewManager.internal_init(),this.centerManager.internal_init(),this.scrollManager.internal_init(),this.modelManager.internal_init()},o.lateUpdate=function(e){this.scrollManager.internal_lateUpdate(e),this.viewManager.internal_lateUpdate(e),this.layoutManager.internal_lateUpdate(e),this.releaseManager.internal_lateUpdate(e)},a(t,[{key:"isVertical",get:function(){return this.scrollManager.orientation==c.Vertical}},{key:"isHorizontal",get:function(){return this.scrollManager.orientation==c.Horizontal}},{key:"isArrangeAxisStart",get:function(){return this.viewManager.arrangeAxis==g.Start}},{key:"mainAxis",get:function(){return this.isVertical?"y":"x"}},{key:"crossAxis",get:function(){return this.isVertical?"x":"y"}},{key:"mainAxisAnchorPoint",get:function(){var e=this.isVertical?1:0;return this.isArrangeAxisStart?e:1-e}},{key:"mainAxisSize",get:function(){return this.scrollManager.view.contentSize[this.mainAxis]}},{key:"crossAxisSize",get:function(){return this.scrollManager.view.contentSize[this.crossAxis]}},{key:"multiplier",get:function(){var e=this.isVertical?-1:1;return this.isArrangeAxisStart?-e:e}},{key:"paddingHeader",get:function(){return this.isHorizontal?this.isArrangeAxisStart?this.viewManager.left:this.viewManager.right:this.isArrangeAxisStart?this.viewManager.top:this.viewManager.bottom}},{key:"paddingFooter",get:function(){return this.isHorizontal?this.isArrangeAxisStart?this.viewManager.right:this.viewManager.left:this.isArrangeAxisStart?this.viewManager.bottom:this.viewManager.top}},{key:"mainAxisPadding",get:function(){return this.isHorizontal?this.viewManager.left+this.viewManager.right:this.viewManager.top+this.viewManager.bottom}}]),t}(l)).prototype,"scrollManager",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new y}}),I=t(D.prototype,"viewManager",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new A}}),L=t(D.prototype,"layoutManager",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new p}}),P=t(D.prototype,"pageViewManager",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new w}}),C=t(D.prototype,"releaseManager",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new d}}),B=t(D.prototype,"centerManager",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new M}}),H=D))||H)),function(e){function t(){return e.apply(this,arguments)||this}n(t,e);var i=t.prototype;return i.onVisible=function(){this.adapter.node.emit(u.VISIBLE,this)},i.onDisable=function(){this.adapter.node.emit(u.DISABLE,this)},t}(m)),T=function(e){function t(){return e.apply(this,arguments)||this}n(t,e);var i=t.prototype;return i.onCreated=function(){this.node.emit(h.CREATED,this)},i.onVisible=function(){this.node.emit(h.VISIBLE,this)},i.onDisable=function(){this.node.emit(h.DISABLE,this)},t}(v);o._RF.pop()}}}));

System.register("chunks:///_virtual/Scrollbar.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ScrollAdapter.ts","./enum.ts","./helper.ts","./ScrollManager.ts"],(function(t){var i,e,n,r,o,a,s,h,l,c,u,p,_,f,d,g,m,b,S,T,v,y;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,n=t.initializerDefineProperty,r=t.assertThisInitialized,o=t.createClass},function(t){a=t.cclegacy,s=t._decorator,h=t.Color,l=t.Sprite,c=t.SpriteFrame,u=t.Node,p=t.v3,_=t.UITransform,f=t.Component,d=t.Vec2},function(t){g=t.ScrollAdapter},function(t){m=t.ScrollbarDirection,b=t.Transition,S=t.Orientation},function(t){T=t.Helper},function(t){v=t.ScrollManager,y=t.ADAPTER}],execute:function(){var E,w,H,z,C,M,O,A,L,x,R,U,G,D,I,N,k,P,V,F,B,j,K,W,q,J,Q,X,Y,Z,$,tt,it,et,nt,rt,ot,at,st,ht;a._RF.push({},"e7832mHcjNK2r9z66HM2mwU","Scrollbar",void 0);var lt=s.ccclass,ct=s.property,ut=new h;t("Scrollbar",(E=lt("Scrollbar"),w=ct(g),H=ct(l),z=ct({type:m,tooltip:"滚动方向"}),C=ct({tooltip:"开启后会允许用户滑动进度条"}),M=ct({range:[0,1],slide:!0,step:.001,visible:function(){return this.interactable},tooltip:"可拖拽的最小限制，默认=0不限制,仅当你开启了循环,并且你的item会实时修改主轴尺寸时,那么你应该适当限制拖拽区域"}),O=ct({range:[0,1],slide:!0,step:.001,visible:function(){return this.interactable},tooltip:"可拖拽的最大限制，默认=1不限制,仅当你开启了循环,并且你的item会实时修改主轴尺寸时,那么你应该适当限制拖拽区域"}),A=ct({type:b}),L=ct({type:b,visible:function(){return this.interactable}}),x=ct({type:l,visible:function(){return this.transition!=b.None&&this.interactable}}),R=ct({type:c,visible:function(){return this.transition==b.SpriteSwap&&this.interactable}}),U=ct({type:c,visible:function(){return this.transition==b.SpriteSwap&&this.interactable}}),G=ct({visible:function(){return this.transition==b.ColorTint&&this.interactable}}),D=ct({visible:function(){return this.transition==b.ColorTint&&this.interactable}}),I=ct({visible:function(){return this.transition==b.Scale&&this.interactable}}),N=ct({visible:function(){return this.transition==b.Scale&&this.interactable}}),k=ct({visible:function(){return this.transition==b.Scale||this.transition==b.ColorTint&&this.interactable}}),P=ct({range:[0,11],slide:!0,step:1,tooltip:"用于进度的步数。值为 < 2 将禁用"}),V=ct({tooltip:"开启后会在滚动条无更新时自动隐藏"}),F=ct({visible:function(){return this.enableAutoHide},tooltip:"自动隐藏滚动条的时间"}),E((K=i((j=function(t){function i(){for(var i,e=arguments.length,o=new Array(e),a=0;a<e;a++)o[a]=arguments[a];return i=t.call.apply(t,[this].concat(o))||this,n(i,"adapter",K,r(i)),n(i,"handle",W,r(i)),n(i,"direction",q,r(i)),n(i,"interactable",J,r(i)),n(i,"dragMinLimit",Q,r(i)),n(i,"dragMaxLimit",X,r(i)),n(i,"_transition",Y,r(i)),n(i,"targetGraphic",Z,r(i)),n(i,"hoverSprite",$,r(i)),n(i,"pressedSprite",tt,r(i)),n(i,"hoverColor",it,r(i)),n(i,"pressedColor",et,r(i)),n(i,"hoverScale",nt,r(i)),n(i,"pressedScale",rt,r(i)),n(i,"transitionDuration",ot,r(i)),n(i,"numberOfSteps",at,r(i)),n(i,"enableAutoHide",st,r(i)),n(i,"autoHideTime",ht,r(i)),i._transitionInfo=void 0,i._targetEnter=void 0,i._targetStart=void 0,i._isDirty=!1,i._transform=void 0,i._handleTransform=void 0,i._size=0,i._value=-1,i._pointerEvent=void 0,i._offset=void 0,i._isHide=void 0,i._opacity=255,i._autoHideRemainingTime=void 0,i._rawTargetScale=void 0,i._rawTargetFrame=void 0,i._rawTargetColor=void 0,i}e(i,t);var a=i.prototype;return a.__preload=function(){this.transform.setAnchorPoint(.5,.5),this.handleTransform.setAnchorPoint(.5,.5),this.handle.node.setPosition(0,0),this.adapter&&(this.adapter.scrollManager.on(v.Event.ON_UPDATE_PERCENTAGE,this._onUpdateScrollbar,this),this._updateVisuals()),this.targetGraphic&&(this._rawTargetScale=this.targetGraphic.node.getScale().clone(),this._rawTargetFrame=this.targetGraphic.spriteFrame,this._rawTargetColor=this.targetGraphic.color.clone()),this._openAutoHide(!0)},a.onEnable=function(){var t=this.node.getComponent(l);t&&(this._opacity=t.color.a),this.adapter&&(this.node[y]=!0,this.node.on(u.EventType.TOUCH_START,this._onTouchStart,this),this.node.on(u.EventType.TOUCH_MOVE,this._onTouchMove,this),this.node.on(u.EventType.TOUCH_END,this._onTouchEnd,this),this.node.on(u.EventType.TOUCH_CANCEL,this._onTouchEnd,this),this.node.on(u.EventType.MOUSE_ENTER,this._mouseEnter,this),this.node.on(u.EventType.MOUSE_LEAVE,this._mouseLeave,this),this.targetGraphic&&(this.targetGraphic.node.on(u.EventType.MOUSE_ENTER,this._targetMouseEnter,this),this.targetGraphic.node.on(u.EventType.MOUSE_LEAVE,this._targetMouseLeave,this)))},a.onDisable=function(){this.node.off(u.EventType.TOUCH_START,this._onTouchStart,this),this.node.off(u.EventType.TOUCH_MOVE,this._onTouchMove,this),this.node.off(u.EventType.TOUCH_END,this._onTouchEnd,this),this.node.off(u.EventType.TOUCH_CANCEL,this._onTouchEnd,this),this.node.off(u.EventType.MOUSE_ENTER,this._mouseEnter,this),this.node.off(u.EventType.MOUSE_LEAVE,this._mouseLeave,this),this.targetGraphic&&(this.targetGraphic.node.off(u.EventType.MOUSE_ENTER,this._targetMouseEnter,this),this.targetGraphic.node.off(u.EventType.MOUSE_LEAVE,this._targetMouseLeave,this))},a._targetMouseEnter=function(){switch(this._targetEnter=!0,this._openAutoHide(!1),this.transition){case b.Scale:this._transitionScale(this._targetStart?this.pressedScale:this.hoverScale);break;case b.SpriteSwap:this._transitionSprite(this._targetStart?this.pressedSprite:this.hoverSprite);break;case b.ColorTint:this._transitionColor(this._targetStart?this.pressedColor:this.hoverColor)}},a._targetMouseLeave=function(){switch(this._targetEnter=!1,this._openAutoHide(!0),this.transition){case b.Scale:this._transitionScale(this._targetStart?this.pressedScale:this._rawTargetScale);break;case b.SpriteSwap:this._transitionSprite(this._targetStart?this.pressedSprite:this._rawTargetFrame);break;case b.ColorTint:this._transitionColor(this._targetStart?this.pressedColor:this._rawTargetColor)}},a._transitionScale=function(t){t&&this.targetGraphic&&(this._transitionInfo={time:0,from:this.targetGraphic.node.getScale().clone(),to:t})},a._transitionColor=function(t){t&&this.targetGraphic&&(this._transitionInfo={time:0,from:this.targetGraphic.color,to:t})},a._transitionSprite=function(t){t&&this.targetGraphic&&(this.targetGraphic.spriteFrame=t)},a._mouseEnter=function(t){this.interactable&&this._openAutoHide(!1)},a._mouseLeave=function(t){this.interactable&&this._openAutoHide(!0)},a._openAutoHide=function(t){this.enableAutoHide&&(this._autoHideRemainingTime=this.autoHideTime,this._isHide=t,t||this._setOpacity(this._opacity))},a._onTouchStart=function(t){if(this.interactable&&1!=this.size&&0!=this.size){this._openAutoHide(!1),this._pointerEvent=null,this._targetStart=!0;var i=t.getUIStartLocation();if(this._offset=this.handleTransform.convertToNodeSpaceAR(p(i.x,i.y)),Math.abs(this._offset[this.xy])>.5*this.handleTransform[this.wh]){this._offset=null,this._pointerEvent=t;var e=this._calcPercentage(t);this._setPercentage(e)}this.transition==b.Scale?this._transitionScale(this.pressedScale):this.transition==b.SpriteSwap?this._transitionSprite(this.pressedSprite):this.transition==b.ColorTint&&this._transitionColor(this.pressedColor)}},a._onTouchMove=function(t){if(this.interactable&&1!=this.size&&0!=this.size&&this._offset){var i=this._calcPercentage(t,this._offset[this.xy]);this._setPercentage(i)}},a._onTouchEnd=function(t){if(this.interactable&&1!=this.size&&0!=this.size){switch(this._offset=null,this._pointerEvent=null,this._targetStart=!1,this.transition){case b.Scale:this._transitionScale(this._targetEnter?this.hoverScale:this._rawTargetScale);break;case b.SpriteSwap:this._transitionSprite(this._targetEnter?this.hoverSprite:this._rawTargetFrame);break;case b.ColorTint:this._transitionColor(this._targetEnter?this.hoverColor:this._rawTargetColor)}this.adapter.centerManager.scrollToCenter()}},a._setPercentage=function(t){this.adapter.scrollManager.stopScroll(),this.adapter.scrollManager.setPercentage(t)},a._calcPercentage=function(t,i){void 0===i&&(i=0);var e=(this.axis==S.Horizontal?this.transform.width:this.transform.height)*(1-this.size),n=t.getUILocation(),r=this.transform.convertToNodeSpaceAR(p(n.x,n.y))[this.xy]-i-.5*-this.transform[this.wh];r-=.5*this.handleTransform[this.wh];var o=this.adapter.scrollManager.percentage;switch(this.direction){case m.Right_To_Left:case m.Top_To_Bottom:o=T.clamp(1-r/e,this.dragMinLimit,this.dragMaxLimit);break;case m.Left_To_Right:case m.Bottom_To_Top:o=T.clamp(r/e,this.dragMinLimit,this.dragMaxLimit)}return this.getSteps(o)},a._onUpdateScrollbar=function(t,i){var e=0,n=0;this.adapter.viewManager.virtualSize>0&&(e=this.adapter.viewManager.virtualSize>=this.adapter.mainAxisSize?T.clamp01((this.adapter.mainAxisSize-Math.abs(i))/this.adapter.viewManager.virtualSize):1),n=t,this.size=e,this.numberOfSteps>1&&(n=Math.round(n*(this.numberOfSteps-1))/(this.numberOfSteps-1),n=T.clamp01(n)),this.value=n,this._autoHideRemainingTime=this.autoHideTime,this._setOpacity(this._opacity)},a._updateVisuals=function(){if(this.handleTransform&&this.adapter){var t={x:0,y:0},i={x:0,y:0},e=this.adapter.mainAxis,n=T.clamp01(this.value)*(1-this.size);t[e]=n,i[e]=n+this.size;var r=this.transform.contentSize[this.wh]-i[e]*this.transform.contentSize[this.wh],o=t[e]*this.transform.contentSize[this.wh],a=this.handle.node.getPosition();switch(this.direction){case m.Bottom_To_Top:case m.Left_To_Right:a[this.xy]=.5*(o-r);break;case m.Top_To_Bottom:case m.Right_To_Left:a[this.xy]=.5*(r-o)}this.handleTransform[this.wh]=this.transform.contentSize[this.wh]-r-o,this.handle.node.setPosition(a)}},a.update=function(t){this._clearDirty(),this._autoHide(t),this._tranitionHandler(t)},a._clearDirty=function(){if(this._isDirty&&(this._isDirty=!1,this._updateVisuals(),this._pointerEvent)){var t=this._pointerEvent.getUILocation();this._offset=this.handleTransform.convertToNodeSpaceAR(p(t.x,t.y)),this._pointerEvent=null}},a._autoHide=function(t){if(this.enableAutoHide&&this._isHide&&!(this._autoHideRemainingTime<=0)&&(this._autoHideRemainingTime-=t,this._autoHideRemainingTime<=this.autoHideTime)){this._autoHideRemainingTime=Math.max(0,this._autoHideRemainingTime);var i=this._opacity*(this._autoHideRemainingTime/this.autoHideTime);this._setOpacity(i)}},a._tranitionHandler=function(t){var i=this.targetGraphic;if(this.transition!=b.None&&i&&this._transitionInfo){this._transitionInfo.time+=t;var e=1;if(this.transitionDuration>0&&(e=this._transitionInfo.time/this.transitionDuration),e>=1&&(e=1),this.transition==b.Scale){this._transitionInfo.current=i.node.getScale();var n=this._transitionInfo.from,r=this._transitionInfo.to;this._transitionInfo.current.x=T.lerp(n.x,r.x,e),this._transitionInfo.current.y=T.lerp(n.y,r.y,e),i.node.setScale(this._transitionInfo.current)}else if(this.transition==b.ColorTint){var o=this._transitionInfo.from,a=this._transitionInfo.to;h.lerp(ut,o,a,e),i.color=ut}1===e&&(this._transitionInfo=null)}},a._setOpacity=function(t){if(this.handle){var i=function(i){i&&(ut.set(i.color),ut.a=t,i.color=ut)};i(this.node.getComponent(l)),i(this.handle.getComponent(l))}},a.getSteps=function(t){return this.numberOfSteps>1&&(t=Math.round(t*(this.numberOfSteps-1))/(this.numberOfSteps-1),t=T.clamp(t,this.dragMinLimit,this.dragMaxLimit)),t},o(i,[{key:"transition",get:function(){return this._transition},set:function(t){t!=this._transition&&(this._transition=t,t!=b.None&&(this.targetGraphic||(this.targetGraphic=this.handle)))}},{key:"size",get:function(){return this._size},set:function(t){t!=this._size&&(this._size=T.clamp(t,.01,1),this._isDirty=!0)}},{key:"value",get:function(){return this._value},set:function(t){t!=this._value&&(this._value=this.getSteps(t),this._isDirty=!0)}},{key:"stepSize",get:function(){return this.numberOfSteps>1?1/(this.numberOfSteps-1):.1}},{key:"transform",get:function(){return this._transform||(this._transform=this.node.getComponent(_)),this._transform}},{key:"handleTransform",get:function(){return this.handle?(this._handleTransform||(this._handleTransform=this.handle.node.getComponent(_)),this._handleTransform):null}},{key:"xy",get:function(){return this.axis==S.Horizontal?"x":"y"}},{key:"wh",get:function(){return this.axis==S.Horizontal?"width":"height"}},{key:"axis",get:function(){return this.direction==m.Left_To_Right||this.direction==m.Right_To_Left?S.Horizontal:S.Vertical}}]),i}(f)).prototype,"adapter",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=i(j.prototype,"handle",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=i(j.prototype,"direction",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return m.Top_To_Bottom}}),J=i(j.prototype,"interactable",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Q=i(j.prototype,"dragMinLimit",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),X=i(j.prototype,"dragMaxLimit",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),Y=i(j.prototype,"_transition",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return b.None}}),i(j.prototype,"transition",[L],Object.getOwnPropertyDescriptor(j.prototype,"transition"),j.prototype),Z=i(j.prototype,"targetGraphic",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$=i(j.prototype,"hoverSprite",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),tt=i(j.prototype,"pressedSprite",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),it=i(j.prototype,"hoverColor",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return h.WHITE.clone()}}),et=i(j.prototype,"pressedColor",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new h(211,211,211,255)}}),nt=i(j.prototype,"hoverScale",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new d(1,1)}}),rt=i(j.prototype,"pressedScale",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new d(1.2,1.2)}}),ot=i(j.prototype,"transitionDuration",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.2}}),at=i(j.prototype,"numberOfSteps",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),st=i(j.prototype,"enableAutoHide",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ht=i(j.prototype,"autoHideTime",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),B=j))||B));a._RF.pop()}}}));

System.register("chunks:///_virtual/ScrollManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Manager.ts","./debug.ts","./enum.ts","./helper.ts","./ViewManagerEvent.ts"],(function(t){var e,i,n,a,r,o,s,h,l,c,_,d,u,p,g,v,f,E,y,O,M,T,A;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,a=t.assertThisInitialized,r=t.createClass},function(t){o=t.cclegacy,s=t._decorator,h=t.Vec3,l=t.UITransform,c=t.Node,_=t.Widget,d=t.EventTouch,u=t.macro,p=t.easing},function(t){g=t.Manager},null,function(t){v=t.Orientation,f=t.TouchMode,E=t.MovementType,y=t.NestedDirection,O=t.ScrollDirection,M=t.Layer},function(t){T=t.Helper},function(t){A=t.VMEvent}],execute:function(){var S,m,w,b,P,C,N,L,D,x,H,R,z,I,U,V,k,F,B,G,X,W,Z,j,q,Y,K,J,Q,$;o._RF.push({},"6000cNyEYlC4aj/Efw70/yK","ScrollManager",void 0);var tt=s.ccclass,et=s.property,it=new h,nt=t("ADAPTER","__ADAPTER__"),at=function(t){return t[t.ON_SCROLL=0]="ON_SCROLL",t[t.ON_UPDATE_PERCENTAGE=1]="ON_UPDATE_PERCENTAGE",t[t.ON_VIEW_SIZE_CHANGED=2]="ON_VIEW_SIZE_CHANGED",t[t.ON_ABOUT_TO_STOP=3]="ON_ABOUT_TO_STOP",t[t.ON_SCROLL_START=4]="ON_SCROLL_START",t[t.ON_SCROLL_END=5]="ON_SCROLL_END",t[t.ON_SCROLL_CANCEL=6]="ON_SCROLL_CANCEL",t[t.ON_CHANGED_ORIENTATION=7]="ON_CHANGED_ORIENTATION",t[t.ON_SCROLL_TO_GROUPINDEX_BEFOR=8]="ON_SCROLL_TO_GROUPINDEX_BEFOR",t[t.ON_SCROLL_TO_GROUPINDEX_AFTER=9]="ON_SCROLL_TO_GROUPINDEX_AFTER",t[t.ON_SCROLL_TO_MODELINDEX_BEFOR=10]="ON_SCROLL_TO_MODELINDEX_BEFOR",t[t.ON_SCROLL_TO_MODELINDEX_AFTER=11]="ON_SCROLL_TO_MODELINDEX_AFTER",t}(at||{});t("ScrollManager",(S=tt("ScrollManager"),m=et(l),w=et(l),b=et(l),P=et(l),C=et({type:v}),N=et({type:v}),L=et({type:f,tooltip:"Auto: 当内容撑满可视区域或开启ReleaseManager时允许拖动\n        AlwaysAllow: 任何情况下都可以拖动，即使没有任何元素\n        Disabled: 任何情况下都禁用拖动\n        "}),D=et({type:E}),x=et({range:[0,1],slide:!0,step:.001,visible:function(){return this.movementType==E.Elastic}}),H=et({range:[0,1],slide:!0,step:.001,visible:function(){return this.inertia}}),R=et({tooltip:"当滚动速度小于这个值时，会发送ON_ABOUT_TO_STOP广播"}),z=et({tooltip:"取消子节点的Button点击事件"}),I=et({range:[0,.5],slide:!0,step:.001,visible:function(){return this.inertia},tooltip:"嵌套时，当子元素的ScrollView拖动方向和当前拖动方向相同时，使用当前阈值进行计算由谁来处理拖动\n        无特殊需求时，默认值即可"}),U=et({range:[.5,1],slide:!0,step:.001,visible:function(){return this.inertia},tooltip:"嵌套时，当子元素的ScrollView拖动方向和当前拖动方向相同时，使用当前阈值进行计算由谁来处理拖动\n        无特殊需求时，默认值即可"}),S((($=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return e=t.call.apply(t,[this].concat(r))||this,n(e,"_view",F,a(e)),n(e,"_content",B,a(e)),n(e,"_orientation",G,a(e)),n(e,"touchMode",X,a(e)),n(e,"movementType",W,a(e)),n(e,"elasticity",Z,a(e)),n(e,"inertia",j,a(e)),n(e,"decelerationRate",q,a(e)),n(e,"aboutToStopVelocity",Y,a(e)),n(e,"cancelInnerEvents",K,a(e)),n(e,"nestedMinThreshold",J,a(e)),n(e,"nestedMaxThreshold",Q,a(e)),e.__debug_graphics=void 0,e._boundaryOffset=0,e._viewWidget=null,e._parentAdapter=void 0,e._layerLowest=void 0,e._layerMedium=void 0,e._layerHighest=void 0,e._percentage=0,e._velocity=0,e._dragging=!1,e._scrolling=!1,e._isCanceledEvent=!1,e._contentStartPosition=new h,e._prevContentPosition=new h,e._nestedDirection=y.Both,e._parentTouch=!1,e._stopCheckNested=!1,e._scrollHandlePercentage=null,e._scrollHandlePosition=null,e._isEmitAboutToStop=!1,e._isMyEventAndMoved=!1,e._scrollDirection=O.None,e._laseScrollDirection=O.None,e._touchEvent=null,e.test=!1,e}i(e,t);var o=e.prototype;return o.onInit=function(){var t=this;this._initView(),this._initContent(),this._parentAdapter=this.adapter.getParentAdapter(this.adapter.node.parent),this.view.node[nt]=!0,this.adapter.viewManager.on(A.ON_UPDATE_VIEWS,this._onUpdateViews,this),this.adapter.viewManager.on(A.ON_CHANGED_VIRTUALSIZE,this._onChangedVirtualSize,this),this.adapter.viewManager.on(A.ON_CHANGED_OVERFLOWHEADER,this._onChangedOverflowHeader,this),this.adapter.viewManager.on(A.ON_RESET_ALL_STATE,this._onResetAllState,this),this.adapter.viewManager.on(A.ON_CLEARVIEWS,this._onResetAllState,this),this.adapter.node.on(c.EventType.SIZE_CHANGED,this._onAdapterSizeChanged,this),this.view.node.on(c.EventType.SIZE_CHANGED,this._onViewSizeChanged,this),this._registerTouchEvent(),this.__createDebug(),this.view.scheduleOnce((function(){t._updatePercentage()}))},o._initView=function(){if(!this.view)throw Error("ScrollManager view 参数为空！");var t={x:.5,y:.5};t[this.adapter.mainAxis]=this.adapter.mainAxisAnchorPoint,this.view.setAnchorPoint(t.x,t.y);var e=this.view.getComponent(_);e||((e=this.view.addComponent(_)).isAlignLeft=e.isAlignRight=e.isAlignTop=e.isAlignBottom=!0,e.left=e.right=e.top=e.bottom=0),e.updateAlignment(),this._viewWidget=e},o.__createDebug=function(){},o.__drawDebug=function(){if(this.__debug_graphics){this.__debug_graphics.clear();var t=this.adapter.mainAxis,e=this.adapter.crossAxis,i=this.adapter.multiplier,n={x:0,y:0},a={x:0,y:0};a[t]=this.adapter.viewManager.virtualSize,a[e]=this.adapter.crossAxisSize,n[t]=this.contentPosition-a[t]*this.content.anchorPoint[t]*i,n[t]+=this.adapter.viewManager.overflowHeader,n[e]-=a[e]*this.view.anchorPoint[e],this.__debug_graphics.fillRect(n.x,n.y,a.x,a.y),this.__debug_graphics.stroke()}},o._initContent=function(){if(!this.content)throw Error("ScrollManager content 参数为空！");this.content.setAnchorPoint(this.view.anchorPoint);var t={x:0,y:0};t[this.adapter.crossAxis]=this.view.contentSize[this.adapter.crossAxis],this.content.setContentSize(t.x,t.y),this._layerLowest||(this._layerLowest=new c("_layerLowest"),this._layerMedium=new c("_layerMedium"),this._layerHighest=new c("_layerHighest"),this.content.node.addChild(this._layerLowest),this.content.node.addChild(this._layerMedium),this.content.node.addChild(this._layerHighest)),this._updateContentPosition({x:0,y:0})},o._registerTouchEvent=function(){this.view.node.on(c.EventType.TOUCH_START,this._onTouchStart,this,!0),this.view.node.on(c.EventType.TOUCH_END,this._onTouchEnd,this,!0),this.view.node.on(c.EventType.TOUCH_CANCEL,this._onTouchCancel,this,!0),this.view.node.on(c.EventType.TOUCH_MOVE,this._onTouchMove,this,!0)},o._bubbleToParent=function(t){this._parentAdapter&&this._parentAdapter.scrollManager.view.node.dispatchEvent(t)},o._emitCancelEvent=function(t){if(!this._isCanceledEvent){var e=t.getUILocation();e.subtract(t.getUIStartLocation()),this.cancelInnerEvents&&e.length()>7&&t.target!==this.view.node&&(this._simulateEvent(t,c.EventType.MOUSE_LEAVE),this._simulateEvent(t,c.EventType.TOUCH_CANCEL),this._isCanceledEvent=!0)}},o._simulateEvent=function(t,e,i){if(void 0===i&&(i=!0),t){var n=new d(t.getTouches(),t.bubbles),a=t.target;n.type=e,n.touch=t.touch,n.simulate=i,a.dispatchEvent(n)}},o._onUpdateViews=function(){this._velocity=0,this._updatePercentage()},o._onChangedVirtualSize=function(){this._updatePercentage(),null!=this._scrollHandlePosition&&null!=this._scrollHandlePosition.change&&this._scrollHandlePosition.change()},o._onChangedOverflowHeader=function(t){this.__drawDebug()},o._onResetAllState=function(){this._velocity=0,this._scrolling=!1,this._dragging=!1,this._isMyEventAndMoved=!1,this._scrollDirection=O.None,this._percentage=0,this._isEmitAboutToStop=!1,this._boundaryOffset=0,this._isCanceledEvent=!1,this._parentTouch=!1,this._stopCheckNested=!1,this._scrollDirection=O.None,this._touchEvent=null,this.stopScroll(),this._initView(),this._initContent()},o._onAdapterSizeChanged=function(){this._viewWidget.updateAlignment()},o._onViewSizeChanged=function(){this.emit(at.ON_VIEW_SIZE_CHANGED)},o._isMyEvent=function(t,e){return t.eventPhase==d.AT_TARGET||!e||e[0]==this.view.node&&!t.target[nt]},o._onTouchStart=function(t){this._velocity=0,this._dragging=!0,this._isMyEventAndMoved=!1,this._isCanceledEvent=!1,this._parentTouch=!1,this._stopCheckNested=!1,this._isEmitAboutToStop=!1,this._scrollDirection=O.None,this._contentStartPosition.set(this.content.node.position),this._touchEvent=t,this.stopScroll(),this._calcNestedDirection(),this.emit(at.ON_SCROLL_START)},o._onTouchEnd=function(t,e){this._dragging=!1,this._touchEvent=null,this.emit(at.ON_SCROLL_END,t)},o._onTouchCancel=function(t,e){t.simulate||(this._dragging=!1,this._touchEvent=null,this.emit(at.ON_SCROLL_CANCEL,t))},o._onTouchMove=function(t,e){if(this._isMyEvent(t,e)){if(this._emitCancelEvent(t),this._parentTouch||!this.canTouch)return this._bubbleToParent(t);if(this._touchEvent){var i=this.adapter.mainAxis,n=t.getUILocation(),a=t.getUIStartLocation(),r=n.subtract(a);if(!r.equals2f(0,0)){var o={x:0,y:0};o[i]=this._contentStartPosition[i]+r[i];var s=o[i]-this.contentPosition,h=this.calcOffset(s),l=this.adapter.isHorizontal?-1:1;o[i]+=l*h,this.movementType==E.Elastic&&0!=h&&(o[i]-=l*this._rubberDelta(h,this.adapter.mainAxisSize)),this._checkNested(t,o,this._parentAdapter),this._parentTouch?this._bubbleToParent(t):(this._isMyEventAndMoved=!0,this._updateContentPosition(o))}}}},o._calcNestedDirection=function(){this._parentAdapter&&(this.percentage<=this.nestedMinThreshold&&!this.adapter.viewManager.loopHeader?this._nestedDirection=1==this.adapter.multiplier?y.Footer:y.Header:this.percentage>=this.nestedMaxThreshold&&!this.adapter.viewManager.loopFooter?this._nestedDirection=1==this.adapter.multiplier?y.Header:y.Footer:this._nestedDirection=y.Both)},o._checkNested=function(t,e,i){if(i&&!this._stopCheckNested){if(this.orientation==i.scrollManager.orientation){var n=e[this.adapter.mainAxis]-this._contentStartPosition[this.adapter.mainAxis];if(Math.abs(n)<=.1)return;this._nestedDirection==y.Footer?n<0&&(this._parentTouch=!0):this._nestedDirection==y.Header&&n>0&&(this._parentTouch=!0)}else{var a=0,r=0;if(t instanceof d){var o=t.getUIStartLocation(),s=t.getUILocation();a=Math.abs(o.x-s.x),r=Math.abs(o.y-s.y)}else a=Math.abs(t.getScrollX()),r=Math.abs(t.getScrollY());if(a==r)return;a>r?this.adapter.isVertical&&(this._parentTouch=!0):r>a&&this.adapter.isHorizontal&&(this._parentTouch=!0)}if(!this._parentTouch&&i.scrollManager.parentAdapter)return this._checkNested(t,e,i.scrollManager.parentAdapter);this._stopCheckNested=!0}},o._updateContentPosition=function(t,e){void 0===e&&(e=!0),this._updateScrollDirection(t),this.content.node.setPosition(t.x,t.y),this.emit(at.ON_SCROLL,this._scrollDirection),e?this._updatePercentage():this.__drawDebug()},o._updatePrevContentPosition=function(){this._prevContentPosition.set(this.content.node.position)},o._calcPercentage=function(t,e){var i=this.internal_getHiddenSize(),n=this.adapter.viewManager.loopHeader,a=this.adapter.viewManager.loopFooter,r=this.adapter.multiplier,o=this.adapter.viewManager.overflowHeader,s=t*r;if(this.adapter.isHorizontal?s-=e*r:s+=e*r,a)s+=(o+(i+=this.adapter.viewManager.spacing)*r)*r,this.adapter.centerManager.enabled?s+=this.adapter.centerManager.getContainerOffset():s+=this.adapter.paddingHeader,s+=1,s%=i;else if(n){s+=this.adapter.mainAxisSize-1,this.adapter.centerManager.enabled?s-=this.adapter.centerManager.getContainerOffset():s-=this.adapter.paddingFooter,s+=(o+i*r)*r,t*-r>o*r&&(s+=this.adapter.viewManager.spacing),s%=i}else s+=o*r,this.adapter.centerManager.enabled?s+=this.adapter.centerManager.getContainerOffset():s+=this.adapter.paddingHeader,s>i&&(s=i);return s/i},o._updatePercentage=function(){var t=this.calcOffset();this.adapter.viewManager.virtualSize<=this.adapter.mainAxisSize?this._percentage=0:this._percentage=this._calcPercentage(this.contentPosition,t),this.emit(at.ON_UPDATE_PERCENTAGE,this._percentage,t),this.__drawDebug()},o.internal_disableTouchTarget=function(t){if(this._touchEvent&&this._touchEvent.target==t){var e=this._touchEvent;this._simulateEvent(e,c.EventType.TOUCH_CANCEL,!1),this._simulateEvent(e,c.EventType.MOUSE_LEAVE,!1),this._touchEvent=null}},o.internal_getHiddenSize=function(){var t=this.adapter.viewManager.loopHeader,e=this.adapter.viewManager.loopFooter,i=this.adapter.viewManager.virtualSize;return t||e||this.adapter.centerManager.enabled||(i-=this.adapter.mainAxisSize,i+=this.adapter.mainAxisPadding),i},o._getContentMinBoundaryOffset=function(t,e){return!this.adapter.viewManager.header||!this.adapter.centerManager.enabled&&this.adapter.viewManager.virtualSize<=this.adapter.mainAxisSize?this.adapter.isHorizontal?e+this._defaultMax+t:e+this._defaultMin+t:this.adapter.viewManager.min+t},o._getContentMaxBoundaryOffset=function(t,e){return!this.adapter.viewManager.header||!this.adapter.centerManager.enabled&&this.adapter.viewManager.virtualSize<=this.adapter.mainAxisSize?this.adapter.isHorizontal?e+this._defaultMin+t:e+this._defaultMax+t:this.adapter.viewManager.max+t},o._getMaxBoundaryOffset=function(t){var e=this._viewMax;return this.adapter.isHorizontal?this.adapter.isArrangeAxisStart?t:e+t:this.adapter.isArrangeAxisStart?-t:e-t},o._getMinBoundaryOffset=function(t){var e=this._viewMin;return this.adapter.isHorizontal?this.adapter.isArrangeAxisStart?e+t:t:this.adapter.isArrangeAxisStart?e-t:-t},o._rubberDelta=function(t,e){return(1-1/(.55*Math.abs(t)/e+1))*e*Math.sign(t)},o._calcElastic=function(t,e,i){var n=this.adapter.mainAxis,a=this.elasticity;this._scrolling&&(a*=3);var r=this.adapter.isHorizontal?-1:1,o=T.smoothDamp(this.contentPosition,this.contentPosition+r*e,this._velocity,a,T.Infinity,t),s=o.velocity,h=o.position;Math.abs(s)<1&&(s=0),this._velocity=s,i[n]=h},o._calcInertia=function(t,e){this._velocity*=Math.pow(this.decelerationRate,t),Math.abs(this._velocity)<1&&(this._velocity=0),e[this.adapter.mainAxis]+=this._velocity*t},o._calcClamped=function(t){var e=this.adapter.mainAxis,i=t[e]-this.contentPosition,n=this.calcOffset(i);this.adapter.isHorizontal?t[e]-=n:t[e]+=n},o._updateScrollDirection=function(t){var e=t[this.adapter.mainAxis]-this.contentPosition;0!=e?(this.adapter.isHorizontal?this._scrollDirection=e>0?O.Right:O.Left:this._scrollDirection=e>0?O.Up:O.Down,this._laseScrollDirection=this._scrollDirection):this._scrollDirection=O.None},o.internal_setContentPosition=function(t,e){void 0===e&&(e=!0);var i={x:0,y:0};i[this.adapter.mainAxis]=t,this._updateContentPosition(i,e)},o.internal_lateUpdate=function(t){this.test||(this._autoScrolling(t),this._scrollHandler(t,this._scrollHandlePosition,this._scrollPositionHandler.bind(this)),this._scrollHandler(t,this._scrollHandlePercentage,this._scrollPercentageHandler.bind(this)))},o._autoScrolling=function(t){var e=this.calcOffset();if(this._boundaryOffset=e,this._dragging||0==e&&0==this._velocity||(this.content.node.getPosition(it),this.movementType==E.Elastic&&0!=e?this._calcElastic(t,e,it):this.inertia?this._calcInertia(t,it):this._velocity=0,this.movementType==E.Clamped&&this._calcClamped(it),this._updateContentPosition(it)),this._dragging&&this.inertia){var i=(this.contentPosition-this._prevContentPosition[this.adapter.mainAxis])/t;this._velocity=T.lerp(this._velocity,i,10*t)}this._prevContentPosition.equals(this.content.node.position)||this._updatePrevContentPosition(),!this._isEmitAboutToStop&&!this._dragging&&Math.abs(this._velocity)<=this.aboutToStopVelocity&&(this._scrollHandlePercentage||this._scrollHandlePosition||(this.emit(at.ON_ABOUT_TO_STOP,this._velocity),this._isEmitAboutToStop=!0)),this._scrolling=!1},o._scrollHandler=function(t,e,i){if(null!=e){e.deltaTime+=t;var n=e.deltaTime/(e.duration>u.FLT_EPSILON?e.duration:u.FLT_EPSILON);n=T.clamp01(n);var a=p.quintOut(n);e.current=T.progress(e.from,e.to,e.current,a),i(e,n)}},o._scrollPercentageHandler=function(t,e){var i=this.percentage;if(this.setPercentage(t.current),1==e||i==this.percentage){var n=!0;this._scrollHandlePercentage.stop&&(n=this._scrollHandlePercentage.stop()),n&&(this._scrollHandlePercentage=null)}},o._scrollPositionHandler=function(t,e){var i={x:0,y:0};i[this.adapter.mainAxis]=t.current,this._setAutoScroll(i),(1==e||Math.abs(this.contentPosition-t.to)<=1e-4)&&(this._scrollHandlePosition.stop&&this._scrollHandlePosition.stop(),this._scrollHandlePosition=null)},o._setAutoScroll=function(t){var e=this,i=function(t){e._updateContentPosition(t),e._updatePrevContentPosition(),e._velocity=0};i(t);var n=this.calcOffset();if(0!=n){var a=this.adapter.isHorizontal?-1:1;return t[this.adapter.mainAxis]+=n*a,i(t),!1}return!0},o._scrollToPosition=function(t,e,i){var n=this;if(!this.canAutoScroll)return!1;var a=e();return!(null==a||Math.abs(this.contentPosition-a)<u.FLT_EPSILON)&&(this._scrollHandlePercentage=null,this._scrollHandlePosition={current:0,from:this.contentPosition,to:a,deltaTime:0,duration:Math.max(0,t),change:function(){a=e(),n._scrollHandlePosition.to=a},stop:function(){i()}},!0)},o.getLayerNode=function(t){switch(t){case M.Medium:return this._layerMedium;case M.Highest:return this._layerHighest;default:return this._layerLowest}},o.scrollToModelIndex=function(t,e,i){var n=this,a=this.adapter.viewManager.getGroupIndexByModelIndex(e);if(-1!=a){var r=!1;this._scrollToPosition(t,(function(){var t=n.adapter.centerManager.getPositionByGroupIndex(a,i,r);return r=!0,t}),(function(){n.emit(at.ON_SCROLL_TO_MODELINDEX_AFTER,e)}))&&this.emit(at.ON_SCROLL_TO_MODELINDEX_BEFOR,e)}},o.scrollToGroupIndex=function(t,e,i){var n=this,a=!1;this._scrollToPosition(t,(function(){var t=n.adapter.centerManager.getPositionByGroupIndex(e,i,a);return a=!0,t}),(function(){n.emit(at.ON_SCROLL_TO_GROUPINDEX_AFTER,e)}))&&this.emit(at.ON_SCROLL_TO_GROUPINDEX_BEFOR,e)},o.scrollToHeader=function(t){this.scrollToGroupIndex(t,0)},o.scrollToFooter=function(t){this.scrollToGroupIndex(t,this.adapter.viewManager.groupLength-1)},o.scrollToPercentage=function(t,e){if(!this.canAutoScroll)return!1;Math.abs(this._percentage-e)<.001||(e=T.clamp01(e),t=Math.max(0,t),this._scrollHandlePercentage=null,this._scrollHandlePercentage={deltaTime:0,duration:t,current:0,from:this._percentage,to:e})},o.stopVelocity=function(){this._velocity=0},o.stopScroll=function(){this._scrollHandlePosition=null,this._scrollHandlePercentage=null,this.stopVelocity()},o.setPercentage=function(t){for(var e=this.internal_getHiddenSize(),i={x:0,y:0},n=0,a=null;n<100;){n++;var r=this._percentage-t;if(null!=a&&this._percentage===a)break;if(Math.abs(r)<u.FLT_EPSILON)break;a=this._percentage;var o=this.contentPosition-r*this.adapter.multiplier*e;if(i[this.adapter.mainAxis]=o,!this._setAutoScroll(i))break}100==n&&console.warn("循环次数已达最大值，尽量不要在滚动过程中频繁修改尺寸")},o.calcOffset=function(t,e){void 0===t&&(t=0),void 0===e&&(e=this.contentPosition);var i=0;if(this.movementType==E.Unrestricted)return i;var n=this._getContentMaxBoundaryOffset(t,e),a=this._getContentMinBoundaryOffset(t,e),r=this._getMaxBoundaryOffset(n),o=this._getMinBoundaryOffset(a);!this.adapter.centerManager.enabled&&this.adapter.viewManager.virtualSize>this.adapter.mainAxisSize&&(this.adapter.isVertical?(r-=this.adapter.viewManager.top,o+=this.adapter.viewManager.bottom):(r-=this.adapter.viewManager.left,o+=this.adapter.viewManager.right));var s=0,h=0;if(this.adapter.centerManager.enabled&&this.adapter.viewManager.groupLength>0)h=this.adapter.centerManager.max,s=this.adapter.centerManager.min;else{var l=this.adapter.viewManager.getMagneticOffset();r-=l,o-=l}return this.adapter.releaseManager.enabled&&(h=Math.max(h,this.adapter.releaseManager.max),s=Math.max(s,this.adapter.releaseManager.min)),r-=h,(o+=s)<-.001?i=o:r>.001&&(i=r),i},r(e,[{key:"view",get:function(){return this._view},set:function(t){this._view=t}},{key:"content",get:function(){return this._content},set:function(t){this._content=t}},{key:"orientation",get:function(){return this._orientation},set:function(t){t!=this._orientation&&(this._orientation=t,this.emit(at.ON_CHANGED_ORIENTATION))}},{key:"_viewMin",get:function(){return-this.adapter.mainAxisSize}},{key:"_viewMax",get:function(){return this.adapter.mainAxisSize}},{key:"_defaultMin",get:function(){return 1==this.adapter.multiplier?-this.adapter.mainAxisSize:0}},{key:"_defaultMax",get:function(){return 1==this.adapter.multiplier?0:this.adapter.mainAxisSize}},{key:"isMyEventAndMoved",get:function(){return this._isMyEventAndMoved}},{key:"velocity",get:function(){return this._velocity}},{key:"scrollDirection",get:function(){return this._scrollDirection}},{key:"laseScrollDirection",get:function(){return this._laseScrollDirection}},{key:"percentage",get:function(){return this._percentage}},{key:"dragging",get:function(){return this._dragging}},{key:"boundaryOffset",get:function(){return this._boundaryOffset}},{key:"parentAdapter",get:function(){return this._parentAdapter}},{key:"canAutoScroll",get:function(){return!this.dragging&&this.adapter.viewManager.virtualSize>this.adapter.mainAxisSize}},{key:"canTouch",get:function(){return this.touchMode==f.AlwaysAllow||this.touchMode!=f.Disabled&&(!!this.adapter.centerManager.enabled||(!!this.adapter.releaseManager.enabled||this.adapter.viewManager.virtualSize>this.adapter.mainAxisSize))}},{key:"contentPosition",get:function(){return this.content.node.position[this.adapter.mainAxis]}}]),e}(g)).Event=at,F=e((k=$).prototype,"_view",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),e(k.prototype,"view",[w],Object.getOwnPropertyDescriptor(k.prototype,"view"),k.prototype),B=e(k.prototype,"_content",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),e(k.prototype,"content",[P],Object.getOwnPropertyDescriptor(k.prototype,"content"),k.prototype),G=e(k.prototype,"_orientation",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return v.Vertical}}),e(k.prototype,"orientation",[N],Object.getOwnPropertyDescriptor(k.prototype,"orientation"),k.prototype),X=e(k.prototype,"touchMode",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return f.Auto}}),W=e(k.prototype,"movementType",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return E.Elastic}}),Z=e(k.prototype,"elasticity",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.1}}),j=e(k.prototype,"inertia",[et],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),q=e(k.prototype,"decelerationRate",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.135}}),Y=e(k.prototype,"aboutToStopVelocity",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 100}}),K=e(k.prototype,"cancelInnerEvents",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),J=e(k.prototype,"nestedMinThreshold",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.001}}),Q=e(k.prototype,"nestedMaxThreshold",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.999}}),V=k))||V));o._RF.pop()}}}));

System.register("chunks:///_virtual/sdk.ts",["./rollupPluginModLoBabelHelpers.js","cc","./JsbNativeCall.ts"],(function(n){var t,i,e;return{setters:[function(n){t=n.createClass},function(n){i=n.cclegacy},function(n){e=n.JsbNativeCall}],execute:function(){i._RF.push({},"511a0XyzIVBq6PrnxFtmAVq","sdk",void 0),n("SDK",function(){function n(){}var i=n.prototype;return i.login=function(n,t){},i.loginWithGuest=function(n){this.loginAf(n),this.loginBI(n)},i.loginBI=function(n){window.TDAnalytics&&window.TDAnalytics.login(n)},i.initBI=function(n,t){e.exec("TaPlugin","init",{appId:n,serverUrl:t},(function(n){}),(function(n){}))},i.reportBI=function(n,t,i){window.TDAnalytics&&window.TDAnalytics.track({eventName:n,properties:t})},i.initAf=function(n,t,i){e.exec("AppsFlyer","init",{eventData:t,eventId:n,logTa:!1},(function(n){}),(function(n){}))},i.reportAf=function(n,t,i){void 0===t&&(t=null),(t||{}).evt_time=Date.now(),window.TDAnalytics&&window.TDAnalytics.track({eventName:n,properties:t})},i.loginAf=function(n){e.exec("AppsFlyer","login",{userId:n},(function(n){}),(function(n){}))},i.putUserData=function(n,t){e.exec("Bugly","putUserData",{key:n,value:t},(function(n){}),(function(n){}))},i.putDeviceId=function(n){e.exec("Bugly","deviceId",{deviceId:n},(function(n){}),(function(n){}))},i.putLocalUserId=function(n){this.loginBI(n)},i.toast=function(n,t){void 0===t&&(t=1),e.exec("Toast","show",{msg:n,duration:t})},i.showSplash=function(){e.exec("SplashPlugin","show",{path:""})},i.hideSplash=function(){e.exec("SplashPlugin","hide",{path:""})},t(n,null,[{key:"instance",get:function(){return this._instance||(this._instance=new n),this._instance}}]),n}())._instance=void 0,i._RF.pop()}}}));

System.register("chunks:///_virtual/SdkAdManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SdkConfig.ts","./SdkError.ts","./AdBase.ts","./SdkSingleton.ts","./TimerRecord.ts","./AdDef.ts"],(function(e){var t,r,n,o,d,a,i,s,c,h;return{setters:[function(e){t=e.inheritsLoose},function(e){r=e.cclegacy,n=e.sys},function(e){o=e.AdConfigInfo},function(e){d=e.emSdkErrorCode},null,function(e){a=e.SdkSingleton},function(e){i=e.SdkTimerRecord,s=e.emTimerRecordKeys},function(e){c=e.emAdPlacement,h=e.emVideoState}],execute:function(){r._RF.push({},"1a1a5iTFP5LybcgcJHBIZFD","SdkAdManager",void 0);var u=e("emCacheAdType",function(e){return e[e.Reward=1]="Reward",e[e.Banner=2]="Banner",e[e.Insert=4]="Insert",e[e.CustomGrid=8]="CustomGrid",e}({})),A=e("SdkAdManager",function(e){function r(){for(var t,r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(t=e.call.apply(e,[this].concat(n))||this).isRewardAdReady=!1,t.isInsertAdReady=!1,t.isBannerAdReady=!1,t.isCustomAdReady=!1,t.cacheAdType=0,t.cacheAfterClose=0,t.adComponent=void 0,t.ga=void 0,t.logger=void 0,t.isShowing=!1,t}t(r,e);var a=r.prototype;return a.Init=function(){this.isRewardAdReady=!1,this.isInsertAdReady=!1,this.isBannerAdReady=!1,this.isCustomAdReady=!1},a.UnInit=function(){this.isRewardAdReady=!1,this.isInsertAdReady=!1,this.isBannerAdReady=!1,this.isCustomAdReady=!1},a.cacheCustomAd=function(){var e=this;return new Promise((function(t,r){if(!e.adComponent)return e.logger.error("Sdk_Ad_Not_Init","广告组件没有初始化"),void r({errMsg:d.Sdk_Ad_Not_Init,errData:""});if(0==n.getNetworkType())return e.logger.error("SDK_Net_Error","网络未连接"),void r({errMsg:d.SDK_Net_Error,errData:"net is not connect"});if(e.isCustomAdReady=!1,e.adComponent.isCanUseCustomAd()){var a=o.customGridUnitId;e.adComponent.loadCustomAd("cache",a).then((function(){e.isCustomAdReady=!0,t(!0)})).catch(r)}else r({errMsg:d.Sdk_Ad_Not_Support,errData:"不支持的广告类型"})}))},a.cacheInsertAd=function(){var e=this;return new Promise((function(t,r){if(!e.adComponent)return e.logger.error("Sdk_Ad_Not_Init","广告组件没有初始化"),void r({errMsg:d.Sdk_Ad_Not_Init,errData:""});if(0==n.getNetworkType())return e.logger.error("SDK_Net_Error","网络未连接"),void r({errMsg:d.SDK_Net_Error,errData:"net is not connect"});if(e.isInsertAdReady=!1,!e.adComponent.isCanUseInterstitialAd())return e.logger.error("cacheInsertAd","isCanUseInterstitialAd false"),void r({errMsg:d.Sdk_Ad_Not_Support,errData:"isCanUseInterstitialAd false"});var a=o.insertUnitId;e.adComponent.loadInterstitialAd("cache",a).then((function(){e.isInsertAdReady=!0,t(!0)})).catch(r)}))},a.cacheRewardAd=function(e){var t=this;return new Promise((function(r,o){if(!t.adComponent)return t.logger.error("Sdk_Ad_Not_Init","广告组件没有初始化"),void o({errMsg:d.Sdk_Ad_Not_Init,errData:""});if(0==n.getNetworkType())return t.logger.error("SDK_Net_Error","网络未连接"),void o({errMsg:d.SDK_Net_Error,errData:"net is not connect"});if(t.isRewardAdReady=!1,!t.adComponent.isCanUseRewardedViedeoAd())return t.logger.error("cacheRewardAd","isCanUseRewardedViedeoAd false"),void o({errMsg:d.Sdk_Ad_Not_Support,errData:"isCanUseRewardedViedeoAd false"});var a=e||t.getRewardUnitId();t.adComponent.loadRewardedVideoAd("cache",a).then((function(){t.isRewardAdReady=!0,r(!0)})).catch(o)}))},a.cacheBannerAd=function(e){var t=this;return new Promise((function(r,a){if(!t.adComponent)return t.logger.error("Sdk_Ad_Not_Init","广告组件没有初始化"),void a({errMsg:d.Sdk_Ad_Not_Init,errData:""});if(0==n.getNetworkType())return t.logger.error("SDK_Net_Error","网络未连接"),void a({errMsg:d.SDK_Net_Error,errData:"net is not connect"});if(t.isBannerAdReady=!1,!t.adComponent.isCanUseBannerAd())return t.logger.error("cacheBannerAd","isCanUseBannerAd false"),void a({errMsg:d.Sdk_Ad_Not_Support,errData:"isCanUseBannerAd false"});var i=o.bannerUnitId;t.adComponent.loadBannerAd("cache",i,e).then((function(){t.isBannerAdReady=!0,r(!0)})).catch(a)}))},a.showBannerAd=function(e,t){var r=this;return void 0===t&&(t=c.BOTTOM),new Promise((function(o,a){return r.adComponent?0==n.getNetworkType()?(r.logger.error("SDK_Net_Error","网络未连接"),void a({errMsg:d.SDK_Net_Error,errData:"net is not connect"})):void(r.isBannerAdReady?r.adComponent.showBannerAd(e,!0).then(o).catch(a):r.cacheBannerAd(t).then((function(){r.showBannerAd(e).then(o).catch(a)})).catch(a)):(r.logger.error("Sdk_Ad_Not_Init","广告组件没有初始化"),void a({errMsg:d.Sdk_Ad_Not_Init,errData:""}))}))},a.hideBannerAd=function(e){this.adComponent?(this.adComponent.isCanUseBannerAd()&&this.adComponent.showBannerAd(e,!1).then((function(){console.log("隐藏banner广告成功")})).catch((function(e){console.log("关闭banner广告失败",e)})),this.isBannerAdReady=!1):console.error("广告组件没有初始化")},a.showInstertAd=function(e){var t=this;return new Promise((function(r,a){if(!t.adComponent)return t.logger.error("Sdk_Ad_Not_Init","广告组件没有初始化"),void a({errMsg:d.Sdk_Ad_Not_Init,errData:""});if(0==n.getNetworkType())return t.logger.error("SDK_Net_Error","网络未连接"),void a({errMsg:d.SDK_Net_Error,errData:"net is not connect"});if(!t.adComponent.isCanUseInterstitialAd())return t.logger.error("showInstertAd","isCanUseInterstitialAd false"),void a({errMsg:d.Sdk_Ad_Not_Support,errData:"isCanUseInterstitialAd false"});var c=i.getInstance().get(s.Game_Start);if(c<o.insertCanShowSinceStart){var h=c+" 小于允许首次展示插屏时间 "+o.insertCanShowSinceStart;return t.logger.error("showInstertAd",h),void a({errMsg:d.Sdk_Ad_Time_Error,errData:h})}var u=i.getInstance().get(s.Show_Insert_Ad);if(-1==u||u>=o.insertDelat)t.isInsertAdReady?t.adComponent.showInterstitialAd(e).then((function(){t.cacheInsertAd().then((function(){})).catch((function(){})),i.getInstance().start(s.Show_Insert_Ad),r(!0)})).catch(a):t.cacheInsertAd().then((function(){t.showInstertAd(e).then(r).catch(a)})).catch(a);else{var A=u+" 间隔小于允许展示插屏时间 "+o.insertDelat;t.logger.error("showInstertAd",A),a({errMsg:d.Sdk_Ad_Time_Error,errData:A})}}))},a.showCustomAd=function(e){var t=this;return new Promise((function(r,o){return t.adComponent?0==n.getNetworkType()?(t.logger.error("SDK_Net_Error","网络未连接"),void o({errMsg:d.SDK_Net_Error,errData:"net is not connect"})):void(t.isCustomAdReady?t.adComponent.showCustomAd(e,!0).then(r).catch(o):t.adComponent.isCanUseCustomAd()&&t.cacheCustomAd().then((function(){t.showCustomAd(e).then(r).catch(o)})).catch(o)):(t.logger.error("Sdk_Ad_Not_Init","广告组件没有初始化"),void o({errMsg:d.Sdk_Ad_Not_Init,errData:""}))}))},a.hideCustomAd=function(e){var t=this;this.adComponent?this.adComponent&&this.adComponent.isCanUseCustomAd()&&this.adComponent.showCustomAd(e,!1).then((function(){t.isCustomAdReady=!1})).catch((function(){t.isCustomAdReady=!1})):this.logger.error("Sdk_Ad_Not_Init","广告组件没有初始化")},a.cacheAds=function(e){if(this.adComponent)return(e&u.Reward)==u.Reward&&this.adComponent.isCanUseRewardedViedeoAd()&&this.cacheRewardAd(this.getRewardUnitId()).then((function(){})).catch((function(){})),(e&u.Banner)==u.Banner&&this.adComponent.isCanUseBannerAd()&&this.cacheBannerAd(c.BOTTOM).then((function(){})).catch((function(){})),(e&u.Insert)==u.Insert&&this.adComponent.isCanUseInterstitialAd()&&this.cacheInsertAd().then((function(){})).catch((function(){})),(e&u.CustomGrid)==u.CustomGrid&&this.adComponent.isCanUseCustomAd()&&this.cacheCustomAd().then((function(){})).catch((function(){})),this;console.error("广告组件没有初始化")},a.Setup=function(e,t,r){this.adComponent=e,e.Init(),this.ga=t,this.logger=r},a.showRewardAd=function(e,t){var r=this;return new Promise((function(o,a){return r.adComponent?0==n.getNetworkType()?(r.logger.error("SDK_Net_Error","网络未连接"),void a({errMsg:d.SDK_Net_Error,errData:"net is not connect"})):r.isShowing?(r.logger.error("Sdk_Ad_Show_Repeat_Error","有相同广告正在展示"),void a({errMsg:d.Sdk_Ad_Show_Repeat_Error,errData:""})):(r.isShowing=!0,r.ga.trackAdEvent(e,t,h.Load,"load"),void r.adComponent.showRewardedVideoAd(e,t).then((function(){r.isShowing=!1,r.ga.trackAdEvent(e,t,h.SeeFinish,"finish"),o(!0)})).catch((function(n){r.isShowing=!1,a({errMsg:d.Sdk_Ad_Close_Reward,errData:""}),n.errMsg==d.Sdk_Ad_Close_Reward&&r.ga.trackAdEvent(e,t,h.Close,"close")}))):(r.logger.error("Sdk_Ad_Not_Init","广告组件没有初始化"),void a({errMsg:d.Sdk_Ad_Not_Init,errData:""}))}))},a.showRewardVideoAd=function(e){var t=this;return new Promise((function(r,n){t.showRewardAd(e,t.getRewardUnitId()).then(r).catch(n)}))},a.hasRewardVideoAd=function(){return this.adComponent?this.adComponent.hasRewardedVideo():new Promise((function(e,t){t(!1)}))},a.getRewardUnitId=function(){return n.os==n.OS.IOS?o.rewardUnitIdiOS:o.rewardUnitId},a.showInsterstital=function(e){return void 0===e&&(e="default"),new Promise((function(t,n){r.getInstance().showInstertAd(e).then(t).catch(n)}))},a.showCustomGridAd=function(e){var t=this;void 0===e&&(e="default"),r.getInstance().showCustomAd(e).then((function(){t.logger.log("showCustomGridAd","success",e)})).catch((function(){t.logger.error("showCustomGridAd","fail",e)}))},a.hideCustomGridAd=function(e){void 0===e&&(e="default"),r.getInstance().hideCustomAd(e)},a.showBanner=function(e,t){var n=this;void 0===e&&(e="default"),void 0===t&&(t=c.BOTTOM),r.getInstance().showBannerAd(e,t).then((function(){n.logger.log("showBanner","success",e,t)})).catch((function(){n.logger.error("showBanner","fail",e,t)}))},a.hideBanner=function(e){void 0===e&&(e="default"),r.getInstance().hideBannerAd(e)},r}(a));e("SDKAD",A.getInstance());r._RF.pop()}}}));

System.register("chunks:///_virtual/SdkBase.ts",["cc"],(function(t){var i,e;return{setters:[function(t){i=t.cclegacy,e=t.sys}],execute:function(){i._RF.push({},"718dfPa85VIC5vrd0gNeQ9F","SdkBase",void 0);t("SdkBase",function(){function t(t,i,e,o,r,s){this.platform=void 0,this.bi=void 0,this.http=void 0,this.logger=void 0,this.notifer=void 0,this.native=void 0,this.platform=t,this.bi=i,this.logger=o,this.notifer=r,this.http=e,this.native=s}var i=t.prototype;return i.checkIsNetWork=function(){return 0==e.getNetworkType()},i.throwError=function(t){},t}());i._RF.pop()}}}));

System.register("chunks:///_virtual/SdkBiManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UserData.ts","./SdkConfig.ts","./SdkUtils.ts","./TimerRecord.ts","./Singleton.ts"],(function(t){var e,n,i,s,r,a,o,c;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy},function(t){i=t.UserData},function(t){s=t.SystemInfo,r=t.UserInfo},function(t){a=t.SdkUtils},function(t){o=t.SdkTimerRecord},function(t){c=t.Singleton}],execute:function(){n._RF.push({},"25e5dA66bVDo41A6y8W3Ucs","SdkBiManager",void 0);t("SdkBiManager",function(t){function n(){for(var e,n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))||this).TDAnalytics=void 0,e.isLogin=!1,e}e(n,t);var c=n.prototype;return c.Init=function(){this.TDAnalytics=window.TDAnalytics},c.UnInit=function(){},c.track=function(t,e){e.is_new_user=i.inst.isNewRegister?1:0,e.app_version=s.gameVersion,e.app_env=s.gameEnvVersion,e.project_id=s.projectId,e.client_id=s.clientId,e.device_id=a.getLocalUUID(),e.user_id=r.userId||0,e.wxgame_openid=r.wxgame_openid,e.since_start=o.getInstance().getTimeSinceStart(),this.TDAnalytics||(this.TDAnalytics=window.TDAnalytics),!this.isLogin&&r.userId>0&&(this.isLogin=!0,this.TDAnalytics.userSet({properties:{user_name:r.wxgame_openid,sdk_user_id:r.userId}})),this.TDAnalytics.track({eventName:t,properties:e})},c.trackAdEvent=function(t,e,n,i){void 0===i&&(i=0),this.track("ad_video",{path:t,adUnitId:e,state:n,errCode:i})},c.trackShareEvent=function(t){this.track("share",t)},c.trackShareWakeUpEvent=function(t){this.track("share_wake",t)},n}(c));n._RF.pop()}}}));

System.register("chunks:///_virtual/SdkConfig.ts",["cc"],(function(e){var n,t;return{setters:[function(e){n=e.cclegacy,t=e.sys}],execute:function(){n._RF.push({},"35ad99RmctNppp2Gj9mJ0yR","SdkConfig",void 0);e("SystemInfo",{clientId:"H5_2.0_weixin.weixin.0-hall20197.weixin.elsfkpt",intClientId:24724,cloudId:36,version:1.12,webSocketUrl:"",loginUrl:"https://openelsfk.nalrer.cn/",shareManagerUrl:"https://market.tuyoo.com/",deviceId:"wechatGame",wxAppId:"wx45e02fc734c7b568",appId:9999,gameId:20197,hall_version:"hall37",cdnPath:"",remotePackPath:"",biLogServer:"https://cbi.tuyoo.com/api/bilog5/text",errorLogServer:"https://cbi.tuyoo.com/api/bilog5/text/error",tywxVersion:"1.6.6_20230103_release",openFeatureFilter:!1,wxPayVersion:"2.0",gaServer:"https://cbi.tuyoo.com/api/bilog5/ga",projectId:20197,gameEnvVersion:"release",gameVersion:"0.0.0",gameAppId:""}),e("SystemInfoEnv",{online:{loginUrl:"https://openelsfk.nalrer.cn/"},sim:{loginUrl:"https://openelsfkfz.nalrer.cn/"},test:{loginUrl:"http://62.234.201.32"}}),e("StateInfo",{debugMode:!0,networkConnected:0!=t.getNetworkType(),networkType:"none",isOnForeground:!0}),e("UserInfo",{userId:0,nickName:"TuWechatGame",avatarUrl:"",authorCode:"",systemType:0,wechatType:"6.6.1",model:"未知设备",system:"iOS 10.0.1",loc:"",scene_id:0,scene_param:"",invite_id:0,wxgame_openid:"",wxgame_session_key:"",signature:"",encryptedData:"",iv:"",wxUserInfo:{},showScene:0,showQuery:{},ip:"0",ipLocInfo:{},brand:"0",roleId:0,serverId:0,platform:"0",snsAppVer:"0",sdkVersion:"0",benchmarkLevel:1,SNSEncryptedData:"",SNSIV:"",SNSLoginInfo:{},userInfoScopeState:!1,snsId:"",token:"",wipw:0,jwttoken:"",launch_scene_id:"",launch_scene_param:"",launch_invite_id:0,role_user_type:""}),e("SdkStorageKeys",{SESSION_KEY:"TU_SESSION_STORAGE",LOCAL_GAME_TIME_RECORD:"LOCAL_GAME_TIME_RECORD",LOCAL_SHARE_TIMES_RECORD:"LOCAL_SHARE_TIMES_RECORD"}),e("GAEvent",{gsm_login_sns:"gsm_login_sns",gsm_login_sdk:"gsm_login_sdk",cross_ad_jump:"cross_ad_jump"}),e("GAPropValue",{start:"start",success:"success",failed:"failed",req:"req",resp:"resp",wx:"wx"}),e("AdConfigInfo",{rewardUnitId:"adunit-635316d9cf458d26",rewardUnitIdiOS:"adunit-2bc26cc15f6b7c4f",bannerUnitId:"adunit-97b6975b7ee1ebe4",insertUnitId:"adunit-e93757fedee115b8",customGridUnitId:"adunit-2e9669086b290f21",insertCanShowSinceStart:5e3,insertDelat:5e3});n._RF.pop()}}}));

System.register("chunks:///_virtual/SdkCrossAdManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SdkConfig.ts","./SdkEventType.ts","./SdkUtils.ts","./GaClickStatEventDef.ts","./ads_manager.ts","./SdkSingleton.ts","./SdkEventManager.ts"],(function(t){var n,i,o,e,s,r,a,c,d,g,f,l,h;return{setters:[function(t){n=t.inheritsLoose},function(t){i=t.cclegacy,o=t.sys,e=t.resources},function(t){s=t.UserInfo,r=t.GAEvent,a=t.SystemInfo},function(t){c=t.SdkEventType},function(t){d=t.SdkUtils},function(t){g=t.clickStatEventType},function(t){f=t.ads_manager},function(t){l=t.SdkSingleton},function(t){h=t.SdkEventManager}],execute:function(){i._RF.push({},"3a5fcFniaxFg71axKE5V+A8","SdkCrossAdManager",void 0);t("SdkCrossAdManager",function(t){function i(){for(var n,i=arguments.length,o=new Array(i),e=0;e<i;e++)o[e]=arguments[e];return(n=t.call.apply(t,[this].concat(o))||this).ga=void 0,n.logger=void 0,n.http=void 0,n.channel=void 0,n.retryCrossTimes=void 0,n.allAdInfoList=void 0,n.rawAdInfoList=void 0,n.crossAdType=void 0,n.hasInitLoaclConfig=!1,n.jumpTargetAdDetail=void 0,n}n(i,t);var l=i.prototype;return l.Init=function(){throw new Error("Method not implemented.")},l.UnInit=function(){throw new Error("Method not implemented.")},l.Setup=function(t,n,i,o){this.ga=t,this.logger=n,this.channel=i,this.http=o,this.retryCrossTimes=3,h.getInstance().register(c.GO_TO_MINIGAME,this.onEvnGotoMiniGame,this).register(c.NET_STATE_CHANGE,this.onNetChange,this)},l.onNetChange=function(){this.loadLocalAdBoxConfig()},l.requestADInfo=function(){var t=this;this.retryCrossTimes--;var n={act:"api.getCrossConfig",time:(new Date).getTime(),game_mark:a.cloudId+"-"+a.gameId},i=d.getConfigSignStr(n),o=[];for(var e in n)o.push(e+"="+n[e]);o.push("sign="+i);var s=a.shareManagerUrl+"?"+o.join("&");this.http.get(s).then((function(n){if(1==n.retcode){var i=n;t.allAdInfoList=[],i.retmsg&&(t.rawAdInfoList=i.retmsg,t.processIconConfigInfo())}else if(200==n.statusCode&&n.data){i=n.data;t.allAdInfoList=[],i.retmsg&&(t.rawAdInfoList=i.retmsg,t.processIconConfigInfo())}else t.retryCrossTimes>0?t.requestADInfo():t.loadLocalAdBoxConfig()})).catch((function(n){t.retryCrossTimes>0?t.requestADInfo():t.loadLocalAdBoxConfig()}))},l.loadLocalAdBoxConfig=function(){var t=this;this.hasInitLoaclConfig||0!=o.getNetworkType()&&e.load("ads/ad_box",(function(n,i){n?console.error(n):(t.hasInitLoaclConfig=!0,t.rawAdInfoList=i.json,t.processIconConfigInfo())}))},l.processIconConfigInfo=function(){var t=this;this.allAdInfoList=[],null!=this.rawAdInfoList&&(this.rawAdInfoList.forEach((function(n){(null==n.icon_weight||Math.floor(n.icon_weight)<=.1)&&(n.icon_weight=0);for(var i=!1,o=n.push_uids||[],e=0,r=o.length;e<r;e++)if(s.userId.toString()==o[e]){i=!0;break}if(i)t.allAdInfoList.push(n);else{var a=n.push_users||[],c=a.length;if(0==c)t.allAdInfoList.push(n);else for(var d=0;d<c;d++){var g=s.userId.toString();if(g.charAt(g.length-1)==a[d]){t.allAdInfoList.push(n);break}}}})),f.setRawData(this.rawAdInfoList),h.getInstance().emit(c.GET_ADMANAGER_ICON_INFO_SUCCESS,this.rawAdInfoList))},l.AddAd=function(t,n,i,o){f.addAdsNode(t,n,i,o)},l.onEvnGotoMiniGame=function(t,n,i){this.jumpTargetAdDetail=t,this.crossAdType=i;var o=this.getCrossAdConfigByAppId(t.toappid);this.jump2MiniProgramByConfig(o,n)},l.getCrossAdConfigByAppId=function(t){var n=this.rawAdInfoList;if(n)for(var i=0;i<n.length;++i){var o=n[i];if(o.toappid===t)return o}else console.error("cross ad error:rawAdInfoList 为空");return null},l.jump2MiniProgramByConfig=function(t,n){var i=this;if(t)try{var o=t.icon_skip_type,e=t.toappid,s=t.togame,a=t.path,d=t.second_toappid,f=t.icon_id,l=t.id,u=[f,l,"",e,s,"0",this.crossAdType],p={config_id:l,icon_id:f,toappid:e,showtype:n};this.ga.trackCrossAd(r.cross_ad_jump,p,1),this.ga.clickStat(g.clickStatEventTypeClickAdBtn,u);var A=1===o?e:d;1===o&&this.channel.navigateToMiniProgram(A,a,"release",u).then((function(t){i.ga.clickStat(g.clickStatEventTypeClickDirectToMiniGameSuccess,u),i.ga.trackCrossAd(r.cross_ad_jump,p,2),h.getInstance().emit(c.GO_TO_MINIGAME_SUCCESS,i.jumpTargetAdDetail),i.logger.log("wx.navigateToMiniProgram success",t)})).catch((function(t){i.ga.clickStat(g.clickStatEventTypeClickDirectToMiniGameFail,u),i.ga.trackCrossAd(r.cross_ad_jump,p,3),h.getInstance().emit(c.GO_TO_MINIGAME_FAIL,i.jumpTargetAdDetail),i.logger.log("wx.navigateToMiniProgram fail",t)}))}catch(t){this.logger.log("error:","AdManager.onClickAdIconBtn——"+JSON.stringify(t))}},i}(l));i._RF.pop()}}}));

System.register("chunks:///_virtual/SdkDef.ts",["cc"],(function(){var e;return{setters:[function(c){e=c.cclegacy}],execute:function(){e._RF.push({},"120f8RH4E1MQIGQaNfhn/dc","SdkDef",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/SdkError.ts",["cc"],(function(_){var e;return{setters:[function(_){e=_.cclegacy}],execute:function(){e._RF.push({},"cf2ceaqgexC/LdIPb7mu7u3","SdkError",void 0);_("emSdkErrorCode",function(_){return _[_.None=0]="None",_.SDK_Net_Error="e_10",_.SDK_INIT_Error="e_11",_.SDK_INIT_Account_Error="e_12",_.Net_Post_Req_Error="e_101",_.Net_Post_Res_Error="e_102",_.Net_Get_Req_Error="e_103",_.Net_Get_Res_Error="e_104",_.Not_Auth="e_wx_101",_.Req_GetUserInfo_Fail="e_wx_102",_.No_EncryptedData_IV="e_wx_103",_.Req_GetSettingFail="e_wx_104",_.Req_LoginFail="e_wx_105",_.Req_pf_SetWxEncryptedDataFail="e_pf_1001",_.Req_pf_SetWxEncryptedDataError="e_pf_1002",_.Req_pf_LoginBySnsIdNoVerifyFail="e_pf_1003",_.Req_pf_LoginBySnsIdNoVerifyError="e_pf_1004",_.Req_pf_PLocInfoFail="e_pf_1005",_.Req_pf_PLocInfoError="e_pf_1006",_.Sdk_Ad_Not_Init="e_ad_2001",_.Sdk_Ad_Not_Support="e_ad_2002",_.Sdk_Ad_Load_Error="e_ad_2003",_.Sdk_Ad_Show_Error="e_ad_2004",_.Sdk_Ad_Not_Instantiate="e_ad_2005",_.Sdk_Ad_On_Error="e_ad_2006",_.Sdk_Ad_Show_Repeat_Error="e_ad_2007",_.Sdk_Ad_Time_Error="e_ad_2008",_.Sdk_Ad_Close_Reward="e_ad_2009",_.Sdk_Ad_Show__Conflicts="e_ad_2010",_}({}));e._RF.pop()}}}));

System.register("chunks:///_virtual/SdkEventManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SdkSingleton.ts"],(function(n){var t,e,r,i;return{setters:[function(n){t=n.inheritsLoose},function(n){e=n.cclegacy,r=n.EventTarget},function(n){i=n.SdkSingleton}],execute:function(){e._RF.push({},"d97ebEcBAFHMq6Jybu16HZV","SdkEventManager",void 0);n("SdkEventManager",function(n){function e(){for(var t,e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return(t=n.call.apply(n,[this].concat(r))||this).manager=void 0,t}t(e,n);var i=e.prototype;return i.Init=function(){return this.manager=new r,this},i.UnInit=function(){},i.register=function(n,t,e){return this.manager.on(n,t,e,!1),this},i.unregister=function(n,t,e){return this.manager.off(n,t,e),this},i.registerOnce=function(n,t,e){return this.manager.once(n,t,e),this},i.emit=function(n,t,e,r,i,o){this.manager.emit(n,t,e,r,i,o)},e}(i));e._RF.pop()}}}));

System.register("chunks:///_virtual/SdkEventType.ts",["cc"],(function(_){var E;return{setters:[function(_){E=_.cclegacy}],execute:function(){E._RF.push({},"55cc1icqJVBE6C4MhMF728w","SdkEventType",void 0);_("SdkEventType",{NET_STATE_CHANGE:"net_state_change",TCP_ERROR:"tcp_error",TCP_CLOSE:"tcp_close",TCP_OPENED:"tcp_opened",TCP_RECONNECT:"tcp_reconnect",TCP_RECEIVE:"tcp_receive",SDK_LOGIN_SUCCESS:"sdk_login_success",SDK_LOGIN_FAIL:"sdk_login_fail",WEIXIN_LOGIN_SUCCESS:"weixin_login_success",WEIXIN_LOGIN_FAIL:"weixin_login_fail",GET_USER_FEATURE_SUCCESS:"GET_USER_FEATURE_SUCCESS",GET_USER_FEATURE_FAIL:"GET_USER_FEATURE_FAIL",GET_SHARE_CONFIG_SUCCESS:"GET_SHARE_CONFIG_SUCCESS",GET_SHARE_CONFIG_FAIL:"GET_SHARE_CONFIG_FAIL",GET_OPEN_DATA_RESULT_SUCCESS:"GET_OPEN_DATA_RESULT_SUCCESS",GET_OPEN_DATA_RESULT_FAIL:"GET_OPEN_DATA_RESULT_FAIL",GET_OPEN_DATA_RESULT_TIMEOUT:"GET_OPEN_DATA_RESULT_TIMEOUT",SEND_HEART_BEAT:"SEND_HEART_BEAT",GAME_SHOW:"GAME_SHOW",GAME_HIDE:"GAME_HIDE",START_AUTHORIZATION_SUCCESS:"START_AUTHORIZATION_SUCCESS",START_AUTHORIZATION_FAILED:"START_AUTHORIZATION_FAILED",GET_USERFEATURE_INFO_SUCCESS:"GET_USERFEATURE_INFO_SUCCESS",GET_USERFEATURE_INFO_FAIL:"GET_USERFEATURE_INFO_FAIL",TT_GET_CONFIG_SUCCESS:"TT_GET_CONFIG_SUCCESS",GET_ADMANAGER_ICON_INFO_SUCCESS:"GET_ADMANAGER_ICON_INFO_SUCCESS",GET_ADMANAGER_BANNER_INFO_SUCCESS:"GET_ADMANAGER_BANNER_INFO_SUCCESS",GET_ADMANAGER_NEWICON_INFO_SUCCESS:"GET_ADMANAGER_NEWICON_INFO_SUCCESS",GO_TO_MINIGAME:"GO_TO_MINIGAME",GO_TO_MINIGAME_SUCCESS:"GO_TO_MINIGAME_SUCCESS",GO_TO_MINIGAME_FAIL:"GO_TO_MINIGAME_FAIL",CROSS_AD_SHOW_LIST_PLAY:"CROSS_AD_SHOW_LIST_PLAY",CROSS_AD_REWARD_STATE_CHANGE:"CROSS_AD_REWARD_STATE_CHANGE",CROSS_AD_REWARD_EXCHANGE_CHANGE:"CROSS_AD_REWARD_EXCHANGE_CHANGE",CREATE_PAY_ORDER_SUCCESS:"CREATE_PAY_ORDER_SUCCESS",CREATE_PAY_ORDER_FAIL:"CREATE_PAY_ORDER_FAIL",SDK_WX_PAY_SUCCESS:"SDK_WX_PAY_SUCCESS",SDK_WX_PAY_FAIL:"SDK_WX_PAY_FAIL",SET_WX_SENSITIVE_DATA_SUCCESS:"SET_WX_SENSITIVE_DATA_SUCCESS",SET_WX_SENSITIVE_DATA_FAIL:"SET_WX_SENSITIVE_DATA_FAIL",SET_WX_USER_INFO_SUCCESS:"SET_WX_USER_INFO_SUCCESS",SET_WX_USER_INFO_FAIL:"SET_WX_USER_INFO_FAIL",SDK_PAY_VERIFY_CACHE_ORDER:"SDK_PAY_VERIFY_CACHE_ORDER"});E._RF.pop()}}}));

System.register("chunks:///_virtual/SdkHttp.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SdkSingleton.ts"],(function(t){var n,e,i;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy},function(t){i=t.SdkSingleton}],execute:function(){e._RF.push({},"7e35eyRA9xC3bkiO34p+V8t","SdkHttp",void 0);t("SdkHttp",function(t){function e(){for(var n,e=arguments.length,i=new Array(e),o=0;o<e;o++)i[o]=arguments[o];return(n=t.call.apply(t,[this].concat(i))||this).http=void 0,n}n(e,t);var i=e.prototype;return i.Init=function(){},i.UnInit=function(){},e}(i));e._RF.pop()}}}));

System.register("chunks:///_virtual/SdkLog.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SdkSingleton.ts"],(function(n){var i,o,r;return{setters:[function(n){i=n.inheritsLoose},function(n){o=n.cclegacy},function(n){r=n.SdkSingleton}],execute:function(){o._RF.push({},"cb112Ld4H5JJLXl5Xu+0bc0","SdkLog",void 0);n("SdkLog",function(n){function o(){for(var i,o=arguments.length,r=new Array(o),t=0;t<o;t++)r[t]=arguments[t];return(i=n.call.apply(n,[this].concat(r))||this).isEnable=void 0,i}i(o,n);var r=o.prototype;return r.Init=function(){return this},r.UnInit=function(){},r.setEnableLog=function(n){return this.isEnable=n,this},r.log=function(n,i){if(this.isEnable){for(var o=(n=n||"minisdk")+" : "+JSON.stringify(i),r=arguments.length,t=new Array(r>2?r-2:0),e=2;e<r;e++)t[e-2]=arguments[e];t?console.log(o,t):console.log(o)}},r.warn=function(n,i){if(this.isEnable){for(var o=(n=n||"minisdk")+" : "+JSON.stringify(i),r=arguments.length,t=new Array(r>2?r-2:0),e=2;e<r;e++)t[e-2]=arguments[e];t?console.warn(o,t):console.warn(o)}},r.error=function(n,i){if(this.isEnable){for(var o=(n=n||"minisdk")+" : "+JSON.stringify(i),r=arguments.length,t=new Array(r>2?r-2:0),e=2;e<r;e++)t[e-2]=arguments[e];t?console.error(o,t):console.error(o)}},o}(r));o._RF.pop()}}}));

System.register("chunks:///_virtual/SdkManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SdkSingleton.ts","./HttpBase.ts","./SdkLog.ts","./SdkEventManager.ts","./WebbrowserGa.ts","./WebbrowserAccount.ts","./SdkSystemInfo.ts","./ChannelBase.ts","./NativeBase.ts","./SdkError.ts","./AdBase.ts","./SdkAdManager.ts","./TimerRecord.ts","./NativeGa.ts","./GooglePlayChannel.ts","./AndroidNative.ts","./IronSourceAd.ts","./VisitorAccount.ts","./JsbNativeCall.ts","./WechatAccount.ts","./WechatMiniAd.ts","./WechatGa.ts","./WechatChannel.ts","./WechatNative.ts","./WechatHttp.ts"],(function(t){var i,n,e,s,o,h,a,r,c,g,l,u,f,d,w,v,p,I,S,k,A,b,E,W,m,N,M,P;return{setters:[function(t){i=t.inheritsLoose},function(t){n=t.cclegacy,e=t.sys},function(t){s=t.SdkSingleton},function(t){o=t.HttpBase},function(t){h=t.SdkLog},function(t){a=t.SdkEventManager},function(t){r=t.WebbrowserGa},function(t){c=t.WebbrowserAccount},function(t){g=t.SdkSystemInfo},function(t){l=t.ChannelBase},function(t){u=t.NativeBase},function(t){f=t.emSdkErrorCode},function(t){d=t.AdBase},function(t){w=t.SdkAdManager},function(t){v=t.SdkTimerRecord},function(t){p=t.NativeGa},function(t){I=t.GooglePlayChannel},function(t){S=t.AndroidNative},function(t){k=t.IronSourceAd},function(t){A=t.VisitorAccount},function(t){b=t.JsbNativeCall},function(t){E=t.WechatAccount},function(t){W=t.WechatMiniAd},function(t){m=t.WechatGa},function(t){N=t.WechatChannel},function(t){M=t.WechatNative},function(t){P=t.WechatHttp}],execute:function(){n._RF.push({},"b758bbAPxtKHpvk7SFCBgAr","SdkManager",void 0);t("SdkManager",function(t){function n(){for(var i,n=arguments.length,e=new Array(n),s=0;s<n;s++)e[s]=arguments[s];return(i=t.call.apply(t,[this].concat(e))||this).ga=void 0,i.http=void 0,i.account=void 0,i.channel=void 0,i.native=void 0,i.logger=void 0,i.notifier=void 0,i.isInit=!1,i}i(n,t);var s=n.prototype;return s.Init=function(){return this.notifier=a.getInstance().Init(),g.getInstance().Init(),v.getInstance().Init(),this},s.UnInit=function(){},s.Setup=function(t,i){switch(g.getInstance().Setup(t,i),e.platform){case e.Platform.DESKTOP_BROWSER:case e.Platform.EDITOR_CORE:case e.Platform.EDITOR_PAGE:this.logger=h.getInstance().Init().setEnableLog(!0),this.native=new u(window,this.ga,this.http,this.logger,this.notifier,null),this.http=new o(window,null,null,this.logger,this.notifier,this.native),this.ga=new r(window,null,this.http,this.logger,this.notifier,this.native,t),this.account=new c(window,this.ga,this.http,this.logger,this.notifier,this.native),this.channel=new l(window,this.ga,this.http,this.logger,this.notifier,this.native);var n=new d(window,this.ga,this.http,this.logger,this.notifier,this.native);w.getInstance().Setup(n,this.ga,this.logger);break;case e.Platform.WECHAT_GAME:this.logger=h.getInstance().Init().setEnableLog(!1);var s=window.wx;this.http=new P(s,null,null,this.logger,this.notifier,this.native),this.ga=new m(s,null,this.http,this.logger,this.notifier,this.native,t),this.account=new E(s,this.ga,this.http,this.logger,this.notifier,this.native),this.channel=new N(s,this.ga,this.http,this.logger,this.notifier,this.native),this.channel.Init(),this.native=new M(s,this.ga,this.http,this.logger,this.notifier,this.native);var a=new W(s,this.ga,this.http,this.logger,this.notifier,this.native);w.getInstance().Setup(a,this.ga,this.logger);break;case e.Platform.ANDROID:case e.Platform.IOS:b.init(),this.logger=h.getInstance().Init().setEnableLog(!0),this.http=new o(window,null,null,this.logger,this.notifier,this.native),this.ga=new p(window,null,this.http,this.logger,this.notifier,this.native,t),this.account=new A(window,this.ga,this.http,this.logger,this.notifier,this.native),this.channel=new I(window,this.ga,this.http,this.logger,this.notifier,this.native),this.channel.Init(),this.native=new S(window,this.ga,this.http,this.logger,this.notifier,this.native);var f=new k(window,this.ga,this.http,this.logger,this.notifier,this.native);w.getInstance().Setup(f,this.ga,this.logger)}return this.isInit=!0,this},s.Excute=function(){var t=this;this.account&&this.account.ReqIpLocInfo(1).then((function(i){t.logger.log("ipinfo:",i)})).catch((function(i){t.logger.error("ipinfo error:",i)}))},s.loginSnsAndSdk=function(){var t=this;return new Promise((function(i,n){0!=e.getNetworkType()?t.isInit&&t.account?t.account.login().then(i).catch(n):n({errMsg:f.SDK_INIT_Account_Error,errData:"sdk或者账号组件未初始化"}):n({errMsg:f.SDK_Net_Error,errData:"网络未连接"})}))},s.track=function(t,i){return this.isInit&&this.ga&&this.ga.track(t,i),this},s.setEnableLog=function(t){return this.logger.setEnableLog(t),this},n}(s));n._RF.pop()}}}));

System.register("chunks:///_virtual/SdkManagerTest.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SdkSingleton.ts"],(function(n){var t,e,i;return{setters:[function(n){t=n.inheritsLoose},function(n){e=n.cclegacy},function(n){i=n.SdkSingleton}],execute:function(){e._RF.push({},"7bdb08J5aRNpr5prVUd/zke","SdkManagerTest",void 0);n("SdkManagerTest",function(n){function e(){return n.apply(this,arguments)||this}t(e,n);var i=e.prototype;return i.Init=function(){},i.UnInit=function(){},i.TestAd=function(){},e}(i));e._RF.pop()}}}));

System.register("chunks:///_virtual/SdkSingleton.ts",["cc"],(function(n){var t;return{setters:[function(n){t=n.cclegacy}],execute:function(){t._RF.push({},"77c2dVknBJBv5ItQEwigXRz","SdkSingleton",void 0);n("SdkSingleton",function(){function n(){}return n.getInstance=function(){return this.instance||(this.instance=new this),this.instance},n}());t._RF.pop()}}}));

System.register("chunks:///_virtual/SdkSystemInfo.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SdkConfig.ts","./SdkSingleton.ts","./SdkLog.ts"],(function(n){var t,o,e,r,i,c;return{setters:[function(n){t=n.inheritsLoose},function(n){o=n.cclegacy},function(n){e=n.SystemInfo,r=n.SystemInfoEnv},function(n){i=n.SdkSingleton},function(n){c=n.SdkLog}],execute:function(){o._RF.push({},"9be5aiJxgFGo5hXwQgCwSbR","SdkSystemInfo",void 0);n("SdkSystemInfo",function(n){function o(){for(var t,o=arguments.length,e=new Array(o),r=0;r<o;r++)e[r]=arguments[r];return(t=n.call.apply(n,[this].concat(e))||this).logger=void 0,t}t(o,n);var i=o.prototype;return i.Init=function(){this.logger=c.getInstance()},i.UnInit=function(){},i.Setup=function(n,t){var o=r[n];for(var i in o)if(Object.prototype.hasOwnProperty.call(o,i)&&Object.prototype.hasOwnProperty.call(e,i)){var c=o[i];e[i]=c}e.gameVersion=t},o}(i));o._RF.pop()}}}));

System.register("chunks:///_virtual/SdkUtil.ts",["cc"],(function(t){var x;return{setters:[function(t){x=t.cclegacy}],execute:function(){x._RF.push({},"3cb96V1UR5BzopVXaUej0wW","SdkUtil",void 0);t("SdkUtil",function(){function t(){}return t.generateUUID=function(){var t=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(x){var n=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"==x?n:3&n|8).toString(16)}))},t.getRandomIntInclusive=function(t,x){return t=Math.ceil(t),x=Math.floor(x),Math.floor(Math.random()*(x-t+1))+t},t}());x._RF.pop()}}}));

System.register("chunks:///_virtual/SdkUtils.ts",["cc","./encode_decode.ts"],(function(e){var t,n,o,r,c,i,a;return{setters:[function(e){t=e.cclegacy,n=e.sys,o=e.UITransform,r=e.director,c=e.view,i=e.Vec3},function(e){a=e.EncodeDecode}],execute:function(){t._RF.push({},"48a57Cm/MhLsZLBomR22uFR","SdkUtils",void 0);e("SdkUtils",function(){function e(){}return e.generateUUID=function(){var e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?n:3&n|8).toString(16)}))},e.checkLocalUUID=function(){return null!=n.localStorage.getItem("LOCAL_UUID_KEY")},e.getLocalUUID=function(){var e=n.localStorage.getItem("LOCAL_UUID_KEY");return e||(e=this.generateUUID(),n.localStorage.setItem("LOCAL_UUID_KEY",e)),e},e.getLocalAccountId=function(){var e=n.localStorage.getItem("LOCAL_ACCOUNT_KEY");return e||(e=this.generateUUID(),n.localStorage.setItem("LOCAL_ACCOUNT_KEY",e)),e},e.isSceneApplicationCode=function(e){return[1047,1048,1049].indexOf(e)>-1},e.convertNodeLTPosToWorldPos=function(e){var t=e.getComponent(o);if(!t)return console.error("需要转换的节点不存在组件 UITransform"),{left:0,top:0,width:t.width,height:t.height};var n=r.getScene().getChildByName("Canvas");if(!n)return console.error("请检查Canvas的路径，默认使用scene/canvas"),{left:0,top:0,width:t.width,height:t.height};var a=t.contentSize,h=c.getVisibleSize(),g=t.convertToWorldSpaceAR(i.ZERO);g=n.getComponent(o).convertToNodeSpaceAR(g);var s=wx.getSystemInfoSync(),x=s.screenWidth/h.width,u=s.screenHeight/h.height,l=a.width*(s.screenWidth/h.width),d=a.height*(s.screenHeight/h.height);return{left:s.screenWidth/2+g.x*x-l*t.anchorX,top:s.screenHeight/2-g.y*u-d*t.anchorY,width:l,height:d}},e.getConfigSignStr=function(e){for(var t=Object.keys(e).sort(),n="",o=0;o<t.length;o++){var r=t[o];"act"!=r&&"sign"!=r&&(n+=r+"="+e[r])}return a.hex_md5("market.tuyoo.com-api-"+n+"-market.tuyoo-api")||""},e}());t._RF.pop()}}}));

System.register("chunks:///_virtual/SettingData.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MKLocalStorage.ts"],(function(t){var e,i,s,n;return{setters:[function(t){e=t.createClass},function(t){i=t.cclegacy},function(t){s=t.getItem,n=t.setItem}],execute:function(){i._RF.push({},"f531e0Nf1tD+qWazvJHKrrs","SettingData",void 0);var u="isMuteEffect",c="isMuteMusic",a="isAcceptTSP",h="k_isOpenShake",r="k_isOpenShakeCamera";t("SettingData",function(){function t(){this._isMuteEffect=void 0,this._isMuteMusic=void 0,this._isAcceptTSP=void 0,this._isOpenShake=void 0,this._isOpenShakeCamera=void 0,this._isMuteEffect=s(u,0),this._isMuteMusic=s(c,0),this._isAcceptTSP=s(a,0),this._isOpenShake=s(h,1),this._isOpenShakeCamera=s(r,1)}return e(t,[{key:"isMuteEffect",get:function(){return this._isMuteEffect},set:function(t){this._isMuteEffect=t,n(u,t)}},{key:"isMuteMusic",get:function(){return this._isMuteMusic},set:function(t){this._isMuteMusic=t,n(c,t)}},{key:"isAcceptTSP",get:function(){return this._isAcceptTSP},set:function(t){this._isAcceptTSP=t,n(a,t)}},{key:"isOpenShake",get:function(){return this._isOpenShake},set:function(t){this._isOpenShake=t,n(h,t)}},{key:"isOpenShakeCamera",get:function(){return this._isOpenShakeCamera},set:function(t){this._isOpenShakeCamera=t,n(r,t)}}],[{key:"inst",get:function(){return null==t._inst&&(t._inst=new t),t._inst}}]),t}())._inst=null,i._RF.pop()}}}));

System.register("chunks:///_virtual/SettingView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MK.ts","./SettingData.ts","./UserData.ts","./PanelBase.ts","./AdSdk.ts","./AssetInfoDefine.ts","./Enumrations.ts","./SceneMode.ts","./ResManager.ts","./Boot.ts","./LanguageManager.ts","./BIDefine.ts","./SdkError.ts","./SdkManager.ts","./emAdPath.ts","./MKAudio.ts","./ToastManager.ts","./EndlessProgressHelper.ts","./SocialDef.ts","./WechatMiniApi.ts","./Util.ts","./sdk.ts","./MKEvent.ts","./EventType.ts","./MKUtil.ts"],(function(e){var t,n,i,a,s,o,r,c,u,l,d,g,h,f,S,p,m,T,_,y,b,C,v,M,k,I,E,A,R,w,B,P,L,W,D,U,O,F;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){s=e.cclegacy,o=e._decorator,r=e.Node,c=e.Sprite,u=e.Toggle,l=e.sys},null,function(e){d=e.SettingData},function(e){g=e.UserData},function(e){h=e.default},function(e){f=e.AdSdk},function(e){S=e.AssetInfoDefine},function(e){p=e.kGameMode},function(e){m=e.SceneMode},function(e){T=e.ResManager},function(e){_=e.audio},function(e){y=e.LanguageManager},function(e){b=e.BIEventID,C=e.emScene,v=e.emAdStatus,M=e.emButtonType,k=e.emButtonScene},function(e){I=e.emSdkErrorCode},function(e){E=e.SdkManager},function(e){A=e.emAdPath},function(e){R=e.audioManager},function(e){w=e.ToastManager},function(e){B=e.EndlessProgressHelper},function(e){P=e.emSharePath},function(e){L=e.WechatMiniApi},function(e){W=e.Util},function(e){D=e.SDK},function(e){U=e.sendEvent},function(e){O=e.Events},function(e){F=e.MKUtil}],execute:function(){var G,N,x,V,z,H,K,j,Y,q,J,Q,X,Z,$;s._RF.push({},"7acceb8UTlFlasPAsErPYj0","SettingView",void 0);var ee=o.ccclass,te=o.property;e("SettingView",(G=ee("SettingView"),N=te(r),x=te(r),V=te(r),z=te(r),H=te(r),K=te(c),G((q=t((Y=function(e){function t(){for(var t,n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return t=e.call.apply(e,[this].concat(s))||this,i(t,"ndToggleEffect",q,a(t)),i(t,"ndToggleMusic",J,a(t)),i(t,"ndToggleTurble",Q,a(t)),i(t,"ndToggleTurbleCamera",X,a(t)),i(t,"ndBtnReport",Z,a(t)),i(t,"retryShareSign",$,a(t)),t.togEffect=void 0,t.togMusic=void 0,t.togTurble=void 0,t.togTurbleCamera=void 0,t.isLoadingScene=!1,t.isWatching=!1,t}n(t,e);var s=t.prototype;return s.start=function(){this.ndToggleEffect&&(this.togEffect=this.ndToggleEffect.getComponent(u),this.togEffect&&(1==d.inst.isMuteEffect?this.togEffect.isChecked=!1:this.togEffect.isChecked=!0)),this.ndToggleMusic&&(this.togMusic=this.ndToggleMusic.getComponent(u),this.togMusic&&(1==d.inst.isMuteMusic?this.togMusic.isChecked=!1:this.togMusic.isChecked=!0)),this.ndToggleTurble&&(this.togTurble=this.ndToggleTurble.getComponent(u),this.togTurble&&(1==d.inst.isOpenShake?this.togTurble.isChecked=!0:this.togTurble.isChecked=!1)),this.ndToggleTurbleCamera&&(this.togTurbleCamera=this.ndToggleTurbleCamera.getComponent(u),this.togTurbleCamera&&(1==d.inst.isOpenShakeCamera?this.togTurbleCamera.isChecked=!0:this.togTurbleCamera.isChecked=!1)),this.refreshRetryState()},s.refreshRetryState=function(){var e=this;m.gameMode==p.endless?g.inst.getClassicPlayNumToday<g.inst.getMaxFreePlayNumToday()-1?this.retryShareSign.node.active=!1:g.inst.getCanShareReplay()?T.getInstance().loadSpriteFrame("res/texture/revive/UI_Stickerfinish_btn_icon_share","block").then((function(t){e.retryShareSign.node.active=!0,e.retryShareSign.spriteFrame=t})):T.getInstance().loadSpriteFrame("res/texture/revive/UI_Restart_icon_ad","block").then((function(t){e.retryShareSign.node.active=!0,e.retryShareSign.spriteFrame=t})):this.retryShareSign.node.active=!1},s.onEffectToggleChange=function(e,t){e.isChecked?(d.inst.isMuteEffect=0,_.playSubSound(S.audio.touch)):(_.playSubSound(S.audio.touch),d.inst.isMuteEffect=1)},s.onMusicToggleChange=function(e,t){e.isChecked?(_.playSubSound(S.audio.touch),d.inst.isMuteMusic=0,R.instance.playMusic(!0)):(d.inst.isMuteMusic=1,R.instance.stopMusic())},s.onTurbleToggleChage=function(e,t){e.isChecked?(_.playSubSound(S.audio.touch),d.inst.isOpenShake=1):d.inst.isOpenShake=0},s.onTurbleCameraToggleChage=function(e,t){e.isChecked?(_.playSubSound(S.audio.touch),d.inst.isOpenShakeCamera=1):d.inst.isOpenShakeCamera=0},s.onClickRetry=function(){var e=this;if(m.gameMode==p.endless)if(g.inst.getClassicPlayNumToday<g.inst.getMaxFreePlayNumToday()-1)g.inst.setPlayClassicTimesToday(),this.retry();else if(g.inst.tryShareReplay()){var t=W.generateRandomShowOffShare();L.getInstance().showShare(t,P.start_game,this,(function(){_.playSubSound(S.audio.touch),g.inst.setPlayClassicTimesToday(),e.retry()}),{},(function(){console.log("failed to share")})),this.refreshRetryState()}else{var n=g.inst.getTodayWatchAdStartGameCount();g.inst.setTodayWatchAdStartGameCount(n+1),D.instance.reportBI(b.ad_begin,{scene:C.setting_scene,begin_num:g.inst.getTodayWatchAdStartGameCount(),ad_status:v.WakeUp}),f.inst.showRewardVideoAd(A.Score_Relife).then((function(t){_.playSubSound(S.audio.touch),g.inst.setPlayClassicTimesToday(),D.instance.reportBI(b.ad_begin,{scene:C.setting_scene,begin_num:g.inst.getTodayWatchAdStartGameCount(),ad_status:v.Finished}),e.retry()})).catch((function(e){if(e.errMsg==I.Sdk_Ad_Close_Reward)return D.instance.reportBI(b.ad_revivie,{ad_status:v.Closed,ad_mode:"home"}),E.getInstance().native.showToast(y.translateText("tip_not_finish_watch")),void D.instance.reportBI(b.ad_begin,{scene:C.setting_scene,begin_num:g.inst.getTodayWatchAdStartGameCount(),ad_status:v.Closed});D.instance.reportBI(b.ad_begin,{scene:C.setting_scene,begin_num:g.inst.getTodayWatchAdStartGameCount(),ad_status:v.Error}),E.getInstance().native.showToast(y.translateText("tip_ad_fail"))}))}else this.retry()},s.retry=function(){_.playSubSound(S.audio.touch),D.instance.reportBI(b.btn_click,{btn_type:M.click_settings_replay,scene:k.from_settings}),B.getInstance().resetReachPercent(),B.getInstance().resetProgressBar(),U(O.ON_TOUCH_START),this.data&&this.data.retryCurrentLevel(),this.closeSelf()},s.onClickHome=function(){var e=this;D.instance.reportBI(b.btn_click,{btn_type:M.click_settings_home,scene:k.from_settings}),_.playSubSound(S.audio.touch),this.isLoadingScene||(m.gameMode=p.none,this.isLoadingScene=!0,T.getInstance().gotoScene("home","block").then((function(){e.isLoadingScene=!1,e.closeSelf()})).catch((function(){e.isLoadingScene=!1})))},s.onDestroy=function(){},s.onClickClose=function(){_.playSubSound(S.audio.touch),this.closeSelf()},s.onClickReport=function(){for(var e={},t=0;t<l.localStorage.length;t++){var n=l.localStorage.key(t);if(n.startsWith("GAME_SNAP_SHOT")){var i=l.localStorage.getItem(n);e[n]=i,e.userId=F.deviceId(),D.instance.reportBI(n,e),console.log("上传无尽模式数据")}else if(n.startsWith("LEVEL_GAME_SNAP_SHOT")){var a=l.localStorage.getItem(n);e[n]=a,e.userId=F.deviceId(),D.instance.reportBI(n,e),console.log("上传收集模式数据")}else if(n.startsWith("ADVENTURE_LEVEL_GAME_SNAP_SHOT")){var s=l.localStorage.getItem(n);e[n]=s,e.userId=F.deviceId(),D.instance.reportBI(n,e),console.log("上传冒险模式数据")}else if("isMuteMusic"==n||"isMuteEffect"==n){var o=l.localStorage.getItem(n);e[n]=o,e.userId=F.deviceId(),D.instance.reportBI(n,e),console.log("上传：",n,o)}}w.getInstance().showToast("上传成功")},s.onClickTerms=function(){l.openURL("https://arksgame.com/terms.html")},s.onClickPrivacy=function(){l.openURL("https://arksgame.com/ps.html")},s.onClickRelife=function(){var e=this;this.isWatching||(D.instance.reportBI(b.ad_revivie,{ad_status:v.WakeUp,ad_mode:1}),this.isWatching=!0,f.inst.showRewardVideoAd(A.Level_Relife).then((function(t){e.isWatching=!1,_.playSubSound(S.audio.touch),D.instance.reportBI(b.ad_revivie,{ad_status:v.Finished,ad_mode:1})})).catch((function(e){if(e.errMsg==I.Sdk_Ad_Close_Reward)return D.instance.reportBI(b.ad_revivie,{ad_status:v.Closed,ad_mode:1}),void E.getInstance().native.showToast(y.translateText("tip_not_finish_watch"));E.getInstance().native.showToast(y.translateText("tip_ad_fail"))})))},t}(h)).prototype,"ndToggleEffect",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=t(Y.prototype,"ndToggleMusic",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=t(Y.prototype,"ndToggleTurble",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=t(Y.prototype,"ndToggleTurbleCamera",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=t(Y.prototype,"ndBtnReport",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$=t(Y.prototype,"retryShareSign",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=Y))||j));s._RF.pop()}}}));

System.register("chunks:///_virtual/ShaderFrame.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var r,t,n,a,o,i,c;return{setters:[function(e){r=e.inheritsLoose},function(e){t=e.cclegacy,n=e._decorator,a=e.Animation,o=e.Sprite,i=e.Component,c=e.tween}],execute:function(){var u;t._RF.push({},"6b13bakFEZKdYT3tv7RTpxL","ShaderFrame",void 0);var p=n.ccclass;n.property,e("ShaderFrame",p("ShaderFrame")(u=function(e){function t(){return e.apply(this,arguments)||this}return r(t,e),t.prototype.onShaderFrame=function(){},t.playAnimShaderFrame=function(e){var r=e.getComponent(a),n=r.clips[0],i=n.duration,u=n.events.filter((function(e){return"onShaderFrame"===e.func}));if(u.length>0){var p=e.getComponentInChildren(t);if(p){var f=p.node.getComponent(o),s=0;!function r(){if(p&&f){var t=u[s];if(t&&!(t.frame>=i)){var n=u[s+1];if(n){var a=t.params[0],o=n.params[0],l=n.frame-t.frame;c(e).to(l,{},{onUpdate:function(e,r){var t=a*(1-r)+o*r,n=f.getMaterial(0);n&&(n.setProperty("ColorAlpha",t),f.setMaterial(n,0))}}).call((function(){r()})).start(),s++}}}}()}}return{ani:r,time:i}},t}(i))||u);t._RF.pop()}}}));

System.register("chunks:///_virtual/ShaderFrameEx.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var r,t,n,o;return{setters:[function(e){r=e.inheritsLoose},function(e){t=e.cclegacy,n=e._decorator,o=e.Component}],execute:function(){var a;t._RF.push({},"5a29d9YF3pKEoMI0JreHyHb","ShaderFrameEx",void 0);var c=n.ccclass;n.property,e("ShaderFrameEx",c("ShaderFrameEx")(a=function(e){function t(){return e.apply(this,arguments)||this}return r(t,e),t.prototype.onShaderFrame=function(){},t}(o))||a);t._RF.pop()}}}));

System.register("chunks:///_virtual/ShakeAbleCamera.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,n,r,o;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,r=e._decorator,o=e.Component}],execute:function(){var a,i;n._RF.push({},"42638EPwXFPn6zyXHbM1Nqk","ShakeAbleCamera",void 0);var s=r.ccclass;r.property,e("ShakeAbleCamera",s("ShakeAbleCamera")(((i=function(e){function n(){return e.apply(this,arguments)||this}t(n,e);var r=n.prototype;return r.start=function(){n.inst=this},r.onDestroy=function(){n.inst=null},n}(o)).inst=void 0,a=i))||a);n._RF.pop()}}}));

System.register("chunks:///_virtual/ShakeDefine.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"984a578lehAPpI+XD1884dk","ShakeDefine",void 0);e("emShakeLevel",function(e){return e.heavy="heavy",e.medium="medium",e.light="light",e}({})),e("ShakeCameraConfig",{heavy:{duration:.8,onceDuration:.02,maxNum:10,minNum:-10,factor:[],times:0,backNum:0,onceDutations:[]},medium:{duration:.24,onceDuration:.03,maxNum:7,minNum:-7,factor:[1,1,.6,.4,.2],times:5,backNum:3,onceDutations:[.02,.02,.03,.04,.05]},light:{duration:.24,onceDuration:.03,maxNum:5,minNum:-5,factor:[1,.8,.6],times:3,backNum:2,onceDutations:[.02,.03,.04]}});t._RF.pop()}}}));

System.register("chunks:///_virtual/ShakeManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SettingData.ts","./SdkManager.ts","./Singleton.ts","./ShakeAbleCamera.ts","./ShakeDefine.ts","./ShakeNodeEffect.ts"],(function(e){var n,t,a,i,o,r,s,c;return{setters:[function(e){n=e.inheritsLoose},function(e){t=e.cclegacy},function(e){a=e.SettingData},function(e){i=e.SdkManager},function(e){o=e.Singleton},function(e){r=e.ShakeAbleCamera},function(e){s=e.ShakeCameraConfig},function(e){c=e.ShakeNodeEffect}],execute:function(){t._RF.push({},"114e9L7/FBAPrpIRDy9zVHe","ShakeManager",void 0);e("ShakeManager",function(e){function t(){return e.apply(this,arguments)||this}n(t,e);var o=t.prototype;return o.Init=function(){},o.UnInit=function(){},o.Shake=function(e){1==a.inst.isOpenShake&&i.getInstance().native.vibrateShort(e)},o.ShakeCamera=function(e){if(1==a.inst.isOpenShakeCamera){var n=r.inst;if(n&&n.node&&n.node.isValid){var t=s[e];t||(t=s.light),c.shakeNodes(n.node,t)}}},t}(o));t._RF.pop()}}}));

System.register("chunks:///_virtual/ShakeNodeEffect.ts",["cc"],(function(t){var o,n,e,a,i;return{setters:[function(t){o=t.cclegacy,n=t.tween,e=t.Vec3,a=t.Tween,i=t.v3}],execute:function(){o._RF.push({},"8dcd8Ij3RxERKPP9267ij/W","ShakeNodeEffect",void 0);t("ShakeNodeEffect",function(){function t(){}return t.shakeNodes=function(t,o,n){this.onceNodeShake(t,o,n)},t.shakeNodeEx=function(t,o){for(var a=0,i=0,r=0;r<o;r++)i=0===(a=Math.ceil(7*Math.random())-1)?(Math.ceil(5*Math.random())+1)*Math.pow(-1,Math.ceil(10*Math.random())):(Math.ceil(7*Math.random())-1)*Math.pow(-1,Math.ceil(10*Math.random())),a+=a,i+=i,n(t).delay(.01*r).to(.01,{position:new e(t.position.x+a,t.position.y+i,t.position.z)}).start();n(t).delay(.01*o).to(.01,{position:new e(0,0,t.position.z)}).start()},t.getRandomAngleInDifferentQuadrant=function(t){var o,n=Math.floor(t/90)+1;do{o=Math.floor(4*Math.random())+1}while(o===n);return 90*(o-1)+90*Math.random()},t.onceNodeShake=function(t,o,e){var r=this,c=t.getPosition(),h=o.onceDuration,s=o.onceDutations,f=o.maxNum,u=(o.minNum,o.times),d=o.factor,l=(o.backNum,0),M=0;u!=d.length&&console.warn("震动次数和衰减次数不匹配：",o.times,o.factor,o.factor.length),s.forEach((function(t){l+=2*t})),a.stopAllByTarget(t);var m=360*Math.random();return function o(){if(!(M>=u)){var e=1;M<d.length&&(e=d[M]);var a=h;M<s.length&&(a=s[M]);var l=f*e,p=r.getRandomAngleInDifferentQuadrant(m),g=parseFloat((c.x+l*Math.cos(p*Math.PI/180)).toFixed(2)),v=parseFloat((c.y+l*Math.sin(p*Math.PI/180)).toFixed(2));m=p;var N=c.z;n(t).to(a,{position:i(g,v,N)}).to(a,{position:c}).call((function(){M+=1,o()})).start()}}(),new Promise((function(o,n){setTimeout((function(){a.stopAllByTarget(t),t.setPosition(c.x,c.y),o()}),1e3*l)}))},t}());o._RF.pop()}}}));

System.register("chunks:///_virtual/ShakeTest.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ShakeDefine.ts","./ShakeManager.ts"],(function(e){var t,n,a,o,r,c;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,a=e._decorator,o=e.Component},function(e){r=e.emShakeLevel},function(e){c=e.ShakeManager}],execute:function(){var s;n._RF.push({},"53f6bGxYLFBB71MiU0+QQrf","ShakeTest",void 0);var i=a.ccclass;a.property,e("ShakeTest",i("ShakeTest")(s=function(e){function n(){return e.apply(this,arguments)||this}t(n,e);var a=n.prototype;return a.start=function(){},a.onClickShake=function(e,t){console.log(t),1==t?c.getInstance().ShakeCamera(r.light):c.getInstance().ShakeCamera(r.medium)},n}(o))||s);n._RF.pop()}}}));

System.register("chunks:///_virtual/ShareEnableComponent.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SdkManager.ts"],(function(e){var n,t,r,o,a,i,c,l,p;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,r=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){a=e.cclegacy,i=e._decorator,c=e.Node,l=e.Component},function(e){p=e.SdkManager}],execute:function(){var s,u,h,f,y;a._RF.push({},"2861fVO0a5Hy6lGvw5OzF5q","ShareEnableComponent",void 0);var d=i.ccclass,v=i.property;e("ShareEnableComponent",(s=d("ShareEnableComponent"),u=v(c),s((y=n((f=function(e){function n(){for(var n,t=arguments.length,a=new Array(t),i=0;i<t;i++)a[i]=arguments[i];return n=e.call.apply(e,[this].concat(a))||this,r(n,"root",y,o(n)),n}return t(n,e),n.prototype.onLoad=function(){if(this.root){var e=p.getInstance();this.root.active=e&&e.channel&&e.channel.isSupportShare()}},n}(l)).prototype,"root",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=f))||h));a._RF.pop()}}}));

System.register("chunks:///_virtual/ShareHappyComponent.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SocialDef.ts","./WechatMiniApi.ts","./SdkEventManager.ts","./SdkManager.ts"],(function(e){var t,n,a,r,o,i,p,h,s,c,u,l,S,y;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,a=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){o=e.cclegacy,i=e._decorator,p=e.Enum,h=e.Node,s=e.Component},function(e){c=e.emSharePath,u=e.emShareEvent},function(e){l=e.WechatMiniApi},function(e){S=e.SdkEventManager},function(e){y=e.SdkManager}],execute:function(){var f,g,d,m,v,C,H;o._RF.push({},"981a5V2Sf9Ca6Z1KJyEBO8M","ShareHappyComponent",void 0);var M=i.ccclass,b=i.property;e("ShareHappyComponent",(f=M("ShareHappyComponent"),g=b({type:p(c)}),d=b(h),f((C=t((v=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return t=e.call.apply(e,[this].concat(o))||this,a(t,"sharePath",C,r(t)),a(t,"root",H,r(t)),t}n(t,e);var o=t.prototype;return o.onLoad=function(){y.getInstance().channel.isSupportShare()&&S.getInstance().register(u.share_happy,this.onChangeShareHappyState,this)},o.onChangeShareHappyState=function(e,t){t==this.sharePath&&this.root&&(this.root.active=l.getInstance().isSupportShare()&&e)},o.onClickShareHappy=function(){l.getInstance().showShareHapppy(this.sharePath)},o.onDestroy=function(){y.getInstance().channel.isSupportShare()&&S.getInstance().unregister(u.share_happy,this.onChangeShareHappyState,this)},t}(s)).prototype,"sharePath",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return c.none}}),H=t(v.prototype,"root",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=v))||m));o._RF.pop()}}}));

System.register("chunks:///_virtual/SilderScript.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(i){var t,e,r,n,o,a,l,s,u,c,p;return{setters:[function(i){t=i.applyDecoratedDescriptor,e=i.inheritsLoose,r=i.initializerDefineProperty,n=i.assertThisInitialized},function(i){o=i.cclegacy,a=i._decorator,l=i.CCFloat,s=i.Label,u=i.EditBox,c=i.Slider,p=i.Component}],execute:function(){var b,f,h,m,d,g,x,y,S,v,z,w,F;o._RF.push({},"6aba13S2NtGq7kGLhk//+Ou","SilderScript",void 0);var L=a.ccclass,_=a.property;i("SilderScript",(b=L("SilderScript"),f=_(l),h=_(l),m=_(s),d=_(u),g=_(c),b((S=t((y=function(i){function t(){for(var t,e=arguments.length,o=new Array(e),a=0;a<e;a++)o[a]=arguments[a];return t=i.call.apply(i,[this].concat(o))||this,r(t,"min",S,n(t)),r(t,"max",v,n(t)),r(t,"lab",z,n(t)),r(t,"box",w,n(t)),r(t,"silder",F,n(t)),t}e(t,i);var o=t.prototype;return o.start=function(){},o.update=function(){this.box.string=(this.silder.progress*(this.max-this.min)+this.min).toFixed(2)},o.setTxt=function(i){this.lab.string=i},o.setMin=function(i){this.min=i},o.setMax=function(i){this.max=i},o.getValue=function(){return Number.parseFloat(this.box.string)},o.setValue=function(i){this.silder.progress=(i-this.min)/(this.max-this.min)},t}(p)).prototype,"min",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),v=t(y.prototype,"max",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),z=t(y.prototype,"lab",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=t(y.prototype,"box",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=t(y.prototype,"silder",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),x=y))||x));o._RF.pop()}}}));

System.register("chunks:///_virtual/Singleton.ts",["cc"],(function(n){var t;return{setters:[function(n){t=n.cclegacy}],execute:function(){t._RF.push({},"de4beSZxypF85rBE6AWc5f2","Singleton",void 0);n("Singleton",function(){function n(){}return n.getInstance=function(){return this.instance||(this.instance=new this),this.instance},n}());t._RF.pop()}}}));

System.register("chunks:///_virtual/SocialDef.ts",["cc"],(function(e){var a;return{setters:[function(e){a=e.cclegacy}],execute:function(){a._RF.push({},"f4ecel0INFCPb1ieDVIxieT","SocialDef",void 0);e("SocialEvt",{Auth:"Auth",Share:"Share",ShareWakeUp:"ShareWakeUp",WatchVideo:"WatchVideo"}),e("emShareType",function(e){return e[e.None=99999]="None",e[e.s_10001=10001]="s_10001",e[e.s_10002=10002]="s_10002",e[e.s_10003=10003]="s_10003",e[e.s_10004=10004]="s_10004",e[e.s_10005=10005]="s_10005",e[e.s_10100=10100]="s_10100",e[e.s_10101=10101]="s_10101",e[e.s_10102=10102]="s_10102",e[e.s_10200=10200]="s_10200",e[e.s_10201=10201]="s_10201",e[e.s_10202=10202]="s_10202",e[e.s_10300=10300]="s_10300",e[e.s_10301=10301]="s_10301",e[e.s_10302=10302]="s_10302",e[e.s_10400=10400]="s_10400",e[e.s_10401=10401]="s_10401",e[e.s_10402=10402]="s_10402",e[e.s_10500=10500]="s_10500",e[e.s_10501=10501]="s_10501",e[e.s_10502=10502]="s_10502",e[e.s_66666=66666]="s_66666",e}({})),e("emShareEvent",function(e){return e.share_happy="share_happy",e}({})),e("emSharePath",function(e){return e[e.none=0]="none",e[e.default=1]="default",e[e.start_game=2]="start_game",e[e.revive=3]="revive",e[e.sticker_request_friend=4]="sticker_request_friend",e[e.score_success=5]="score_success",e[e.score_fail=6]="score_fail",e[e.level_success=7]="level_success",e[e.level_fail=8]="level_fail",e[e.score_happy=9]="score_happy",e[e.level_happy=10]="level_happy",e}({})),e("emShareShowType",function(e){return e[e.None=0]="None",e[e.Video=1]="Video",e[e.Share=2]="Share",e}({})),e("VideoADIDConfig",{}),e("ShareConfig",{10001:{id:10001,tittle:"帮我拿个贴纸吧～这游戏真上头!",imageUrl:"https://waxiaoqn.nalrer.cn/waxiao/share/help.png",imageUrlId:""},10002:{id:10002,tittle:"迷路了，谁能来帮我找到家？",imageUrl:"https://waxiaoqn.nalrer.cn/waxiao/share/1.jpg",imageUrlId:""},10003:{id:10003,tittle:"好像卡住了，谁来帮帮我！",imageUrl:"https://waxiaoqn.nalrer.cn/waxiao/share/6.jpg",imageUrlId:""},10004:{id:10004,tittle:"称心如意,块从人愿",imageUrl:"https://waxiaoqn.nalrer.cn/waxiao/share/share_icon.png",imageUrlId:""},10005:{id:10005,tittle:"帮我拿个贴纸吧～这游戏真上头！",imageUrl:"https://waxiaoqn.nalrer.cn/waxiao/share/4.jpg",imageUrlId:""},10100:{id:10100,tittle:"上厕所别点，我怕你蹲到腿麻！！",imageUrl:"https://waxiaoqn.nalrer.cn/waxiao/share/challenge.png",imageUrlId:""},10101:{id:10101,tittle:"上厕所别点，我怕你蹲到腿麻！！",imageUrl:"https://waxiaoqn.nalrer.cn/waxiao/share/challenge_1.png",imageUrlId:""},10102:{id:10102,tittle:"上厕所别点，我怕你蹲到腿麻！！",imageUrl:"https://waxiaoqn.nalrer.cn/waxiao/share/challenge_2.png",imageUrlId:""},10200:{id:10200,tittle:"据说通关的都能达到爱因斯坦的IQ！",imageUrl:"https://waxiaoqn.nalrer.cn/waxiao/share/challenge.png",imageUrlId:""},10201:{id:10201,tittle:"据说通关的都能达到爱因斯坦的IQ！",imageUrl:"https://waxiaoqn.nalrer.cn/waxiao/share/challenge_1.png",imageUrlId:""},10202:{id:10202,tittle:"据说通关的都能达到爱因斯坦的IQ！",imageUrl:"https://waxiaoqn.nalrer.cn/waxiao/share/challenge_2.png",imageUrlId:""},10300:{id:10300,tittle:"我只说一遍：真的难！",imageUrl:"https://waxiaoqn.nalrer.cn/waxiao/share/challenge.png",imageUrlId:""},10301:{id:10301,tittle:"我只说一遍：真的难！",imageUrl:"https://waxiaoqn.nalrer.cn/waxiao/share/challenge_1.png",imageUrlId:""},10302:{id:10302,tittle:"我只说一遍：真的难！",imageUrl:"https://waxiaoqn.nalrer.cn/waxiao/share/challenge_2.jpg",imageUrlId:""},10400:{id:10400,tittle:"敢不敢来测算下你的智商够不够？",imageUrl:"https://waxiaoqn.nalrer.cn/waxiao/share/challenge.png",imageUrlId:""},10401:{id:10401,tittle:"敢不敢来测算下你的智商够不够？",imageUrl:"https://waxiaoqn.nalrer.cn/waxiao/share/challenge_1.png",imageUrlId:""},10402:{id:10402,tittle:"敢不敢来测算下你的智商够不够？",imageUrl:"https://waxiaoqn.nalrer.cn/waxiao/share/challenge_2.png",imageUrlId:""},10500:{id:10500,tittle:"敢不敢睡觉前玩这个游戏？",imageUrl:"https://waxiaoqn.nalrer.cn/waxiao/share/challenge.png",imageUrlId:""},10501:{id:10501,tittle:"敢不敢睡觉前玩这个游戏？",imageUrl:"https://waxiaoqn.nalrer.cn/waxiao/share/challenge_1.png",imageUrlId:""},10502:{id:10502,tittle:"敢不敢睡觉前玩这个游戏？",imageUrl:"https://waxiaoqn.nalrer.cn/waxiao/share/challenge_2.png",imageUrlId:""},99999:{id:9999,tittle:"你觉得这个方块放的位置合适吗！",imageUrl:"https://waxiaoqn.nalrer.cn/waxiao/share/share.jpg",imageUrlId:""}});a._RF.pop()}}}));

System.register("chunks:///_virtual/SpeedTest.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BlockConstData.ts"],(function(e){var t,o,n,r,i,l,c,p,a,s;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){i=e.cclegacy,l=e._decorator,c=e.Label,p=e.Toggle,a=e.Component},function(e){s=e.BlockConstData}],execute:function(){var u,g,d,f,v,S,b;i._RF.push({},"e560dYbMGpOKorpJP5CTApZ","SpeedTest",void 0);var h=l.ccclass,k=l.property;e("SpeedTest",(u=h("SpeedTest"),g=k(c),d=k(p),u((S=t((v=function(e){function t(){for(var t,o=arguments.length,i=new Array(o),l=0;l<o;l++)i[l]=arguments[l];return t=e.call.apply(e,[this].concat(i))||this,n(t,"labSpeed",S,r(t)),n(t,"toggleMove",b,r(t)),t}o(t,e);var i=t.prototype;return i.start=function(){},i.onClickAdd=function(){s.BlockMoveLerpSpeed+=.5,this.labSpeed.string=s.BlockMoveLerpSpeed.toString()},i.onClickPlus=function(){s.BlockMoveLerpSpeed-=.5,this.labSpeed.string=s.BlockMoveLerpSpeed.toString()},i.onToggleChange=function(){s.BlockMoveOpenDrag=this.toggleMove.isChecked},t}(a)).prototype,"labSpeed",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=t(v.prototype,"toggleMove",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=v))||f));i._RF.pop()}}}));

System.register("chunks:///_virtual/SplitSprite.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,r,i,a,n,o,s,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,i=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){n=e.cclegacy,o=e._decorator,s=e.CCInteger,u=e.Sprite}],execute:function(){var l,c,d,p,f,h,_,m,v,x,b;n._RF.push({},"0e7b0Ud3SVLoZTtisP0RZuS","SplitSprite",void 0);var D=o.ccclass,g=o.property,y=(e("SplitSprite",(l=D("SplitSprite"),c=g(s),d=g(s),p=g(s),f=g(s),l((m=t((_=function(e){function t(){for(var t,r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return t=e.call.apply(e,[this].concat(n))||this,i(t,"col_index",m,a(t)),i(t,"row_index",v,a(t)),i(t,"col_count",x,a(t)),i(t,"row_count",b,a(t)),t}return r(t,e),t.prototype._flushAssembler=function(){var e=y;this._assembler!==e&&(this.destroyRenderData(),this._assembler=e),this._renderData||this._assembler&&this._assembler.createData&&(this._renderData=this._assembler.createData(this),this._renderData.material=this.getRenderMaterial(0),this.markForUpdateRenderData(),this.spriteFrame&&this._assembler.updateUVs(this),this._updateColor())},t}(u)).prototype,"col_index",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),v=t(_.prototype,"row_index",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),x=t(_.prototype,"col_count",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),b=t(_.prototype,"row_count",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),h=_))||h)),e("SpiltSpriteAssembler",{createData:function(e){var t=e.requestRenderData();return t.dataLength=2,t.resize(4,6),t},updateRenderData:function(e){var t=e.spriteFrame;this.updateUVs(e);var r=e.renderData;r&&t&&(r.vertDirty&&this.updateVertexData(e),this.updateUVs(e),this.updateColor(e),r.updateRenderData(e,t))},updateWorldVerts:function(e,t){var r=e.renderData,i=t.vb,a=r.data,n=e.node,o=a[0],s=a[1],u=n.worldMatrix,l=u.m00,c=u.m01,d=u.m04,p=u.m05,f=u.m12,h=u.m13,_=o.x,m=s.x,v=o.y,x=s.y,b=l*_,D=l*m,g=c*_,y=c*m,w=d*v+f,S=d*x+f,R=p*v+h,F=p*x+h;i[0]=b+w,i[1]=g+R,i[9]=D+w,i[10]=y+R,i[18]=b+S,i[19]=g+F,i[27]=D+S,i[28]=y+F},fillBuffers:function(e,t){if(null!==e){var r=e.renderData,i=r.chunk;(e.node.hasChangedFlags||r.vertDirty)&&(this.updateWorldVerts(e,i),r.vertDirty=!1);var a=i.bufferId,n=i.vertexOffset,o=i.vertexAccessor.getMeshBuffer(a),s=i.vertexAccessor.getIndexBuffer(a),u=o.indexOffset;s[u++]=n,s[u++]=n+1,s[u++]=n+2,s[u++]=n+2,s[u++]=n+1,s[u++]=n+3,o.indexOffset+=6}},updateVertexData:function(e){var t=e.renderData;if(t){t.vertexFormat;var r=e.node._uiProps.uiTransformComp,i=t.data,a=r.width,n=r.height,o=r.anchorX*a,s=r.anchorY*n,u=0,l=0,c=0,d=0;if(e.trim)u=-o,l=-s,c=a-o,d=n-s;else{var p=e.spriteFrame,f=p.getOriginalSize(),h=p.getRect(),_=f.width,m=f.height,v=h.width,x=h.height,b=p.getOffset(),D=a/_,g=n/m,y=b.x+(_-v)/2,w=b.x-(_-v)/2;u=y*D-o,l=(b.y+(m-x)/2)*g-s,c=a+w*D-o,d=n+(b.y-(m-x)/2)*g-s}i[0].x=u,i[0].y=l,i[1].x=c,i[1].y=d,t.vertDirty=!0}},updateUVs:function(e){if(e.spriteFrame){var t=e.renderData.chunk.vb,r=1/e.col_count,i=1/e.row_count;t[3]=e.col_index*r,t[4]=(e.row_index+1)*i,t[12]=(e.col_index+1)*r,t[13]=(e.row_index+1)*i,t[21]=e.col_index*r,t[22]=e.row_index*i,t[30]=(e.col_index+1)*r,t[31]=e.row_index*i}},updateColor:function(e){for(var t=e.renderData,r=t.chunk.vb,i=5,a=e.color,n=a.r/255,o=a.g/255,s=a.b/255,u=a.a/255,l=0;l<4;l++,i+=t.floatStride)r[i]=n,r[i+1]=o,r[i+2]=s,r[i+3]=u}}));n._RF.pop()}}}));

System.register("chunks:///_virtual/SpriteScript.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,r,n,i,o,c,p;return{setters:[function(t){e=t.inheritsLoose},function(t){r=t.cclegacy,n=t._decorator,i=t.UITransform,o=t.Vec2,c=t.Sprite,p=t.Component}],execute:function(){var s;r._RF.push({},"b3b614L3wFC0aq0ryOsZU9z","SpriteScript",void 0);var u=n.ccclass,a=(n.property,n.executeInEditMode);t("SpriteScript",u("SpriteScript")(s=a()(s=function(t){function r(){return t.apply(this,arguments)||this}return e(r,t),r.prototype.start=function(){var t=this.getComponent(i),e=new o(0,0);e.x=t.contentSize.x,e.y=t.contentSize.y,this.getComponent(c).getMaterial(0).setProperty("_textureSize",e)},r}(p))||s)||s);r._RF.pop()}}}));

System.register("chunks:///_virtual/summary.ts",["./rollupPluginModLoBabelHelpers.js","cc","./index.ts","./enum.ts","./ScrollAdapter.ts","./View.ts","./Holder.ts"],(function(e){var r,n,t,i,o,a,u,l,f,c,s;return{setters:[function(e){r=e.applyDecoratedDescriptor,n=e.inheritsLoose,t=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,u=e.Node},null,function(e){l=e.Layer},function(e){f=e.ScrollAdapter},function(e){c=e.View},function(e){s=e.Holder}],execute:function(){var p,b,y,d,h,m,g,P,v;o._RF.push({},"b0e6fDQf+9KYppqhBhEhkiD","summary",void 0);var x=a.ccclass,w=a.property,D=(e("Summary",(p=x("Summary"),b=w(u),y=w(u),d=w(u),p((g=r((m=function(e){function r(){for(var r,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return r=e.call.apply(e,[this].concat(o))||this,t(r,"fixedPrefab",g,i(r)),t(r,"normalPrefab1",P,i(r)),t(r,"normalPrefab2",v,i(r)),r}n(r,e);var o=r.prototype;return o.getPrefab=function(e){return e.fixed?this.fixedPrefab:1==e.prefabType?this.normalPrefab1:this.normalPrefab2},o.getView=function(){return new D(this)},o.getHolder=function(e,r){return new z(e,r,this)},o.initElement=function(e,r){e.fixed=r.fixed,e.fixed&&(e.layer=l.Highest)},o.start=function(){for(var e=[],r=0;r<100;r++)e.push({fixed:r%10==0,prefabType:1});this.modelManager.insert(e)},r}(f)).prototype,"fixedPrefab",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=r(m.prototype,"normalPrefab1",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=r(m.prototype,"normalPrefab2",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=m))||h)),function(e){function r(){return e.apply(this,arguments)||this}n(r,e);var t=r.prototype;return t.onVisible=function(){},t.onDisable=function(){},r}(c)),z=function(e){function r(){return e.apply(this,arguments)||this}n(r,e);var t=r.prototype;return t.onCreated=function(){},t.onVisible=function(){},t.onDisable=function(){},r}(s);o._RF.pop()}}}));

System.register("chunks:///_virtual/test_item.ts",["./rollupPluginModLoBabelHelpers.js","cc","./index.ts","./enum.ts"],(function(t){var e,n,o,i,r,s,l,a,c;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,o=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){r=t.cclegacy,s=t._decorator,l=t.Label,a=t.Component},null,function(t){c=t.HolderEvent}],execute:function(){var h,u,d,f,p;r._RF.push({},"1f6f4j5hlJO1rdYdu2sckN1","test_item",void 0);var b=s.ccclass,g=s.property;t("TestItem",(h=b("TestItem"),u=g(l),h((p=e((f=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return e=t.call.apply(t,[this].concat(r))||this,o(e,"label",p,i(e)),e._holder=null,e}n(e,t);var r=e.prototype;return r.onLoad=function(){this.node.on(c.CREATED,this.onCreated,this),this.node.on(c.VISIBLE,this.onVisible,this),this.node.on(c.DISABLE,this.onDisabled,this)},r.onCreated=function(){console.log("我收到了创建")},r.onVisible=function(t){console.log("我收到了显示",t.data),this._holder=t,this.label.string=t.data.name},r.onDisabled=function(t){console.log("我收到了隐藏",t)},r.click=function(){350==this._holder.transform.height?this._holder.transform.height=200:this._holder.transform.height=350},r.update=function(){},e}(a)).prototype,"label",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=f))||d));r._RF.pop()}}}));

System.register("chunks:///_virtual/test.ts",["./rollupPluginModLoBabelHelpers.js","cc","./index.ts","./ScrollAdapter.ts"],(function(e){var t,r,n,i,o,a,c,s;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,n=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,c=e.Node},null,function(e){s=e.ScrollAdapter}],execute:function(){var l,u,p,f,d;o._RF.push({},"4989d/dj95LEbRXxYKodcL8","test",void 0);var h=a.ccclass,b=a.property;e("Test",(l=h("Test"),u=b(c),l((d=t((f=function(e){function t(){for(var t,r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,n(t,"prefab",d,i(t)),t}r(t,e);var o=t.prototype;return o.getPrefab=function(e){return this.prefab},o.start=function(){for(var e=[],t=0;t<100;t++)e.push({name:t,index:t});this.modelManager.insert(e)},t}(s)).prototype,"prefab",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=f))||p));o._RF.pop()}}}));

System.register("chunks:///_virtual/TextureManager.ts",["cc"],(function(e){var t,r,n,i,u;return{setters:[function(e){t=e.cclegacy,r=e._decorator,n=e.Texture2D,i=e.v2,u=e.gfx}],execute:function(){t._RF.push({},"df930/ExtBNUpW5KsnL+MGH","TextureManager",void 0);r.ccclass,r.property,e("TextureManager",function(){function e(){}return e.createTexture=function(e,t,r){var i=new n;return i.reset({width:t,height:r,format:n.PixelFormat.RGBA8888,mipmapLevel:0}),i.uploadData(e,0,0),i.updateImage(),i},e.expandImage=function(e,t,r,n){void 0===n&&(n=0);for(var i=new Uint8Array(e.length+4*(n*t*2+n*r*2+r*t*4)),u=0,a=0,h=0,x=t+2*n,o=0;o<i.length;o+=4)u<n||u>=r+n||a<n||a>=t+n?(i[o]=0,i[o+1]=0,i[o+2]=0,i[o+3]=0):(i[o]=e[h],i[o+1]=e[h+1],i[o+2]=e[h+2],i[o+3]=e[h+3],h+=4),++a>=x&&(a=0,u++);return i},e.addImage=function(e,t,r){void 0===r&&(r=i(0,0));for(var n=this.readPixelsForTexture(e),u=this.readPixelsForTexture(t),a=0,h=0,x=0,o=0;o<n.length;o+=4){if(h>=r.x&&h<t.width+r.x&&a>=r.y&&a<t.height+r.y){var c=u[x+3];n[o]=u[x],n[o+1]=u[x+1],n[o+2]=u[x+2],n[o+3]=c,x+=4}++h==e.width&&(h=0,a++)}return this.createTexture(n,e.width,e.height)},e.readPixelsForTexture=function(e){var t=e.getGFXTexture();if(!t)return null;var r=4*e.width*e.height,n=new Uint8Array(r),i=e._getGFXDevice(),a=[],h=[],x=new u.BufferTextureCopy;return x.texOffset.x=0,x.texOffset.y=0,x.texExtent.width=e.width,x.texExtent.height=e.height,h.push(x),a.push(n),null==i||i.copyTextureToBuffers(t,a,h),n},e}());t._RF.pop()}}}));

System.register("chunks:///_virtual/time_item.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,i,a,r,o,n,l,s,h,c;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,a=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){o=e.cclegacy,n=e._decorator,l=e.Label,s=e.UIOpacity,h=e.v3,c=e.Component}],execute:function(){var d,p,u,_,f,m,v;o._RF.push({},"98c46gtiQRCkYwWq6W0T1lW","time_item",void 0);var y=n.ccclass,b=n.property;e("TimeItem",(d=y("TimeItem"),p=b(l),u=b(s),d((m=t((f=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),n=0;n<i;n++)o[n]=arguments[n];return t=e.call.apply(e,[this].concat(o))||this,a(t,"label",m,r(t)),a(t,"opacity",v,r(t)),t._holder=void 0,t}i(t,e);var o=t.prototype;return o.show=function(e){this._holder=e,this.label.string=this._holder.data.value+" "+this._holder.data.name},o.hide=function(){},o.click=function(){this._holder.adapter.scrollManager.scrollToGroupIndex(.5,this._holder.view.index)},o.lateUpdate=function(e){if(this._holder&&this._holder.model){var t=this._holder.adapter.scrollManager.content.convertToWorldSpaceAR(this.node.position),i=this._holder.adapter.scrollManager.view.convertToNodeSpaceAR(t),a=this._holder.adapter.centerManager.getContainerOffset(),r=i[this._holder.adapter.mainAxis]+a,o=(r=Math.abs(r))/(.85*this._holder.adapter.mainAxisSize);o=1-o;var n=this.node.getScale();n[this._holder.adapter.mainAxis]=o,this.node.setScale(n);var l=1-r/(.5*this._holder.adapter.mainAxisSize);this.opacity.opacity=255*l;var s=36*(1-o),c=.1*r-.1*r*o*Math.cos(s*Math.PI/180);0==this._holder.data.type?this.label.node.setPosition(h(c,0)):2==this._holder.data.type&&this.label.node.setPosition(h(-c,0))}},t}(c)).prototype,"label",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=t(f.prototype,"opacity",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=f))||_));o._RF.pop()}}}));

System.register("chunks:///_virtual/time_main.ts",["./rollupPluginModLoBabelHelpers.js","cc","./time.ts"],(function(e){var t,i,n,r,o,a,l,c,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,l=e.director,c=e.Component},function(e){u=e.Time}],execute:function(){var s,m,p,f,h,y,b,g,v;o._RF.push({},"7bf76HowPBMDpYMlIy7LoYb","time_main",void 0);var D=a.ccclass,M=a.property;e("TimeMain",(s=D("TimeMain"),m=M(u),p=M(u),f=M(u),s((b=t((y=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,n(t,"timeYear",b,r(t)),n(t,"timeMoon",g,r(t)),n(t,"timeDay",v,r(t)),t}i(t,e);var o=t.prototype;return o.home=function(){l.loadScene("home")},o.now=function(){var e=new Date;this.timeYear.scrollTo(2,e.getFullYear()),this.timeMoon.scrollTo(1,e.getMonth()+1),this.timeDay.scrollTo(1,e.getDate())},o.start=function(){var e=this;this.scheduleOnce((function(){e.now()}))},t}(c)).prototype,"timeYear",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=t(y.prototype,"timeMoon",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=t(y.prototype,"timeDay",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=y))||h));o._RF.pop()}}}));

System.register("chunks:///_virtual/time.ts",["./rollupPluginModLoBabelHelpers.js","cc","./index.ts","./time_item.ts","./ScrollAdapter.ts","./View.ts","./Holder.ts"],(function(t){var e,n,i,r,o,a,u,s,l,c,p;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){o=t.cclegacy,a=t._decorator,u=t.Node},null,function(t){s=t.TimeItem},function(t){l=t.ScrollAdapter},function(t){c=t.View},function(t){p=t.Holder}],execute:function(){var f,h,y,d,m,v;o._RF.push({},"4a4d813ttpCaZeKBWEWAuzf","time",void 0);var b=a.ccclass,g=a.property,w=(t("Time",(f=b("Time"),h=g(u),f((m=e((d=function(t){function e(){for(var e,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o))||this,i(e,"prefab",m,r(e)),i(e,"type",v,r(e)),e}n(e,t);var o=e.prototype;return o.getPrefab=function(t){return this.prefab},o.getView=function(){return new w(this)},o.getHolder=function(t,e){return new _(t,e,this)},o.initElement=function(t,e){},o.onLoad=function(){var t=[];if(0==this.type)for(var e=0;e<2e3;e++)t.push({value:1850+e,name:"年",type:this.type});else if(1==this.type)for(var n=0;n<12;n++)t.push({value:n+1,name:"月",type:this.type});else if(2==this.type)for(var i=0;i<31;i++)t.push({value:i+1,name:"日",type:this.type});this.modelManager.insert(t)},o.scrollTo=function(t,e){var n=this.modelManager.modelList.findIndex((function(t){return t.data.value==e}));this.scrollManager.scrollToGroupIndex(t,n)},e}(l)).prototype,"prefab",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=e(d.prototype,"type",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),y=d))||y)),function(t){function e(){return t.apply(this,arguments)||this}n(e,t);var i=e.prototype;return i.onVisible=function(){},i.onDisable=function(){},e}(c)),_=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))||this)._item=void 0,e}n(e,t);var i=e.prototype;return i.onCreated=function(){this._item=this.node.getComponent(s)},i.onVisible=function(){this._item.show(this)},i.onDisable=function(){this._item.hide()},e}(p);o._RF.pop()}}}));

System.register("chunks:///_virtual/Timer.ts",["cc"],(function(e){var n,i;return{setters:[function(e){n=e.cclegacy,i=e.director}],execute:function(){n._RF.push({},"f31dcgLbwFFa4AM5U2KyPje","Timer",void 0);e("Timer",function(){function e(){}return e.setTimer=function(e,n,t,u,r){i.getScheduler().schedule(n,e,t,u,r)},e.cancelTimer=function(e,n){i.getScheduler().unschedule(n,e)},e.cancelAllTimer=function(e){e&&i.getScheduler().unscheduleAllForTarget(e)},e.isScheduledTimer=function(e,n){return i.getScheduler().isScheduled(n,e)},e.unixTime=function(){return Math.floor(this.unixTimeMS()/1e3)},e.unixTimeMS=function(){return(new Date).getTime()},e.serverUnixTime=function(){return this.unixTime()},e}());n._RF.pop()}}}));

System.register("chunks:///_virtual/TimerRecord.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SdkSingleton.ts"],(function(t){var e,r,n;return{setters:[function(t){e=t.inheritsLoose},function(t){r=t.cclegacy},function(t){n=t.SdkSingleton}],execute:function(){r._RF.push({},"0e800xIMtdA6IxjMsnAN+au","TimerRecord",void 0);var i=t("emTimerRecordKeys",function(t){return t.Game_Start="game_start",t.Show_Insert_Ad="show_insert_ad",t}({}));t("SdkTimerRecord",function(t){function r(){for(var e,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(e=t.call.apply(t,[this].concat(n))||this).timers=void 0,e}e(r,t);var n=r.prototype;return n.Init=function(){this.timers=new Map,this.start(i.Game_Start)},n.UnInit=function(){this.timers=null},n.start=function(t){return this.timers.set(t,Date.now()),!0},n.get=function(t){var e=0;return this.timers.has(t)&&(e=this.timers.get(t)),Date.now()-e},n.stop=function(t){var e=this.get(t);return this.timers.has(t)&&this.timers.delete(t),e},n.getTimeSinceStart=function(){return Math.ceil(.001*this.get(i.Game_Start))},r}(n));r._RF.pop()}}}));

System.register("chunks:///_virtual/TimerRecord2.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Singleton.ts"],(function(t){var e,r,n;return{setters:[function(t){e=t.inheritsLoose},function(t){r=t.cclegacy},function(t){n=t.Singleton}],execute:function(){r._RF.push({},"d3f700fci5PfaM8JuJ0NaHL","TimerRecord",void 0);t("emTimerRecordKey",function(t){return t.game_start="game_start",t}({})),t("TimerRecord",function(t){function r(){for(var e,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(e=t.call.apply(t,[this].concat(n))||this).timers=void 0,e}e(r,t);var n=r.prototype;return n.Init=function(){this.timers=new Map,this.start("game_start")},n.UnInit=function(){this.timers=null},n.start=function(t){return this.timers.set(t,Date.now()),!0},n.get=function(t){var e=0;return this.timers.has(t)&&(e=this.timers.get(t)),Date.now()-e},n.stop=function(t){var e=this.get(t);return this.timers.has(t)&&this.timers.delete(t),e},r}(n));r._RF.pop()}}}));

System.register("chunks:///_virtual/ToastManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Singleton.ts"],(function(t){var o,n,i,a;return{setters:[function(t){o=t.inheritsLoose},function(t){n=t.cclegacy,i=t.sys},function(t){a=t.Singleton}],execute:function(){n._RF.push({},"51bf0yeN4dDrIKQGXlz51uI","ToastManager",void 0);t("ToastManager",function(t){function n(){for(var o,n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(o=t.call.apply(t,[this].concat(i))||this).platform=void 0,o}o(n,t);var a=n.prototype;return a.Init=function(){i.platform==i.Platform.WECHAT_GAME&&(this.platform=window.wx)},a.UnInit=function(){},a.showToast=function(t,o){void 0===o&&(o=1e3),this.platform.showToast({title:t,icon:"none",duration:o})},a.hideToast=function(){this.platform.hideToast()},a.showLoading=function(t){this.platform.showLoading({title:t})},a.hideLoading=function(){this.platform.hideLoading()},n}(a));n._RF.pop()}}}));

System.register("chunks:///_virtual/TopBar.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(o){var n,t,r,e;return{setters:[function(o){n=o.inheritsLoose},function(o){t=o.cclegacy,r=o._decorator,e=o.Component}],execute:function(){var c;t._RF.push({},"4dccek0tclKrK1Hxns/2OgK","TopBar",void 0);var u=r.ccclass;r.property,o("TopBar",u("TopBar")(c=function(o){function t(){return o.apply(this,arguments)||this}n(t,o);var r=t.prototype;return r.onLoad=function(){},r.onBtnPause=function(o){},t}(e))||c);t._RF.pop()}}}));

System.register("chunks:///_virtual/Touch.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MK.ts","./MKEvent.ts","./EventType.ts"],(function(e){var t,o,n,i,s,h,d,l,r,a,c,T,p,u,f,E,w;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,n=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){s=e.cclegacy,h=e._decorator,d=e.Prefab,l=e.NodePool,r=e.Node,a=e.UITransform,c=e.Vec3,T=e.Animation,p=e.instantiate,u=e.isValid,f=e.Component},null,function(e){E=e.sendEvent},function(e){w=e.Events}],execute:function(){var v,y,S,O,_;s._RF.push({},"f2ab05D1wBGwZnb05jtnhhE","Touch",void 0);var U=h.ccclass,C=h.property;e("Touch",(v=U("Touch"),y=C(d),v((_=t((O=function(e){function t(){for(var t,o=arguments.length,s=new Array(o),h=0;h<o;h++)s[h]=arguments[h];return t=e.call.apply(e,[this].concat(s))||this,n(t,"prefabTouch",_,i(t)),t.nodePool=new l,t}o(t,e);var s=t.prototype;return s.onLoad=function(){this.node.on(r.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(r.EventType.MOUSE_DOWN,this.dontBeSwallowed,this),this.node.on(r.EventType.MOUSE_MOVE,this.dontBeSwallowed,this),this.node.on(r.EventType.MOUSE_UP,this.dontBeSwallowed,this),this.node.on(r.EventType.TOUCH_START,this.dontBeSwallowed,this),this.node.on(r.EventType.TOUCH_MOVE,this.dontBeSwallowed,this),this.node.on(r.EventType.TOUCH_END,this.onTouchEnd,this),this.node.on(r.EventType.TOUCH_CANCEL,this.onTouchEnd,this)},s.onDestroy=function(){this.node.off(r.EventType.MOUSE_DOWN,this.dontBeSwallowed,this),this.node.off(r.EventType.MOUSE_MOVE,this.dontBeSwallowed,this),this.node.off(r.EventType.MOUSE_UP,this.dontBeSwallowed,this),this.node.off(r.EventType.TOUCH_START,this.dontBeSwallowed,this),this.node.off(r.EventType.TOUCH_MOVE,this.dontBeSwallowed,this),this.node.off(r.EventType.TOUCH_END,this.dontBeSwallowed,this),this.node.off(r.EventType.TOUCH_CANCEL,this.dontBeSwallowed,this)},s.onTouchStart=function(e){var t=this,o=e.getUILocation(),n=this.getNodePool(),i=this.node.getComponent(a),s=new c(o.x,o.y,0),h=i.convertToNodeSpaceAR(s);if(n&&h){n.setPosition(h),n.parent=this.node;var d=n.getComponent(T);d?(d.play(),d.on(T.EventType.FINISHED,(function(){t.recycleNode(n)}),this)):this.scheduleOnce((function(){t.recycleNode(n)}),.6),E(w.ON_TOUCH_START)}},s.getNodePool=function(){return this.nodePool.size()>0?this.nodePool.get():p(this.prefabTouch)},s.recycleNode=function(e){u(e)&&e.parent&&e.removeFromParent(),this.nodePool.put(e)},s.dontBeSwallowed=function(e){e.preventSwallow=!0},s.onTouchEnd=function(e){e.preventSwallow=!0,E(w.ON_TOUCH_END)},t}(f)).prototype,"prefabTouch",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=O))||S));s._RF.pop()}}}));

System.register("chunks:///_virtual/TweenAlphaShow.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,n,a,i,r,o,l,c,s;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,a=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){r=e.cclegacy,o=e._decorator,l=e.UIOpacity,c=e.Component,s=e.tween}],execute:function(){var p,u,y,f,h,d,v;r._RF.push({},"27895CsrqpJtJCVjnZ1Kwoc","TweenAlphaShow",void 0);var w=o.ccclass,D=o.property;e("TweenAlphaShow",(p=w("TweenAlphaShow"),u=D({type:[l]}),p((h=t((f=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,a(t,"nodes",h,i(t)),a(t,"animDelay",d,i(t)),a(t,"animDelayDelta",v,i(t)),t}n(t,e);var r=t.prototype;return r.onLoad=function(){for(var e=0;e<this.nodes.length;e++){var t=this.nodes[e];t&&(t.opacity&&(t.opacity=128),t.node.active=!1)}},r.start=function(){for(var e=this,t=function(){var t=e.nodes[n];if(t){var a=n*e.animDelayDelta+e.animDelay;s(e.nodes[n]).delay(a).call((function(){t.node.active=!0})).to(.5,{opacity:255}).start()}},n=0;n<this.nodes.length;n++)t()},t}(c)).prototype,"nodes",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),d=t(f.prototype,"animDelay",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),v=t(f.prototype,"animDelayDelta",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),y=f))||y));r._RF.pop()}}}));

System.register("chunks:///_virtual/TweenScaleShow.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,a,n,i,r,o,l,s,c,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,a=e.inheritsLoose,n=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){r=e.cclegacy,o=e._decorator,l=e.Node,s=e.Vec3,c=e.tween,u=e.Component}],execute:function(){var p,h,f,y,d,S,m;r._RF.push({},"90f95spBEpFsY1DlNGEFzx2","TweenScaleShow",void 0);var v=o.ccclass,w=o.property;e("TweenScaleShow",(p=v("TweenScaleShow"),h=w({type:[l]}),p((d=t((y=function(e){function t(){for(var t,a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,n(t,"nodes",d,i(t)),n(t,"animDelay",S,i(t)),n(t,"animDelayDelta",m,i(t)),t.startScale=void 0,t.animScale=void 0,t}a(t,e);var r=t.prototype;return r.onLoad=function(){this.startScale=s.ZERO,this.animScale=new s(1.1,1.1);for(var e=0;e<this.nodes.length;e++){var t=this.nodes[e];t&&(t.scale=this.startScale)}},r.start=function(){for(var e=0;e<this.nodes.length;e++){var t=this.nodes[e];if(t){var a=e*this.animDelayDelta+this.animDelay;c(t).delay(a).to(.4,{scale:this.animScale}).to(.2,{scale:s.ONE}).start()}}},t}(u)).prototype,"nodes",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),S=t(y.prototype,"animDelay",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),m=t(y.prototype,"animDelayDelta",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),f=y))||f));r._RF.pop()}}}));

System.register("chunks:///_virtual/UIPlayAnimations.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(n){var t,i,o,r,a,e,s,c;return{setters:[function(n){t=n.applyDecoratedDescriptor,i=n.inheritsLoose,o=n.initializerDefineProperty,r=n.assertThisInitialized},function(n){a=n.cclegacy,e=n._decorator,s=n.Animation,c=n.Component}],execute:function(){var l,u,p,f,y;a._RF.push({},"ff2d0ue0RZKZZCsSF8AlaTC","UIPlayAnimations",void 0);var m=e.ccclass,h=e.property;n("UIPlayAnimations",(l=m("UIPlayAnimations"),u=h({type:[s]}),l((y=t((f=function(n){function t(){for(var t,i=arguments.length,a=new Array(i),e=0;e<i;e++)a[e]=arguments[e];return t=n.call.apply(n,[this].concat(a))||this,o(t,"anims",y,r(t)),t}i(t,n);var a=t.prototype;return a.start=function(){},a.play=function(){this.anims.forEach((function(n){n&&n.play()}))},a.stop=function(){this.anims.forEach((function(n){n&&n.stop()}))},t}(c)).prototype,"anims",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),p=f))||p));a._RF.pop()}}}));

System.register("chunks:///_virtual/UIPlayClearParticle.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIPlayEffectParticle.ts"],(function(t){var r,e,a,c,l;return{setters:[function(t){r=t.inheritsLoose},function(t){e=t.cclegacy,a=t._decorator,c=t.GradientRange},function(t){l=t.UIPlayEffectParticle}],execute:function(){var o;e._RF.push({},"fadb9Oy5S1GDKgDtRXYU3DO","UIPlayClearParticle",void 0);var n=a.ccclass;a.property,t("UIPlayClearParticle",n("UIPlayClearParticle")(o=function(t){function e(){return t.apply(this,arguments)||this}return r(e,t),e.prototype.setColor=function(t){var r=new c;r.color=t,this.particles.forEach((function(t){t.startColor=r}))},e}(l))||o);e._RF.pop()}}}));

System.register("chunks:///_virtual/UIPlayEffectParticle.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,i,r,n,c,a,o,l;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,r=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){c=t.cclegacy,a=t._decorator,o=t.ParticleSystem,l=t.Component}],execute:function(){var s,p,f,u,h;c._RF.push({},"d78c8fN/oJJwapsQUTmA80S","UIPlayEffectParticle",void 0);var y=a.ccclass,P=a.property;t("UIPlayEffectParticle",(s=y("UIPlayEffectParticle"),p=P({type:[o]}),s((h=e((u=function(t){function e(){for(var e,i=arguments.length,c=new Array(i),a=0;a<i;a++)c[a]=arguments[a];return e=t.call.apply(t,[this].concat(c))||this,r(e,"particles",h,n(e)),e}i(e,t);var c=e.prototype;return c.start=function(){},c.play=function(){0==this.particles.length&&(this.particles=this.getComponentsInChildren(o)),this.particles.forEach((function(t){t&&t.play()}))},c.stop=function(){this.particles.forEach((function(t){t&&t.stop()}))},c.onDisable=function(){this.stop()},c.onEnable=function(){this.play()},e}(l)).prototype,"particles",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),f=u))||f));c._RF.pop()}}}));

System.register("chunks:///_virtual/UITweenBarComponent.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,n,r,i,s,o,a,l,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,r=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){s=e.cclegacy,o=e._decorator,a=e.ProgressBar,l=e.math,u=e.Component}],execute:function(){var h,c,d,m,p;s._RF.push({},"f4ac2CbFVVI35BCqcjpwzHB","UITweenBarComponent",void 0);var g=o.ccclass,f=o.property;e("UITweenBarComponent",(h=g("UITweenBarComponent"),c=f(a),h((p=t((m=function(e){function t(){for(var t,n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return(t=e.call.apply(e,[this].concat(s))||this).delayTime=1,t.from=1,t.to=1,t.count=0,r(t,"bar",p,i(t)),t.currentTime=0,t.currentValue=0,t.deltaValue=0,t.target=void 0,t.onFinished=null,t.onProgressHandler=null,t.onProgressTarget=null,t}n(t,e);var s=t.prototype;return s.setTarget=function(e){this.target=e},s.SetEnable=function(){this.currentValue=this.from,this.deltaValue=this.to-this.from+this.count},s.start=function(){this.SetEnable()},s.update=function(e){if(null!=this.bar&&!(this.delayTime<0)){if(0==this.delayTime)return this.delayTime=-1,this.bar.progress=this.to,null!=this.onFinished&&this.onFinished.call(this.target,this.to),void(this.enabled=!1);if(this.currentTime+=e,this.currentTime>=this.delayTime)return this.currentTime=0,this.bar.progress=this.to,this.delayTime=-1,null!=this.onFinished&&this.onFinished.call(this.target,this.to),void(this.enabled=!1);this.currentValue+=e*this.deltaValue/this.delayTime,this.deltaValue>=0&&this.currentValue>=1?this.currentValue-=1:this.deltaValue<0&&this.currentValue<=0&&(this.currentValue+=1);var t=Math.min(this.currentValue,this.to);null!=this.onProgressHandler&&this.onProgressHandler.call(this.onProgressTarget,t)}},s.addProgressListener=function(e,t){this.onProgressHandler=e,this.onProgressTarget=t},s.removeListener=function(){this.onFinished=null,this.onProgressHandler=null},t.Begin=function(e,n,r,i,s,o){void 0===i&&(i=.2),void 0===s&&(s=0),void 0===o&&(o=null),e.progress=n;var a=e.node.getComponent(t);return null==a&&(a=e.node.addComponent(t)),a.currentTime=0,a.delayTime=i,a.from=n,a.to=l.clamp01(r),a.count=s,a.bar=e,a.enabled=!0,a.SetEnable(),null==a.onFinished&&(a.onFinished=o),a},t}(u)).prototype,"bar",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=m))||d));s._RF.pop()}}}));

System.register("chunks:///_virtual/UITweenNumber.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,n,i,r,o;return{setters:[function(t){e=t.inheritsLoose,n=t.createClass},function(t){i=t.cclegacy,r=t._decorator,o=t.Component}],execute:function(){var a;i._RF.push({},"ae9ccy2dfxKYZTYmbkOEAQm","UITweenNumber",void 0);var u=r.ccclass;r.property,t("default",u(a=function(t){function i(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))||this).onFinished=void 0,e.target=void 0,e.duration=1,e.from=0,e.to=0,e.fixed=void 0,e.currentTime=0,e.currentValue=0,e.deltaValue=0,e.onChange=void 0,e}e(i,t);var r=i.prototype;return r.SetEnable=function(){this.currentValue=this.from,this.deltaValue=this.to-this.from},r.start=function(){this.SetEnable()},r.update=function(t){return 0==this.duration?(this.enabled=!1,this.onChangeValue(this.to),this.currentValue=this.to,void(null!=this.onFinished&&this.onFinished.call(this.target))):(this.currentTime+=t,this.currentTime>=this.duration?(this.enabled=!1,this.currentTime=0,this.onChangeValue(this.to),this.currentValue=this.to,void(null!=this.onFinished&&this.onFinished.call(this.target))):(this.currentValue+=t*this.deltaValue/this.duration,void this.onChangeValue(this.currentValue)))},r.onChangeValue=function(t){this.onChange&&this.onChange(t)},i.Begin=function(t,e,n,r,o,a,u){void 0===r&&(r=1),void 0===a&&(a=null),void 0===u&&(u=null);var s=t.getComponent(i);null==s&&(s=t.addComponent(i)),s.duration=r,s.currentTime=0,s.to=n,s.from=e,s.onChange=o,s.enabled=!0,s.SetEnable(),s.onFinished=a,s.target=u},n(i,[{key:"CurrentValue",get:function(){return this.currentValue}}]),i}(o))||a);i._RF.pop()}}}));

System.register("chunks:///_virtual/UsePropsView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MK.ts","./PanelBase.ts","./Event.ts","./BIDefine.ts","./MKEvent.ts"],(function(e){var t,i,o,r,n,l,c,a,p,s,u,f,h;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,o=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){n=e.cclegacy,l=e._decorator,c=e.Node},null,function(e){a=e.default},function(e){p=e.BlockEventType},function(e){s=e.emPropType},function(e){u=e.regEvent,f=e.sendEvent,h=e.unRegEvent}],execute:function(){var T,y,m,k,E,d,v,b,R,_,N,V,H,g,C,w,z;n._RF.push({},"69404yUm1JPEYD0DOfnVC5i","UsePropsView",void 0);var P=l.ccclass,D=l.property;e("UsePropsView",(T=P("UsePropsView"),y=D(c),m=D(c),k=D(c),E=D(c),d=D(c),v=D(c),b=D(c),T((N=t((_=function(e){function t(){for(var t,i=arguments.length,n=new Array(i),l=0;l<i;l++)n[l]=arguments[l];return t=e.call.apply(e,[this].concat(n))||this,o(t,"HammerNode",N,r(t)),o(t,"VRocketNode",V,r(t)),o(t,"HRocketNode",H,r(t)),o(t,"RefreshNode",g,r(t)),o(t,"HammerTitle",C,r(t)),o(t,"VRocketTitle",w,r(t)),o(t,"HRocketTitle",z,r(t)),t.propType=void 0,t}i(t,e);var n=t.prototype;return n.onLoad=function(){},n.start=function(){u(p.EVENT_BLOCK_CLICKED,this.onBlockClicked,this)},n.onSetData=function(e){this.propType=e,this.HammerNode.active=this.propType==s.hammer,this.HammerTitle.active=this.propType==s.hammer,this.VRocketNode.active=this.propType==s.v_rocket,this.VRocketTitle.active=this.propType==s.v_rocket,this.HRocketNode.active=this.propType==s.h_rocket,this.HRocketTitle.active=this.propType==s.h_rocket,this.RefreshNode.active=!1},n.onBlockClicked=function(e,t){this.propType==s.hammer?f(p.EVENT_USE_ITEM_HAMMER,e,t):this.propType==s.v_rocket?f(p.EVENT_USE_ITEM_VROCKET,e,t):this.propType==s.h_rocket&&f(p.EVENT_USE_ITEM_HROCKET,e,t),this.onClickClose()},n.onClickClose=function(){h(this),this.closeSelf()},n.onClose=function(){h(this)},t}(a)).prototype,"HammerNode",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=t(_.prototype,"VRocketNode",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=t(_.prototype,"HRocketNode",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=t(_.prototype,"RefreshNode",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=t(_.prototype,"HammerTitle",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=t(_.prototype,"VRocketTitle",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=t(_.prototype,"HRocketTitle",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=_))||R));n._RF.pop()}}}));

System.register("chunks:///_virtual/UserAdventureLevelData.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MK.ts","./adventureLevelData.ts","./MKLocalStorage.ts"],(function(e){var t,i,r,s,l,a;return{setters:[function(e){t=e.createClass},function(e){i=e.cclegacy},null,function(e){r=e.AdventureLevelConfigData},function(e){s=e.getItem,l=e.setItem,a=e.removeItem}],execute:function(){i._RF.push({},"5da85uzLnxE972I3epMwEL3","UserAdventureLevelData",void 0);e("BatchLevelData",(function(){}));e("UserAdventureLevelData",function(){function e(){this._currentBatch=0,this._k_LevelFinishState="LevelFinishState",this._k_LevelDataStorage="ADVENTURE_LEVEL_GAME_SNAP_SHOT",this._k_LevelProgressStorage="ADVENTURE_LEVEL_GAME_PROGRESS",this._k_LevelGameBatch="ADVENTURE_LEVEL_GAME_BATCH",this._k_LevelMAXProgress="k_LevelMAXProgress",this._k_BatchDeadline="BATCH_TIME_DEADLINE",this.levelFailRecords=void 0}var i=e.prototype;return i.getIsAllLevelFinishedByBatchNumber=function(e){var t;return t=this._k_LevelFinishState+"_"+e.toString(),s(t,0)},i.updateHistoryLevel=function(e){l(this.k_LevelProgressStorage,e)},i.getHistoryLevelData=function(){return s(this.k_LevelDataStorage)},i.updateBatchDeadline=function(e){var t=this.getLevelBatchNumber();l(this._k_BatchDeadline+"_"+t.toString(),e)},i.getBatchDeadlineData=function(){var e=this.getLevelBatchNumber();return s(this._k_BatchDeadline+"_"+e.toString(),-1)},i.getHistoryLevel=function(){var e=s(this.k_LevelProgressStorage);return e||1},i.getMaxHistoryLevel=function(){var e=s(this.k_LevelMAXProgress);return null!=e&&null!=e||(e=this.getHistoryLevel()||1,l(this.k_LevelMAXProgress,e)),e},i.getMaxHistoryLevelByBatchNumber=function(e){var t;t=this._k_LevelMAXProgress+"_"+e.toString();var i=s(t);return null!=i&&null!=i||(i=this.getHistoryLevelWithBatchNumber(e)||1,l(t,i)),i},i.getHistoryLevelWithBatchNumber=function(e){var t=this._k_LevelProgressStorage;t=this._k_LevelProgressStorage+"_"+e.toString();var i=s(t);return i||1},i.updateMaxHistoryLevel=function(e){e>this.getMaxHistoryLevel()&&l(this.k_LevelMAXProgress,e)},i.updateMaxHistoryLevelForce=function(e){this.getMaxHistoryLevel();l(this.k_LevelMAXProgress,e)},i.getLevelBatchNumber=function(){return s(this.k_LevelGameBatchNumber,1)},i.setLevelBatchNumber=function(e){l(this.k_LevelGameBatchNumber,e)},i.updateLevelHistoryData=function(e){l(this.k_LevelDataStorage,e)},i.clearLevelHistoryData=function(){a(this.k_LevelDataStorage)},i.clearLevelFinishdData=function(){a(this.k_LevelFinishState)},i.getLevelConfigPath=function(){return"res/configs/level_stage"+this.getLevelBatchNumber().toString()},i.ResetBatch=function(){var e=this.getLevelBatchNumber();this.updateHistoryLevel(1),this.updateMaxHistoryLevelForce(1),this.clearLevelHistoryData(),this.clearLevelFinishdData(),e=e%r.LevelTotalNumer+1,this.setLevelBatchNumber(e)},i.resetLevelFail=function(e,t){this.levelFailRecords||(this.levelFailRecords={}),this.levelFailRecords[e]||(this.levelFailRecords[e]={}),this.levelFailRecords[e][t.toString()]=0},i.recordLevelFail=function(e,t){this.levelFailRecords||(this.levelFailRecords={}),this.levelFailRecords[e]||(this.levelFailRecords[e]={});var i=this.levelFailRecords[e][t.toString()]||0;this.levelFailRecords[e][t.toString()]=i+1},i.getLevelFailTimes=function(){var e=this.getLevelBatchNumber(),t=this.getHistoryLevel();return this.levelFailRecords&&this.levelFailRecords[e]&&this.levelFailRecords[e][t.toString()]||0},t(e,[{key:"k_LevelFinishState",get:function(){var e=this.getLevelBatchNumber();return this._k_LevelFinishState+"_"+e.toString()}},{key:"isAllLevelFinished",get:function(){return s(this.k_LevelFinishState,0)},set:function(e){l(this.k_LevelFinishState,e)}},{key:"k_LevelDataStorage",get:function(){var e=this.getLevelBatchNumber();return this._k_LevelDataStorage+"_"+e.toString()}},{key:"k_LevelProgressStorage",get:function(){var e=this.getLevelBatchNumber();return this._k_LevelProgressStorage+"_"+e.toString()}},{key:"k_LevelGameBatchNumber",get:function(){return this._k_LevelGameBatch}},{key:"k_LevelMAXProgress",get:function(){var e=this.getLevelBatchNumber();return this._k_LevelMAXProgress+"_"+e.toString()}}],[{key:"inst",get:function(){return null==e._inst&&(e._inst=new e),e._inst}}]),e}())._inst=null,i._RF.pop()}}}));

System.register("chunks:///_virtual/UserChangeData.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Boot.ts","./RemoteConfig.ts","./MKLocalStorage.ts"],(function(t){var e,n,i,u,o;return{setters:[function(t){e=t.createClass},function(t){n=t.cclegacy},null,function(t){i=t.RemoteConfig},function(t){u=t.getItem,o=t.setItem}],execute:function(){n._RF.push({},"fc87cZ/UJxGULU3HI/z0qFi","UserChangeData",void 0);var s="kItemCountChange",m="kItemLevelChange";t("UserChangeData",function(){function t(){this._itemCount=0,this._itemLevel=0,this._itemCount=Number(u(s,0)),this._itemLevel=Number(u(m,1))}var n=t.prototype;return n.isCanUseItem=function(){return this.itemCount>0},n.getMaxItemCount=function(){return 1e4},n.getMaxOverFollowCount=function(){return 5},n.useItem=function(){this.isCanUseItem()&&(this.itemCount=Math.max(0,this.itemCount-1))},n.addItem=function(t,e){void 0===e&&(e=!1),this.itemCount=e?Math.min(t+this.itemCount,this.getMaxOverFollowCount()):Math.min(t+this.itemCount,this.getMaxItemCount())},n.initItem=function(){this.addItem(i.getInstance().PropRefreshInitCount,!1)},n.updateItem=function(){this.itemLevel<2&&(this.itemLevel+=1)},e(t,[{key:"itemCount",get:function(){var t=u(s);return null==t||null==t?(this._itemCount=0,this._itemCount):(this._itemCount=t,this._itemCount)},set:function(t){this._itemCount=Math.max(0,t),o(s,t)}},{key:"itemLevel",get:function(){var t=u(m);return null==t||null==t?(this._itemLevel=1,this._itemLevel):(this._itemLevel=t,this._itemLevel)},set:function(t){this._itemLevel=Math.max(1,t),o(m,t)}}],[{key:"inst",get:function(){return null==t._inst&&(t._inst=new t),t._inst}}]),t}())._inst=null,n._RF.pop()}}}));

System.register("chunks:///_virtual/UserCollectLevelData.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MK.ts","./MKLocalStorage.ts","./GameDefine.ts"],(function(e){var t,i,s,l,r,a;return{setters:[function(e){t=e.createClass},function(e){i=e.cclegacy},null,function(e){s=e.setItem,l=e.getItem,r=e.removeItem},function(e){a=e.buildInfo}],execute:function(){i._RF.push({},"414a7hSU8dFdJu5j7JijrOY","UserCollectLevelData",void 0);var n=e("emLevelTheme",function(e){return e.cat="cat",e.bear="bear",e.sheep="sheep",e.fruit="fruit",e.qixi="qixi",e.kaixue="kaixue",e.moon="moon",e.fish="fish",e}({}));e("UserCollectLevelData",function(){function e(){this._k_LevelDataStorage="LEVEL_GAME_SNAP_SHOT",this._k_LevelProgressStorage="LEVEL_GAME_PROGRESS",this._k_LevelFinishState="LevelFinishState",this._k_LevelGameTheme="LEVEL_GAME_THEME",this._k_LevelMAXProgress="k_LevelMAXProgress",this.levelFailRecords=void 0}var i=e.prototype;return i.updateLevelHistoryData=function(e){s(this.k_LevelDataStorage,e)},i.updateHistoryLevel=function(e){s(this.k_LevelProgressStorage,e)},i.getHistoryLevelData=function(){return l(this.k_LevelDataStorage)},i.updateMaxHistoryLevel=function(e){e>this.getMaxHistoryLevel()&&s(this.k_LevelMAXProgress,e)},i.getMaxHistoryLevel=function(){var e=l(this.k_LevelMAXProgress);return null!=e&&null!=e||(e=this.getHistoryLevel()||1,s(this.k_LevelMAXProgress,e)),e},i.getMaxHistoryLevelByTheme=function(e){var t="";t=e==n.cat?this._k_LevelMAXProgress:this._k_LevelMAXProgress+"_"+e;var i=l(t);return null!=i&&null!=i||(i=this.getHistoryLevelWithTheme(e)||1,s(t,i)),i},i.getHistoryLevel=function(){var e=l(this.k_LevelProgressStorage);return e||1},i.getHistoryLevelWithTheme=function(e){var t=this._k_LevelProgressStorage;e!=n.cat&&(t=this._k_LevelProgressStorage+"_"+e);var i=l(t);return i||1},i.getIsAllLevelFinishedByTheme=function(e){var t="";return t=e==n.cat?this._k_LevelFinishState:this._k_LevelFinishState+"_"+e,l(t,0)},i.clearLevelHistoryData=function(){r(this.k_LevelDataStorage)},i.clearLevelFinishdData=function(){r(this.k_LevelFinishState)},i.getLevelThemeName=function(){return l(this.k_LevelGameTheme,n.fish)},i.setLevelThemeName=function(e){s(this.k_LevelGameTheme,e)},i.getLevelConfigPath=function(){var e=a.bundle.level[this.getLevelThemeName()];return e||"res/configs/level"},i.getLevelBlockConfigPath=function(){return this.getLevelConfigPath()+"_block"},i.resetLevelFail=function(e,t){this.levelFailRecords||(this.levelFailRecords={}),this.levelFailRecords[e]||(this.levelFailRecords[e]={}),this.levelFailRecords[e][t.toString()]=0},i.recordLevelFail=function(e,t){this.levelFailRecords||(this.levelFailRecords={}),this.levelFailRecords[e]||(this.levelFailRecords[e]={});var i=this.levelFailRecords[e][t.toString()]||0;this.levelFailRecords[e][t.toString()]=i+1},i.getLevelFailTimes=function(){var e=this.getLevelThemeName(),t=this.getHistoryLevel();return this.levelFailRecords&&this.levelFailRecords[e]&&this.levelFailRecords[e][t.toString()]||0},t(e,[{key:"k_LevelDataStorage",get:function(){var e=this.getLevelThemeName();return e==n.cat?this._k_LevelDataStorage:this._k_LevelDataStorage+"_"+e}},{key:"k_LevelProgressStorage",get:function(){var e=this.getLevelThemeName();return e==n.cat?this._k_LevelProgressStorage:this._k_LevelProgressStorage+"_"+e}},{key:"k_LevelFinishState",get:function(){var e=this.getLevelThemeName();return e==n.cat?this._k_LevelFinishState:this._k_LevelFinishState+"_"+e}},{key:"k_LevelGameTheme",get:function(){return this._k_LevelGameTheme}},{key:"k_LevelMAXProgress",get:function(){var e=this.getLevelThemeName();return e==n.cat?this._k_LevelMAXProgress:this._k_LevelMAXProgress+"_"+e}},{key:"isAllLevelFinished",get:function(){return l(this.k_LevelFinishState,0)},set:function(e){s(this.k_LevelFinishState,e)}}],[{key:"inst",get:function(){return null==e._inst&&(e._inst=new e),e._inst}}]),e}())._inst=null,i._RF.pop()}}}));

System.register("chunks:///_virtual/UserData.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MKLocalStorage.ts"],(function(e){var t,i,a,s;return{setters:[function(e){t=e.createClass},function(e){i=e.cclegacy},function(e){a=e.getItem,s=e.setItem}],execute:function(){i._RF.push({},"603e0RYOtVHGoGL3IqQABnx","UserData",void 0);var r="isGuided",n="gameNumber",o="gameNumberToday",y="loginDay",h="lastDay",u="loginNumToday",l="isNewUser",d="isOpenLevel",c="kHasGotLoginReward",_="kIsFirstPlay",g="kIsNewRecordPlayed",m="kLastLoginVersion",T="lastPlayDay",v="classicPlayNum",R="kLastShareReplayDay",f="kTodayShareReplayNum",N="isGameOngoing",S="kLastShareReviveDay",w="kTodayShareReviveNum",p="kLastWatchAdCountDay",P="kTodayWatchAdStartGameCount",D="kThisGameWatchReviveNum",k="kWxAgreePolicy";e("PlayerData",(function(){this.id=0,this.blood=0,this.bloodMax=100,this.scroe=0,this.pos=0}));e("UserData",function(){var e=i.prototype;function i(){this.playerData=void 0,this._id=0,this._attackId=0,this._isGuided=!0,this._maxScore=0,this._isNewUser=!0,this._isFirstPlay=!0,this.isNewRegister=!1,this._isNewRecordPlayed=!1,this.replayTimes=0,this._gameNumber=0,this._gameNumberToday=0,this._hasGotLoginReward=!1,this._loginDay=0,this.loginNumToday=0,this.isFirstLoginToday=!1,this.onlinePlayTimes=0,this.isPlayAdventureHandGuide=!1,this._classicPlayNumToday=0,this._tryShareReplayToday=0,this._tryShareReviveToday=0,this._wxUserAgreePolicy=!1,this._maxScore=0,this.replayTimes=0,this.playerData=new Map,this._isGuided=a(r,!1),this._gameNumber=Number(a(n,0)),this._gameNumberToday=Number(a(o,0)),this._loginDay=Number(a(y,0)),this._hasGotLoginReward=a(c,!1),this.loginNumToday=Number(a(u,0)),this.isNewUser=a(l,!0),this.isOpenLevel=a(d,!1)}return e.isMe=function(e){return this._id==e},e.isCanShowLevelInHomeScene=function(){return!this.isNewUser&&this.isOpenLevel},e.setLoginNumToday=function(){var e=(new Date).getDate();if(a(h,0)!==e)s(h,e),this._loginDay+=1,s(y,this._loginDay),s(u,1),s(o,0),s(c,!1),this.isFirstLoginToday=!0;else{var t=a(u,0);s(u,t+1),this.loginNumToday=t+1,this.isFirstLoginToday=!1}},e.setPlayClassicTimesToday=function(){var e=(new Date).getDate();if(a(T,0)!==e)s(T,e),s(v,0),this._classicPlayNumToday=0;else{var t=a(v,0);this._classicPlayNumToday=t+1,s(v,this._classicPlayNumToday)}},e.getMaxFreePlayNumToday=function(){return 3},e.getShareReplayTimesToday=function(){return 1},e.tryShareReplay=function(){var e=a(R,0),t=(new Date).getDate();return e!=t?(s(R,t),s(f,1),this._tryShareReplayToday=1):(this._tryShareReplayToday=a(f,1),this._tryShareReplayToday+=1,s(f,this._tryShareReplayToday)),this._tryShareReplayToday<=this.getShareReplayTimesToday()},e.getCanShareReplay=function(){var e=a(R,0),t=(new Date).getDate();return this._tryShareReplayToday=a(f,0),e!=t&&(s(R,t),s(f,0),this._tryShareReplayToday=0),this._tryShareReplayToday<this.getShareReplayTimesToday()},e.addShareReplay=function(){var e=a(R,0),t=(new Date).getDate();e!=t?(s(R,t),s(f,1),this._tryShareReplayToday=1):(this._tryShareReplayToday=a(f,1),this._tryShareReplayToday+=1,s(f,this._tryShareReplayToday))},e.getMaxShareReviveTimeToday=function(){return 1},e.tryShareRevive=function(){var e=a(S,0),t=(new Date).getDate();return e!=t?(s(S,t),s(w,1),this._tryShareReviveToday=1):(this._tryShareReviveToday=a(w,1),this._tryShareReviveToday+=1,s(w,this._tryShareReviveToday)),this._tryShareReviveToday<=this.getMaxShareReviveTimeToday()},e.getCanShareRevive=function(){var e=a(S,0),t=(new Date).getDate();return this._tryShareReplayToday=a(w,0),e!=t&&(s(S,t),s(w,0),this._tryShareReviveToday=0),this._tryShareReviveToday<this.getMaxShareReviveTimeToday()},e.addShareRevive=function(){var e=a(S,0),t=(new Date).getDate();e!=t?(s(S,t),s(w,1),this._tryShareReviveToday=1):(this._tryShareReviveToday=a(w,1),this._tryShareReviveToday+=1,s(w,this._tryShareReviveToday))},e.getTodayWatchAdStartGameCount=function(){var e=a(p,0),t=(new Date).getDate();return e!=t?(s(p,t),s(P,0),1):a(P,0)},e.setTodayWatchAdStartGameCount=function(e){s(P,e)},e.getThisGameWatchReviveNum=function(){return a(D,1)},e.setThisGameWatchReviveNum=function(e){s(D,e)},t(i,[{key:"id",get:function(){return this._id},set:function(e){this._id=e}},{key:"attackId",get:function(){return this._attackId},set:function(e){this._attackId=e}},{key:"isGuided",get:function(){return this._isGuided},set:function(e){this._isGuided=e,s(r,e)}},{key:"maxScore",get:function(){return this._maxScore},set:function(e){this._maxScore=e}},{key:"isNewUser",get:function(){var e=a(l);return null==e||null==e?(this._isNewUser=!0,this._isNewUser):(this._isNewUser=e,this._isNewUser)},set:function(e){this._isNewUser=e,s(l,e)}},{key:"isFirstPlay",get:function(){var e=a(_);return null==e||null==e?(this._isFirstPlay=!0,this._isFirstPlay):(this._isFirstPlay=e,this._isFirstPlay)},set:function(e){this._isFirstPlay=e,s(_,e)}},{key:"isOpenLevel",get:function(){return a(d,!1)},set:function(e){s(d,e)}},{key:"isNewRecordPlayed",get:function(){var e=a(g);return null==e||null==e?(this._isNewRecordPlayed=!1,this._isNewRecordPlayed):(this._isNewRecordPlayed=e,this._isNewRecordPlayed)},set:function(e){s(g,e)}},{key:"gameNumber",get:function(){return this._gameNumber},set:function(e){this._gameNumber+=e,s(n,this._gameNumber)}},{key:"gameNumberToday",get:function(){return this._gameNumberToday},set:function(e){this._gameNumberToday+=e,s(o,this._gameNumberToday)}},{key:"hasGotLoginReward",get:function(){return this._hasGotLoginReward},set:function(e){this._hasGotLoginReward=e,s(c,this._hasGotLoginReward)}},{key:"lastLoginVersion",get:function(){return a(m,"")},set:function(e){s(m,e)}},{key:"getClassicPlayNumToday",get:function(){var e=a(T,0),t=(new Date).getDate();return e!=t&&(s(T,t),s(v,0),this._classicPlayNumToday=0),this._classicPlayNumToday=a(v,0),this._classicPlayNumToday}},{key:"isGameOngoing",get:function(){return a(N,!1)},set:function(e){s(N,e)}},{key:"wxUserAgreePolicy",get:function(){var e=a(k);return null==e||null==e?(this._wxUserAgreePolicy=!1,this._wxUserAgreePolicy):(this._wxUserAgreePolicy=e,this._wxUserAgreePolicy)},set:function(e){this._wxUserAgreePolicy=e,s(k,e)}}],[{key:"inst",get:function(){return null==i._inst&&(i._inst=new i),i._inst}}]),i}())._inst=null,i._RF.pop()}}}));

System.register("chunks:///_virtual/UserHammerData.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Boot.ts","./RemoteConfig.ts","./MKLocalStorage.ts"],(function(t){var e,n,i,u,o;return{setters:[function(t){e=t.createClass},function(t){n=t.cclegacy},null,function(t){i=t.RemoteConfig},function(t){u=t.getItem,o=t.setItem}],execute:function(){n._RF.push({},"75bce/YhXlHSZTECvvk0nEW","UserHammerData",void 0);var m="kItemCount_Hammer",s="kItemLevel_Hammer";t("UserHammerData",function(){function t(){this.onDataCountChange=null,this._itemCount=0,this._itemLevel=0,this._itemCount=Number(u(m,0)),this._itemLevel=Number(u(s,1))}var n=t.prototype;return n.isCanUseItem=function(){return this.itemCount>0},n.getItemBlockIndex=function(){return 1e3+this._itemLevel},n.getMaxItemCount=function(){return 1e4},n.getMaxOverFollowCount=function(){return 10},n.useItem=function(){this.isCanUseItem()&&(this.itemCount=Math.max(0,this.itemCount-1))},n.addItem=function(t,e){void 0===e&&(e=!1),this.itemCount=e?Math.min(t+this.itemCount,this.getMaxOverFollowCount()):Math.min(t+this.itemCount,this.getMaxItemCount())},n.initItem=function(){this.addItem(i.getInstance().PropHammerInitCount,!1)},n.updateItemLevel=function(){this.itemLevel<3&&(this.itemLevel+=1)},e(t,[{key:"itemCount",get:function(){var t=u(m);return null==t||null==t?(this._itemCount=0,this._itemCount):(this._itemCount=t,this._itemCount)},set:function(t){this._itemCount=Math.max(0,t),o(m,t),this.onDataCountChange&&this.onDataCountChange()}},{key:"itemLevel",get:function(){var t=u(s);return null==t||null==t?(this._itemLevel=1,this._itemLevel):(this._itemLevel=t,this._itemLevel)},set:function(t){this._itemLevel=Math.max(1,t),o(s,t)}}],[{key:"inst",get:function(){return null==t._inst&&(t._inst=new t),t._inst}}]),t}())._inst=null,n._RF.pop()}}}));

System.register("chunks:///_virtual/UserHRocketData.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Boot.ts","./RemoteConfig.ts","./MKLocalStorage.ts"],(function(t){var n,e,i,o,u;return{setters:[function(t){n=t.createClass},function(t){e=t.cclegacy},null,function(t){i=t.RemoteConfig},function(t){o=t.getItem,u=t.setItem}],execute:function(){e._RF.push({},"4cbdbN2vSVBmbJrocn3TLhb","UserHRocketData",void 0);var s="kItemCount_HRocket";t("UserHRocketData",function(){function t(){this.onDataCountChange=null,this._itemCount=0,this._itemCount=Number(o(s,0))}var e=t.prototype;return e.isCanUseItem=function(){return this.itemCount>0},e.getMaxItemCount=function(){return 1e4},e.getMaxOverFollowCount=function(){return 5},e.useItem=function(){this.isCanUseItem()&&(this.itemCount=Math.max(0,this.itemCount-1))},e.addItem=function(t,n){void 0===n&&(n=!1),this.itemCount=n?Math.min(t+this.itemCount,this.getMaxOverFollowCount()):Math.min(t+this.itemCount,this.getMaxItemCount())},e.initItem=function(){this.addItem(i.getInstance().PropHRocketInitCount,!1)},n(t,[{key:"itemCount",get:function(){var t=o(s);return null==t||null==t?(this._itemCount=0,this._itemCount):(this._itemCount=t,this._itemCount)},set:function(t){this._itemCount=Math.max(0,t),u(s,t),this.onDataCountChange&&this.onDataCountChange()}}],[{key:"inst",get:function(){return null==t._inst&&(t._inst=new t),t._inst}}]),t}())._inst=null,e._RF.pop()}}}));

System.register("chunks:///_virtual/UserScoreLevelData.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MK.ts","./SdkManager.ts","./MKLocalStorage.ts"],(function(e){var t,n,r,o,a,s;return{setters:[function(e){t=e.createClass},function(e){n=e.cclegacy},null,function(e){r=e.SdkManager},function(e){o=e.setItem,a=e.getItem,s=e.removeItem}],execute:function(){n._RF.push({},"f83bdrJ+qhKDJQ5NCPxVGzC","UserScoreLevelData",void 0),e("UserScoreLevelData",function(){function e(){this.HighestScoreKey="SCORE_ENDLESS_MAX",this.LastScoreKey="LAST_SCORE"}var n=e.prototype;return n.getLevelDataStorageKey=function(){return"GAME_SNAP_SHOT"},n.updateLevelHistoryData=function(e){o(this.getLevelDataStorageKey(),e)},n.getHistoryLevelData=function(){return a(this.getLevelDataStorageKey())},n.clearLevelHistoryData=function(){s(this.getLevelDataStorageKey())},n.getHighestScore=function(){return a(this.HighestScoreKey,0)},n.updateHighestScore=function(e){o(this.HighestScoreKey,e),r.getInstance().channel.setCloudStorage([{key:"score",value:e.toString()}])},n.getLastScore=function(){return a(this.LastScoreKey,0)},n.setLastScore=function(e){return o(this.LastScoreKey,e)},t(e,null,[{key:"inst",get:function(){return null==e._inst&&(e._inst=new e),e._inst}}]),e}())._inst=null,n._RF.pop()}}}));

System.register("chunks:///_virtual/UserVRocketData.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Boot.ts","./RemoteConfig.ts","./MKLocalStorage.ts"],(function(t){var n,e,i,o,u;return{setters:[function(t){n=t.createClass},function(t){e=t.cclegacy},null,function(t){i=t.RemoteConfig},function(t){o=t.getItem,u=t.setItem}],execute:function(){e._RF.push({},"717b4xGvqJPHK2DqlR7KF5s","UserVRocketData",void 0);var s="kItemCount_VRocket";t("UserVRocketData",function(){function t(){this.onDataCountChange=null,this._itemCount=0,this._itemCount=Number(o(s,0))}var e=t.prototype;return e.isCanUseItem=function(){return this.itemCount>0},e.getMaxItemCount=function(){return 1e4},e.getMaxOverFollowCount=function(){return 5},e.useItem=function(){this.isCanUseItem()&&(this.itemCount=Math.max(0,this.itemCount-1))},e.addItem=function(t,n){void 0===n&&(n=!1),this.itemCount=n?Math.min(t+this.itemCount,this.getMaxOverFollowCount()):Math.min(t+this.itemCount,this.getMaxItemCount())},e.initItem=function(){this.addItem(i.getInstance().PropVRocketInitCount,!1)},n(t,[{key:"itemCount",get:function(){var t=o(s);return null==t||null==t?(this._itemCount=0,this._itemCount):(this._itemCount=t,this._itemCount)},set:function(t){this._itemCount=Math.max(0,t),u(s,t),this.onDataCountChange&&this.onDataCountChange()}}],[{key:"inst",get:function(){return null==t._inst&&(t._inst=new t),t._inst}}]),t}())._inst=null,e._RF.pop()}}}));

System.register("chunks:///_virtual/Util.ts",["cc","./ResManager.ts","./NodePool.ts"],(function(e){var n,t,o,r;return{setters:[function(e){n=e.cclegacy,t=e.instantiate},function(e){o=e.ResManager},function(e){r=e.NodePoolManager}],execute:function(){n._RF.push({},"ce855O5GT1JLZcrTxFUfmXo","Util",void 0);e("Util",function(){function e(){}return e.delay=function(e){return new Promise((function(n){return setTimeout(n,e)}))},e.createPool=function(e,n,i,a){void 0===a&&(a="block");var c=o.getInstance().loadAssetSync(n,a);if(null!=c){var u=r.inst.createPool(e);c&&(u.cloneNode=t(c),u.size=i)}else r.initPool(e,a,i)},e.getRandomNumber=function(e){var n=[10100,10101,10102,10200,10202,10300,10301,10302,10201,10400,10401,10402,10500,10501,10502];return n[Math.floor(e/100*n.length)%n.length]},e.generateRandomShowOffShare=function(){var e=(new Date).getTime()%1e3;return this.getRandomNumber(e)},e}());n._RF.pop()}}}));

System.register("chunks:///_virtual/Utils.ts",["cc"],(function(t){var n;return{setters:[function(t){n=t.cclegacy}],execute:function(){n._RF.push({},"fc9d4pOhsxKk4z1owJJLyGW","Utils",void 0);t("default",function(){function t(){}return t.getRandom=function(t,n){return Math.random()*(n-t)+t},t.getRandomInt=function(t,n){return n++,Math.floor(Math.random()*(n-t))+t},t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/View.ts",["./rollupPluginModLoBabelHelpers.js","cc","./debug.ts","./enum.ts","./helper.ts","./LayoutManager.ts","./ViewManagerEvent.ts"],(function(e){var t,i,r,a,s,n,o,h;return{setters:[function(e){t=e.createClass},function(e){i=e.cclegacy,r=e._decorator},function(e){a=e.DEBUG_DRAW_LIND_WIDTH},function(e){s=e.WrapMode},function(e){n=e.Helper},function(e){o=e.LayoutManager},function(e){h=e.VMEvent}],execute:function(){var l;i._RF.push({},"20c27Yt8z5L9bZJqa8MgjS3","View",void 0);var d=r.ccclass;r.property,e("View",d("View")(l=function(){function e(e){this.__debug_graphics=void 0,this._adapter=void 0,this._total=0,this._innerSize=0,this._group=null,this._holderList=[],this._tempHolderList=[],this._isOverflowFixed=void 0,this._adapter=e,this.internal_reset(),this.__createDebug()}var i=e.prototype;return i.__createDebug=function(){},i.__drawDebug=function(){if(this.__debug_graphics&&this.group){this.__debug_graphics.clear();var e=this.adapter.mainAxis,t=this.adapter.crossAxis,i={x:0,y:0},r={x:this.group.size.x,y:this.group.size.y},s={x:this.group.anchorPoint.x,y:this.group.anchorPoint.y};i[e]=this.group.position[e]-r[e]*s[e],i[e]+=.5*a,i[t]=this.group.position[t]-r[t]*(1-s[t]),i[t]+=.5*a,r[e]-=a,r[t]-=a,this.__debug_graphics.roundRect(i.x,i.y,r.x,r.y,2),this.__debug_graphics.stroke()}},i.getFixedHolders=function(){if(!this.group.isFixed)return[];for(var e=[],t=this.holderList.length,i=0;i<t;i++){var r=this.holderList[i];r.model.element.fixed&&e.push(r)}return e},i.internal_isWrap=function(e,t){var i=!1,r=t&&t.models[t.models.length-1];if(r)switch(e.element.wrapBeforeMode){case s.Wrap:i=!0;break;case s.Nowrap:i=r.element.wrapAfterMode==s.Wrap;break;case s.Auto:(i=r.element.wrapAfterMode==s.Wrap)||(i=this._calculateInnerSize(e,t))}return i},i.internal_reset=function(){this._group=null,this._innerSize=0,this._total=0,this._holderList.length=0,this._isOverflowFixed=!0,this._tempHolderList.length=0,this.__debug_graphics&&this.__debug_graphics.clear()},i.internal_push=function(e){this._total++;var t=this.adapter.crossAxis;(!e.element.ignoreLayout||e.element.ignoreLayout&&e.element.placeholder)&&(0!=this._innerSize&&(this._innerSize+=this.adapter.layoutManager.spacing),this._innerSize+=e.size[t])},i.internal_recycleHolders=function(e){for(var t=0;t<this._holderList.length;t++){var i=this._holderList[t];i.internal_disable(),e(i)}this._holderList.length=0},i.internal_preVisible=function(e,t){return this._group=e,this._createHolders(t),this},i.internal_visible=function(){this.register();for(var e=0;e<this._tempHolderList.length;e++){var t=this._tempHolderList[e],i=t.holder,r=t.model,a=t.isNew;i.internal_visible(this,r,a)}this._tempHolderList.length=0,this.adapter.layoutManager.layout(this.group),this.onVisible()},i.internal_disable=function(){this.adapter.layoutManager.unLayout(this.index),this.unregister(),this.onDisable(),this.internal_reset()},i.internal_holderChanged=function(e){var t=!0,i=this.adapter.mainAxis,r=this.group.size[i];if(!e){for(var a=0,s=0;s<this.group.models.length;s++){var o=this.group.models[s],h=o.size[i];(this.adapter.isVertical&&this.adapter.layoutManager.controlScaleHeight||this.adapter.isHorizontal&&this.adapter.layoutManager.controlScaleWidth)&&(h*=o.scale[i]),a=Math.max(a,h)}n.approximately(this.group.size[i],a)||(this.group.oldSize[i]=this.group.size[i],this.group.size[i]=a,t=!1)}t?this.adapter.layoutManager.layout(this.group):this.adapter.viewManager.internal_viewChanged(this,r)},i.register=function(){this.adapter.viewManager.on(h.ON_SCROLL,this._onScroll,this),this.adapter.viewManager.on(h.ON_LATEUPDATE,this._onLateUpdate,this),this.adapter.layoutManager.on(o.Event.ON_LAYOUT_COMPLATED,this._onLayoutComplated,this),this.adapter.layoutManager.on(o.Event.ON_CHANGED_LAYOUT_STATE,this._onChangedLayoutState,this)},i.unregister=function(){this.adapter.viewManager.off(h.ON_SCROLL,this._onScroll,this),this.adapter.viewManager.off(h.ON_LATEUPDATE,this._onLateUpdate,this),this.adapter.layoutManager.off(o.Event.ON_LAYOUT_COMPLATED,this._onLayoutComplated,this),this.adapter.layoutManager.off(o.Event.ON_CHANGED_LAYOUT_STATE,this._onChangedLayoutState,this)},i._createHolders=function(e){var t=this.adapter.mainAxis;this._tempHolderList.length=0;for(var i=0;i<this.group.models.length;i++){var r=this.group.models[i],a=!1,s=e&&e(r);s||(s=this.adapter.viewManager.internal_getHolder(r),a=!0),r.position[t]=this.group.position[t],this._holderList.push(s),this._tempHolderList.push({holder:s,model:r,isNew:a})}},i._calculateInnerSize=function(e,t){if(0==this._total)return!1;var i=e.size[this.adapter.crossAxis];return this._innerSize+i+this.adapter.layoutManager.spacing>t.size[this.adapter.crossAxis]},i._onLayoutComplated=function(e){if(-1!=e.indexOf(this.index)){for(var t=0;t<this.holderList.length;t++){this.holderList[t].internal_layout()}this.group.isFixed&&this._calcFixedPosition()}},i._calcFixedPosition=function(){for(var e=this._holderList.length,t=this.adapter.mainAxis,i=0;i<e;i++){var r=this._holderList[i];if(r.element.fixed){var a={x:r.model.position.x,y:r.model.position.y},s=0,n=this._getModelBoundary(r.model);if(this._isNeedFixed(n)){a[t]-=n;var o=this.adapter.viewManager.getNextFixedHolders(this.index);s=this._getRelativeNextHolderOffset(r,o)}a[t]+=s*this.adapter.multiplier,a[t]!=r.node.position[t]&&r.node.setPosition(a.x,a.y)}}},i._onChangedLayoutState=function(){this.adapter.layoutManager.layout(this.group)},i._onScroll=function(){this.group.isFixed&&0!=this._holderList.length&&this._calcFixedPosition()},i._onLateUpdate=function(e){},i._isNeedFixed=function(e){return 1==this.adapter.multiplier?e>=0:e<=0},i._getModelBoundary=function(e){var t=n.isNumber(e.element.fixedOffset)?e.element.fixedOffset:0;return 1==this.adapter.multiplier?this._getModelHeaderBoundary(e)+t:this._getModelFooterBoundary(e)-t},i._getModelHeaderBoundary=function(e){var t=this.adapter.mainAxis;return e.position[t]+e.size[t]*(1-e.anchorPoint[t])*e.scale[t]+this.adapter.scrollManager.contentPosition},i._getModelFooterBoundary=function(e){var t=this.adapter.mainAxis;return e.position[t]-e.size[t]*e.anchorPoint[t]*e.scale[t]+this.adapter.scrollManager.contentPosition},i._getModelSizeWithSpacing=function(e){var t=this.adapter.mainAxis,i=n.isNumber(e.element.fixedOffset)?e.element.fixedOffset:0,r=n.isNumber(e.element.fixedSpacing)?e.element.fixedSpacing:this.adapter.viewManager.spacing;return e.size[t]*e.scale[t]+i+r},i._getReatureRelativeBoundary=function(e,t){var i=1==this.adapter.multiplier?this._getModelHeaderBoundary(e):this._getModelFooterBoundary(e),r=1==this.adapter.multiplier?i+t:t-i;return Math.min(r,t)},i._getRelativeNextHolderOffset=function(e,t){for(var i=t.length,r=this.adapter.crossAxis,a=this._getModelSizeWithSpacing(e.model),s=0,n=0;n<i;n++){var o=t[n],h=this._getReatureRelativeBoundary(o.model,a),l=e.model.scale[r]==o.model.scale[r],d=e.model.size[r]==o.model.size[r];if(e.fixedIndex==o.fixedIndex&&l&&d){s=h>0?h:0;break}h>0&&(s=Math.max(s,h))}return s},t(e,[{key:"isOverflowFixed",get:function(){return this._isOverflowFixed}},{key:"adapter",get:function(){return this._adapter}},{key:"group",get:function(){return this._group}},{key:"holderList",get:function(){return this._holderList}},{key:"index",get:function(){return this.group?this.group.index:-1}}]),e}())||l);i._RF.pop()}}}));

System.register("chunks:///_virtual/ViewManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Group.ts","./Manager.ts","./View.ts","./enum.ts","./helper.ts","./ModelManager.ts","./ScrollManager.ts","./ViewManagerEvent.ts"],(function(i){var e,t,r,s,a,n,o,l,h,d,u,p,c,_,g,f,v,x,b;return{setters:[function(i){e=i.applyDecoratedDescriptor,t=i.inheritsLoose,r=i.initializerDefineProperty,s=i.assertThisInitialized,a=i.createClass},function(i){n=i.cclegacy,o=i._decorator,l=i.instantiate},function(i){h=i.Group},function(i){d=i.Manager},function(i){u=i.View},function(i){p=i.ArrangeAxis,c=i.StretchDirection,_=i.MagneticDirection,g=i.ScrollDirection},function(i){f=i.Helper},function(i){v=i.ModelManager},function(i){x=i.ScrollManager},function(i){b=i.VMEvent}],execute:function(){var m,w,V,H,A,z,y,F,S,M,I,P,D,O,E,T,G,L,N,k,C,B,R,U,W,j,Z,q,J,K,Q,X,Y,$,ii;n._RF.push({},"74bbbWBWzpGspxEpsEO9xIS","ViewManager",void 0);var ei=o.ccclass,ti=o.property;i("ViewManager",(m=ei("ViewManager"),w=ti({type:p}),V=ti({type:p,tooltip:"主轴方向的排列方式\n        Start: 从上到下、从左到右\n        End: 从下到上、从右到左"}),H=ti({type:c,tooltip:"当元素的尺寸、缩放改变时，受影响的其他元素应该如何计算新的位置\n        Auto: 以可视区域中心为起点，所有其他元素向两边延伸\n        Center: 以当前变化的元素为起点，所有其他元素向两边延伸\n        Header: 以当前变化的元素和它头部的所有元素向头部延伸\n        Footer: 以当前变化的元素和它尾部的所有元素向尾部延伸"}),A=ti({range:[0,1],slide:!0,step:.01,tooltip:"当元素移动到可视区域外偏移多少时才进行回收\n        比如元素的尺寸为100，当元素超出可视范围 100+100*0.3 时就会被回收\n        没有特殊需求时，默认值即可"}),z=ti({range:[0,1],slide:!0,step:.01,tooltip:"此值会影响填充元素的时机\n        没有特殊需求时，默认值即可"}),y=ti({tooltip:"主轴方向元素的间隙"}),F=ti({group:{id:"padding",name:"padding"}}),S=ti({group:{id:"padding",name:"padding"}}),M=ti({group:{id:"padding",name:"padding"}}),I=ti({group:{id:"padding",name:"padding"}}),P=ti({tooltip:"磁性停靠\n        开启后，会在增加数据时，根据设置进行自动滚动到顶部或底部"}),D=ti({type:_,visible:function(){return this.magnetic},tooltip:"停靠的方向"}),O=ti({visible:function(){return this.magnetic},tooltip:"停靠动画的时长"}),E=ti({visible:function(){return this.magnetic},tooltip:"默认情况下，仅当添加数据时才会触发停靠\n        当开启时，元素的尺寸改变时,也会否触发停靠"}),T=ti({tooltip:"头部循环"}),G=ti({tooltip:"尾部循环"}),m(((ii=function(i){function e(){for(var e,t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];return e=i.call.apply(i,[this].concat(a))||this,r(e,"_arrangeAxis",k,s(e)),r(e,"stretchDirection",C,s(e)),r(e,"overflowOffset",B,s(e)),r(e,"enterOffset",R,s(e)),r(e,"_spacing",U,s(e)),r(e,"left",W,s(e)),r(e,"right",j,s(e)),r(e,"top",Z,s(e)),r(e,"bottom",q,s(e)),r(e,"magnetic",J,s(e)),r(e,"magneticDirection",K,s(e)),r(e,"magneticDuration",Q,s(e)),r(e,"magneticSizeChanges",X,s(e)),r(e,"loopHeader",Y,s(e)),r(e,"loopFooter",$,s(e)),e._groupLength=0,e._cacheGroups=[],e._groups=[],e._disableViews=[],e._visibleViews=[],e._fixedViews=[],e._disableHolders=[],e._isFill=!1,e._headerIndex=-1,e._footerIndex=-1,e._virtualSize=0,e._overflowHeader=0,e._cacheHeadeDatas=[],e._cacheHeadePosition=void 0,e}t(e,i);var n=e.prototype;return n.onInit=function(){this.adapter.modelManager.on(v.Event.ON_CHANGE_BEFORE,this._onModelChangeBefore,this),this.adapter.modelManager.on(v.Event.ON_INSERT,this._updateGroups,this),this.adapter.modelManager.on(v.Event.ON_REMOVE,this._updateGroups,this),this.adapter.modelManager.on(v.Event.ON_MOVE,this._updateGroups,this),this.adapter.modelManager.on(v.Event.ON_CLEAR,this._onClearModel,this),this.adapter.scrollManager.on(x.Event.ON_SCROLL,this._onScroll,this),this.adapter.scrollManager.on(x.Event.ON_VIEW_SIZE_CHANGED,this._resetAllState,this),this.adapter.scrollManager.on(x.Event.ON_CHANGED_ORIENTATION,this._resetAllState,this)},n._clearAll=function(){for(var i,e=0,t=this._visibleViews.length;e<t;e++)this._recycleViewToDisableViews(this._visibleViews[e]);(i=this._cacheGroups).push.apply(i,this._groups),this._clearFixedViews(),this._visibleViews.length=0,this._groups.length=0,this.virtualSize=0,this.overflowHeader=0},n._onClearModel=function(){this._clearAll(),this.emit(b.ON_CLEARVIEWS)},n._resetAllState=function(){this._clearAll(),this.internal_updateVisibleView(0),this.emit(b.ON_RESET_ALL_STATE)},n._onModelChangeBefore=function(){if(this.header&&this.virtualSize>this.adapter.mainAxisSize){var i=this.getVisibleIndexByGroupIndex(0);if(-1!=i){var e=this._visibleViews[i];this._cacheHeadeDatas=e.group.models.map((function(i){return i.data})),this._cacheHeadePosition={x:e.group.position.x,y:e.group.position.y}}else this._cacheHeadeDatas=this.header.group.models.map((function(i){return i.data})),this._cacheHeadePosition={x:this.header.group.position.x,y:this.header.group.position.y}}},n._updateGroups=function(i){var e,t=this,r=this._getViewFromDisibleViews(null),s=this.getGroupIndexByModelIndex(i);-1==s&&(s=this._groupLength-1);var a=null,n=!1,o={modelIndex:i,fixedIndex:-1},l=this._groups[s-1];for(l&&(o.fixedIndex=l.fixedIndex);;){(a=this._groups[s])||((a=this._getGroupFromCache()).internal_setIndex(this._groups.length),this._groups.push(a),s=this._groups.length);var h=a.internal_insert(o,r,n);if(s++,n=!0,!h)break}var d=this._groups.splice(s,this._groups.length);(e=this._cacheGroups).push.apply(e,d),this._groupLength=this._groups.length;var u=-1,p=0;this._cacheHeadeDatas.length>0&&(u=this._groups.findIndex((function(i){return i.internal_includes(t._cacheHeadeDatas)})));var c=this._groups[u];c&&(p+=c.size[this.adapter.mainAxis]+this.spacing,c.internal_setPosition(this._cacheHeadePosition[this.adapter.mainAxis]));for(var g=u-1;g>=0;g--){var f=this._groups[g];this._calcMainAxisPosition(f,c,_.Header),p+=f.size[this.adapter.mainAxis]+this.spacing,c=f}c=this._groups[u];for(var v=u+1;v<this.groupLength;v++){f=this._groups[v];this._calcMainAxisPosition(f,c,_.Footer),p+=f.size[this.adapter.mainAxis]+this.spacing,c=f}p-=this.spacing,this._virtualSize=Math.max(0,p),this._resetOverflowHeader(this._groups[0]),r.internal_reset(),this._disableViews.push(r),this.updateVisibles(u),this._cacheHeadeDatas=[],this._cacheHeadePosition=null},n.updateVisibles=function(i){var e=[];i=Math.max(0,i);for(var t=function(i){var t=e.findIndex((function(e){return e.oldData==i.data}));return-1!=t?e.splice(t,1)[0]:null},r=0;r<this._visibleViews.length;r++){var s=this._visibleViews[r];e=e.concat(s.holderList),s.internal_reset()}for(var a=this.adapter.mainAxisSize,n=0,o=this.visibleLength,l=i,h=this._groups.length;l<h;l++){var d=this._groups[l];if(this.getVisibleMainAxisSize()>=a&&o<=0)break;(p=this._visibleViews[n++])||(p=this._getViewFromDisibleViews(d.index),this._visibleViews.push(p)),p.internal_preVisible(d,t),o--}for(var u=this._visibleViews.length-1;u>=0;u--){var p;if((p=this._visibleViews[u]).holderList.length>0)break;this._disableFromVisibleViews(u)}for(var c=0,_=e.length;c<_;c++){var g=e[c];g.internal_disable(),this._disableHolders.push(g)}for(var f=0;f<this.visibleLength;f++)this._visibleViews[f].internal_visible();this._forceFill(),this._calcMagnetic(),this.emit(b.ON_UPDATE_VIEWS)},n._getGroupFromCache=function(){var i=this._cacheGroups.pop();return i||(i=new h(this.adapter)),i.internal_reset(),i},n._calcMagnetic=function(){if(this.magnetic&&this.header){var i=!1;0==this.adapter.scrollManager.velocity&&(this.magneticDirection==_.Footer?this.footer.index==this._groupLength-1&&(this.adapter.scrollManager.scrollToFooter(this.magneticDuration),i=!0):0==this.header.index&&(this.adapter.scrollManager.scrollToHeader(this.magneticDuration),i=!0)),this.emit(b.ON_MAGNETIC,i)}},n._calcMainAxisPosition=function(i,e,t){if(i)if(e){var r,s,a=this.adapter.mainAxis,n=this.adapter.multiplier,o=t==_.Footer?1:-1;t==_.Footer?(r=1==n?e.anchorPoint[a]:1-e.anchorPoint[a],s=1==n?1-i.anchorPoint[a]:i.anchorPoint[a]):(r=1==n?1-e.anchorPoint[a]:e.anchorPoint[a],s=1==n?i.anchorPoint[a]:1-i.anchorPoint[a]);var l=e.position[a];l-=e.size[a]*r*o*n,l-=this.spacing*n*o,l-=i.size[a]*s*o*n,i.internal_setPosition(l)}else i.internal_setPosition(this._getMainAxisHeaderPosition(i))},n._getMainAxisHeaderPosition=function(i){var e=0,t=0;return this.adapter.isVertical?(e=this.adapter.isArrangeAxisStart?-this.top:this.bottom,t=this.adapter.isArrangeAxisStart?1-i.anchorPoint[this.adapter.mainAxis]:i.anchorPoint[this.adapter.mainAxis]):(e=this.adapter.isArrangeAxisStart?this.left:-this.right,t=this.adapter.isArrangeAxisStart?i.anchorPoint[this.adapter.mainAxis]:1-i.anchorPoint[this.adapter.mainAxis]),e-=t*i.size[this.adapter.mainAxis]*this.adapter.multiplier},n._getViewFromDisibleViews=function(i){var e=null;if(null!=i){var t=this._fixedViews.findIndex((function(e){return e.index==i}));if(-1!=t){var r=this._fixedViews.splice(t,1)[0];this._recycleViewToDisableViews(r)}}return e||(e=this._disableViews.pop()),e||(e=this.adapter.getView()),e},n._getHolderFromDisableHolders=function(i){var e=this._disableHolders.findIndex((function(e){return e.code==i.code}));if(-1!=e)return this._disableHolders.splice(e,1)[0]},n._disableFromVisibleViews=function(i){var e=-1;e=i instanceof u?this._visibleViews.findIndex((function(e){return e.index==i.index})):i,this._recycleViewToDisableViews(this._visibleViews[e]),this._visibleViews.splice(e,1)},n._recycleViewToDisableViews=function(i){var e=this;i&&(i.internal_recycleHolders((function(i){return e._disableHolders.push(i)})),i.internal_disable(),this._disableViews.push(i))},n._clearFixedViews=function(){for(var i=0,e=this._fixedViews.length;i<e;i++){var t=this._fixedViews[i];this._recycleViewToDisableViews(t)}this._fixedViews.length=0},n._checkHeaderInvisible=function(){this.header&&(this.loopFooter||this.footer.index!=this.groupLength-1)&&this._isOverflowHeader(this.header.group)&&(this._disableFromVisibleViews(0),this._checkHeaderInvisible())},n._checkFooterInvisible=function(){this.footer&&(this.loopHeader||0!=this.header.index)&&this._isOverflowFooter(this.footer.group)&&(this._disableFromVisibleViews(this._visibleViews.length-1),this._checkFooterInvisible())},n._isOverflowHeader=function(i,e){void 0===e&&(e=this.overflowOffset);var t=this.internal_getGroupFooterBoundary(i);return e*=i.size[this.adapter.mainAxis],1==this.adapter.multiplier?t>=e:t<=-e},n._isOverflowFooter=function(i,e){void 0===e&&(e=this.overflowOffset);var t=this.internal_getGroupHeaderBoundary(i);return e*=i.size[this.adapter.mainAxis],1==this.adapter.multiplier?t+this.adapter.mainAxisSize<=-e:t-this.adapter.mainAxisSize>=e},n._isEnterFooter=function(i){if(!i)return!1;var e=this.internal_getGroupFooterBoundary(i),t=this.enterOffset*i.size[this.adapter.mainAxis];return 1==this.adapter.multiplier?e+this.adapter.mainAxisSize+t>=0:e-this.adapter.mainAxisSize-t<=0},n._isEnterHeader=function(i){if(!i)return!1;var e=this.internal_getGroupHeaderBoundary(i),t=this.overflowOffset*i.size[this.adapter.mainAxis];return 1==this.adapter.multiplier?e-t<=0:e+t>=0},n._fillHeader=function(){var i=this._groups[this._headerIndex];if(this._isEnterHeader(i)){var e=this._accumTargetSizeTowardsHeader(i.index,this.internal_getInitHeaderSize(i)),t=e.index,r=e.size,s=this._groups[t];if(s&&-1==this.getVisibleIndexByGroupIndex(t)){var a=this.internal_convertSizeToHeaderPosition(r,s);s.internal_setPosition(a);var n=this._getViewFromDisibleViews(s.index);this._visibleViews.unshift(n),n.internal_preVisible(s).internal_visible(),0==n.index&&this._resetOverflowHeader(n.group),this._headerIndex=s.index,this._fillHeader()}}},n._fillFooter=function(){var i=this._groups[this._footerIndex];if(this._isEnterFooter(i)){var e=this._accumTargetSizeTowardsFooter(i.index,this.internal_getInitFooterSize(i)),t=e.index,r=e.size,s=this._groups[t];if(s&&-1==this.getVisibleIndexByGroupIndex(t)){var a=this.internal_convertSizeToFooterPosition(r,s);s.internal_setPosition(a);var n=this._getViewFromDisibleViews(s.index);this._visibleViews.push(n),n.internal_preVisible(s).internal_visible(),0==n.index&&this._resetOverflowHeader(n.group),this._footerIndex=s.index,this._fillFooter()}}},n._fillFixedView=function(){if(this.header&&(-1!=this.header.group.fixedIndex||this.header.group.isFixed))for(var i=this.header.index,e=this.adapter.mainAxis,t=this.internal_getInitHeaderSize(this.header.group),r=i-1;r>=0;r--){var s=this._groups[r];if(!s)return void console.error("_fillFixedView错误 找不到group",r);if(t+=s.size[e]+this.spacing,s.isFixed){var a=this.internal_convertSizeToHeaderPosition(t,s);if(-1!=this._fixedViews.findIndex((function(i){return i.index==s.index}))){f.approximately(a,s.position[e])||(s.internal_setPosition(a),this.adapter.layoutManager.layout(s));break}this._clearFixedViews();a=this.internal_convertSizeToHeaderPosition(t,s);s.internal_setPosition(a);var n=this._getViewFromDisibleViews(s.index);n.internal_preVisible(s).internal_visible(),this._fixedViews.push(n);break}}},n._accumTargetSizeTowardsHeader=function(i,e){for(var t=this._groups.length;;){if(0==i&&this.loopHeader&&(i=t),0==i)return{index:i,size:e};if(i--,!this._groups[i])return{index:i,size:e};if((e+=this.internal_accumulationSize(i))>=0)return{index:i,size:e}}},n._accumTargetSizeTowardsFooter=function(i,e){for(var t=this._groups.length;;){if(i==t-1&&this.loopFooter&&(i=-1),i==t-1)return{index:i,size:e};if(i++,!this._groups[i])return{index:i,size:e};if((e+=this.internal_accumulationSize(i))>=0)return{index:i,size:e}}},n._fillFooterHandle=function(){this._checkHeaderInvisible(),this._fillFooter()},n._fillHeaderHandle=function(){this._checkFooterInvisible(),this._fillHeader()},n._forceFill=function(){this._updateHeaderFooterIndex(),this._fillHeaderHandle(),this._fillFooterHandle()},n._updateHeaderFooterIndex=function(){this._headerIndex=this.header?this.header.index:0,this._footerIndex=this.footer?this.footer.index:0},n._onScroll=function(i){if(0!=this._groups.length){switch(this._updateHeaderFooterIndex(),i){case g.Up:case g.Left:this.adapter.isArrangeAxisStart?this._fillFooterHandle():this._fillHeaderHandle();break;case g.Down:case g.Right:this.adapter.isArrangeAxisStart?this._fillHeaderHandle():this._fillFooterHandle()}this._fillFixedView(),this.emit(b.ON_SCROLL)}},n._stretchToHeader=function(i,e){for(var t=this._visibleViews[i],r=e;r>=0;r--){var s=this._visibleViews[r];t?(this._calcMainAxisPosition(s.group,t.group,_.Header),this.adapter.layoutManager.layout(s.group)):this.getVisibleMainAxisSize()<this.adapter.mainAxisSize&&this._calcMainAxisPosition(s.group,null,_.Header),t=s}},n._stretchToFooter=function(i,e){for(var t=this._visibleViews[i],r=e;r<this._visibleViews.length;r++){var s=this._visibleViews[r];t?(this._calcMainAxisPosition(s.group,t.group,_.Footer),this.adapter.layoutManager.layout(s.group)):this.getVisibleMainAxisSize()<this.adapter.mainAxisSize&&this._calcMainAxisPosition(s.group,null,_.Footer),t=s}},n._resetOverflowHeader=function(i){if(!i)return this.overflowHeader=0;var e=this.adapter.mainAxis,t=i.anchorPoint[e];t=1==this.adapter.multiplier?1-t:t;var r=i.position[e];r+=i.size[e]*t*this.adapter.multiplier,this.overflowHeader=r},n._calcOverflowHeader=function(i,e,t){var r=this.getVisibleIndexByGroupIndex(0);if(-1!=r){var s=this._visibleViews[r];return this._resetOverflowHeader(s.group)}var a=this.adapter.mainAxis,n=i.anchorPoint[a];n=1==this.adapter.multiplier?1-n:n;var o=i.oldSize[a],l=i.size[a],h=this.adapter.multiplier;switch(this.stretchDirection){case c.Header:var d=i.oldPosition[a]+o*n*h;(u=1==h?this.overflowHeader>=d:this.overflowHeader<=d)&&(this.overflowHeader+=(l-o)*h);break;case c.Footer:d=i.oldPosition[a]+o*n*h;(u=1==h?this.overflowHeader>=d:this.overflowHeader<=d)||(this.overflowHeader-=(l-o)*h);break;case c.Center:d=i.oldPosition[a]+o*n*h;(u=1==h?this.overflowHeader>=d:this.overflowHeader<=d)?this.overflowHeader+=.5*(l-o)*h:this.overflowHeader-=.5*(l-o)*h;break;case c.Auto:d=i.oldPosition[a]+o*n*h;var u=1==h?this.overflowHeader>=d:this.overflowHeader<=d;e<=t&&(d=i.oldPosition[a]+o*n*h,u=-1==h?this.overflowHeader>=d:this.overflowHeader<=d),u&&(e<=t?this.overflowHeader-=(l-o)*h:this.overflowHeader+=(l-o)*h)}},n.internal_lateUpdate=function(i){this._isFill&&(this._isFill=!1,this._forceFill()),this.emit(b.ON_LATEUPDATE,i)},n.internal_viewChanged=function(i,e){var t=i.group.size[this.adapter.mainAxis]-e;this.virtualSize+=t;var r=this.getVisibleIndexByGroupIndex(i.index),s=-1;if(this.getVisibleMainAxisSize()<this.adapter.mainAxisSize||this.stretchDirection==c.Footer){var a=r-1;this._visibleViews[a]||this.adapter.layoutManager.layout(i.group),this._stretchToFooter(a,r)}else if(this.stretchDirection==c.Header){var n=r+1;this._visibleViews[n]||this.adapter.layoutManager.layout(i.group),this._stretchToHeader(n,r)}else if(this.stretchDirection==c.Center)this.adapter.layoutManager.layout(i.group),this._stretchToHeader(r,r-1),this._stretchToFooter(r,r+1);else{if(-1==(s=this.adapter.centerManager.getCenterVisibleIndex()))throw Error("找不到中心索引"+i.index);var o=this._visibleViews[s];this.adapter.layoutManager.layout(o.group),this._stretchToHeader(s,s-1),this._stretchToFooter(s,s+1)}this._calcOverflowHeader(i.group,s,r),this.magneticSizeChanges&&this._calcMagnetic(),this._isFill=!0,this.emit(b.ON_CHANGED_VIRTUALSIZE)},n.internal_getHolder=function(i){var e=this._getHolderFromDisableHolders(i);if(!e){var t=this.adapter.getPrefab(i.data),r=l(t);e=this.adapter.getHolder(r,i.code)}return e.node.parent=this.adapter.scrollManager.getLayerNode(i.element.layer),e},n.internal_updateVisibleView=function(i){this._onModelChangeBefore(),this._updateGroups(i)},n.internal_getGroupFooterBoundary=function(i){if(!i)return 0;var e=i.anchorPoint[this.adapter.mainAxis];e=1==this.adapter.multiplier?e:1-e;var t=i.position[this.adapter.mainAxis];return t-=i.size[this.adapter.mainAxis]*e*this.adapter.multiplier,t+=this.adapter.scrollManager.contentPosition},n.internal_getGroupHeaderBoundary=function(i){if(!i)return 0;var e=i.anchorPoint[this.adapter.mainAxis];return e=1==this.adapter.multiplier?1-e:e,i.position[this.adapter.mainAxis]+this.adapter.scrollManager.contentPosition+e*i.size[this.adapter.mainAxis]*this.adapter.multiplier},n.internal_getInitHeaderSize=function(i){if(!i)return 0;var e=i.anchorPoint[this.adapter.mainAxis];e=1==this.adapter.multiplier?1-e:e;var t=-i.position[this.adapter.mainAxis]*this.adapter.multiplier;return t-=i.size[this.adapter.mainAxis]*e,t-=this.adapter.scrollManager.contentPosition*this.adapter.multiplier,t=this.adapter.mainAxisSize-t},n.internal_getInitFooterSize=function(i){if(!i)return 0;var e=i.anchorPoint[this.adapter.mainAxis];e=1==this.adapter.multiplier?e:1-e;var t=-i.position[this.adapter.mainAxis]*this.adapter.multiplier;return t+=i.size[this.adapter.mainAxis]*e,t-=this.adapter.scrollManager.contentPosition*this.adapter.multiplier},n.internal_accumulationSize=function(i){var e=this._groups[i];return e?e.size[this.adapter.mainAxis]+this.spacing:0},n.internal_convertSizeToFooterPosition=function(i,e){var t=e.anchorPoint[this.adapter.mainAxis];t=1==this.adapter.multiplier?t:1-t;var r=e.size[this.adapter.mainAxis]*t,s=-this.adapter.scrollManager.contentPosition;return s-=this.adapter.multiplier*i-this.adapter.multiplier*r},n.internal_convertSizeToHeaderPosition=function(i,e){var t=e.anchorPoint[this.adapter.mainAxis];t=1==this.adapter.multiplier?1-t:t;var r=e.size[this.adapter.mainAxis]*t,s=this.adapter.multiplier*i-this.adapter.multiplier*r;return s-=this.adapter.multiplier*this.adapter.mainAxisSize,s-=this.adapter.scrollManager.contentPosition},n.getGroup=function(i){return this._groups[i]},n.getVisibleView=function(i){return this._visibleViews[i]},n.getVisibleMainAxisSize=function(){if(0==this._visibleViews.length)return 0;for(var i=0,e=this.adapter.mainAxis,t=0,r=this._visibleViews.length;t<r;t++){var s=this._visibleViews[t];s.group&&(i+=s.group.size[e]+this.spacing)}return i-=this.spacing},n.getGroupIndexByModelIndex=function(i){for(var e=0,t=this._groups.length;e<t;e++){if(-1!=this._groups[e].findModelIndex(i))return e}return-1},n.getVisibleIndexByGroupIndex=function(i){return this._visibleViews.findIndex((function(e){return e.index==i}))},n.getNextFixedHolders=function(i){for(var e=[],t=this.getVisibleIndexByGroupIndex(i)+1,r=this._visibleViews.length;t<r;t++){var s=this._visibleViews[t];if(s.index!=i&&s.group.isFixed){e=s.getFixedHolders();break}}return e},n.getMagneticOffset=function(){if(!this.magnetic)return 0;var i=this.adapter.isHorizontal?-this.adapter.multiplier:this.adapter.multiplier;return this.magneticDirection==_.Footer?this.footer?Math.max(0,this.adapter.mainAxisSize-this.adapter.mainAxisPadding-this.getVisibleMainAxisSize())*i:this.adapter.mainAxisSize*i:0},a(e,[{key:"arrangeAxis",get:function(){return this._arrangeAxis},set:function(i){i!=this._arrangeAxis&&(this._arrangeAxis=i,this._resetAllState())}},{key:"spacing",get:function(){return this._spacing},set:function(i){i!=this._spacing&&(this._spacing=i,this._resetAllState())}},{key:"header",get:function(){return this._visibleViews[0]}},{key:"footer",get:function(){return this._visibleViews[this._visibleViews.length-1]}},{key:"overflowHeader",get:function(){return this._overflowHeader},set:function(i){i!=this._overflowHeader&&(this._overflowHeader=i,this.emit(b.ON_CHANGED_OVERFLOWHEADER,i))}},{key:"virtualSize",get:function(){return this._virtualSize},set:function(i){i!=this._virtualSize&&(this._virtualSize=i,this.emit(b.ON_CHANGED_VIRTUALSIZE))}},{key:"groupLength",get:function(){return this._groupLength}},{key:"visibleLength",get:function(){return this._visibleViews.length}},{key:"min",get:function(){return this.header?this.adapter.isArrangeAxisStart?this.internal_getGroupFooterBoundary(this.footer.group):this.internal_getGroupHeaderBoundary(this.header.group):0}},{key:"max",get:function(){return this.header?this.adapter.isArrangeAxisStart?this.internal_getGroupHeaderBoundary(this.header.group):this.internal_getGroupFooterBoundary(this.footer.group):0}}]),e}(d)).Event=b,k=e((N=ii).prototype,"_arrangeAxis",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return p.Start}}),e(N.prototype,"arrangeAxis",[V],Object.getOwnPropertyDescriptor(N.prototype,"arrangeAxis"),N.prototype),C=e(N.prototype,"stretchDirection",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return c.Auto}}),B=e(N.prototype,"overflowOffset",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.3}}),R=e(N.prototype,"enterOffset",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),U=e(N.prototype,"_spacing",[ti],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),e(N.prototype,"spacing",[y],Object.getOwnPropertyDescriptor(N.prototype,"spacing"),N.prototype),W=e(N.prototype,"left",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),j=e(N.prototype,"right",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Z=e(N.prototype,"top",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),q=e(N.prototype,"bottom",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),J=e(N.prototype,"magnetic",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),K=e(N.prototype,"magneticDirection",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return _.Header}}),Q=e(N.prototype,"magneticDuration",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),X=e(N.prototype,"magneticSizeChanges",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Y=e(N.prototype,"loopHeader",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),$=e(N.prototype,"loopFooter",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),L=N))||L));n._RF.pop()}}}));

System.register("chunks:///_virtual/ViewManagerEvent.ts",["cc"],(function(E){var _;return{setters:[function(E){_=E.cclegacy}],execute:function(){_._RF.push({},"406322nVABFho0CeHej3wzO","ViewManagerEvent",void 0);E("VMEvent",function(E){return E[E.ON_SCROLL=0]="ON_SCROLL",E[E.ON_LATEUPDATE=1]="ON_LATEUPDATE",E[E.ON_CLEARVIEWS=2]="ON_CLEARVIEWS",E[E.ON_UPDATE_VIEWS=3]="ON_UPDATE_VIEWS",E[E.ON_CHANGED_VIRTUALSIZE=4]="ON_CHANGED_VIRTUALSIZE",E[E.ON_MAGNETIC=5]="ON_MAGNETIC",E[E.ON_CHANGED_OVERFLOWHEADER=6]="ON_CHANGED_OVERFLOWHEADER",E[E.ON_RESET_ALL_STATE=7]="ON_RESET_ALL_STATE",E[E.ON_CHANGED_SPACING=8]="ON_CHANGED_SPACING",E}({}));_._RF.pop()}}}));

System.register("chunks:///_virtual/VisitorAccount.ts",["./rollupPluginModLoBabelHelpers.js","cc","./JsbNativeCall.ts","./SdkConfig.ts","./SdkError.ts","./SdkEventType.ts","./GaClickStatEventDef.ts","./AccountBase.ts"],(function(t){var e,n,o,r,i,c,s,u,a,l;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy},function(t){o=t.JsbNativeCall},function(t){r=t.GAEvent,i=t.GAPropValue,c=t.UserInfo},function(t){s=t.emSdkErrorCode},function(t){u=t.SdkEventType},function(t){a=t.clickStatEventType},function(t){l=t.AcccountBase}],execute:function(){n._RF.push({},"c7790T03VlCzYsyJCZgdzzv","VisitorAccount",void 0);t("VisitorAccount",function(t){function n(){return t.apply(this,arguments)||this}e(n,t);var l=n.prototype;return l.checkSession=function(){return new Promise((function(t,e){t(!0)}))},l.login=function(){var t=this;return new Promise((function(e,n){t.bi.clickStat(a.clickStatEventTypeWxLoginStart,[]),t.bi.track(r.gsm_login_sns,{login_state:i.start,login_code:""}),o.exec("LoginSDK","login",{},(function(n){t.logger.log(t.tag,"login request success , params:",n),c.userId=n.userId,c.nickName=n.userName,c.avatarUrl=n.purl,c.authorCode=n.authorCode,t.logger.log(t.tag,"userId:"+c.userId+" userName:"+c.nickName+" userPic:"+c.avatarUrl+" authorCode:"+n.authorCode);var o=n.token;t.logger.log(t.tag,"token:"+o),t.notifer.emit(u.SDK_LOGIN_SUCCESS),e(n)}),(function(e){t.logger.error(null,"login fail, params:",e),t.notifer.emit(u.SDK_LOGIN_FAIL),n({errMsg:s.Req_pf_LoginBySnsIdNoVerifyFail,errData:e})}))}))},n}(l));n._RF.pop()}}}));

System.register("chunks:///_virtual/WebbrowserAccount.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AccountBase.ts"],(function(n){var t,e,o;return{setters:[function(n){t=n.inheritsLoose},function(n){e=n.cclegacy},function(n){o=n.AcccountBase}],execute:function(){e._RF.push({},"85be4EQUVlAjYZQf8AUa3hF","WebbrowserAccount",void 0);n("WebbrowserAccount",function(n){function e(){return n.apply(this,arguments)||this}t(e,n);var o=e.prototype;return o.checkSession=function(){return new Promise((function(n,t){n(!0)}))},o.login=function(){return new Promise((function(n,t){n(null)}))},o.createUserInfoButton=function(n){this.logger.log(this.tag,n)},e}(o));e._RF.pop()}}}));

System.register("chunks:///_virtual/WebbrowserGa.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SdkConfig.ts","./SdkUtils.ts","./GaBase.ts"],(function(e){var t,o,n,r,i,c;return{setters:[function(e){t=e.inheritsLoose},function(e){o=e.cclegacy},function(e){n=e.SystemInfo,r=e.UserInfo},function(e){i=e.SdkUtils},function(e){c=e.GaBase}],execute:function(){o._RF.push({},"13ca0hSzb9C1ax1u0/9kReX","WebbrowserGa",void 0);e("WebbrowserGa",function(e){function o(){return e.apply(this,arguments)||this}t(o,e);var c=o.prototype;return c.trackCrossAd=function(e,t,o){console.log("trackCrossAd:",t,o)},c.trackAdEvent=function(e,t,o,n,r,i){console.log("trackAdEvent:",{scene:e,adUnitId:t,state:o,errInfo:n,errCode:r,errPfInfo:i})},c.uploadClickStatLogTimely=function(e,t){console.log("uploadClickStatLogTimely:",e,t)},c.track=function(e,t){void 0===t&&(t=null);var o=n,c=r,s={game_id:o.gameId,ip_address:c.ip||"0",phone_maker:c.brand||"0",phone_model:c.model||"0"};if(t)for(var a in t)!a.startsWith("proj_")&&Object.prototype.hasOwnProperty.call(t,a)&&(s["proj_"+a]=t[a]);var l={type:"track",event:e,event_time:(new Date).getTime(),project_id:o.projectId,client_id:o.clientId,device_id:i.getLocalUUID(),user_id:c.userId||0,properties:s,lib:{}},u=JSON.stringify(l),d=o.gaServer;this.logger.log("ga：",d,u)},c.getGaSysConfig=function(){return null},c.uploadLogTimely=function(e,t){console.log("log timely :",e,t)},c.clickStat=function(e,t){console.log("clickStat:",e,t)},o}(c));o._RF.pop()}}}));

System.register("chunks:///_virtual/WebbrowserNative.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SdkBase.ts"],(function(e){var o,t,n;return{setters:[function(e){o=e.inheritsLoose},function(e){t=e.cclegacy},function(e){n=e.SdkBase}],execute:function(){t._RF.push({},"dedcbL1fdFMxJvVTOGL9qxJ","WebbrowserNative",void 0);e("WebbrowserNative",function(e){function t(){return e.apply(this,arguments)||this}o(t,e);var n=t.prototype;return n.showToast=function(e,o){console.log(e)},n.showLoading=function(e){},n.hideLoading=function(e){},t}(n));t._RF.pop()}}}));

System.register("chunks:///_virtual/WechatAccount.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SdkConfig.ts","./SdkError.ts","./SdkEventType.ts","./SdkUtils.ts","./GaClickStatEventDef.ts","./AccountBase.ts"],(function(e){var t,r,o,n,a,i,c,s,l,u,g,f,d;return{setters:[function(e){t=e.inheritsLoose},function(e){r=e.cclegacy},function(e){o=e.GAEvent,n=e.GAPropValue,a=e.UserInfo,i=e.SdkStorageKeys,c=e.SystemInfo},function(e){s=e.emSdkErrorCode},function(e){l=e.SdkEventType},function(e){u=e.SdkUtils},function(e){g=e.clickStatEventType},function(e){f=e.emUserInfoState,d=e.AcccountBase}],execute:function(){r._RF.push({},"4889dla0w1Ek6EEYDWjozPo","WechatAccount",void 0);e("WechatAccount",function(e){function r(){return e.apply(this,arguments)||this}t(r,e);var d=r.prototype;return d.login=function(){var e=this;return new Promise((function(t,r){e.bi.clickStat(g.clickStatEventTypeWxLoginStart,[]),e.bi.track(o.gsm_login_sns,{login_state:n.start,login_code:""}),e.platform.login({success:function(i){e.logger.log(e.tag,"wx login success, params:",i),e.bi.track(o.gsm_login_sns,{login_state:n.success,login_code:i.code}),e.onLoginSnsPlatorm(),e.loginUserCenterWithCode(i.code,a).then(t).catch(r),e.bi.clickStat(g.clickStatEventTypeWxLoginSuccess,[i.code]),e.notifer.emit(l.WEIXIN_LOGIN_SUCCESS)},fail:function(t){e.bi.clickStat(g.clickStatEventTypeWxLoginFailed,[]),e.bi.track(o.gsm_login_sns,{login_state:n.failed,login_code:""}),e.logger.log(e.tag,"wx login fail, params:",t),e.notifer.emit(l.WEIXIN_LOGIN_FAIL),r({errMsg:s.Req_LoginFail,errData:t})}})}))},d.onLoginSnsPlatorm=function(){this.platform.showShareMenu({withShareTicket:!0})},d.loginUserCenterWithCode=function(e,t){var r=this;return new Promise((function(f,d){var p=c.loginUrl,S=u.getLocalUUID();r.logger.log("local_uuid:",S);var I=r.getLoginDataObject(S,e,t);r.bi.track(o.gsm_login_sdk,{login_state:n.start,login_code:e,login_local_uuid:S}),r.bi.clickStat(g.clickStatEventTypeLoginSDKStart,[e,S,t.nickName]),r.logger.log(r.tag,"login request start , params:",I),r.platform.request({url:p+"open/v6/user/LoginBySnsIdNoVerify",header:{"content-type":"application/x-www-form-urlencoded"},data:I,method:"POST",success:function(c){r.logger.log(r.tag,"login request success , params:",c,p);var u=c.data;if(u.error&&1==u.error.code||!u.result||!u.result.userId)return r.logger.log("LOGIN_FAIL",c),void d({errMsg:s.Req_pf_LoginBySnsIdNoVerifyError,errData:u});var I=u.result;a.userId=I.userId,a.nickName=I.userName,a.avatarUrl=I.purl,a.authorCode=I.authorCode,a.wxgame_openid=I.wxgame_openid,a.wxgame_session_key=I.wxgame_session_key,a.snsId=I.snsId,a.token=I.token,a.jwttoken=I.jwttoken,a.launch_scene_id="",a.launch_scene_param="",a.role_user_type=I.role_user_type||"",r.logger.log(r.tag,"userId:"+a.userId+" userName:"+a.nickName+" userPic:"+a.avatarUrl);var _=I.token;r.logger.log(r.tag,"token:"+_),r.platform.setStorage({key:i.SESSION_KEY,data:_});var m=a.showScene,v=a.showQuery;r.bi.track(o.gsm_login_sdk,{login_state:n.success,login_code:e,login_local_uuid:S,login_openId:I.wxgame_openid}),r.bi.clickStat(g.clickStatEventTypeLoginSDKSuccess,[e,S,t.nickName,I.userId]),m&&v&&v.sourceCode&&r.bi.clickStat(g.clickStatEventTypeUserFrom,[m,v.inviteCode,v.sourceCode,v.imageType,"GameStart"]),r.notifer.emit(l.SDK_LOGIN_SUCCESS),f(u.result)},fail:function(a){r.bi.track(o.gsm_login_sdk,{login_state:n.failed,login_code:e,login_local_uuid:S}),r.bi.clickStat(g.clickStatEventTypeLoginSDKFailed,[e,S,t.nickName]),r.logger.error(null,"login fail, params:",a),r.logger.error("SDK_LOGIN_FAIL",a),r.notifer.emit(l.SDK_LOGIN_FAIL),d({errMsg:s.Req_pf_LoginBySnsIdNoVerifyFail,errData:a.data})}})}))},d.checkSession=function(){var e=this;return new Promise((function(t,r){e.platform.checkSession({success:t,fail:r})}))},d.getLoginDataObject=function(e,t,r){var o=r.gender||0,n={appId:c.appId,wxAppId:c.wxAppId,clientId:c.clientId,snsId:"wxapp:"+t,uuid:e,nickName:r.nickName,avatarUrl:r.avatarUrl,gender:o,scene_id:a.scene_id||"",scene_param:a.scene_param||"",invite_id:a.invite_id||0,encryptedData:a.SNSEncryptedData,iv:a.iv};return r&&(r.nickName&&(n.nickName=r.nickName),r.gender>=0&&(n.gender=r.gender||1),r.avatarUrl&&(n.avatarUrl=r.avatarUrl)),n},d.checkUserInfoScopeState=function(){var e=this;return new Promise((function(t,r){var o="scope.userInfo";e.platform.getSetting({success:function(e){var r=e.authSetting;1==r[o]?(a.userInfoScopeState=!0,t(f.Auth)):0==r[o]?(a.userInfoScopeState=!1,a.SNSLoginInfo={},a.SNSEncryptedData="",a.SNSIV="",t(f.Refuse)):(a.userInfoScopeState=!1,t(f.UnSet))},fail:function(e){a.userInfoScopeState=!1,a.SNSLoginInfo={},a.SNSEncryptedData="",a.SNSIV="",r({errMsg:s.Req_GetSettingFail,errData:e})}})}))},d.getUserInfo=function(e){var t=this;return new Promise((function(r,o){e?t.checkUserInfoScopeState().then((function(e){e==f.Auth?t.platform.getUserInfo({withCredentials:!0,success:function(e){if(t.logger.log("getUserInfo success",e),e.encryptedData&&e.iv){a.SNSEncryptedData=e.encryptedData,a.SNSIV=e.iv;var n=e.userInfo;a.nickName=n.nickName,a.avatarUrl=n.avatarUrl;var i={userId:a.userId,wxAppId:c.appId,encryptedData:e.encryptedData,iv:e.iv,setattr:!0};t.platform.request({url:c.loginUrl+"open/v6/user/setWxEncryptedData",header:{"content-type":"application/x-www-form-urlencoded"},data:i,method:"POST",success:function(n){var i=n.data,c=i.result,u=i.error;if(u||!c)t.logger.error("upLoad error",u?u.info:"no result"),o({errMsg:s.Req_pf_SetWxEncryptedDataError,errData:u?u.info:"no result"});else{if(0===c.code){var g=e.userInfo;return a.nickName=g.nickName,a.avatarUrl=g.avatarUrl,t.logger.log("uploadUserInfo success ",c.info),t.notifer.emit(l.SET_WX_SENSITIVE_DATA_SUCCESS),void r(g)}1===c.code?(t.logger.error("uploadUserInfo error ",c.info),t.notifer.emit(l.SET_WX_SENSITIVE_DATA_FAIL),o({errMsg:s.Req_pf_SetWxEncryptedDataError,errData:c})):(t.logger.error("uploadUserInfo2 error ",c.info),t.notifer.emit(l.SET_WX_SENSITIVE_DATA_FAIL),o({errMsg:s.Req_pf_SetWxEncryptedDataError,errData:c}))}},fail:function(e){t.logger.error("uploadUserInfo"," fail, params:"+JSON.stringify(e)),o({errMsg:s.Req_pf_SetWxEncryptedDataFail,errData:e})}})}else o({errMsg:s.No_EncryptedData_IV})},fail:function(e){o({errMsg:s.Req_GetUserInfo_Fail,errData:e})}}):o({errMsg:s.Not_Auth})})).catch((function(e){o(e)})):t.platform.getUserInfo({withCredentials:!1,success:function(e){var t=e.userInfo;a.nickName=t.nickName,a.avatarUrl=t.avatarUrl,r(t)},fail:function(e){o({errMsg:s.Req_GetUserInfo_Fail,errData:e})}})}))},d.createUserInfoButton=function(e){var t=this;this.userInfoButton&&this.userInfoButton.destroy();var r=this.platform.createUserInfoButton({type:"text",text:e.btnText||"获取用户信息",style:{left:e.left,top:e.top,width:e.width,height:e.height,color:e.color,fontSize:e.fontSize||16}});return this.userInfoButton=r,r&&r.onTap((function(e){if(t.userInfoButton&&t.userInfoButton.destroy(),!e.userInfo)return t.notifer.emit(l.START_AUTHORIZATION_FAILED,e),void t.bi.clickStat(g.clickStatEventTypeAuthorizationFailed,[]);a.userInfoScopeState=!0;var r=e.userInfo;a.nickName=r.nickName,a.avatarUrl=r.avatarUrl,e.encryptedData&&e.iv&&(a.SNSEncryptedData=e.encryptedData,a.SNSIV=e.iv),t.notifer.emit(l.START_AUTHORIZATION_SUCCESS,e),t.bi.clickStat(g.clickStatEventTypeAuthorizationSuccess,[])})),r},d.ReqIpLocInfo=function(e){var t=this;return void 0===e&&(e=1),new Promise((function(r,o){t.platform.request({url:"https://iploc.ywdier.com/api/iploc5/search/city",success:function(n){if(200==n.statusCode){var i=n.data;i&&i.loc&&i.ip&&(a.ip=i.ip,a.ipLocInfo=i,t.logger.log("ReqIpLocInfo success:"+e,n),r(n.data))}else e>0?(t.logger.log("ReqIpLocInfo retry:"+e,n),e-=1,t.ReqIpLocInfo(e).then(r).catch(o)):(t.logger.log("ReqIpLocInfo Error",n),o({errMsg:s.Req_pf_PLocInfoError,errData:n}))},fail:function(n){e>0?(e-=1,t.ReqIpLocInfo(e).then(r).catch(o)):(t.logger.log("ReqIpLocInfo",n),o({errMsg:s.Req_pf_PLocInfoFail,errData:n}))}})}))},r}(d));r._RF.pop()}}}));

System.register("chunks:///_virtual/WechatChannel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./WechatMiniApi.ts","./SdkConfig.ts","./SdkEventType.ts","./SdkUtils.ts","./GaClickStatEventDef.ts","./encode_decode.ts","./ChannelBase.ts"],(function(e){var t,n,o,r,i,s,c,a,p,f,l;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy},function(e){o=e.WechatMiniApi},function(e){r=e.UserInfo,i=e.StateInfo,s=e.SystemInfo},function(e){c=e.SdkEventType},function(e){a=e.SdkUtils},function(e){p=e.clickStatEventType},function(e){f=e.EncodeDecode},function(e){l=e.ChannelBase}],execute:function(){n._RF.push({},"3ab29d/lPhCRL08OsFoYNtb","WechatChannel",void 0);e("WechatChannel",function(e){function n(){return e.apply(this,arguments)||this}t(n,e);var l=n.prototype;return l.isSupportShare=function(){return!1},l.Init=function(){var e=this;this.platform.onShow((function(t){e.logger.log("wx","+++++++++++++++++onShow+++++++++++++++++");var n=t.scene,o=t.query;r.showScene=n,r.showQuery=o,r.scene_id=n,r.scene_param=o.from||"",r.invite_id=o.inviteCode||0,i.isOnForeground=!0,e.reportUserFrom(t),e.notifer.emit(c.GAME_SHOW,t)})),this.platform.onHide((function(){e.logger.log("wx","+++++++++++++++++onHide++++++++++++++++"),r.scene_id=0,i.isOnForeground=!1,e.notifer.emit(c.GAME_HIDE)})),this.platform.getNetworkType({success:function(t){t.hasOwnProperty("isConnected")?i.networkConnected=t.isConnected:t.hasOwnProperty("errMsg")?i.networkConnected="getNetworkType:ok"==t.errMsg:i.networkConnected="none"!=t.networkType,i.networkType=t.networkType,e.notifer.emit(c.NET_STATE_CHANGE)}}),this.platform.onNetworkStatusChange((function(t){e.logger.log("net","+++++++++++++++++ net change or get net info ++++++++++++++++"),t.hasOwnProperty("isConnected")?i.networkConnected=t.isConnected:t.hasOwnProperty("errMsg")?i.networkConnected="getNetworkType:ok"==t.errMsg:i.networkConnected="none"!=t.networkType,i.networkType=t.networkType})),this.platform.onError((function(t){var n=new Date,o="userId:"+r.userId+"time:"+n.toDateString()+" "+n.toTimeString()+";"+t.message;e.bi.uploadLogTimely("platform_onError:",o)})),this.platform.getSystemInfo({success:function(e){r.platform=e.platform,r.brand=e.brand,r.snsAppVer=e.version,r.model=e.model,r.system=e.system,r.sdkVersion=e.SDKVersion,r.benchmarkLevel=e.benchmarkLevel},fail:function(e){}});var t=this.platform.getLaunchOptionsSync();this.parseUserFromInfo(t),this.reportUserFrom(t);var n=this.platform.getAccountInfoSync();if(n){var a=n.miniProgram;if(a){s.gameAppId=a.appId;var p=a.envVersion||"release";s.gameEnvVersion=p,"release"==p&&(s.gameVersion=a.version)}}o.getInstance().Init()},l.parseUserFromInfo=function(e){var t=e.scene,n=e.query;r.showScene=t,r.showQuery=n,r.scene_id=t,r.scene_param=n.from||"",r.invite_id=n.inviteCode||0},l.reportUserFrom=function(e){var t=e.scene,n=e.query,o="",i=a.checkLocalUUID()?1:0;if(n&&n.gdt_vid&&n.weixinadinfo){var s="gdt."+n.weixinadinfo;r.scene_param=s,this.bi.clickStat(p.clickStatEventTypeUserFrom,[t,s,i])}else if(n&&n.clue_token){var c=f.base64Encode(JSON.stringify(n));this.logger.warn("clue_token 1:",n,c),r.scene_param=c,this.bi.clickStat(p.clickStatEventTypeUserFrom,[t,c,i])}else if(n&&n.ksChannel&&"kuaishou"===n.ksChannel){var l=f.base64Encode(JSON.stringify(n));r.scene_param=l,this.bi.clickStat(p.clickStatEventTypeUserFrom,[t,l,i])}else if(n&&n.sourceCode)1088===t?this.bi.clickStat(p.clickStatEventTypeUserFrom,[t,n.inviteCode,n.sourceCode,n.imageType,n.entryType,i]):this.bi.clickStat(p.clickStatEventTypeUserFrom,[t,n.inviteCode,n.sourceCode,n.imageType,"CardActive",i,n.template_type,n.fun_type]);else if(a.isSceneApplicationCode(t))n.hasOwnProperty("scene")?o=n.scene:e.hasOwnProperty("path")&&(o=e.path),o.replace(".html",""),o=decodeURIComponent(o),r.scene_param=o,this.bi.clickStat(p.clickStatEventTypeUserFrom,[t,o,i]);else{var u=e.referrerInfo;if(u&&"wxd0e404d795ea6f80"===u.appId){var h="hlddz";r.scene_param=h,this.bi.clickStat(p.clickStatEventTypeUserFrom,[t,h,i])}else this.bi.clickStat(p.clickStatEventTypeUserFrom,[t,n.from,i])}},l.navigateToMiniProgram=function(e,t,n,o,r){var i=this;return new Promise((function(n,o){i.platform.navigateToMiniProgram({appId:e,path:t||"?from=elsfkpt",envVersion:"release",extraData:{from:t||"?from=elsfkpt"},success:function(e){n(e)},fail:function(e){o()},complete:function(e){}})}))},l.sendMsg=function(e){this.platform.postMessage(e)},l.setCloudStorage=function(e){var t=this;this.platform.setUserCloudStorage({KVDataList:e,success:function(e){t.logger.log("--success to setCloudStorage:",e)},fail:function(e){t.logger.log("--fail to setCloudStorage:",e)}})},l.getUserSettings=function(){var e=this;this.platform.getSetting({success:function(t){e.settings={userInfo:t.authSetting["scope.userInfo"],userLocation:t.authSetting["scope.userLocation"],WxFriendInteraction:t.authSetting["scope.WxFriendInteraction"]}},fail:function(e){console.log(e+"查询是否授权失败")}})},l.aggreePrivacy=function(){var e=this;return new Promise((function(t,n){try{if(!e.platform.requirePrivacyAuthorize)return void n();e.platform.requirePrivacyAuthorize({success:function(e){t(!0)},fail:function(){n()},complete:function(){}})}catch(e){n()}}))},l.reportABEvent=function(t,n){e.prototype.reportABEvent.call(this,t,n),"function"==typeof this.platform.reportEvent?this.platform.reportEvent(t,{expt_data:n}):console.error("不支持上报 reportEvent")},l.getABExpGroup=function(e){return"function"==typeof this.platform.getExptInfoSync?this.platform.getExptInfoSync(e)[e]||0:(console.error("不支持获取分组 getExptInfoSync"),console.error("未找到实验组：",e),0)},n}(l));n._RF.pop()}}}));

System.register("chunks:///_virtual/WechatGa.ts",["./rollupPluginModLoBabelHelpers.js","cc","./FlagData.ts","./SdkBiManager.ts","./SdkConfig.ts","./HttpBase.ts","./GaBase.ts"],(function(t){var e,r,a,i,n,o,s;return{setters:[function(t){e=t.inheritsLoose},function(t){r=t.cclegacy},function(t){a=t.FlagData},function(t){i=t.SdkBiManager},function(t){n=t.SystemInfo},function(t){o=t.emContentType},function(t){s=t.GaBase}],execute:function(){r._RF.push({},"ddc3aeEs85PcrvaDtj2KN1C","WechatGa",void 0);t("WechatGa",function(t){function r(){return t.apply(this,arguments)||this}e(r,t);var s=r.prototype;return s.trackCrossAd=function(t,e,r){e.state=r,this.track(t,e)},s.getGaSysConfig=function(){return null},s.uploadLogTimely=function(t){this.checkIsNetWork()||this.logger.error("BiLog","net error!")},s.uploadClickStatLogTimely=function(t){var e=this;if(this.checkIsNetWork()){var r=n.biLogServer;this.http.post(r,t,o.TEXT_PLAIN).then((function(a){e.logger.log(e.tag+r," uploadLogTimely 上报成功："+t,a)})).catch((function(a){e.logger.log(e.tag+r,"uploadLogTimely 上报失败："+t,a)}))}else this.logger.error("BiLog","net error!")},s.clickStat=function(t,e){var r=[];if((e=e||[]).length<10)for(var a=0;a<9;a++)a<e.length?r.push(e[a]):r.push(0);else r=e;var i=this.assemblelog(t,r);this.uploadClickStatLogTimely(i+"\n")},s.track=function(t,e){void 0===e&&(e=null),i.getInstance().track(t,e)},s.trackAdEvent=function(t,e,r,i,n,o){var s=i;null!=n&&null!=n||(n=0),o=o||"";try{if("number"==typeof i?s=i.toString():i&&i.errMsg&&(s="number"==typeof i.errData?i.errData.toString():i.errMsg),"af_ad_interstitial"==t){var c=a.inst.recordTimes("af_ad_interstitial_"+r);this.track(t,{adscene:t,adunitid:e,adstate:r,aderrcode:s,adcode:n,errpfinfo:o,ad_status:r,times:c})}else this.track("ad_reward",{adscene:t,adunitid:e,adstate:r,aderrcode:s,adcode:n,errpfinfo:o})}catch(i){if(i){try{i.toString()}catch(t){}if(console.error(i),"af_ad_interstitial"==t){var d=a.inst.recordTimes("af_ad_interstitial_"+r);this.track(t,{adscene:t,adunitid:e,adstate:r,aderrcode:"track_error",adcode:n,errpfinfo:o,ad_status:r,times:d})}else this.track("ad_reward",{adscene:t,adunitid:e,adstate:r,aderrcode:"track_error",adcode:n,errpfinfo:o})}}},r}(s));r._RF.pop()}}}));

System.register("chunks:///_virtual/WechatHttp.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SdkError.ts","./HttpBase.ts"],(function(t){var r,e,n,o;return{setters:[function(t){r=t.inheritsLoose},function(t){e=t.cclegacy},function(t){n=t.emSdkErrorCode},function(t){o=t.HttpBase}],execute:function(){e._RF.push({},"c159csFNFhDf5LSMn7X7THS","WechatHttp",void 0);t("WechatHttp",function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var o=e.prototype;return o.post=function(t,r,e){var o=this;return new Promise((function(a,s){var u=o.getPostRequestInit(t,r,e);o.platform.request({url:t,header:{"content-type":u.contentType},data:u.body,method:"POST",dataType:"json",success:function(t){a(t)},fail:function(a){var u="url:"+t+" data: "+r+" contentType:"+e;o.logger.error("http post error:",u),s({errMsg:n.Net_Post_Req_Error,errData:a})}})}))},o.get=function(t,r){var e=this;return new Promise((function(o,a){var s=r||{};e.platform.request({url:t,data:s,method:"GET",success:function(t){o(t.data)},fail:function(o){var s="url:"+t+" data: "+r;e.logger.error("http get error:",s),a({errMsg:n.Net_Get_Req_Error,errData:o})}})}))},e}(o));e._RF.pop()}}}));

System.register("chunks:///_virtual/WechatMiniAd.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SdkError.ts","./TimerRecord.ts","./AdBase.ts","./AdDef.ts"],(function(r){var e,t,o,n,d,i,a,s;return{setters:[function(r){e=r.inheritsLoose},function(r){t=r.cclegacy},function(r){o=r.emSdkErrorCode},function(r){n=r.SdkTimerRecord,d=r.emTimerRecordKeys},function(r){i=r.AdBase},function(r){a=r.emAdPlacement,s=r.emVideoState}],execute:function(){t._RF.push({},"f379bi8uDJFoJizkg8I7TgI","WechatMiniAd",void 0);r("WechatMiniAd",function(r){function t(){for(var e,t=arguments.length,o=new Array(t),n=0;n<t;n++)o[n]=arguments[n];return(e=r.call.apply(r,[this].concat(o))||this).canShowBanner=!0,e.canShowCustom=!0,e}e(t,r);var i=t.prototype;return i.loadBannerAd=function(r,e,t){var n=this;return void 0===t&&(t=a.BOTTOM),new Promise((function(r,d){var i=n.platform.getSystemInfoSync(),s=i.screenWidth,A=i.screenHeight,c=n.native.isIpx()||n.native.is2To1(),l=n.native.isPad();n.bannerAd&&(console.error("重复加载和创建banner"),n.bannerAd.offError(),n.bannerAd.offResize(),n.bannerAd.destroy()),n.bannerAd=n.platform.createBannerAd({adUnitId:e,adIntervals:30,style:{left:0,top:0,width:c?.7*s:l?.6*s:.75*s}}),n.bannerAd.onLoad((function(){n.bannerAd&&(n.bannerAd.offLoad(),n.bannerAd.hide(),r(!0))})),n.bannerAd.onResize((function(r){if(n.bannerAd){switch(t){case a.TOP:n.bannerAd.style.top=0;break;case a.MIDDLE:n.bannerAd.style.top=(s-r.height)/2;break;case a.BOTTOM:var e=A-r.height;n.bannerAd.style.left=(s-r.width)/2,n.bannerAd.style.top=e}n.bannerAd.style.left=(s-r.width)/2}})),n.bannerAd.onError((function(r){n.logger.error("获取banner广告失败",r),d({errMsg:o.Sdk_Ad_On_Error,errData:r}),n.bannerAd=null}))}))},i.showBannerAd=function(r,e){var t=this;return new Promise((function(r,n){null!=t.bannerAd&&(e?(t.canShowBanner=!0,t.isShowingBanner?(t.logger.error("重复展示banner",""),n({errMsg:o.Sdk_Ad_Show_Repeat_Error,errData:""})):t.bannerAd.show().then((function(){if(t.canShowBanner)t.isShowingBanner=!0,r(!0);else{t.logger.error("bannerAd显示失败","广告延迟导致显示发生在上次隐藏之后");var e=t;setTimeout((function(){e.isShowingBanner=!1,e.bannerAd&&e.bannerAd.hide()}),10),r(!0)}})).catch((function(r){t.isShowingBanner=!1,t.logger.error("bannerAd显示失败",r),n({errMsg:o.Sdk_Ad_Show_Error,errData:r})}))):(t.canShowBanner=!1,t.bannerAd&&(t.bannerAd.offError(),t.bannerAd.offResize(),t.bannerAd.destroy(),console.log("隐藏改为销毁banner"),t.bannerAd=null,t.isShowingBanner=!1)))}))},i.loadRewardedVideoAd=function(r,e){var t=this;return new Promise((function(r,n){t.rewardedVideoAd=t.platform.createRewardedVideoAd({adUnitId:e}),t.rewardedVideoAd.onError((function(r){r&&(t.isPlayVideoAd=!1,t.logger.error("loadRewardedVideoAd:",r),n({errMsg:o.Sdk_Ad_On_Error,errData:r,errCode:r.errCode,errInfo:r.errMsg})),t.rewardedVideoAd&&(t.rewardedVideoAd.offError(),t.rewardedVideoAd.destroy()),t.rewardedVideoAd=null})),t.rewardedVideoAd.load().then((function(e){r(!0)})).catch((function(r){t.isPlayVideoAd=!1,t.logger.error("loadRewardedVideoAd:",r),n({errMsg:o.Sdk_Ad_Load_Error,errData:r,errCode:r.errCode,errInfo:r.errMsg})}))}))},i.showRewardedVideoAd=function(r,e){var t=this;return new Promise((function(n,d){if(t.rewardedVideoAd){if(1==t.isPlayVideoAd)return t.logger.error("showRewardedVideoAd:","同时多次拉取"),void d({errMsg:o.Sdk_Ad_Show_Repeat_Error,errData:""});t.isPlayVideoAd=!0,t.rewardedVideoAd.onClose((function(r){t.isPlayVideoAd=!1,r&&r.isEnded||void 0===r?n(!0):(t.logger.error("showRewardedVideoAd:","主动关闭广告，不发奖"),d({errMsg:o.Sdk_Ad_Close_Reward,errData:""})),t.rewardedVideoAd&&t.rewardedVideoAd.offClose()})),t.rewardedVideoAd.show().then((function(){t.bi.trackAdEvent(r,e,s.ShowSuccess,0)})).catch((function(n){t.isPlayVideoAd=!1,t.logger.error("showRewardedVideoAd:",n),t.bi.trackAdEvent(r,e,s.NoAd,0),d({errMsg:o.Sdk_Ad_Show_Error,errData:n})}))}else t.loadRewardedVideoAd(r,e).then((function(){t.showRewardedVideoAd(r,e).then(n).catch(d)})).catch((function(){t.logger.error("showRewardedVideoAd:","广告实例化对象不可用"),d({errMsg:o.Sdk_Ad_Not_Instantiate,errData:"广告实例化对象不可用"})}))}))},i.loadInterstitialAd=function(r,e){var t=this;return new Promise((function(r,n){t.interstitialAd=t.platform.createInterstitialAd({adUnitId:e}),t.interstitialAd.onError((function(r){t.logger.error("loadInterstitialAd",r),n({errMsg:o.Sdk_Ad_On_Error,errData:r,errCode:r.errCode}),t.interstitialAd&&t.interstitialAd.offError(),t.interstitialAd=null})),t.interstitialAd.load().then((function(){r(!0)})).catch((function(r){t.logger.error("loadInterstitialAd",r),t.bi.trackAdEvent("af_ad_interstitial",e,4,r.errCode),n({errMsg:o.Sdk_Ad_Load_Error,errData:r,errCode:r.errCode})}))}))},i.showInterstitialAd=function(r){var e=this;return new Promise((function(r,t){e.interstitialAd?(e.interstitialAd.onClose((function(t){n.getInstance().start(d.Show_Insert_Ad),e.interstitialAd&&e.interstitialAd.offClose(),e.bi.trackAdEvent("af_ad_interstitial","",2,0),r(!0)})),e.interstitialAd.show().then((function(){e.bi.trackAdEvent("af_ad_interstitial","",1,0)})).catch((function(r){e.logger.error("showInterstitialAd",r),e.bi.trackAdEvent("af_ad_interstitial","",4,r.errCode),t({errMsg:o.Sdk_Ad_Show_Error,errData:r})}))):(e.logger.error("showInterstitialAd:interstitialAd","广告实例化对象不可用"),t({errMsg:o.Sdk_Ad_Not_Instantiate,errData:"广告实例化对象不可用"}))}))},i.loadCustomAd=function(r,e){var t=this;return new Promise((function(r,n){var d=t.platform.getSystemInfoSync(),i=d.windowWidth,a=d.windowHeight;t.customAd=t.platform.createCustomAd({adUnitId:e,style:{left:Math.floor(.5*i)-144,top:a-80}}),t.customAd.onLoad((function(){t.customAd&&(t.customAd.offLoad(),r(!0))})),t.customAd.onError((function(r){t.customAd&&t.customAd.offError(),t.customAd=null,t.logger.error("loadCustomAd:",r),n({errMsg:o.Sdk_Ad_Load_Error,errData:r,errCode:r.errCode})})),t.customAd.onHide((function(){t.customAd&&t.customAd.offHide()}))}))},i.isCustomAdShow=function(){if(this.customAd)return this.customAd.isShow()},i.showCustomAd=function(r,e){var t=this;return new Promise((function(r,n){if(t.customAd)e?(t.canShowCustom=!0,t.isCustomAdShow()?r(!0):t.customAd.show().then((function(){t.canShowCustom?r(!0):(t.logger.error("模板显示失败","广告延迟导致显示发生在上次隐藏之后"),n({errMsg:o.Sdk_Ad_Show_Error,errData:"广告延迟导致显示发生在上次隐藏之后"}))})).catch((function(r){t.logger.error("showCustomAd:",r),n({errMsg:o.Sdk_Ad_Show_Error,errData:r})}))):(t.canShowCustom=!1,t.customAd&&t.customAd.destroy(),t.customAd=null,r(!0));else{if(!e)return void r(!0);t.logger.error("showCustomAd:customAd","广告实例化对象不可用"),n({errMsg:o.Sdk_Ad_Not_Instantiate,errData:"广告实例化对象不可用"})}}))},i.destroy=function(){null!=this.bannerAd&&(this.bannerAd.destroy(),this.bannerAd=null),null!=this.rewardedVideoAd&&(this.rewardedVideoAd.destroy(),this.rewardedVideoAd=null),null!=this.interstitialAd&&(this.interstitialAd.destroy(),this.interstitialAd=null),null!=this.customAd&&(this.customAd.destroy(),this.customAd=null)},t}(i));t._RF.pop()}}}));

System.register("chunks:///_virtual/WechatMiniApi.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Singleton.ts","./SocialDef.ts","./MK.ts","./SdkUtil.ts","./SdkBiManager.ts","./Boot.ts","./BIDefine.ts","./sdk.ts"],(function(e){var t,a,n,i,r,s,o,c,h,u,l,f;return{setters:[function(e){t=e.inheritsLoose,a=e.assertThisInitialized},function(e){n=e.cclegacy,i=e.sys},function(e){r=e.Singleton},function(e){s=e.emShareType,o=e.emSharePath,c=e.ShareConfig},null,function(e){h=e.SdkUtil},function(e){u=e.SdkBiManager},null,function(e){l=e.BIEventID},function(e){f=e.SDK}],execute:function(){n._RF.push({},"8f06dVWzFlLX6NvkWnqlmPX","WechatMiniApi",void 0);e("WechatMiniApi",function(e){t(r,e);var n=r.prototype;function r(){var t;return(t=e.call(this)||this).wx=window.wx,t.curShareParam=null,t.isWechatGame()?(t.wx.onShareAppMessage((function(){f.instance.reportBI(l.share_click,{share_type:o.default});var e=c[99999];return{title:e.tittle,imageUrl:e.imageUrl}})),t.wx.showShareMenu({withShareTicket:!0}),t.wx.onShow((function(e){var a=t.wx.getLaunchOptionsSync();(null!=a.shareTicket&&""!=a.shareTicket&&t.wx.getShareInfo({shareTicket:a.shareTicket,timeout:5e3,success:function(e){},fail:function(){}}),console.log("微信唤醒：",a),t.curShareParam)&&(Date.now()-t.curShareParam.startTime>1500?(console.log("分享成功",a),t.curShareParam.success&&t.curShareParam.success.call(t.curShareParam.target,!0)):(console.log("分享失败 1",a),t.curShareParam.fail&&t.curShareParam.fail.call(t.curShareParam.target,!1)),t.curShareParam=null);var n=a.scene;if(1007==n||1008==n||1036==n||1044==n||1096==n){var i=a.query;i&&u.getInstance().trackShareWakeUpEvent({shareId:i.shareId,sharePath:i.sharePath,openId:i.openId,time:i.time,shareUid:i.shareUid})}})),t):a(t)}return n.Init=function(){},n.UnInit=function(){},n.getLaunchOptionsSync=function(){return this.wx.getLaunchOptionsSync()},n.shakeShort=function(){this.isWechatGame()&&this.wx.vibrateShort()},n.shakeLong=function(){this.isWechatGame()&&this.wx.vibrateLong()},n.isWechatGame=function(){return!0},n.isSupportShare=function(){return!0},n.isIOS=function(){var e=this.getSystemInfo();if(e&&e.system&&e.system.toLowerCase().indexOf("ios")>-1)return!0;return!1},n.deviceId=function(){var e=i.localStorage.getItem("k_deviceId");return e||(e=h.generateUUID(),i.localStorage.setItem("k_deviceId",e)),e},n.doShare=function(e,t,a){var n=this,i=c[e];if(null!=i){f.instance.reportBI(l.share_click,{share_type:t});var r=this.deviceId(),s=h.generateUUID(),o=Date.now(),g="shareId="+e+"&openId="+r+"&time="+o+"&sharePath="+t+"&shareUid="+s;this.wx.shareAppMessage({title:a&&a.content?a.content:i.tittle,imageUrl:i.imageUrl,query:g,imageUrlId:i.imageUrlId,success:function(e){n.curShareParam?Date.now()-n.curShareParam.startTime>3e3?n.curShareParam.success&&n.curShareParam.success.call(n.curShareParam.target,!0):n.curShareParam.fail&&n.curShareParam.fail.call(n.curShareParam.target,!1):n.curShareParam.fail&&n.curShareParam.fail.call(n.curShareParam.target,!1)},fail:function(e){console.log("分享失败",e)}}),u.getInstance().trackShareEvent({shareId:e,sharePath:t,openId:r,time:o,shareUid:s})}else console.error("未配置的分享id:"+e)},n.showShare=function(e,t,a,n,i,r){void 0===i&&(i=null),void 0===r&&(r=null),this.isWechatGame()?(this.curShareParam||(this.curShareParam={startTime:Date.now(),success:n,fail:r,shareCount:1,target:a}),this.doShare(e,t,i)):n&&n()},n.showShareHapppy=function(e){var t=s.s_66666,a=this.deviceId(),n=h.generateUUID(),i=Date.now(),r="shareId="+s.s_66666+"&openId="+a+"&time="+i+"&sharePath="+e+"&shareUid="+n,o=(canvas.toTempFilePathSync({x:0,y:0,fileType:"jpg",quality:1}),["宁神静气,就等你来","称心如意,块从人愿","轻轻一摆,烦恼全消"]),c=h.getRandomIntInclusive(0,o.length-1),l=o[c%=o.length];this.wx.onShareTimeline((function(){return{title:l,imageUrl:"https://waxiaoqn.nalrer.cn/waxiao/share/share_icon.png",query:r}})),this.wx.shareAppMessage({title:l,imageUrl:"https://waxiaoqn.nalrer.cn/waxiao/share/share_icon.png",query:r,success:function(e){},fail:function(e){console.log("分享失败",e)}}),u.getInstance().trackShareEvent({shareId:t,sharePath:e,openId:a,time:i,shareUid:n})},n.getSystemInfo=function(){return null==window.systemInfo&&(window.systemInfo=this.wx.getSystemInfoSync()),window.systemInfo},n.showLoading=function(){this.isWechatGame()&&this.wx.showLoading({tittle:"",mask:!0,success:function(){},fail:function(){}})},n.hideLoading=function(){this.isWechatGame()?this.wx.hideLoading():this.hideLoading()},n.isCanUseSdkVersion=function(e){return!0},n.checkAuthInfo=function(e,t){var a=this;try{this.wx.getSetting({success:function(n){0==n.authSetting["scope.userInfo"]?e&&e.call(t,!1):(a.wx.getUserInfo({openIdList:["selfOpenId"],lang:"zh_CN",withCredentials:!0,success:function(e){console.log("授权成功：",e)},fail:function(e){console.log("授权失败：",e)}}),e&&e.call(t,!0))}})}catch(a){e&&e.call(t,!1)}},n.createAuthorizeBtnByNode=function(e,t,a,n){},n.createAuthorizeBtn=function(e,t,a,n,i,r){},n.checkUpdate=function(e,t){var a=this.wx.getUpdateManager();a.onCheckForUpdate((function(t){console.log("wx.getUpdateManager:",t),t.hasUpdate||e&&e()}));var n=this;a.onUpdateReady((function(){n.wx.showModal({title:"更新提示",content:"新版本已经准备好，是否重启应用？",success:function(t){t.confirm?a.applyUpdate():t.cancel&&e&&e()}})})),a.onUpdateFailed((function(){e&&e()}))},n.navigateToMiniProgram=function(e,t,a,n,i,r){this.wx.navigateToMiniProgram({appId:e,envVersion:n,success:function(e){console.log("跳转成功：",e.errMsg),i&&i(!0)},fail:function(e){r&&r(e.errCode,e.errMsg)}})},n.showToast=function(e){this.wx?this.wx.showToast({title:e,icon:"none"}):console.log(e)},n.showDeviceInfo=function(){return this.wx,0},r}(r));n._RF.pop()}}}));

System.register("chunks:///_virtual/WechatNative.ts",["./rollupPluginModLoBabelHelpers.js","cc","./NativeBase.ts"],(function(t){var i,o,n;return{setters:[function(t){i=t.inheritsLoose},function(t){o=t.cclegacy},function(t){n=t.NativeBase}],execute:function(){o._RF.push({},"7e65f4rbqJIAbwmeLrR1O0t","WechatNative",void 0);t("WechatNative",function(t){function o(){return t.apply(this,arguments)||this}i(o,t);var n=o.prototype;return n.showToast=function(i,o){void 0===o&&(o=3e3),t.prototype.showToast.call(this,i,o),this.platform.showToast({title:i,icon:"none",duration:o})},n.hideToast=function(){t.prototype.hideToast.call(this),this.platform.hideToast()},n.showLoading=function(t){this.platform.showLoading({title:t})},n.hideLoading=function(){this.platform.hideLoading()},n.isIpx=function(){if(!this.platform)return!1;var t=this.platform.getSystemInfoSync();return t.model.indexOf("iPhone X")>=0||t.system.indexOf("iOS")>=0&&t.windowHeight/t.windowWidth>1.9},n.is2To1=function(){if(!this.platform)return!1;var t=this.platform.getSystemInfoSync();return t.windowHeight/t.windowWidth>1.9},n.isPad=function(){var t=this.platform.getSystemInfoSync();return t.windowHeight/t.windowWidth<1.777},n.vibrateShort=function(t){var i=this;return new Promise((function(o,n){"function"==typeof i.platform.vibrateShort?i.platform.vibrateShort({type:t}).then(o).catch(n):(console.log("当前环境不支持 wx.vibrateShort"),n())}))},o}(n));o._RF.pop()}}}));

System.register("chunks:///_virtual/X.ts",["cc"],(function(){var n,r;return{setters:[function(o){n=o.cclegacy,r=o.director}],execute:function(){var o;n._RF.push({},"4081dT672RKUpFxcExkN57+","X",void 0),function(n){function o(n){var r=[];if(null!=n)for(var o=0;o<n.length;o++){var e=n[o];null===e?r.push("NULL"):void 0===e?r.push("UNDEFINED"):r.push(e.toString())}return r.join(" ")}function e(n,r){var e=console[n];e&&(a.DEBUG_ADVANCED?e.apply(null,r):e.call(null,o(r)))}function l(){if(a.DEBUG_ADVANCED){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];console.group.apply(null,r)}}function t(){if(a.DEBUG_ADVANCED){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];console.groupCollapsed.apply(null,r)}}function i(){a.DEBUG_ADVANCED&&console.groupEnd()}n.log=function(){if(a.DEBUG){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];e("log",r)}},n.info=function(){if(a.DEBUG){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];e("info",r)}},n.warn=function(){if(a.DEBUG){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];e("warn",r)}},n.error=function(){if(a.DEBUG){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];e("error",r)}},n.color=function(n){if(a.DEBUG_ADVANCED){for(var r=arguments.length,e=new Array(r>1?r-1:0),l=1;l<r;l++)e[l-1]=arguments[l];var t=o(e);console.log("%c"+t,"color:"+n)}},n.group=l,n.groupCollapsed=t,n.groupEnd=i,n.table=function(){if(a.DEBUG_ADVANCED){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];console.table.apply(null,r)}},n.time=function(){if(a.DEBUG_ADVANCED){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];console.time.apply(null,r)}},n.timeEnd=function(){if(a.DEBUG_ADVANCED){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];console.timeEnd.apply(null,r)}},n.trace=function(){if(a.DEBUG_ADVANCED){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];console.trace.apply(null,r)}},n.treeNodes=function n(o,e){if(void 0===e&&(e=!1),a.DEBUG_ADVANCED&&(o||(o=r.getScene()),o)){e?t(o):l(o);for(var c=0;c<o.children.length;c++){n(o.children[c],e)}i()}},n.findNodeByName=function(n){return function n(r,o){if(r.name===o)return r;for(var e=0;e<r.children.length;e++){var l=n(r.children[e],o);if(l)return l}return null}(r.getScene(),n)},n.clearCacheData=function(){localStorage.clear()};var a=function(){};a.DEBUG_ADVANCED=!0,a.DEBUG=!0,n.XEnv=a,n.OpenLevelFinishedAll=function(){}}(o||(o={})),window.X=o,n._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});