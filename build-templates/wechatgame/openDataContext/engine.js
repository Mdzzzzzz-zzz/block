/*
 * @Date: 2024-06-28 10:17:53
 * @LastEditors: zhaozhenguo zhaozhenguo@tuyoogame.com
 * @LastEditTime: 2024-06-28 18:40:13
 */
(()=>{var t=[,(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>s}),"undefined"!=typeof GameGlobal&&(GameGlobal.__env=GameGlobal.wx||GameGlobal.tt||GameGlobal.swan);var o,n={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",touchcancel:"mouseleave"};function r(t,e){return"undefined"!=typeof GameGlobal?GameGlobal.__env["".concat(e).concat(t)]:function(t,e){if("undefined"!=typeof document)return function(i){e===o.on?document.addEventListener(t,i,!1):document.removeEventListener(t,i,!1)}}(n[t.toLowerCase()],e)}!function(t){t.on="on",t.off="off"}(o||(o={}));const s={onTouchStart:r("TouchStart",o.on),onTouchMove:r("TouchMove",o.on),onTouchEnd:r("TouchEnd",o.on),onTouchCancel:r("TouchCancel",o.on),offTouchStart:r("TouchStart",o.off),offTouchMove:r("TouchMove",o.off),offTouchEnd:r("TouchEnd",o.off),offTouchCancel:r("TouchCancel",o.off),getRootCanvasSize:function(){if("undefined"!=typeof __env&&__env.getSharedCanvas){var t=__env.getSharedCanvas();return{width:t.width,height:t.height}}return{width:300,height:150}},getDevicePixelRatio:function(){return"undefined"!=typeof __env&&__env.getSystemInfoSync?__env.getSystemInfoSync().devicePixelRatio:window.devicePixelRatio?window.devicePixelRatio:1},createCanvas:function(){return"undefined"!=typeof __env?__env.createCanvas():document.createElement("canvas")},createImage:function(){return"undefined"!=typeof __env?__env.createImage():document.createElement("img")}}},(t,e,i)=>{"use strict";i.r(e),i.d(e,{StyleOpType:()=>p,default:()=>m,getElementById:()=>u,getElementsByClassName:()=>d,getElementsById:()=>h,setDirty:()=>f});var o=i(3),n=i(4),r=i(5),s=i(8),a=i.n(s),l=i(9),c=function(t,e,i){if(i||2===arguments.length)for(var o,n=0,r=e.length;n<r;n++)!o&&n in e||(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))};function h(t,e,i){return void 0===e&&(e=[]),t.children.forEach((function(t){t.idName===i&&e.push(t),t.children.length&&h(t,e,i)})),e}function u(t,e){var i=h(t,[],e);return(null==i?void 0:i[0])||null}function d(t,e,i){return void 0===e&&(e=[]),t.children.forEach((function(t){(t.classNameList||t.className.split(/\s+/)).indexOf(i)>-1&&e.push(t),t.children.length&&d(t,e,i)})),e}function f(t,e){t.isDirty=!0;for(var i=t.parent;i;)i.isDirty=!0,i=i.parent}var p,y=new(a()),v=0,g=function(t,e){return["click","touchstart","touchmove","touchend","touchcancel"].indexOf(t),"element-".concat(e,"-").concat(t)};!function(t){t[t.Set=0]="Set",t[t.Delete=1]="Delete"}(p||(p={}));const m=function(){function t(t){var e=this,i=t.style,n=void 0===i?{}:i,r=t.idName,s=void 0===r?"":r,a=t.className,l=void 0===a?"":a,c=t.id,h=void 0===c?v+=1:c,u=t.dataset,d=void 0===u?{}:u;this.children=[],this.parent=null,this.root=null,this.isDestroyed=!1,this.ctx=null,this.isDirty=!1,this.shouldUpdate=!1,this.renderForLayout={},this.id=h,this.idName=s,this.className=l,this.layoutBox={left:0,top:0,width:0,height:0,absoluteX:0,absoluteY:0,originalAbsoluteX:0,originalAbsoluteY:0},this.dataset=d,o.renderAffectStyles.forEach((function(t){var i=n[t];void 0!==i&&e.calculateRenderForLayout(!0,t,p.Set,i)})),this.originStyle=n,this.style=n,this.rect=null,this.classNameList=null}return t.prototype.styleChangeHandler=function(t,e,i){},t.prototype.calculateRenderForLayout=function(t,e,i,n){var s,a=this;if(t||this.styleChangeHandler(e,i,n),i===p.Set)switch(e){case"backgroundImage":var c=(0,l.backgroundImageParser)(n);c&&r.default.loadImage(c,(function(t){var e;a.isDestroyed||(a.renderForLayout.backgroundImage=t,null===(e=a.root)||void 0===e||e.emit("repaint"))}));break;case"transform":delete this.renderForLayout.scaleX,delete this.renderForLayout.scaleY,delete this.renderForLayout.rotate,Object.assign(this.renderForLayout,(0,l.parseTransform)(n));break}else switch(e){case"backgroundImage":this.renderForLayout.backgroundImage=void 0;break;case"transform":delete this.renderForLayout.scaleX,delete this.renderForLayout.scaleY,delete this.renderForLayout.rotate;break}t||(o.reflowAffectedStyles.indexOf(e)>-1?f(this):o.repaintAffectedStyles.indexOf(e)>-1&&(null===(s=this.root)||void 0===s||s.emit("repaint")))},t.prototype.observeStyleAndEvent=function(){var t=this;if("function"==typeof Proxy){var e=this;this.style=new Proxy(this.originStyle,{get:function(t,e,i){return Reflect.get(t,e,i)},set:function(t,i,o,n){var r=Reflect.get(t,i,n);return"string"==typeof i&&r!==o&&e.calculateRenderForLayout(!1,i,p.Set,o),Reflect.set(t,i,o,n)},deleteProperty:function(t,i){return e.calculateRenderForLayout(!1,i,p.Delete),Reflect.deleteProperty(t,i)}})}["touchstart","touchmove","touchcancel","touchend","click"].forEach((function(e){t.on(e,(function(i,o){if("touchstart"===e)t.activeHandler(i),t!==t.root&&t.root.activeElements.push(t);else if("touchend"===e||"touchcancel"===e){t.deactiveHandler(i);var n=t.root.activeElements.indexOf(t);n>-1&&t.root.activeElements.splice(n,1)}t.parent&&t.parent.emit(e,i,o)}))})),this.classNameList=this.className.split(/\s+/)},t.prototype.activeHandler=function(t){var e=this.style[":active"];e&&(this.cacheStyle=Object.assign({},this.style),Object.assign(this.style,e))},t.prototype.deactiveHandler=function(t){var e=this,i=this.style[":active"];i&&Object.keys(i).forEach((function(t){e.cacheStyle[t]?e.style[t]=e.cacheStyle[t]:delete e.style[t]}))},t.prototype.repaint=function(){},t.prototype.render=function(){},t.prototype.afterCreate=function(){},t.prototype.getBoundingClientRect=function(){return this.rect||(this.rect=new n.default(this.layoutBox.absoluteX,this.layoutBox.absoluteY,this.layoutBox.width,this.layoutBox.height)),this.rect.set(this.layoutBox.absoluteX,this.layoutBox.absoluteY,this.layoutBox.width,this.layoutBox.height),this.rect},t.prototype.getElementById=function(t){return u(this,t)},t.prototype.getElementsById=function(t){return h(this,[],t)},t.prototype.getElementsByClassName=function(t){return d(this,[],t)},t.prototype.insert=function(t,e){this.shouldUpdate=!1,this.ctx=t,e&&this.render()},t.prototype.unBindEvent=function(){var t=this;["touchstart","touchmove","touchcancel","touchend","click","repaint"].forEach((function(e){t.off(e)}))},t.prototype.remove=function(){var t=this.parent;if(t){var e=t.children.indexOf(this);-1!==e&&(t.children.splice(e,1),this.unBindEvent(),f(this),this.parent=null,this.ctx=null)}},t.prototype.setDirty=function(){f(this)},t.prototype.destroySelf=function(){},t.prototype.destroy=function(){this.unBindEvent(),this.isDestroyed=!0,this.parent=null,this.ctx=null,this.className="",this.classNameList=null},t.prototype.add=function(t){t.parent=this,this.children.push(t)},t.prototype.appendChild=function(t){this.add(t),f(this,"appendChild ".concat(t))},t.prototype.removeChild=function(t){-1!==this.children.indexOf(t)&&(t.remove(),f(this,"removeChild ".concat(t)))},t.prototype.emit=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];y.emit.apply(y,c([g(t,this.id)],e,!1))},t.prototype.on=function(t,e){y.on(g(t,this.id),e)},t.prototype.once=function(t,e){y.once(g(t,this.id),e)},t.prototype.off=function(t,e){y.off(g(t,this.id),e)},t.prototype.renderBorder=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=0);var o=this.style||{},n=o.borderRadius||0,r=o.borderWidth,s=void 0===r?0:r,a=o.borderTopLeftRadius||n,l=o.borderTopRightRadius||n,c=o.borderBottomLeftRadius||n,h=o.borderBottomRightRadius||n,u=this.layoutBox,d=o.borderColor,f=void 0===d?"":d,p=u.absoluteX,y=u.absoluteY,v=u.width,g=u.height,m=n||a||l||c||h;return s||m?(t.lineWidth=s,t.strokeStyle=f,t.beginPath(),t.moveTo(p+a-e,y-i),t.lineTo(p+v-l-e,y-i),t.arcTo(p+v-e,y-i,p+v-e,y+l-i,l),t.lineTo(p+v-e,y+g-h-i),t.arcTo(p+v-e,y+g-i,p+v-h-e,y+g-i,h),t.lineTo(p+c-e,y+g-i),t.arcTo(p-e,y+g-i,p-e,y+g-c-i,c),t.lineTo(p-e,y+a-i),t.arcTo(p-e,y-i,p+a-e,y-i,a),t.closePath(),{needClip:!!m,needStroke:!!s}):{needClip:!1,needStroke:!1}},t.prototype.baseRender=function(t){var e=this.ctx,i=this.style,o=this.layoutBox,n=o.absoluteX,r=o.absoluteY,s=o.width,a=o.height;void 0!==i.opacity&&(e.globalAlpha=i.opacity);var l=0,c=0;void 0===this.renderForLayout.rotate&&void 0===this.renderForLayout.scaleX&&void 0===this.renderForLayout.scaleY||(l=n+o.width/2,c=r+o.height/2,e.translate(l,c)),void 0!==this.renderForLayout.rotate&&e.rotate(this.renderForLayout.rotate),void 0===this.renderForLayout.scaleX&&void 0===this.renderForLayout.scaleY||e.scale(void 0!==this.renderForLayout.scaleX?this.renderForLayout.scaleX:1,void 0!==this.renderForLayout.scaleY?this.renderForLayout.scaleY:1),i.borderColor&&(e.strokeStyle=i.borderColor),e.lineWidth=i.borderWidth||0;var h=this.renderBorder(e,l,c),u=h.needClip,d=h.needStroke;return u&&e.clip(),i.backgroundColor&&(e.fillStyle=i.backgroundColor,e.fillRect(n-l,r-c,o.width,o.height)),this.renderForLayout.backgroundImage&&e.drawImage(this.renderForLayout.backgroundImage,n-l,r-c,o.width,o.height),{needStroke:d,needClip:u,originX:l,originY:c,drawX:n,drawY:r,width:s,height:a}},t}()},(t,e,i)=>{"use strict";i.r(e),i.d(e,{reflowAffectedStyles:()=>o,renderAffectStyles:()=>r,repaintAffectedStyles:()=>n});var o=["width","height","minWidth","minHeight","maxWidth","maxHeight","left","right","top","bottom","margin","marginLeft","marginRight","marginTop","marginBottom","padding","paddingLeft","paddingRight","paddingTop","paddingBottom","borderWidth","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth","flexDirection","flexShrink","flexGrow","justifyContent","alignItems","alignSelf","flex","flexWrap","position","fontWeight"],n=["fontSize","lineHeight","textAlign","verticalAlign","color","backgroundColor","textOverflow","letterSpacing","borderRadius","borderColor","opacity","transform","textStrokeColor","textStrokeWidth","textShadow"],r=["textShadow","transform","backgroundImage"]},(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>o});const o=function(){function t(t,e,i,o){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===o&&(o=0),this.width=0,this.height=0,this.left=0,this.right=0,this.top=0,this.bottom=0,this.set(t,e,i,o)}return t.prototype.set=function(t,e,i,o){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===o&&(o=0),this.left=t,this.top=e,this.width=i,this.height=o,this.right=this.left+this.width,this.bottom=this.top+this.height},t.prototype.intersects=function(t){return!(this.right<t.left||t.right<this.left||this.bottom<t.top||t.bottom<this.top)},t}()},(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>s});var o=i(6),n=i(7),r=i(1);const s=new(function(){function t(){this.imgPool=new o.default("imgPool")}return t.prototype.getRes=function(t){return this.imgPool.get(t)},t.prototype.loadImagePromise=function(t){var e=this;return new Promise((function(i,o){e.loadImage(t,i,o)}))},t.prototype.loadImage=function(t,e,i){if(void 0===e&&(e=n.none),void 0===i&&(i=n.none),!t)return null;var o,s=this.getRes(t);if(s&&s.loadDone)e(o=s.img,!0);else if(s&&!s.loadDone)o=s.img,s.onloadcbks.push(e),s.onerrorcbks.push(i);else{var a={img:o=r.default.createImage(),loadDone:!1,onloadcbks:[e],onerrorcbks:[i]};this.imgPool.set(t,a),o.onload=function(){a.loadDone=!0,a.onloadcbks.forEach((function(t){return t(o,!1)})),a.onloadcbks=[],a.onerrorcbks=[]},o.onerror=function(){a.onerrorcbks.forEach((function(t){return t(o,!1)})),a.onerrorcbks=[],a.onloadcbks=[]},o.src=t}return o},t}())},(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>n});var o=[];const n=function(){function t(t){void 0===t&&(t="pool"),this.name="pool",this.pool={};var e=o.find((function(e){return e.name===t}));if(e)return e;this.name=t,this.pool={},o.push(this)}return t.prototype.get=function(t){return this.pool[t]},t.prototype.set=function(t,e){this.pool[t]=e},t.prototype.clear=function(){this.pool={}},t.prototype.getList=function(){return Object.values(this.pool)},t}()},(t,e,i)=>{"use strict";function o(){}function n(t){var e=t.touchstart,i=t.touchend;if(!(e&&i&&e.timeStamp&&i.timeStamp&&void 0!==e.pageX&&void 0!==e.pageY&&void 0!==i.pageX&&void 0!==i.pageY))return!1;var o=e.pageX,n=e.pageY,r=i.pageX,s=i.pageY,a=i.timeStamp-e.timeStamp;return!!(Math.abs(s-n)<30&&Math.abs(r-o)<30&&a<300)}var r;function s(t){t&&t.clearRect(0,0,t.canvas.width,t.canvas.height);}function a(t){return t.map((function(t){return{identifier:t.identifier,pageX:t.pageX,pageY:t.pageY,clientX:t.clientX,clientY:t.clientY}}))}function l(t){return"touches"in t}function c(t,e,i){return Math.max(e,Math.min(t,i))}function h(t,e,i){return t+(e-t)*i}i.r(e),i.d(e,{STATE:()=>r,clamp:()=>c,clearCanvas:()=>s,copyTouchArray:()=>a,isClick:()=>n,isGameTouchEvent:()=>l,lerp:()=>h,none:()=>o}),function(t){t.UNINIT="UNINIT",t.INITED="INITED",t.RENDERED="RENDERED",t.CLEAR="CLEAR"}(r||(r={}))},t=>{function e(){}e.prototype={on:function(t,e,i){var o=this.e||(this.e={});return(o[t]||(o[t]=[])).push({fn:e,ctx:i}),this},once:function(t,e,i){var o=this;function n(){o.off(t,n),e.apply(i,arguments)}return n._=e,this.on(t,n,i)},emit:function(t){for(var e=[].slice.call(arguments,1),i=((this.e||(this.e={}))[t]||[]).slice(),o=0,n=i.length;o<n;o++)i[o].fn.apply(i[o].ctx,e);return this},off:function(t,e){var i=this.e||(this.e={}),o=i[t],n=[];if(o&&e)for(var r=0,s=o.length;r<s;r++)o[r].fn!==e&&o[r].fn._!==e&&n.push(o[r]);return n.length?i[t]=n:delete i[t],this}},t.exports=e,t.exports.TinyEmitter=e},(t,e,i)=>{"use strict";i.r(e),i.d(e,{backgroundImageParser:()=>n,isValidTextShadow:()=>s,parseTransform:()=>c});var o=/\s*url\((.*?)\)\s*/;function n(t){if("string"==typeof t){var e=t.match(o);if(e)return e[1].replace(/('|")/g,"")}return null}var r=/^(\d+px\s){2}\d+px\s(?:[a-zA-Z]+|#[0-9a-fA-F]{3,6})(,\s*(\d+px\s){2}\d+px\s(?:[a-zA-Z]+|#[0-9a-fA-F]{3,6}))*$/;function s(t){return r.test(t)}function a(t){return/^(-?\d+(\.\d+)?)(deg)?(,\s*(-?\d+(\.\d+)?)(deg)?)*$/.test(t)}var l=/(\w+)\(([^)]+)\)/g;function c(t){for(var e,i={};e=l.exec(t);){var o=e[1],n=e[2];if(!a(n))throw new Error("[Layout]: invalid value for ".concat(o,": ").concat(n));var r=n.split(",").map((function(t){return t.trim().replace("deg","")})).map(Number);switch(o){case"rotate":i.rotate=r[0]*Math.PI/180;break;case"scale":i.scaleX=r[0],i.scaleY=r[1]||r[0];break;default:break}}return i}},function(t,e){var i,o,n;o=[],void 0===(n="function"==typeof(i=function(){var e=function(){var t,e="inherit",i="ltr",o="rtl",n="row",r="row-reverse",s="column",a="column-reverse",l="flex-start",c="center",h="flex-end",u="space-between",d="space-around",f="flex-start",p="center",y="flex-end",v="stretch",g="relative",m="absolute",_={row:"left","row-reverse":"right",column:"top","column-reverse":"bottom"},b={row:"right","row-reverse":"left",column:"bottom","column-reverse":"top"},x={row:"left","row-reverse":"right",column:"top","column-reverse":"bottom"},w={row:"width","row-reverse":"width",column:"height","column-reverse":"height"};function S(t){return t.layout&&!t.isDirty||(t.layout={width:void 0,height:void 0,top:0,left:0,right:0,bottom:0}),t.style||(t.style={}),t.children||(t.children=[]),t.children.forEach(S),t}function T(t){return void 0===t}function C(t){return t===n||t===r}function L(t){return t===s||t===a}function O(t,e){if(void 0!==t.style.marginStart&&C(e))return t.style.marginStart;var i=null;switch(e){case"row":i=t.style.marginLeft;break;case"row-reverse":i=t.style.marginRight;break;case"column":i=t.style.marginTop;break;case"column-reverse":i=t.style.marginBottom;break}return void 0!==i?i:void 0!==t.style.margin?t.style.margin:0}function E(t,e){if(void 0!==t.style.marginEnd&&C(e))return t.style.marginEnd;var i=null;switch(e){case"row":i=t.style.marginRight;break;case"row-reverse":i=t.style.marginLeft;break;case"column":i=t.style.marginBottom;break;case"column-reverse":i=t.style.marginTop;break}return null!=i?i:void 0!==t.style.margin?t.style.margin:0}function B(t,e){if(void 0!==t.style.paddingStart&&t.style.paddingStart>=0&&C(e))return t.style.paddingStart;var i=null;switch(e){case"row":i=t.style.paddingLeft;break;case"row-reverse":i=t.style.paddingRight;break;case"column":i=t.style.paddingTop;break;case"column-reverse":i=t.style.paddingBottom;break}return null!=i&&i>=0?i:void 0!==t.style.padding&&t.style.padding>=0?t.style.padding:0}function N(t,e){if(void 0!==t.style.paddingEnd&&t.style.paddingEnd>=0&&C(e))return t.style.paddingEnd;var i=null;switch(e){case"row":i=t.style.paddingRight;break;case"row-reverse":i=t.style.paddingLeft;break;case"column":i=t.style.paddingBottom;break;case"column-reverse":i=t.style.paddingTop;break}return null!=i&&i>=0?i:void 0!==t.style.padding&&t.style.padding>=0?t.style.padding:0}function D(t,e){if(void 0!==t.style.borderStartWidth&&t.style.borderStartWidth>=0&&C(e))return t.style.borderStartWidth;var i=null;switch(e){case"row":i=t.style.borderLeftWidth;break;case"row-reverse":i=t.style.borderRightWidth;break;case"column":i=t.style.borderTopWidth;break;case"column-reverse":i=t.style.borderBottomWidth;break}return null!=i&&i>=0?i:void 0!==t.style.borderWidth&&t.style.borderWidth>=0?t.style.borderWidth:0}function k(t,e){if(void 0!==t.style.borderEndWidth&&t.style.borderEndWidth>=0&&C(e))return t.style.borderEndWidth;var i=null;switch(e){case"row":i=t.style.borderRightWidth;break;case"row-reverse":i=t.style.borderLeftWidth;break;case"column":i=t.style.borderBottomWidth;break;case"column-reverse":i=t.style.borderTopWidth;break}return null!=i&&i>=0?i:void 0!==t.style.borderWidth&&t.style.borderWidth>=0?t.style.borderWidth:0}function A(t,e){return B(t,e)+D(t,e)}function I(t,e){return N(t,e)+k(t,e)}function M(t,e){return D(t,e)+k(t,e)}function H(t,e){return O(t,e)+E(t,e)}function P(t,e){return A(t,e)+I(t,e)}function Y(t){return t.style.justifyContent?t.style.justifyContent:"flex-start"}function X(t){return t.style.alignContent?t.style.alignContent:"flex-start"}function j(t,e){return e.style.alignSelf?e.style.alignSelf:t.style.alignItems?t.style.alignItems:"stretch"}function R(t,e){if(e===o){if(t===n)return r;if(t===r)return n}return t}function W(t,o){var n;return(n=t.style.direction?t.style.direction:e)===e&&(n=void 0===o?i:o),n}function V(t){return t.style.flexDirection?t.style.flexDirection:s}function F(t,e){return L(t)?R(n,e):s}function z(t){return t.style.position?t.style.position:"relative"}function G(t){return z(t)===g&&t.style.flex>0}function K(t){return"wrap"===t.style.flexWrap}function Z(t,e){return t.layout[w[e]]+H(t,e)}function q(t,e){return void 0!==t.style[w[e]]&&t.style[w[e]]>=0}function U(t,e){return void 0!==t.style[e]}function J(t){return void 0!==t.style.measure}function $(t,e){return void 0!==t.style[e]?t.style[e]:0}function Q(t,e,i){var o={row:t.style.minWidth,"row-reverse":t.style.minWidth,column:t.style.minHeight,"column-reverse":t.style.minHeight}[e],n={row:t.style.maxWidth,"row-reverse":t.style.maxWidth,column:t.style.maxHeight,"column-reverse":t.style.maxHeight}[e],r=i;return void 0!==n&&n>=0&&r>n&&(r=n),void 0!==o&&o>=0&&r<o&&(r=o),r}function tt(t,e){return t>e?t:e}function et(t,e){void 0===t.layout[w[e]]&&q(t,e)&&(t.layout[w[e]]=tt(Q(t,e,t.style[w[e]]),P(t,e)))}function it(t,e,i){e.layout[b[i]]=t.layout[w[i]]-e.layout[w[i]]-e.layout[x[i]]}function ot(t,e){return void 0!==t.style[_[e]]?$(t,_[e]):-$(t,b[e])}function nt(e,i,o){var S=W(e,o),L=R(V(e),S),B=F(L,S),N=R(n,S);et(e,L),et(e,B),e.layout.direction=S,e.layout[_[L]]+=O(e,L)+ot(e,L),e.layout[b[L]]+=E(e,L)+ot(e,L),e.layout[_[B]]+=O(e,B)+ot(e,B),e.layout[b[B]]+=E(e,B)+ot(e,B);var k=e.children.length,nt=P(e,N);if(J(e)){var st=!T(e.layout[w[N]]),at=t;at=q(e,N)?e.style.width:st?e.layout[w[N]]:i-H(e,N),at-=nt;var lt=!q(e,N)&&!st,ct=!q(e,s)&&T(e.layout[w[s]]);if(lt||ct){var ht=e.style.measure(at);lt&&(e.layout.width=ht.width+nt),ct&&(e.layout.height=ht.height+P(e,s))}if(0===k)return}var ut,dt,ft,pt,yt=K(e),vt=Y(e),gt=A(e,L),mt=A(e,B),_t=P(e,L),bt=P(e,B),xt=!T(e.layout[w[L]]),wt=!T(e.layout[w[B]]),St=C(L),Tt=null,Ct=null,Lt=t;xt&&(Lt=e.layout[w[L]]-_t);for(var Ot=0,Et=0,Bt=0,Nt=0,Dt=0,kt=0;Et<k;){var At,It=0,Mt=0,Ht=0,Pt=0,Yt=xt&&vt===l||!xt&&vt!==c,Xt=Yt?k:Ot,jt=!0,Rt=k,Wt=null,Vt=null,Ft=gt,zt=0;for(ut=Ot;ut<k;++ut){if((ft=e.children[ut]).lineIndex=kt,ft.nextAbsoluteChild=null,ft.nextFlexChild=null,(te=j(e,ft))===v&&z(ft)===g&&wt&&!q(ft,B))ft.layout[w[B]]=tt(Q(ft,B,e.layout[w[B]]-bt-H(ft,B)),P(ft,B));else if(z(ft)===m)for(null===Tt&&(Tt=ft),null!==Ct&&(Ct.nextAbsoluteChild=ft),Ct=ft,dt=0;dt<2;dt++)pt=0!==dt?n:s,!T(e.layout[w[pt]])&&!q(ft,pt)&&U(ft,_[pt])&&U(ft,b[pt])&&(ft.layout[w[pt]]=tt(Q(ft,pt,e.layout[w[pt]]-P(e,pt)-H(ft,pt)-$(ft,_[pt])-$(ft,b[pt])),P(ft,pt)));var Gt=0;if(xt&&G(ft)?(Mt++,Ht+=ft.style.flex,null===Wt&&(Wt=ft),null!==Vt&&(Vt.nextFlexChild=ft),Vt=ft,Gt=P(ft,L)+H(ft,L)):(At=t,St||(At=q(e,N)?e.layout[w[N]]-nt:i-H(e,N)-nt),0===Bt&&rt(ft,At,S),z(ft)===g&&(Pt++,Gt=Z(ft,L))),yt&&xt&&It+Gt>Lt&&ut!==Ot){Pt--,Bt=1;break}Yt&&(z(ft)!==g||G(ft))&&(Yt=!1,Xt=ut),jt&&(z(ft)!==g||te!==v&&te!==f||T(ft.layout[w[B]]))&&(jt=!1,Rt=ut),Yt&&(ft.layout[x[L]]+=Ft,xt&&it(e,ft,L),Ft+=Z(ft,L),zt=tt(zt,Q(ft,B,Z(ft,B)))),jt&&(ft.layout[x[B]]+=Nt+mt,wt&&it(e,ft,B)),Bt=0,It+=Gt,Et=ut+1}var Kt=0,Zt=0,qt=0;if(qt=xt?Lt-It:tt(It,0)-It,0!==Mt){var Ut,Jt,$t=qt/Ht;for(Vt=Wt;null!==Vt;)(Ut=$t*Vt.style.flex+P(Vt,L))!==(Jt=Q(Vt,L,Ut))&&(qt-=Jt,Ht-=Vt.style.flex),Vt=Vt.nextFlexChild;for(($t=qt/Ht)<0&&($t=0),Vt=Wt;null!==Vt;)Vt.layout[w[L]]=Q(Vt,L,$t*Vt.style.flex+P(Vt,L)),At=t,q(e,N)?At=e.layout[w[N]]-nt:St||(At=i-H(e,N)-nt),rt(Vt,At,S),ft=Vt,Vt=Vt.nextFlexChild,ft.nextFlexChild=null}else vt!==l&&(vt===c?Kt=qt/2:vt===h?Kt=qt:vt===u?(qt=tt(qt,0),Zt=Mt+Pt-1!=0?qt/(Mt+Pt-1):0):vt===d&&(Kt=(Zt=qt/(Mt+Pt))/2));for(Ft+=Kt,ut=Xt;ut<Et;++ut)z(ft=e.children[ut])===m&&U(ft,_[L])?ft.layout[x[L]]=$(ft,_[L])+D(e,L)+O(ft,L):(ft.layout[x[L]]+=Ft,xt&&it(e,ft,L),z(ft)===g&&(Ft+=Zt+Z(ft,L),zt=tt(zt,Q(ft,B,Z(ft,B)))));var Qt=e.layout[w[B]];for(wt||(Qt=tt(Q(e,B,zt+bt),bt)),ut=Rt;ut<Et;++ut)if(z(ft=e.children[ut])===m&&U(ft,_[B]))ft.layout[x[B]]=$(ft,_[B])+D(e,B)+O(ft,B);else{var te,ee=mt;if(z(ft)===g)if((te=j(e,ft))===v)T(ft.layout[w[B]])&&(ft.layout[w[B]]=tt(Q(ft,B,Qt-bt-H(ft,B)),P(ft,B)));else if(te!==f){var ie=Qt-bt-Z(ft,B);ee+=te===p?ie/2:ie}ft.layout[x[B]]+=Nt+ee,wt&&it(e,ft,B)}Nt+=zt,Dt=tt(Dt,Ft),kt+=1,Ot=Et}if(kt>1&&wt){var oe=e.layout[w[B]]-bt,ne=oe-Nt,re=0,se=mt,ae=X(e);ae===y?se+=ne:ae===p?se+=ne/2:ae===v&&oe>Nt&&(re=ne/kt);var le=0;for(ut=0;ut<kt;++ut){var ce=le,he=0;for(dt=ce;dt<k;++dt)if(z(ft=e.children[dt])===g){if(ft.lineIndex!==ut)break;T(ft.layout[w[B]])||(he=tt(he,ft.layout[w[B]]+H(ft,B)))}for(le=dt,he+=re,dt=ce;dt<le;++dt)if(z(ft=e.children[dt])===g){var ue=j(e,ft);if(ue===f)ft.layout[x[B]]=se+O(ft,B);else if(ue===y)ft.layout[x[B]]=se+he-E(ft,B)-ft.layout[w[B]];else if(ue===p){var de=ft.layout[w[B]];ft.layout[x[B]]=se+(he-de)/2}else ue===v&&(ft.layout[x[B]]=se+O(ft,B))}se+=he}}var fe=!1,pe=!1;if(xt||(e.layout[w[L]]=tt(Q(e,L,Dt+I(e,L)),_t),L!==r&&L!==a||(fe=!0)),wt||(e.layout[w[B]]=tt(Q(e,B,Nt+bt),bt),B!==r&&B!==a||(pe=!0)),fe||pe)for(ut=0;ut<k;++ut)ft=e.children[ut],fe&&it(e,ft,L),pe&&it(e,ft,B);for(Ct=Tt;null!==Ct;){for(dt=0;dt<2;dt++)pt=0!==dt?n:s,!T(e.layout[w[pt]])&&!q(Ct,pt)&&U(Ct,_[pt])&&U(Ct,b[pt])&&(Ct.layout[w[pt]]=tt(Q(Ct,pt,e.layout[w[pt]]-M(e,pt)-H(Ct,pt)-$(Ct,_[pt])-$(Ct,b[pt])),P(Ct,pt))),U(Ct,b[pt])&&!U(Ct,_[pt])&&(Ct.layout[_[pt]]=e.layout[w[pt]]-Ct.layout[w[pt]]-$(Ct,b[pt]));ft=Ct,Ct=Ct.nextAbsoluteChild,ft.nextAbsoluteChild=null}}function rt(t,e,o){t.shouldUpdate=!0;var n=t.style.direction||i;!t.isDirty&&t.lastLayout&&t.lastLayout.requestedHeight===t.layout.height&&t.lastLayout.requestedWidth===t.layout.width&&t.lastLayout.parentMaxWidth===e&&t.lastLayout.direction===n?(t.layout.width=t.lastLayout.width,t.layout.height=t.lastLayout.height,t.layout.top=t.lastLayout.top,t.layout.left=t.lastLayout.left):(t.lastLayout||(t.lastLayout={}),t.lastLayout.requestedWidth=t.layout.width,t.lastLayout.requestedHeight=t.layout.height,t.lastLayout.parentMaxWidth=e,t.lastLayout.direction=n,t.children.forEach((function(t){t.layout.width=void 0,t.layout.height=void 0,t.layout.top=0,t.layout.left=0})),nt(t,e,o),t.lastLayout.width=t.layout.width,t.lastLayout.height=t.layout.height,t.lastLayout.top=t.layout.top,t.lastLayout.left=t.layout.left)}return{layoutNodeImpl:nt,computeLayout:rt,fillNodes:S}}();return t.exports=e,function(t){e.fillNodes(t),e.computeLayout(t)}})?i.apply(e,o):i)||(t.exports=n)},(t,e,i)=>{"use strict";var o=i(12),n=i(14),r=i(14),s=i(13).buildOptions,a=i(16);e.parse=function(t,e,i){if(i){!0===i&&(i={});var l=a.validate(t,i);if(!0!==l)throw Error(l.err.msg)}return e=s(e,r.defaultOptions,r.props),o.convertToJson(n.getTraversalObj(t,e),e)}},(t,e,i)=>{"use strict";var o=i(13),n=function(t,e){var i={name:t.tagname};return t.child&&!o.isEmptyObject(t.child)||t.attrsMap&&!o.isEmptyObject(t.attrsMap)?(o.isExist(t.val)&&("string"!=typeof t.val||""!==t.val&&t.val!==e.cdataPositionChar)&&("strict"===e.arrayMode?i[e.textNodeName]=[t.val]:i[e.textNodeName]=t.val),o.merge(i,t.attrsMap,e.arrayMode),i.children=[],t.children.forEach((function(t){i.children.push(n(t,e))})),i):o.isExist(t.val)&&t.val?t.val:i};e.convertToJson=n},(t,e)=>{"use strict";var i=function(t,e){var i=e.exec(t);return!(null==i)};e.isExist=function(t){return void 0!==t},e.isEmptyObject=function(t){return 0===Object.keys(t).length},e.merge=function(t,e,i){if(e)for(var o=Object.keys(e),n=o.length,r=0;r<n;r++)t[o[r]]="strict"===i?[e[o[r]]]:e[o[r]]},e.getValue=function(t){return e.isExist(t)?t:""},e.buildOptions=function(t,e,i){var o={};if(!t)return e;for(var n=0;n<i.length;n++)void 0!==t[i[n]]?o[i[n]]=t[i[n]]:o[i[n]]=e[i[n]];return o},e.doesMatch=i,e.doesNotMatch=function(t,e){return!i(t,e)},e.getAllMatches=function(t,e){for(var i=[],o=e.exec(t);o;){for(var n=[],r=o.length,s=0;s<r;s++)n.push(o[s]);i.push(n),o=e.exec(t)}return i}},(t,e,i)=>{"use strict";var o=i(13),n=i(13).buildOptions,r=i(15),s=1,a=2,l=3,c=4,h="<((!\\[CDATA\\[([\\s\\S]*?)(]]>))|(([\\w:\\-._]*:)?([\\w:\\-._]+))([^>]*)>|((\\/)(([\\w:\\-._]*:)?([\\w:\\-._]+))\\s*>))([^<]*)";!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt),!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);var u={attributeNamePrefix:"@_",attrNodeName:!1,textNodeName:"#text",ignoreAttributes:!0,ignoreNameSpace:!1,allowBooleanAttributes:!1,parseNodeValue:!0,parseAttributeValue:!1,arrayMode:!1,trimValues:!0,cdataTagName:!1,cdataPositionChar:"\\c",localeRange:"",tagValueProcessor:function(t){return t},attrValueProcessor:function(t){return t},stopNodes:[]};e.defaultOptions=u;var d=["attributeNamePrefix","attrNodeName","textNodeName","ignoreAttributes","ignoreNameSpace","allowBooleanAttributes","parseNodeValue","parseAttributeValue","arrayMode","trimValues","cdataTagName","cdataPositionChar","localeRange","tagValueProcessor","attrValueProcessor","parseTrueNumberOnly","stopNodes"];e.props=d;function f(t,e,i){var o=t[7]||i,n=t[14];return n&&(e.trimValues&&(n=n.trim()),n=v(n=e.tagValueProcessor(n,o),e.parseNodeValue,e.parseTrueNumberOnly)),n}function p(t){return"]]>"===t[4]?c:"/"===t[10]?a:void 0!==t[8]&&"/"===t[8].substr(t[8].length-1)?l:s}function y(t,e){if(e.ignoreNameSpace){var i=t.split(":"),o="/"===t.charAt(0)?"/":"";if("xmlns"===i[0])return"";2===i.length&&(t=o+i[1])}return t}function v(t,e,i){if(e&&"string"==typeof t){var n=void 0;return""===t.trim()||isNaN(t)?n="true"===t||"false"!==t&&t:(n=-1!==t.indexOf("0x")?Number.parseInt(t,16):-1!==t.indexOf(".")?Number.parseFloat(t):Number.parseInt(t,10),i&&(n=String(n)===t?n:t)),n}return o.isExist(t)?t:""}var g=new RegExp("([^\\s=]+)\\s*(=\\s*(['\"])(.*?)\\3)?","g");function m(t,e){if(!e.ignoreAttributes&&"string"==typeof t){t=t.replace(/\r?\n/g," ");for(var i=o.getAllMatches(t,g),n=i.length,r={},s=0;s<n;s++){var a=y(i[s][1],e);a.length&&(void 0!==i[s][4]?(e.trimValues&&(i[s][4]=i[s][4].trim()),i[s][4]=e.attrValueProcessor(i[s][4],a),r[e.attributeNamePrefix+a]=v(i[s][4],e.parseAttributeValue,e.parseTrueNumberOnly)):e.allowBooleanAttributes&&(r[e.attributeNamePrefix+a]=!0))}if(!Object.keys(r).length)return;if(e.attrNodeName){var l={};return l[e.attrNodeName]=r,l}return r}}e.getTraversalObj=function(t,e){e=n(e,u,d),t=t.replace(/<!--[\s\S]*?-->/g,"");var i=new r("!xml"),s=i;h=h.replace(/\[\\w/g,"["+e.localeRange+"\\w");for(var y=new RegExp(h,"g"),v=y.exec(t),g=y.exec(t);v;){var _=p(v);if(_===a)s.parent&&v[14]&&(s.parent.val=o.getValue(s.parent.val)+""+f(v,e,s.parent.tagname)),e.stopNodes.length&&e.stopNodes.includes(s.tagname)&&(s.child=[],null==s.attrsMap&&(s.attrsMap={}),s.val=t.substr(s.startIndex+1,v.index-s.startIndex-1)),s=s.parent;else if(_===c){if(e.cdataTagName)(b=new r(e.cdataTagName,s,v[3])).attrsMap=m(v[8],e),s.addChild(b),s.val=o.getValue(s.val)+e.cdataPositionChar,v[14]&&(s.val+=f(v,e));else s.val=(s.val||"")+(v[3]||"")+f(v,e)}else if(_===l){s&&v[14]&&(s.val=o.getValue(s.val)+""+f(v,e));var b=new r(e.ignoreNameSpace?v[7]:v[5],s,"");v[8]&&v[8].length>0&&(v[8]=v[8].substr(0,v[8].length-1)),b.attrsMap=m(v[8],e),s.addChild(b)}else{b=new r(e.ignoreNameSpace?v[7]:v[5],s,f(v,e));e.stopNodes.length&&e.stopNodes.includes(b.tagname)&&(b.startIndex=v.index+v[1].length),b.attrsMap=m(v[8],e),s.addChild(b),s=b}v=g,g=y.exec(t)}return i}},t=>{"use strict";t.exports=function(t,e,i){this.tagname=t,this.parent=e,this.child={},this.attrsMap={},this.children=[],this.val=i,this.addChild=function(t){this.children.push(t),Array.isArray(this.child[t.tagname])?this.child[t.tagname].push(t):this.child[t.tagname]=[t]}}},(t,e,i)=>{"use strict";var o=i(13),n={allowBooleanAttributes:!1,localeRange:"a-zA-Z"},r=["allowBooleanAttributes","localeRange"];function s(t,e){for(var i=e;e<t.length;e++)if("?"!=t[e]&&" "!=t[e]);else{var o=t.substr(i,e-i);if(e>5&&"xml"===o)return{err:{code:"InvalidXml",msg:"XML declaration allowed only at the start of the document."}};if("?"==t[e]&&">"==t[e+1]){e++;break}}return e}function a(t,e){if(t.length>e+5&&"-"===t[e+1]&&"-"===t[e+2]){for(e+=3;e<t.length;e++)if("-"===t[e]&&"-"===t[e+1]&&">"===t[e+2]){e+=2;break}}else if(t.length>e+8&&"D"===t[e+1]&&"O"===t[e+2]&&"C"===t[e+3]&&"T"===t[e+4]&&"Y"===t[e+5]&&"P"===t[e+6]&&"E"===t[e+7]){var i=1;for(e+=8;e<t.length;e++)if("<"===t[e])i++;else if(">"===t[e]&&0===--i)break}else if(t.length>e+9&&"["===t[e+1]&&"C"===t[e+2]&&"D"===t[e+3]&&"A"===t[e+4]&&"T"===t[e+5]&&"A"===t[e+6]&&"["===t[e+7])for(e+=8;e<t.length;e++)if("]"===t[e]&&"]"===t[e+1]&&">"===t[e+2]){e+=2;break}return e}e.validate=function(t,e){e=o.buildOptions(e,n,r);var i=[],c=!1;"\ufeff"===t[0]&&(t=t.substr(1));for(var u=new RegExp("^[_w][\\w\\-.:]*$".replace("_w","_"+e.localeRange)),f=new RegExp("^([w]|_)[\\w.\\-_:]*".replace("([w","(["+e.localeRange)),p=0;p<t.length;p++){if("<"!==t[p]){if(" "===t[p]||"\t"===t[p]||"\n"===t[p]||"\r"===t[p])continue;return{err:{code:"InvalidChar",msg:"char "+t[p]+" is not expected ."}}}if("?"===t[++p]){if((p=s(t,++p)).err)return p}else{if("!"===t[p]){p=a(t,p);continue}var y=!1;"/"===t[p]&&(y=!0,p++);for(var v="";p<t.length&&">"!==t[p]&&" "!==t[p]&&"\t"!==t[p]&&"\n"!==t[p]&&"\r"!==t[p];p++)v+=t[p];if("/"===(v=v.trim())[v.length-1]){v=v.substring(0,v.length-1);continue}if(!d(v,f))return{err:{code:"InvalidTag",msg:"Tag "+v+" is an invalid name."}};var g=l(t,p);if(!1===g)return{err:{code:"InvalidAttr",msg:'Attributes for "'+v+'" have open quote.'}};var m=g.value;if(p=g.index,"/"===m[m.length-1]){if(!0!==(b=h(m=m.substring(0,m.length-1),e,u)))return b;c=!0}else if(y){if(!g.tagClosed)return{err:{code:"InvalidTag",msg:'closing tag "'+v+"\" don't have proper closing."}};if(m.trim().length>0)return{err:{code:"InvalidTag",msg:'closing tag "'+v+"\" can't have attributes or invalid starting."}};var _=i.pop();if(v!==_)return{err:{code:"InvalidTag",msg:"closing tag "+_+" is expected inplace of "+v+"."}}}else{var b;if(!0!==(b=h(m,e,u)))return b;i.push(v),c=!0}for(p++;p<t.length;p++)if("<"===t[p]){if("!"===t[p+1]){p=a(t,++p);continue}break}"<"===t[p]&&p--}}return c?!(i.length>0)||{err:{code:"InvalidXml",msg:"Invalid "+JSON.stringify(i,null,4).replace(/\r?\n/g,"")+" found."}}:{err:{code:"InvalidXml",msg:"Start tag expected."}}};function l(t,e){for(var i="",o="",n=!1;e<t.length;e++){if('"'===t[e]||"'"===t[e])if(""===o)o=t[e];else{if(o!==t[e])continue;o=""}else if(">"===t[e]&&""===o){n=!0;break}i+=t[e]}return""===o&&{value:i,index:e,tagClosed:n}}var c=new RegExp("(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['\"])(([\\s\\S])*?)\\5)?","g");function h(t,e,i){for(var n=o.getAllMatches(t,c),r={},s=0;s<n.length;s++){if(0===n[s][1].length)return{err:{code:"InvalidAttr",msg:"attribute "+n[s][2]+" has no space in starting."}};if(void 0===n[s][3]&&!e.allowBooleanAttributes)return{err:{code:"InvalidAttr",msg:"boolean attribute "+n[s][2]+" is not allowed."}};var a=n[s][2];if(!u(a,i))return{err:{code:"InvalidAttr",msg:"attribute "+a+" is an invalid name."}};if(Object.prototype.hasOwnProperty.call(r,a))return{err:{code:"InvalidAttr",msg:"attribute "+a+" is repeated."}};r[a]=1}return!0}function u(t,e){return o.doesMatch(t,e)}function d(t,e){return!o.doesNotMatch(t,e)}},(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>r});var o=i(5),n=i(8);const r=function(){function t(t,e,i){var r=this;this.ready=!1,this.config=i,this.chars=this.parseConfig(i),this.event=new n,this.texture=o.default.loadImage(e,(function(t,e){e&&(r.texture=t),r.ready=!0,r.event.emit("text__load__done")}))}return t.prototype.parseConfig=function(t){var e=(t=t.split("\r\n").join("\n")).split("\n"),i=e.map((function(t){return t.trim().split(" ")})),o=this.getConfigByLineName(i,"chars"),n=this.getConfigByKeyInOneLine(o.line,"count"),r=this.getConfigByLineName(i,"common");this.lineHeight=this.getConfigByKeyInOneLine(r.line,"lineHeight");var s=this.getConfigByLineName(i,"info");this.fontSize=this.getConfigByKeyInOneLine(s.line,"size");var a=this.getConfigByLineName(i,"kernings"),l=0,c=-1;a.line&&(l=this.getConfigByKeyInOneLine(a.line,"count"),c=a.index+1);for(var h={},u=4;u<4+n;u++){var d=e[u],f=String.fromCharCode(this.getConfigByKeyInOneLine(d,"id")),p={x:this.getConfigByKeyInOneLine(d,"x"),y:this.getConfigByKeyInOneLine(d,"y"),w:this.getConfigByKeyInOneLine(d,"width"),h:this.getConfigByKeyInOneLine(d,"height"),offX:this.getConfigByKeyInOneLine(d,"xoffset"),offY:this.getConfigByKeyInOneLine(d,"yoffset"),xadvance:this.getConfigByKeyInOneLine(d,"xadvance"),kerning:{}};h[f]=p}if(l)for(u=c;u<=c+l;u++){var y=i[u],v=String.fromCharCode(this.getConfigByKeyInOneLine(y,"first")),g=String.fromCharCode(this.getConfigByKeyInOneLine(y,"second")),m=this.getConfigByKeyInOneLine(y,"amount");h[g]&&(h[g].kerning[v]=m)}return h},t.prototype.getConfigByLineName=function(t,e){void 0===e&&(e="");for(var i=-1,o=[],n=t.length,r=0;r<n;r++){var s=t[r];s[0]===e&&(i=r,o=s)}return{line:o,index:i}},t.prototype.getConfigByKeyInOneLine=function(t,e){for(var i=Array.isArray(t)?t:t.split(" "),o=0,n=i.length;o<n;o++){var r=i[o];if(e===r.substring(0,e.length)){var s=r.substring(e.length+1);return parseInt(s)}}return 0},t}()},(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>o});const o=function(){function t(){this.info={},this.totalStart=0,this.totalCost=0,this.reset()}return t.prototype.start=function(t,e){void 0===e&&(e=!1),0===this.totalStart&&(this.totalStart=Date.now()),this.info[t]={start:Date.now(),isInner:e}},t.prototype.end=function(t){this.info[t]&&(this.info[t].end=Date.now(),this.info[t].cost=this.info[t].end-this.info[t].start,this.totalCost=this.info[t].end-this.totalStart)},t.prototype.reset=function(){this.info={},this.totalStart=0,this.totalCost=0},t.prototype.log=function(t){var e=this;void 0===t&&(t=!1);var i="Layout debug info: \n";return i+=Object.keys(this.info).reduce((function(i,o){return e.info[o].isInner&&!t?i:i+="".concat(o,": ").concat(e.info[o].cost,"\n")}),""),i+="totalCost: ".concat(this.totalCost,"\n")},t}()},(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>o});const o=function(){function t(){var t=this;this.count=0,this.started=!1,this.animationId=null,this.cbs=[],this.innerCbs=[],this.nextCbs=[],this.innerNextCbs=[],this.update=function(){var e=Date.now(),i=e-t.lastTime;t.lastTime=e,t.cbs.forEach((function(t){t(i)})),t.innerCbs.forEach((function(t){t(i)})),t.innerNextCbs.length&&(t.innerNextCbs.forEach((function(t){return t(i)})),t.innerNextCbs=[]),t.nextCbs.length&&(t.nextCbs.forEach((function(t){return t(i)})),t.nextCbs=[]),t.count+=1,t.animationId=requestAnimationFrame(t.update)}}return t.prototype.cancelIfNeed=function(){null!==this.animationId&&(cancelAnimationFrame(this.animationId),this.animationId=null)},t.prototype.add=function(t,e){void 0===e&&(e=!1),"function"==typeof t&&-1===this.cbs.indexOf(t)&&(e?this.innerCbs.push(t):this.cbs.push(t))},t.prototype.next=function(t,e){void 0===e&&(e=!1),"function"==typeof t&&(e?this.innerNextCbs.push(t):this.nextCbs.push(t))},t.prototype.removeInner=function(){this.innerCbs=[],this.innerNextCbs=[]},t.prototype.remove=function(t,e){(void 0===e&&(e=!1),void 0===t&&(this.cbs=[],this.innerCbs=[],this.nextCbs=[],this.innerNextCbs=[]),"function"==typeof t&&(this.cbs.indexOf(t)>-1||this.innerCbs.indexOf(t)>-1))&&(e?this.innerCbs:this.cbs).splice(this.cbs.indexOf(t),1);this.cbs.length||this.innerCbs.length||this.cancelIfNeed()},t.prototype.start=function(){this.started||(this.started=!0,this.lastTime=Date.now(),null===this.animationId&&(this.cbs.length||this.innerCbs.length)&&(this.animationId=requestAnimationFrame(this.update)))},t.prototype.stop=function(){this.started&&(this.started=!1,this.cancelIfNeed())},t}()},(t,e,i)=>{"use strict";i.r(e),i.d(e,{clone:()=>v,create:()=>c,iterateTree:()=>f,layoutChildren:()=>u,registerComponent:()=>s,renderChildren:()=>h,repaintChildren:()=>p,repaintTree:()=>y});var o=i(21),n=i(1),r={view:o.View,text:o.Text,image:o.Image,scrollview:o.ScrollView,bitmaptext:o.BitMapText,canvas:o.Canvas,button:o.Button};function s(t,e){r[t]=e}function a(t){return"string"==typeof t&&/\d+(?:\.\d+)?%/.test(t)}function l(t,e){if("number"==typeof t||null===t)return t;var i=t.match(/(\d+(?:\.\d+)?)%/);return i&&i[1]?e*parseFloat(i[1])*.01:void 0}function c(t,e,i){var o=this,s=r[t.name];if(!s)return null;var h=t.children||[],u=t.attr||{},d={},f=u.id||"",p=Object.keys(u).reduce((function(t,i){var o=u[i],n=i;if("id"===i)return t.style=Object.assign(t.style||{},e[f]||{}),t;if("class"===i)return t.style=o.split(/\s+/).reduce((function(t,i){return Object.assign(t,e[i])}),t.style||{}),t;if(t[n]="true"===o||"false"!==o&&o,n.startsWith("data-")){var r=n.substring(5);d[r]=o}return t.dataset=d,t}),{});p.idName=f,this.eleCount+=1,p.id=this.eleCount,p.className=u.class||"";var y=p.style;if(y){var v=void 0;v=i?i.style:n.default.getRootCanvasSize(),a(y.width)&&(y.width=v.width?l(y.width,v.width):0),a(y.height)&&(y.height=v.height?l(y.height,v.height):0),void 0===y.opacity&&(y.opacity=1),1!==v.opacity&&"number"==typeof v.opacity&&(y.opacity=v.opacity*y.opacity)}var g=new s(p);return g.root=this,g.tagName=t.name,g.afterCreate(),h.forEach((function(t){var i=c.call(o,t,e,p);i&&g.add(i)})),g}function h(t,e,i){void 0===i&&(i=!0),t.forEach((function(t){return t.isDirty=!1,t.insert(e,i),h(t.children,e,"ScrollView"!==t.type&&i)}))}function u(t){t.children.forEach((function(t){t.layoutBox=t.layoutBox||{},["left","top","width","height"].forEach((function(e){var i;t.layoutBox[e]=null===(i=t.layout)||void 0===i?void 0:i[e]})),t.parent?(t.layoutBox.absoluteX=(t.parent.layoutBox.absoluteX||0)+t.layoutBox.left,t.layoutBox.absoluteY=(t.parent.layoutBox.absoluteY||0)+t.layoutBox.top):(t.layoutBox.absoluteX=t.layoutBox.left,t.layoutBox.absoluteY=t.layoutBox.top),t.layoutBox.originalAbsoluteY=t.layoutBox.absoluteY,t.layoutBox.originalAbsoluteX=t.layoutBox.absoluteX,u(t)}))}function d(){}function f(t,e){void 0===e&&(e=d),e(t),t.children.forEach((function(t){f(t,e)}))}var p=function(t){t.forEach((function(t){t.repaint(),"ScrollView"!==t.type&&p(t.children)}))},y=function(t){t.repaint(),t.children.forEach((function(t){t.repaint(),y(t)}))};function v(t,e,i,n){void 0===i&&(i=!0);var s=r[e.tagName];t.eleCount+=1;var a={style:Object.assign({},e.style),idName:e.idName,className:e.className,id:t.eleCount,dataset:Object.assign({},e.dataset),name:e.tagName};e instanceof o.Image?a.src=e.src:(e instanceof o.Text||e instanceof o.BitMapText)&&(a.value=e.value);var l=new s(a);return l.root=t,l.insert(t.renderContext,!1),l.observeStyleAndEvent(),n&&n.add(l),i&&e.children.forEach((function(e){v(t,e,i,l)})),l}},(t,e,i)=>{"use strict";i.r(e),i.d(e,{BitMapText:()=>a.default,Button:()=>h.default,Canvas:()=>l.default,Element:()=>c.default,Image:()=>n.default,ScrollView:()=>s.default,Text:()=>r.default,View:()=>o.default});var o=i(22),n=i(23),r=i(24),s=i(25),a=i(29),l=i(30),c=i(2),h=i(31)},(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>s});var o,n=i(2),r=(o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},o(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});const s=function(t){function e(e){var i=e.style,o=void 0===i?{}:i,n=e.idName,r=void 0===n?"":n,s=e.className,a=void 0===s?"":s,l=e.dataset,c=t.call(this,{idName:r,className:a,style:o,dataset:l})||this;return c.type="View",c.ctx=null,c}return r(e,t),e.prototype.destroySelf=function(){this.isDestroyed=!0,this.children=[],this.root=null},e.prototype.render=function(){var t=this.ctx;t.save();var e=this.baseRender(),i=e.needStroke,o=(e.needClip,e.originX),n=e.originY;i&&t.stroke(),t.translate(-o,-n),t.restore()},e.prototype.repaint=function(){this.render()},e}(n.default)},(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>a});var o,n=i(2),r=i(5),s=(o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},o(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});const a=function(t){function e(e){var i=this,o=e.style,n=void 0===o?{}:o,s=e.idName,a=void 0===s?"":s,l=e.className,c=void 0===l?"":l,h=e.src,u=void 0===h?"":h,d=e.dataset;return(i=t.call(this,{idName:a,className:c,dataset:d,style:n})||this).type="Image",i.imgsrc=u,i.img=r.default.loadImage(i.src,(function(t,e){var o;e?i.img=t:i.isDestroyed||(i.img=t,null===(o=i.root)||void 0===o||o.emit("repaint"))})),i}return s(e,t),Object.defineProperty(e.prototype,"src",{get:function(){return this.imgsrc},set:function(t){var e=this;t!==this.imgsrc&&(this.imgsrc=t,r.default.loadImage(this.src,(function(t){var i;e.isDestroyed||(e.img=t,null===(i=e.root)||void 0===i||i.emit("repaint"))})))},enumerable:!1,configurable:!0}),e.prototype.repaint=function(){this.render()},e.prototype.destroySelf=function(){this.isDestroyed=!0,this.img=null,this.src="",this.root=null},e.prototype.render=function(){var t;if(this.img&&(null===(t=this.img)||void 0===t?void 0:t.complete)){var e=this.ctx;e.save();var i=this.baseRender(),o=i.needStroke,n=i.needClip,r=i.originX,s=i.originY,a=i.drawX,l=i.drawY,c=i.width,h=i.height;e.drawImage(this.img,a-r,l-s,c,h),n&&this.renderBorder(e,r,s),o&&e.stroke(),e.translate(-r,-s),e.restore()}},e}(n.default)},(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>p});var o,n=i(2),r=i(1),s=i(9),a=(o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},o(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),l="sans-serif",c=null,h=function(){if(c)return c;var t=r.default.createCanvas();return t.width=1,t.height=1,c=t.getContext("2d")};function u(t,e){var i=h();return i.font="".concat(t.fontWeight||"normal"," ").concat(t.fontSize||12,"px ").concat(t.fontFamily||l),i.measureText(e).width||0}function d(t){return h().measureText(t).width||0}function f(t,e){e=String(e);var i=t.width,o=u(t,e),n=t.textOverflow||"ellipsis";if(o<=i)return e;"ellipsis"===n&&(i-=d("..."));for(var r=e.length-1,s=e.substring(0,r);d(s)>i&&r>0;)r-=1,s=e.substring(0,r);return r&&"ellipsis"===n?"".concat(s,"..."):s}const p=function(t){function e(e){var i=this,o=e.style,n=void 0===o?{}:o,r=e.idName,s=void 0===r?"":r,a=e.className,l=void 0===a?"":a,c=e.value,h=void 0===c?"":c,d=e.dataset,p=n.width;return void 0===p?n.width=u(n,h):"ellipsis"===n.textOverflow&&(h=f(n,h)),void 0===n.height&&(n.height=n.lineHeight||n.fontSize||12),(i=t.call(this,{idName:s,className:l,style:n,dataset:d})||this).valuesrc="",i.textBaseline="bottom",i.font="",i.textAlign="left",i.fillStyle="#000000",i.renderForLayout={},i.type="Text",i.ctx=null,i.valuesrc=h,i.originStyleWidth=p,n.textShadow&&i.parseTextShadow(n.textShadow),i}return a(e,t),e.prototype.styleChangeHandler=function(t,e,i){"textShadow"===t&&(e===n.StyleOpType.Set?this.parseTextShadow(i):this.renderForLayout.textShadows=null)},e.prototype.parseTextShadow=function(t){(0,s.isValidTextShadow)(t)&&(this.renderForLayout.textShadows=t.split(",").map((function(t){var e=t.trim().split(/\s+/);return{offsetX:parseFloat(e[0]),offsetY:parseFloat(e[1]),blurRadius:parseFloat(e[2]),color:e[3]}})))},Object.defineProperty(e.prototype,"value",{get:function(){return this.valuesrc},set:function(t){t!==this.valuesrc&&(void 0===this.originStyleWidth?this.style.width=u(this.style,t):"ellipsis"===this.style.textOverflow&&(t=f(this.style,t)),this.valuesrc=t,(0,n.setDirty)(this,"value change"))},enumerable:!1,configurable:!0}),e.prototype.toCanvasData=function(){var t=this.style||{};this.fontSize=t.fontSize||12,this.textBaseline="top",this.font="".concat(t.fontWeight||""," ").concat(t.fontSize||12,"px ").concat(t.fontFamily||l),this.textAlign=t.textAlign||"left",this.fillStyle=t.color||"#000"},e.prototype.repaint=function(){this.render()},e.prototype.destroySelf=function(){this.root=null},e.prototype.insert=function(t,e){this.ctx=t,this.shouldUpdate=!1,this.toCanvasData(),e&&this.render()},e.prototype.render=function(){var t=this,e=this.style,i=this.ctx;i.save();var o=this.baseRender("test"),n=o.needStroke,r=o.originX,s=o.originY,a=o.drawX,l=o.drawY,c=o.width;o.height;i.textBaseline=this.textBaseline,i.font=this.font,i.textAlign=this.textAlign,n&&i.stroke(),i.fillStyle=this.fillStyle,"center"===this.textAlign?a+=c/2:"right"===this.textAlign&&(a+=c),e.lineHeight&&(i.textBaseline="middle",l+=e.lineHeight/2),e.textStrokeColor&&(i.lineWidth=e.textStrokeWidth||1,i.strokeStyle=e.textStrokeColor,i.strokeText(this.value,a-r,l-s)),this.renderForLayout.textShadows?this.renderForLayout.textShadows.forEach((function(e){var o=e.offsetX,n=e.offsetY,c=e.blurRadius,h=e.color;i.shadowOffsetX=o,i.shadowOffsetY=n,i.shadowBlur=c,i.shadowColor=h,i.fillText(t.value,a-r,l-s)})):i.fillText(this.value,a-r,l-s),i.translate(-r,-s),i.restore()},e}(n.default)},(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>d});var o,n=i(22),r=i(7),s=i(26),a=i(20),l=(i(2),i(28)),c=i(1),h=(o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},o(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),u=c.default.getDevicePixelRatio();const d=function(t){function e(e){var i=e.style,o=void 0===i?{}:i,n=e.idName,r=void 0===n?"":n,s=e.className,a=void 0===s?"":s,l=e.scrollX,c=e.scrollY,h=e.dataset,u=t.call(this,{style:o,idName:r,dataset:h,className:a})||this;return u.scrollTop=0,u.scrollLeft=0,u.hasEventBind=!1,u.currentEvent=null,u.type="ScrollView",u.vertivalScrollbar=null,u.horizontalScrollbar=null,u.scrollYProp=c,u.innerScrollerOption={scrollingX:!!l,scrollingY:!!c},u}return h(e,t),Object.defineProperty(e.prototype,"scrollHeight",{get:function(){var t=0;return this.children.forEach((function(e){e instanceof l.default||(t=Math.max(t,e.layoutBox.top+e.layoutBox.height))})),t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scrollWidth",{get:function(){var t=0;return this.children.forEach((function(e){e instanceof l.default||(t=Math.max(t,e.layoutBox.left+e.layoutBox.width))})),t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scrollX",{get:function(){return this.innerScrollerOption.scrollingX},set:function(t){this.scrollerObj.scrollTo(0,this.scrollTop,!0,1),this.scrollerOption={scrollingX:t},this.updateScrollBar("scrollX","horizontalScrollbar")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scrollY",{get:function(){return this.innerScrollerOption.scrollingY},set:function(t){t!==this.scrollY&&(this.scrollerObj.scrollTo(this.scrollLeft,0,!0,1),this.scrollerOption={scrollingY:t},this.scrollerObj&&this.updateScrollBar("scrollY","vertivalScrollbar"))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scrollerOption",{get:function(){return this.innerScrollerOption},set:function(t){Object.assign(this.innerScrollerOption,t),this.scrollerObj&&Object.assign(this.scrollerObj.options,this.scrollerOption)},enumerable:!1,configurable:!0}),e.prototype.repaint=function(){this.scrollRender()},e.prototype.destroySelf=function(){this.isDestroyed=!0,this.ctx=null,this.children=[],this.root.off("touchend"),this.root=null},e.prototype.renderTreeWithTop=function(t){var e=this;t instanceof l.default||t.render(),t.children.forEach((function(t){e.renderTreeWithTop(t)}))},e.prototype.clear=function(){var t=this.layoutBox;this.ctx.clearRect(t.absoluteX,t.absoluteY,t.width,t.height)},e.prototype.scrollRender=function(){var t,e,i=this,o=this.layoutBox,n=o.absoluteX,r=o.absoluteY,s=o.width,a=o.height,l=this.ctx,c=n+s,h=r+a;this.render(),l.save(),l.beginPath(),l.rect(n,r,s,a),l.clip(),this.children.forEach((function(t){var e=t.layoutBox,o=e.width,s=e.height,a=e.absoluteX,l=e.absoluteY;l+s>=r&&l<=h&&a+o>=n&&a<=c&&i.renderTreeWithTop(t)})),null===(t=this.vertivalScrollbar)||void 0===t||t.render(),null===(e=this.horizontalScrollbar)||void 0===e||e.render(),l.restore()},e.prototype.scrollHandler=function(t,e){var i,o,n=this;this.isDestroyed||this.isFirstScroll||((0,a.iterateTree)(this,(function(i){i===n||i instanceof l.default||(i.layoutBox.absoluteY=i.layoutBox.originalAbsoluteY-e,i.layoutBox.absoluteX=i.layoutBox.originalAbsoluteX-t)})),this.scrollTop=e,this.scrollLeft=t,null===(i=this.vertivalScrollbar)||void 0===i||i.onScroll(t,e),null===(o=this.horizontalScrollbar)||void 0===o||o.onScroll(t,e),this.root.emit("repaint"),this.currentEvent&&this.emit("scroll",this.currentEvent)),this.isFirstScroll&&(this.isFirstScroll=!1)},e.prototype.updateScrollBar=function(t,e){},e.prototype.insert=function(t){var e=this;if(this.shouldUpdate=!1,this.ctx=t,this.scrollHeight>this.layoutBox.height&&void 0===this.scrollYProp&&(this.scrollY=!0),this.hasEventBind)return this.layoutBox.width===this.scrollerObj.__clientWidth&&this.layoutBox.height===this.scrollerObj.__clientHeight&&this.scrollWidth===this.scrollerObj.__contentWidth&&this.scrollHeight===this.scrollerObj.__contentHeight||(this.scrollerObj.setDimensions(this.layoutBox.width,this.layoutBox.height,this.scrollWidth,this.scrollHeight),this.root.ticker.next((function(){e.updateScrollBar("scrollY","vertivalScrollbar"),e.updateScrollBar("scrollX","horizontalScrollbar")}),!0)),void(0,a.iterateTree)(this,(function(t){t===e||t instanceof l.default||(t.layoutBox.absoluteY=t.layoutBox.originalAbsoluteY-e.scrollTop,t.layoutBox.absoluteX=t.layoutBox.originalAbsoluteX-e.scrollLeft)}));this.hasEventBind=!0,this.isFirstScroll=!0,this.scrollerObj=new s.default(this.scrollHandler.bind(this),this.scrollerOption),this.scrollerObj.setDimensions(this.layoutBox.width,this.layoutBox.height,this.scrollWidth,this.scrollHeight),this.root.ticker.next((function(){e.updateScrollBar("scrollY","vertivalScrollbar"),e.updateScrollBar("scrollX","horizontalScrollbar")}),!0),this.on("touchstart",(function(t){t.touches||(t.touches=[t]);var i=(0,r.copyTouchArray)(t.touches);i.forEach((function(t){1!==u&&(t.pageX*=u,t.pageY*=u)})),e.scrollerObj.doTouchStart(i,t.timeStamp),e.currentEvent=t})),this.on("touchmove",(function(t){t.touches||(t.touches=[t]);var i=(0,r.copyTouchArray)(t.touches);i.forEach((function(t){1!==u&&(t.pageX*=u,t.pageY*=u)})),e.scrollerObj.doTouchMove(i,t.timeStamp,void 0),e.currentEvent=t})),this.root.on("touchend",(function(t){e.scrollerObj.doTouchEnd(t.timeStamp),e.currentEvent=t}))},e.prototype.scrollTo=function(t,e,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=!0),this.scrollerObj.scrollTo(t,e,i,1)},e}(n.default)},(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>l});var o=i(27),n=i.n(o),r=function(){},s=function(t){return Math.pow(t-1,3)+1},a=function(t){return(t/=.5)<1?.5*Math.pow(t,3):.5*(Math.pow(t-2,3)+2)};const l=function(){function t(t,e){for(var i in this.__isSingleTouch=!1,this.__isTracking=!1,this.__didDecelerationComplete=!1,this.__isGesturing=!1,this.__isDragging=!1,this.__isDecelerating=!1,this.__isAnimating=!1,this.__clientLeft=0,this.__clientTop=0,this.__clientWidth=0,this.__clientHeight=0,this.__contentWidth=0,this.__contentHeight=0,this.__snapWidth=100,this.__snapHeight=100,this.__zoomLevel=1,this.__scrollLeft=0,this.__scrollTop=0,this.__maxScrollLeft=0,this.__maxScrollTop=0,this.__scheduledLeft=0,this.__scheduledTop=0,this.__scheduledZoom=0,this.__lastTouchLeft=null,this.__lastTouchTop=null,this.__lastTouchMove=null,this.__minDecelerationScrollLeft=null,this.__minDecelerationScrollTop=null,this.__maxDecelerationScrollLeft=null,this.__maxDecelerationScrollTop=null,this.__decelerationVelocityX=null,this.__decelerationVelocityY=null,this.__callback=t,this.options={scrollingX:!0,scrollingY:!0,animating:!0,animationDuration:250,bouncing:!0,locking:!0,paging:!1,snapping:!1,zooming:!1,minZoom:.5,maxZoom:3,speedMultiplier:1,scrollingComplete:r,penetrationDeceleration:.03,penetrationAcceleration:.08},e)this.options[i]=e[i]}return t.prototype.setDimensions=function(t,e,i,o){null!==t&&(this.__clientWidth=t),null!==e&&(this.__clientHeight=e),null!==i&&(this.__contentWidth=i),null!==o&&(this.__contentHeight=o),this.__computeScrollMax(),this.scrollTo(this.__scrollLeft,this.__scrollTop,!1)},t.prototype.setPosition=function(t,e){this.__clientLeft=t||0,this.__clientTop=e||0},t.prototype.setSnapSize=function(t,e){this.__snapWidth=t,this.__snapHeight=e},t.prototype.getValues=function(){return{left:this.__scrollLeft,top:this.__scrollTop,right:this.__scrollLeft+this.__clientWidth/this.__zoomLevel,bottom:this.__scrollTop+this.__clientHeight/this.__zoomLevel,zoom:this.__zoomLevel}},t.prototype.getPoint=function(t,e){var i=this.getValues();return{left:t/i.zoom,top:e/i.zoom}},t.prototype.getScrollMax=function(){return{left:this.__maxScrollLeft,top:this.__maxScrollTop}},t.prototype.zoomTo=function(t,e,i,o,r){if(!this.options.zooming)throw new Error("Zooming is not enabled!");r&&(this.__zoomComplete=r),this.__isDecelerating&&(n().stop(this.__isDecelerating),this.__isDecelerating=!1);var s=this.__zoomLevel;void 0===i&&(i=this.__clientWidth/2),void 0===o&&(o=this.__clientHeight/2),t=Math.max(Math.min(t,this.options.maxZoom),this.options.minZoom),this.__computeScrollMax(t);var a=t/s,l=a*(this.__scrollLeft+i)-i,c=a*(this.__scrollTop+o)-o;l>this.__maxScrollLeft?l=this.__maxScrollLeft:l<0&&(l=0),c>this.__maxScrollTop?c=this.__maxScrollTop:c<0&&(c=0),this.__publish(l,c,t,e)},t.prototype.zoomBy=function(t,e,i,o,n){this.zoomTo(this.__zoomLevel*t,e,i,o,n)},t.prototype.scrollTo=function(t,e,i,o){if(this.__isDecelerating&&(n().stop(this.__isDecelerating),this.__isDecelerating=!1),void 0!==o&&o!==this.__zoomLevel){if(!this.options.zooming)throw new Error("Zooming is not enabled!");t*=o,e*=o,this.__computeScrollMax(o)}else o=this.__zoomLevel;this.options.scrollingX?this.options.paging?t=Math.round(t/this.__clientWidth)*this.__clientWidth:this.options.snapping&&(t=Math.round(t/this.__snapWidth)*this.__snapWidth):t=this.__scrollLeft,this.options.scrollingY?this.options.paging?e=Math.round(e/this.__clientHeight)*this.__clientHeight:this.options.snapping&&(e=Math.round(e/this.__snapHeight)*this.__snapHeight):e=this.__scrollTop,t=Math.max(Math.min(this.__maxScrollLeft,t),0),e=Math.max(Math.min(this.__maxScrollTop,e),0),t===this.__scrollLeft&&e===this.__scrollTop&&(i=!1),this.__publish(t,e,o,i)},t.prototype.scrollBy=function(t,e,i){var o=this.__isAnimating?this.__scheduledLeft:this.__scrollLeft,n=this.__isAnimating?this.__scheduledTop:this.__scrollTop;this.scrollTo(o+(t||0),n+(e||0),i)},t.prototype.doMouseZoom=function(t,e,i,o){var n=t>0?.97:1.03;return this.zoomTo(this.__zoomLevel*n,!1,i-this.__clientLeft,o-this.__clientTop)},t.prototype.doTouchStart=function(t,e){if(void 0===t.length)throw new Error("Invalid touch list: "+t);if(e instanceof Date&&(e=e.valueOf()),"number"!=typeof e)throw new Error("Invalid timestamp value: "+e);var i,o;this.__interruptedAnimation=!0,this.__isDecelerating&&(n().stop(this.__isDecelerating),this.__isDecelerating=!1,this.__interruptedAnimation=!0),this.__isAnimating&&(n().stop(this.__isAnimating),this.__isAnimating=!1,this.__interruptedAnimation=!0);var r=1===t.length;r?(i=t[0].pageX,o=t[0].pageY):(i=Math.abs(t[0].pageX+t[1].pageX)/2,o=Math.abs(t[0].pageY+t[1].pageY)/2),this.__initialTouchLeft=i,this.__initialTouchTop=o,this.__zoomLevelStart=this.__zoomLevel,this.__lastTouchLeft=i,this.__lastTouchTop=o,this.__lastTouchMove=e,this.__lastScale=1,this.__enableScrollX=!r&&this.options.scrollingX,this.__enableScrollY=!r&&this.options.scrollingY,this.__isTracking=!0,this.__didDecelerationComplete=!1,this.__isDragging=!r,this.__isSingleTouch=r,this.__positions=[]},t.prototype.doTouchMove=function(t,e,i){if(void 0===t.length)throw new Error("Invalid touch list: "+t);if(e instanceof Date&&(e=e.valueOf()),"number"!=typeof e)throw new Error("Invalid timestamp value: "+e);if(this.__isTracking){var o,n;2===t.length?(o=Math.abs(t[0].pageX+t[1].pageX)/2,n=Math.abs(t[0].pageY+t[1].pageY)/2):(o=t[0].pageX,n=t[0].pageY);var r=this.__positions;if(this.__isDragging){var s=o-this.__lastTouchLeft,a=n-this.__lastTouchTop,l=this.__scrollLeft,c=this.__scrollTop,h=this.__zoomLevel;if(void 0!==i&&this.options.zooming){var u=h;if(h=h/this.__lastScale*i,u!==(h=Math.max(Math.min(h,this.options.maxZoom),this.options.minZoom))){var d=o-this.__clientLeft,f=n-this.__clientTop;l=(d+l)*h/u-d,c=(f+c)*h/u-f,this.__computeScrollMax(h)}}if(this.__enableScrollX){l-=s*this.options.speedMultiplier;var p=this.__maxScrollLeft;(l>p||l<0)&&(this.options.bouncing?l+=s/2*this.options.speedMultiplier:l=l>p?p:0)}if(this.__enableScrollY){c-=a*this.options.speedMultiplier;var y=this.__maxScrollTop;(c>y||c<0)&&(this.options.bouncing?c+=a/2*this.options.speedMultiplier:c=c>y?y:0)}r.length>60&&r.splice(0,30),r.push(l,c,e),this.__publish(l,c,h)}else{var v=this.options.locking?3:0,g=Math.abs(o-this.__initialTouchLeft),m=Math.abs(n-this.__initialTouchTop);this.__enableScrollX=this.options.scrollingX&&g>=v,this.__enableScrollY=this.options.scrollingY&&m>=v,r.push(this.__scrollLeft,this.__scrollTop,e),this.__isDragging=(this.__enableScrollX||this.__enableScrollY)&&(g>=5||m>=5),this.__isDragging&&(this.__interruptedAnimation=!1)}this.__lastTouchLeft=o,this.__lastTouchTop=n,this.__lastTouchMove=e,this.__lastScale=i}},t.prototype.doTouchEnd=function(t){if(t instanceof Date&&(t=t.valueOf()),"number"!=typeof t)throw new Error("Invalid timestamp value: "+t);if(this.__isTracking){if(this.__isTracking=!1,this.__isDragging)if(this.__isDragging=!1,this.__isSingleTouch&&this.options.animating&&t-this.__lastTouchMove<=100){for(var e=this.__positions,i=e.length-1,o=i,n=i;n>0&&e[n]>this.__lastTouchMove-100;n-=3)o=n;if(o!==i){var r=e[i]-e[o],s=this.__scrollLeft-e[o-2],a=this.__scrollTop-e[o-1];this.__decelerationVelocityX=s/r*(1e3/60),this.__decelerationVelocityY=a/r*(1e3/60);var l=this.options.paging||this.options.snapping?4:1;(Math.abs(this.__decelerationVelocityX)>l||Math.abs(this.__decelerationVelocityY)>l)&&this.__startDeceleration(t)}else this.options.scrollingComplete()}else t-this.__lastTouchMove>100&&this.options.scrollingComplete();this.__isDecelerating||((this.__interruptedAnimation||this.__isDragging)&&this.options.scrollingComplete(),this.scrollTo(this.__scrollLeft,this.__scrollTop,!0,this.__zoomLevel)),this.__positions.length=0}},t.prototype.__publish=function(t,e,i,o){var r=this.__isAnimating;if(r&&(n().stop(r),this.__isAnimating=!1),o&&this.options.animating){this.__scheduledLeft=t,this.__scheduledTop=e,this.__scheduledZoom=i;var l=this.__scrollLeft,c=this.__scrollTop,h=this.__zoomLevel,u=t-l,d=e-c,f=i-h,p=function(t,e,i){i&&(this.__scrollLeft=l+u*t,this.__scrollTop=c+d*t,this.__zoomLevel=h+f*t,this.__callback&&this.__callback(this.__scrollLeft,this.__scrollTop,this.__zoomLevel))}.bind(this),y=function(t){return this.__isAnimating===t}.bind(this),v=function(t,e,i){e===this.__isAnimating&&(this.__isAnimating=!1),(this.__didDecelerationComplete||i)&&this.options.scrollingComplete(),this.options.zooming&&(this.__computeScrollMax(),this.__zoomComplete&&(this.__zoomComplete(),this.__zoomComplete=null))}.bind(this);this.__isAnimating=n().start(p,y,v,this.options.animationDuration,r?s:a)}else this.__scheduledLeft=this.__scrollLeft=t,this.__scheduledTop=this.__scrollTop=e,this.__scheduledZoom=this.__zoomLevel=i,this.__callback&&this.__callback(t,e,i),this.options.zooming&&(this.__computeScrollMax(),this.__zoomComplete&&(this.__zoomComplete(),this.__zoomComplete=null))},t.prototype.__computeScrollMax=function(t){void 0===t&&(t=this.__zoomLevel),this.__maxScrollLeft=Math.max(this.__contentWidth*t-this.__clientWidth,0),this.__maxScrollTop=Math.max(this.__contentHeight*t-this.__clientHeight,0)},t.prototype.__startDeceleration=function(t){if(this.options.paging){var e=Math.max(Math.min(this.__scrollLeft,this.__maxScrollLeft),0),i=Math.max(Math.min(this.__scrollTop,this.__maxScrollTop),0),o=this.__clientWidth,r=this.__clientHeight;this.__minDecelerationScrollLeft=Math.floor(e/o)*o,this.__minDecelerationScrollTop=Math.floor(i/r)*r,this.__maxDecelerationScrollLeft=Math.ceil(e/o)*o,this.__maxDecelerationScrollTop=Math.ceil(i/r)*r}else this.__minDecelerationScrollLeft=0,this.__minDecelerationScrollTop=0,this.__maxDecelerationScrollLeft=this.__maxScrollLeft,this.__maxDecelerationScrollTop=this.__maxScrollTop;var s=function(t,e,i){this.__stepThroughDeceleration(i)}.bind(this),a=this.options.snapping?4:.1,l=function(){var t=Math.abs(this.__decelerationVelocityX)>=a||Math.abs(this.__decelerationVelocityY)>=a;return t||(this.__didDecelerationComplete=!0),t}.bind(this),c=function(t,e,i){this.__isDecelerating=!1,this.__didDecelerationComplete&&this.options.scrollingComplete(),this.scrollTo(this.__scrollLeft,this.__scrollTop,this.options.snapping)}.bind(this);this.__isDecelerating=n().start(s,l,c)},t.prototype.__stepThroughDeceleration=function(t){var e=this.__scrollLeft+this.__decelerationVelocityX,i=this.__scrollTop+this.__decelerationVelocityY;if(!this.options.bouncing){var o=Math.max(Math.min(this.__maxDecelerationScrollLeft,e),this.__minDecelerationScrollLeft);o!==e&&(e=o,this.__decelerationVelocityX=0);var n=Math.max(Math.min(this.__maxDecelerationScrollTop,i),this.__minDecelerationScrollTop);n!==i&&(i=n,this.__decelerationVelocityY=0)}if(t?this.__publish(e,i,this.__zoomLevel):(this.__scrollLeft=e,this.__scrollTop=i),!this.options.paging){this.__decelerationVelocityX*=.95,this.__decelerationVelocityY*=.95}if(this.options.bouncing){var r=0,s=0,a=this.options.penetrationDeceleration,l=this.options.penetrationAcceleration;e<this.__minDecelerationScrollLeft?r=this.__minDecelerationScrollLeft-e:e>this.__maxDecelerationScrollLeft&&(r=this.__maxDecelerationScrollLeft-e),i<this.__minDecelerationScrollTop?s=this.__minDecelerationScrollTop-i:i>this.__maxDecelerationScrollTop&&(s=this.__maxDecelerationScrollTop-i),0!==r&&(r*this.__decelerationVelocityX<=0?this.__decelerationVelocityX+=r*a:this.__decelerationVelocityX=r*l),0!==s&&(s*this.__decelerationVelocityY<=0?this.__decelerationVelocityY+=s*a:this.__decelerationVelocityY=s*l)}},t}()},function(t,e){"use strict";var i,o,n;o=[e],i=function(t){"undefined"==typeof window||window;var e=Date.now||function(){return+new Date},i=60,o=1e3,n={},r=1;t.stop=function(t){var e=null!==n[t];return e&&(n[t]=null),e},t.isRunning=function(t){return null!==n[t]},t.start=function(t,s,a,l,c,h){var u=e(),d=u,f=0,p=0,y=r++;if(y%20==0){var v={};for(var g in n)v[g]=!0;n=v}var m=function(r){var v=!0!==r,g=e();if(!n[y]||s&&!s(y))return n[y]=null,void a(i-p/((g-u)/o),y,!1);if(v)for(var _=Math.round((g-d)/(o/i))-1,b=0;b<Math.min(_,4);b++)m(!0),p++;l&&(f=(g-u)/l)>1&&(f=1);var x=c?c(f):f;!1!==t(x,g,v)&&1!==f||!v?v&&(d=g,requestAnimationFrame(m,h)):(n[y]=null,a(i-p/((g-u)/o),y,1===f||void 0===l))};return n[y]=!0,requestAnimationFrame(m,h),y}},void 0===(n="function"==typeof i?i.apply(e,o):i)||(t.exports=n)},(t,e,i)=>{"use strict";i.r(e),i.d(e,{ScrollBarDirection:()=>n,default:()=>h});var o,n,r=i(22),s=i(7),a=(o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},o(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});function l(t,e,i){var o=e===n.Vertival,r=i.width,s=i.height,a=i.contentWidth,l=i.contentHeight;return{width:o?t:r*(r/a),height:o?s*(s/l):t,left:o?r-t:0,top:o?0:s-t}}function c(t,e){return!!(t===n.Vertival&&0===e.maxScrollTop||t===n.Horizontal&&0===e.maxScrollLeft)}!function(t){t[t.Vertival=0]="Vertival",t[t.Horizontal=1]="Horizontal"}(n||(n={}));const h=function(t){function e(e){var i=this,o=e.direction,n=e.dimensions,r=e.backgroundColor,s=void 0===r?"rgba(162, 162, 162, 1)":r,a=e.width,h=void 0===a?16:a,u=Object.assign({backgroundColor:s,position:"absolute",borderRadius:h/2,opacity:0},l(h,o,n));return(i=t.call(this,{style:u})||this).autoHide=!0,i.autoHideTime=2e3,i.autoHideDelayTime=1500,i.autoHideRemainingTime=0,i.innerWidth=16,i.isHide=!1,i.currLeft=0,i.currTop=0,i.update=function(t){!i.autoHide||i.autoHideRemainingTime<=0||i.isHide||(i.autoHideRemainingTime-=t,i.autoHideRemainingTime<=i.autoHideTime&&(i.autoHideRemainingTime=Math.max(0,i.autoHideRemainingTime),i.style.opacity=i.style.opacity*(i.autoHideRemainingTime/i.autoHideTime)))},i.direction=o,i.dimensions=n,i.innerWidth=h,c(o,n)&&i.hide(),i}return a(e,t),Object.defineProperty(e.prototype,"width",{get:function(){return this.innerWidth},set:function(t){t!==this.innerWidth&&(this.innerWidth=t),this.style.borderRadius=this.innerWidth/2,this.setDimensions(this.dimensions)},enumerable:!1,configurable:!0}),e.prototype.init=function(){var t=this;this.root&&(this.root.ticker.add(this.update,!0),this.root.on("before_reflow",(function(){var e=t.calculteScrollValue(t.currLeft,t.currTop),i=e.scrollLeft,o=e.scrollTop;t.direction===n.Vertival?t.style.top=o:t.style.left=i})))},e.prototype.hide=function(){this.isHide=!0,this.style.opacity=0},e.prototype.show=function(){this.isHide=!1,this.style.opacity=1},e.prototype.setDimensions=function(t){var e=l(this.width,this.direction,t);Object.assign(this.style,e),c(this.direction,t)?this.hide():this.isHide&&this.show(),this.dimensions=t;var i=this.calculteScrollValue(t.scrollLeft,t.scrollTop),o=i.scrollLeft,r=i.scrollTop;this.direction===n.Vertival?this.style.top=r:this.style.left=o,this.autoHideRemainingTime=this.autoHideTime+this.autoHideDelayTime},e.prototype.calculteScrollValue=function(t,e){var i=0,o=0;if(this.direction===n.Vertival){var r=1-this.dimensions.height/this.dimensions.contentHeight,a=this.dimensions.height*r,l=a*(h=e/this.dimensions.maxScrollTop);o=(0,s.clamp)(l,0,a)}else{r=1-this.dimensions.width/this.dimensions.contentWidth;var c=this.dimensions.width*r,h=t/this.dimensions.maxScrollLeft;i=(0,s.clamp)(c*h,0,c)}return{scrollLeft:i,scrollTop:o}},e.prototype.onScroll=function(t,e){if(!this.isHide){this.currLeft=t,this.currTop=e;var i=this.calculteScrollValue(t,e),o=i.scrollLeft,r=i.scrollTop;this.direction===n.Vertival?this.layoutBox.absoluteY=this.parent.layoutBox.originalAbsoluteY+r:this.layoutBox.absoluteX=this.parent.layoutBox.originalAbsoluteX+o,this.autoHide&&(this.autoHideRemainingTime=this.autoHideTime+this.autoHideDelayTime),this.style.opacity=1}},e.prototype.destroySelf=function(){this.root.ticker.remove(this.update,!0),this.isDestroyed=!0,this.root=null},e}(r.default)},(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>l});var o,n=i(2),r=i(6),s=(o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},o(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),a=new r.default("bitMapPool");const l=function(t){function e(e){var i=this,o=e.style,n=void 0===o?{}:o,r=e.idName,s=void 0===r?"":r,l=e.className,c=void 0===l?"":l,h=e.value,u=void 0===h?"":h,d=e.font,f=void 0===d?"":d,p=e.dataset;return(i=t.call(this,{idName:s,className:c,style:n,dataset:p})||this).type="BitMapText",i.ctx=null,i.valuesrc=u,i.font=a.get(f),i.font,i}return s(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return this.valuesrc},set:function(t){t!==this.valuesrc&&(this.valuesrc=t,this.emit("repaint"))},enumerable:!1,configurable:!0}),e.prototype.repaint=function(){this.render()},e.prototype.destroySelf=function(){this.root=null},e.prototype.render=function(){var t=this;this.font&&(this.font.ready?this.renderText(this.ctx):this.font.event.on("text__load__done",(function(){t.isDestroyed||t.renderText(t.ctx)})))},e.prototype.getTextBounds=function(){for(var t=this.style.letterSpacing,e=void 0===t?0:t,i=0,o=0,n=this.value.length;o<n;o++){var r=this.value[o],s=this.font.chars[r];s&&(i+=s.w,o<n-1&&(i+=e))}return{width:i,height:this.font.lineHeight}},e.prototype.renderText=function(t){var e=this.getTextBounds(),i=this.font.lineHeight;t.save();var o=this.baseRender(),n=o.needStroke,r=o.originX,s=o.originY,a=o.drawX,l=o.drawY,c=this.style,h=c.width,u=void 0===h?0:h,d=c.height,f=void 0===d?0:d,p=c.textAlign,y=c.verticalAlign,v=c.letterSpacing,g=void 0===v?0:v,m=c.lineHeight||i,_=m/i,b=_*e.width;m<f&&("middle"===y?l+=(f-m)/2:"bottom"===y&&(l=l+f-m)),u>b&&("center"===p?a+=(u-b)/2:"right"===p&&(l+=u-b));for(var x=null,w=0;w<this.value.length;w++){var S=this.value[w],T=this.font.chars[S];x&&T.kerning[x]&&(a+=T.kerning[x]),T&&(t.drawImage(this.font.texture,T.x,T.y,T.w,T.h,a+T.offX*_-r,l+T.offY*_-s,T.w*_,T.h*_),a+=T.xadvance*_+g,x=S)}n&&t.stroke(),t.translate(-r,-s),t.restore()},e}(n.default)},(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>a});var o,n=i(2),r=i(1),s=(o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},o(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});const a=function(t){function e(e){var i=this,o=e.style,n=void 0===o?{}:o,s=e.idName,a=void 0===s?"":s,l=e.className,c=void 0===l?"":l,h=e.dataset,u=e.width,d=void 0===u?100:u,f=e.height,p=void 0===f?100:f,y=e.autoCreateCanvas,v=void 0!==y&&y;return(i=t.call(this,{idName:a,className:c,dataset:h,style:n})||this).canvasInstance=null,v&&(i.canvasInstance=r.default.createCanvas(),i.canvasInstance.width=Number(d),i.canvasInstance.height=Number(p)),i}return s(e,t),Object.defineProperty(e.prototype,"canvas",{get:function(){return this.canvasInstance},set:function(t){this.canvasInstance=t},enumerable:!1,configurable:!0}),e.prototype.update=function(){this.root.emit("repaint")},e.prototype.repaint=function(){this.render()},e.prototype.destroySelf=function(){this.isDestroyed=!0,this.root=null,this.canvasInstance=null},e.prototype.render=function(){if(this.canvasInstance){var t=this.ctx;t.save();var e=this.baseRender(),i=e.needStroke,o=e.originX,n=e.originY,r=e.drawX,s=e.drawY,a=e.width,l=e.height;t.drawImage(this.canvasInstance,r-o,s-n,a,l),i&&t.stroke(),this.renderForLayout.rotate&&t.translate(-o,-n),t.restore()}},e}(n.default)},(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>l});var o,n=i(24),r=i(7),s=(o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},o(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),a=function(){return a=Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++)for(var n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},a.apply(this,arguments)};const l=function(t){function e(e){var i=e.style,o=void 0===i?{}:i,n=e.idName,s=void 0===n?"":n,l=e.className,c=void 0===l?"":l,h=e.value,u=void 0===h?"":h,d=e.dataset,f=t.call(this,{idName:s,className:c,style:a(a({width:300,height:60,lineHeight:60,fontSize:30,borderRadius:10,backgroundColor:"#34a123",color:"#ffffff",textAlign:"center"},o),{":active":a({transform:"scale(1.05, 1.05)"},o[":active"])}),value:u,dataset:d})||this;return f.scaleDuration=100,f.scaleDone=!0,f.timeClick=0,f.fromScale=1,f.toScale=1,f.update=function(t){if(!f.scaleDone){f.timeClick+=t;var e=1;(e=f.timeClick/f.scaleDuration)>1&&(e=1);var i=(0,r.lerp)(f.fromScale,f.toScale,e),o="scale(".concat(i,", ").concat(i,")");f.style.transform=o,1===e&&(f.scaleDone=!0)}},f}return s(e,t),e.prototype.afterCreate=function(){this.root.ticker.add(this.update)},e.prototype.destroySelf=function(){this.root.ticker.remove(this.update),this.isDestroyed=!0,this.root=null},e}(n.default)}],e={};function i(o){var n=e[o];if(void 0!==n)return n.exports;var r=e[o]={exports:{}};return t[o].call(r.exports,r,r.exports,i),r.exports}i.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return i.d(e,{a:e}),e},i.d=(t,e)=>{for(var o in e)i.o(e,o)&&!i.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})},i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),i.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var o={};(()=>{"use strict";i.r(o),i.d(o,{EE:()=>x,Layout:()=>C,default:()=>L,env:()=>e.default});var t,e=i(1),n=i(2),r=i(6),s=i(8),a=i.n(s),l=i(10),c=i.n(l),h=i(7),u=i(11),d=i(17),f=i(18),p=i(19),y=i(20),v=i(4),g=i(5),m=i(21),_=(t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)},function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}),b=function(t,e,i){if(i||2===arguments.length)for(var o,n=0,r=e.length;n<r;n++)!o&&n in e||(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))},x=new(a()),w=new r.default("imgPool"),S=new r.default("bitMapPool"),T=new f.default,C=function(t){function i(i){var o=i.style,r=t.call(this,{style:o,id:0})||this;return r.version="1.0.11",r.env=e.default,r.renderContext=null,r.renderport={width:0,height:0},r.viewport={width:0,height:0,x:0,y:0},r.viewportScale=1,r.hasViewPortSet=!1,r.realLayoutBox={realX:0,realY:0},r.bitMapFonts=[],r.eleCount=0,r.state=h.STATE.UNINIT,r.isNeedRepaint=!1,r.ticker=new p.default,r.tickerFunc=function(){r.isDirty?(r.emit("before_reflow",""),r.reflow()):r.isNeedRepaint&&r.repaint()},r.activeElements=[],r.eventHandler=function(t){return function(e){var i;if((i=(0,h.isGameTouchEvent)(e)?e.touches&&e.touches[0]||e.changedTouches&&e.changedTouches[0]:e)&&i.pageX&&i.pageY){i.timeStamp||(i.timeStamp=e.timeStamp);var o=[];i&&r.getChildByPos(r,i.pageX,i.pageY,o),o.length||o.push(r);var n=o[o.length-1];n&&n.emit(t,e),"touchstart"!==t&&"touchend"!==t||(r.eventHandlerData.touchMsg[t]=i),"touchend"===t&&(0,h.isClick)(r.eventHandlerData.touchMsg)&&n&&n.emit("click",e)}}},r.Element=n.default,r.View=m.View,r.Text=m.Text,r.Image=m.Image,r.ScrollView=m.ScrollView,r.BitMapText=m.BitMapText,r.Canvas=m.Canvas,r.Button=m.Button,r.registerComponent=y.registerComponent,r.eventHandlerData={hasEventBind:!1,touchMsg:{},handlers:{touchStart:r.eventHandler("touchstart").bind(r),touchMove:r.eventHandler("touchmove").bind(r),touchEnd:r.eventHandler("touchend").bind(r),touchCancel:r.eventHandler("touchcancel").bind(r)}},r.on("repaint",(function(){r.isNeedRepaint=!0})),r}return _(i,t),Object.defineProperty(i.prototype,"debugInfo",{get:function(){var t=T.log();return t+="elementCount: ".concat(this.eleCount,"\n")},enumerable:!1,configurable:!0}),i.prototype.updateViewPort=function(t){this.viewport.width=t.width||0,this.viewport.height=t.height||0,this.viewport.x=t.x||0,this.viewport.y=t.y||0,this.realLayoutBox={realX:this.viewport.x,realY:this.viewport.y},this.hasViewPortSet=!0},i.prototype.init=function(t,e,i){T.start("init");var o={attributeNamePrefix:"",attrNodeName:"attr",textNodeName:"#text",ignoreAttributes:!1,ignoreNameSpace:!0,allowBooleanAttributes:!0,parseNodeValue:!1,parseAttributeValue:!1,trimValues:!0,parseTrueNumberOnly:!1,alwaysCreateTextNode:!0};i&&"function"==typeof i&&(o.attrValueProcessor=i),T.start("init_xmlParse");var n=u.parse(t,o,!0);T.end("init_xmlParse");var r=n.children[0];T.start("init_xml2Layout");var s=y.create.call(this,r,e);T.end("init_xml2Layout"),this.add(s),this.state=h.STATE.INITED,this.ticker.add(this.tickerFunc,!0),this.ticker.start(),T.end("init")},i.prototype.reflow=function(t){void 0===t&&(t=!1),t||T.reset(),T.start("layout_reflow"),T.start("computeLayout",!0),c()(this.children[0]),T.end("computeLayout");var e=this.children[0];void 0===e.style.width||void 0===e.style.height||(this.renderport.width=e.style.width,this.renderport.height=e.style.height),T.start("layoutChildren",!0),(0,y.layoutChildren)(this),T.end("layoutChildren"),this.viewportScale=this.viewport.width/this.renderport.width,(0,h.clearCanvas)(this.renderContext),T.start("renderChildren",!0),(0,y.renderChildren)(this.children,this.renderContext,!1),T.end("renderChildren"),T.start("repaint",!0),this.repaint(),T.end("repaint"),this.isDirty=!1,T.end("layout_reflow")},i.prototype.layout=function(t){this.renderContext=t,this.hasViewPortSet,T.start("layout"),this.reflow(!0),T.start("layout_other"),this.bindEvents(),T.start("layout_observeStyleAndEvent",!0),(0,y.iterateTree)(this.children[0],(function(t){return t.observeStyleAndEvent()})),T.end("layout_observeStyleAndEvent"),this.state=h.STATE.RENDERED,T.end("layout"),T.end("layout_other")},i.prototype.repaint=function(){(0,h.clearCanvas)(this.renderContext),this.isNeedRepaint=!1,(0,y.repaintChildren)(this.children)},i.prototype.getElementViewportRect=function(t){var e=this.realLayoutBox,i=this.viewportScale,o=t.layoutBox,n=o.absoluteX,r=o.absoluteY,s=o.width,a=o.height,l=n*i+e.realX,c=r*i+e.realY,h=s*i,u=a*i;return new v.default(l,c,h,u)},i.prototype.getChildByPos=function(t,e,i,o){var n=this;t.children.forEach((function(t){var r=t.layoutBox,s=r.absoluteX,a=r.absoluteY,l=r.width,c=r.height,h=s*n.viewportScale+n.realLayoutBox.realX,u=a*n.viewportScale+n.realLayoutBox.realY,d=l*n.viewportScale,f=c*n.viewportScale;h<=e&&e<=h+d&&u<=i&&i<=u+f&&(o.push(t),t.children.length&&n.getChildByPos(t,e,i,o))}))},i.prototype.bindEvents=function(){var t=this;this.eventHandlerData.hasEventBind||(this.eventHandlerData.hasEventBind=!0,e.default.onTouchStart(this.eventHandlerData.handlers.touchStart),e.default.onTouchMove(this.eventHandlerData.handlers.touchMove),e.default.onTouchEnd(this.eventHandlerData.handlers.touchEnd),e.default.onTouchCancel(this.eventHandlerData.handlers.touchCancel),this.on("touchend",(function(){t.activeElements.forEach((function(t){t.deactiveHandler()})),t.activeElements=[]})),this.on("touchcancel",(function(){t.activeElements.forEach((function(t){t.deactiveHandler()})),t.activeElements=[]})))},i.prototype.unBindEvents=function(){e.default.offTouchStart(this.eventHandlerData.handlers.touchStart),e.default.offTouchMove(this.eventHandlerData.handlers.touchMove),e.default.offTouchEnd(this.eventHandlerData.handlers.touchEnd),e.default.offTouchCancel(this.eventHandlerData.handlers.touchCancel),this.eventHandlerData.hasEventBind=!1},i.prototype.emit=function(t,e){x.emit(t,e)},i.prototype.on=function(t,e){x.on(t,e)},i.prototype.once=function(t,e){x.once(t,e)},i.prototype.off=function(t,e){x.off(t,e)},i.prototype.destroyAll=function(t){var e=this;t.children.forEach((function(t){t.destroy(),e.destroyAll(t),t.destroySelf&&t.destroySelf()}))},i.prototype.clear=function(t){void 0===t&&(t={});var e=t.removeTicker,i=void 0===e||e;T.reset(),this.destroyAll(this),this.children=[],this.state=h.STATE.CLEAR,this.isDirty=!1,(0,h.clearCanvas)(this.renderContext),this.eleCount=0,this.unBindEvents(),i?(this.ticker.remove(),this.ticker.stop()):this.ticker.removeInner(),this.activeElements=[]},i.prototype.clearPool=function(){w.clear()},i.prototype.clearAll=function(){this.clear(),this.clearPool()},i.prototype.loadImgs=function(t){return void 0===t&&(t=[]),Promise.all(t.map((function(t){return g.default.loadImagePromise(t)})))},i.prototype.registBitMapFont=function(t,e,i){if(!S.get(t)){var o=new d.default(t,e,i);this.bitMapFonts.push(o),S.set(t,o)}},i.prototype.cloneNode=function(t,e){return void 0===e&&(e=!0),(0,y.clone)(this,t,e)},i.prototype.use=function(t){for(var e=[],o=1;o<arguments.length;o++)e[o-1]=arguments[o];i.installedPlugins.includes(t)||(t.install.apply(t,b([this],e,!1)),i.installedPlugins.push(t))},i.prototype.unUse=function(t){for(var e=[],o=1;o<arguments.length;o++)e[o-1]=arguments[o];var n=i.installedPlugins.indexOf(t);-1!==n&&(t.uninstall&&t.uninstall.apply(t,b([this],e,!1)),i.installedPlugins.splice(n,1))},i.installedPlugins=[],i}(n.default),L=new C({style:{width:0,height:0},name:"layout"})})(),module.exports=o})();